function KF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yv={exports:{}},kf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function QF(){if(CN)return kf;CN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:o}}return kf.Fragment=t,kf.jsx=n,kf.jsxs=n,kf}var wN;function XF(){return wN||(wN=1,yv.exports=QF()),yv.exports}var k=XF(),Ev={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN;function ZF(){if(SN)return st;SN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function g(K){return K===null||typeof K!="object"?null:(K=m&&K[m]||K["@@iterator"],typeof K=="function"?K:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function S(K,ie,j){this.props=K,this.context=ie,this.refs=C,this.updater=j||y}S.prototype.isReactComponent={},S.prototype.setState=function(K,ie){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ie,"setState")},S.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function N(){}N.prototype=S.prototype;function _(K,ie,j){this.props=K,this.context=ie,this.refs=C,this.updater=j||y}var O=_.prototype=new N;O.constructor=_,E(O,S.prototype),O.isPureReactComponent=!0;var M=Array.isArray;function R(){}var L={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function z(K,ie,j){var Se=j.ref;return{$$typeof:e,type:K,key:ie,ref:Se!==void 0?Se:null,props:j}}function B(K,ie){return z(K.type,ie,K.props)}function U(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function q(K){var ie={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(j){return ie[j]})}var re=/\/+/g;function J(K,ie){return typeof K=="object"&&K!==null&&K.key!=null?q(""+K.key):ie.toString(36)}function ae(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(R,R):(K.status="pending",K.then(function(ie){K.status==="pending"&&(K.status="fulfilled",K.value=ie)},function(ie){K.status==="pending"&&(K.status="rejected",K.reason=ie)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function W(K,ie,j,Se,Re){var Le=typeof K;(Le==="undefined"||Le==="boolean")&&(K=null);var $e=!1;if(K===null)$e=!0;else switch(Le){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(K.$$typeof){case e:case t:$e=!0;break;case f:return $e=K._init,W($e(K._payload),ie,j,Se,Re)}}if($e)return Re=Re(K),$e=Se===""?"."+J(K,0):Se,M(Re)?(j="",$e!=null&&(j=$e.replace(re,"$&/")+"/"),W(Re,ie,j,"",function(Bt){return Bt})):Re!=null&&(U(Re)&&(Re=B(Re,j+(Re.key==null||K&&K.key===Re.key?"":(""+Re.key).replace(re,"$&/")+"/")+$e)),ie.push(Re)),1;$e=0;var ot=Se===""?".":Se+":";if(M(K))for(var Ye=0;Ye<K.length;Ye++)Se=K[Ye],Le=ot+J(Se,Ye),$e+=W(Se,ie,j,Le,Re);else if(Ye=g(K),typeof Ye=="function")for(K=Ye.call(K),Ye=0;!(Se=K.next()).done;)Se=Se.value,Le=ot+J(Se,Ye++),$e+=W(Se,ie,j,Le,Re);else if(Le==="object"){if(typeof K.then=="function")return W(ae(K),ie,j,Se,Re);throw ie=String(K),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return $e}function Z(K,ie,j){if(K==null)return K;var Se=[],Re=0;return W(K,Se,"","",function(Le){return ie.call(j,Le,Re++)}),Se}function te(K){if(K._status===-1){var ie=K._result;ie=ie(),ie.then(function(j){(K._status===0||K._status===-1)&&(K._status=1,K._result=j)},function(j){(K._status===0||K._status===-1)&&(K._status=2,K._result=j)}),K._status===-1&&(K._status=0,K._result=ie)}if(K._status===1)return K._result.default;throw K._result}var ue=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},$={map:Z,forEach:function(K,ie,j){Z(K,function(){ie.apply(this,arguments)},j)},count:function(K){var ie=0;return Z(K,function(){ie++}),ie},toArray:function(K){return Z(K,function(ie){return ie})||[]},only:function(K){if(!U(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return st.Activity=h,st.Children=$,st.Component=S,st.Fragment=n,st.Profiler=i,st.PureComponent=_,st.StrictMode=r,st.Suspense=c,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,st.__COMPILER_RUNTIME={__proto__:null,c:function(K){return L.H.useMemoCache(K)}},st.cache=function(K){return function(){return K.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(K,ie,j){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Se=E({},K.props),Re=K.key;if(ie!=null)for(Le in ie.key!==void 0&&(Re=""+ie.key),ie)!F.call(ie,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ie.ref===void 0||(Se[Le]=ie[Le]);var Le=arguments.length-2;if(Le===1)Se.children=j;else if(1<Le){for(var $e=Array(Le),ot=0;ot<Le;ot++)$e[ot]=arguments[ot+2];Se.children=$e}return z(K.type,Re,Se)},st.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},st.createElement=function(K,ie,j){var Se,Re={},Le=null;if(ie!=null)for(Se in ie.key!==void 0&&(Le=""+ie.key),ie)F.call(ie,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Re[Se]=ie[Se]);var $e=arguments.length-2;if($e===1)Re.children=j;else if(1<$e){for(var ot=Array($e),Ye=0;Ye<$e;Ye++)ot[Ye]=arguments[Ye+2];Re.children=ot}if(K&&K.defaultProps)for(Se in $e=K.defaultProps,$e)Re[Se]===void 0&&(Re[Se]=$e[Se]);return z(K,Le,Re)},st.createRef=function(){return{current:null}},st.forwardRef=function(K){return{$$typeof:a,render:K}},st.isValidElement=U,st.lazy=function(K){return{$$typeof:f,_payload:{_status:-1,_result:K},_init:te}},st.memo=function(K,ie){return{$$typeof:u,type:K,compare:ie===void 0?null:ie}},st.startTransition=function(K){var ie=L.T,j={};L.T=j;try{var Se=K(),Re=L.S;Re!==null&&Re(j,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(R,ue)}catch(Le){ue(Le)}finally{ie!==null&&j.types!==null&&(ie.types=j.types),L.T=ie}},st.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},st.use=function(K){return L.H.use(K)},st.useActionState=function(K,ie,j){return L.H.useActionState(K,ie,j)},st.useCallback=function(K,ie){return L.H.useCallback(K,ie)},st.useContext=function(K){return L.H.useContext(K)},st.useDebugValue=function(){},st.useDeferredValue=function(K,ie){return L.H.useDeferredValue(K,ie)},st.useEffect=function(K,ie){return L.H.useEffect(K,ie)},st.useEffectEvent=function(K){return L.H.useEffectEvent(K)},st.useId=function(){return L.H.useId()},st.useImperativeHandle=function(K,ie,j){return L.H.useImperativeHandle(K,ie,j)},st.useInsertionEffect=function(K,ie){return L.H.useInsertionEffect(K,ie)},st.useLayoutEffect=function(K,ie){return L.H.useLayoutEffect(K,ie)},st.useMemo=function(K,ie){return L.H.useMemo(K,ie)},st.useOptimistic=function(K,ie){return L.H.useOptimistic(K,ie)},st.useReducer=function(K,ie,j){return L.H.useReducer(K,ie,j)},st.useRef=function(K){return L.H.useRef(K)},st.useState=function(K){return L.H.useState(K)},st.useSyncExternalStore=function(K,ie,j){return L.H.useSyncExternalStore(K,ie,j)},st.useTransition=function(){return L.H.useTransition()},st.version="19.2.0",st}var TN;function nS(){return TN||(TN=1,Ev.exports=ZF()),Ev.exports}var A=nS();const Tn=ld(A),Q6=KF({__proto__:null,default:Tn},[A]);var vv={exports:{}},_f={},Cv={exports:{}},wv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN;function JF(){return xN||(xN=1,(function(e){function t(W,Z){var te=W.length;W.push(Z);e:for(;0<te;){var ue=te-1>>>1,$=W[ue];if(0<i($,Z))W[ue]=Z,W[te]=$,te=ue;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],te=W.pop();if(te!==Z){W[0]=te;e:for(var ue=0,$=W.length,K=$>>>1;ue<K;){var ie=2*(ue+1)-1,j=W[ie],Se=ie+1,Re=W[Se];if(0>i(j,te))Se<$&&0>i(Re,j)?(W[ue]=Re,W[Se]=te,ue=Se):(W[ue]=j,W[ie]=te,ue=ie);else if(Se<$&&0>i(Re,te))W[ue]=Re,W[Se]=te,ue=Se;else break e}}return Z}function i(W,Z){var te=W.sortIndex-Z.sortIndex;return te!==0?te:W.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var c=[],u=[],f=1,h=null,m=3,g=!1,y=!1,E=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function O(W){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=W)r(u),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=n(u)}}function M(W){if(E=!1,O(W),!y)if(n(c)!==null)y=!0,R||(R=!0,q());else{var Z=n(u);Z!==null&&ae(M,Z.startTime-W)}}var R=!1,L=-1,F=5,z=-1;function B(){return C?!0:!(e.unstable_now()-z<F)}function U(){if(C=!1,R){var W=e.unstable_now();z=W;var Z=!0;try{e:{y=!1,E&&(E=!1,N(L),L=-1),g=!0;var te=m;try{t:{for(O(W),h=n(c);h!==null&&!(h.expirationTime>W&&B());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,m=h.priorityLevel;var $=ue(h.expirationTime<=W);if(W=e.unstable_now(),typeof $=="function"){h.callback=$,O(W),Z=!0;break t}h===n(c)&&r(c),O(W)}else r(c);h=n(c)}if(h!==null)Z=!0;else{var K=n(u);K!==null&&ae(M,K.startTime-W),Z=!1}}break e}finally{h=null,m=te,g=!1}Z=void 0}}finally{Z?q():R=!1}}}var q;if(typeof _=="function")q=function(){_(U)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,J=re.port2;re.port1.onmessage=U,q=function(){J.postMessage(null)}}else q=function(){S(U,0)};function ae(W,Z){L=S(function(){W(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var te=m;m=Z;try{return W()}finally{m=te}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=m;m=W;try{return Z()}finally{m=te}},e.unstable_scheduleCallback=function(W,Z,te){var ue=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,W){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=te+$,W={id:f++,callback:Z,priorityLevel:W,startTime:te,expirationTime:$,sortIndex:-1},te>ue?(W.sortIndex=te,t(u,W),n(c)===null&&W===n(u)&&(E?(N(L),L=-1):E=!0,ae(M,te-ue))):(W.sortIndex=$,t(c,W),y||g||(y=!0,R||(R=!0,q()))),W},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(W){var Z=m;return function(){var te=m;m=Z;try{return W.apply(this,arguments)}finally{m=te}}}})(wv)),wv}var kN;function ej(){return kN||(kN=1,Cv.exports=JF()),Cv.exports}var Sv={exports:{}},ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function tj(){if(_N)return ur;_N=1;var e=nS();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ur.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(c,u,null,f)},ur.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},ur.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ur.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ur.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ur.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=a(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ur.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ur.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=a(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ur.requestFormReset=function(c){r.d.r(c)},ur.unstable_batchedUpdates=function(c,u){return c(u)},ur.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},ur.useFormStatus=function(){return s.H.useHostTransitionStatus()},ur.version="19.2.0",ur}var AN;function X6(){if(AN)return Sv.exports;AN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sv.exports=tj(),Sv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function nj(){if(NN)return _f;NN=1;var e=ej(),t=nS(),n=X6();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function o(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function a(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(o(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=o(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var v=p.return;if(v===null)break;var w=v.alternate;if(w===null){if(b=v.return,b!==null){p=b;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===p)return c(v),l;if(w===b)return c(v),d;w=w.sibling}throw Error(r(188))}if(p.return!==b.return)p=v,b=w;else{for(var D=!1,H=v.child;H;){if(H===p){D=!0,p=v,b=w;break}if(H===b){D=!0,b=v,p=w;break}H=H.sibling}if(!D){for(H=w.child;H;){if(H===p){D=!0,p=w,b=v;break}if(H===b){D=!0,b=w,p=v;break}H=H.sibling}if(!D)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var re=Symbol.for("react.client.reference");function J(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===re?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case E:return"Fragment";case S:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case _:return l.displayName||"Context";case N:return(l._context.displayName||"Context")+".Consumer";case O:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return d=l.displayName||null,d!==null?d:J(l.type)||"Memo";case F:d=l._payload,l=l._init;try{return J(l(d))}catch{}}return null}var ae=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ue=[],$=-1;function K(l){return{current:l}}function ie(l){0>$||(l.current=ue[$],ue[$]=null,$--)}function j(l,d){$++,ue[$]=l.current,l.current=d}var Se=K(null),Re=K(null),Le=K(null),$e=K(null);function ot(l,d){switch(j(Le,d),j(Re,l),j(Se,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?V3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=V3(d),l=q3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ie(Se),j(Se,l)}function Ye(){ie(Se),ie(Re),ie(Le)}function Bt(l){l.memoizedState!==null&&j($e,l);var d=Se.current,p=q3(d,l.type);d!==p&&(j(Re,l),j(Se,p))}function mn(l){Re.current===l&&(ie(Se),ie(Re)),$e.current===l&&(ie($e),wf._currentValue=te)}var Jt,rt;function Tt(l){if(Jt===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);Jt=d&&d[1]||"",rt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+l+rt}var ce=!1;function ge(l,d){if(!l||ce)return"";ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(be){var me=be}Reflect.construct(l,[],xe)}else{try{xe.call()}catch(be){me=be}l.call(xe.prototype)}}else{try{throw Error()}catch(be){me=be}(xe=l())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(be){if(be&&me&&typeof be.stack=="string")return[be.stack,me.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=b.DetermineComponentFrameRoot(),D=w[0],H=w[1];if(D&&H){var X=D.split(`
`),pe=H.split(`
`);for(v=b=0;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;for(;v<pe.length&&!pe[v].includes("DetermineComponentFrameRoot");)v++;if(b===X.length||v===pe.length)for(b=X.length-1,v=pe.length-1;1<=b&&0<=v&&X[b]!==pe[v];)v--;for(;1<=b&&0<=v;b--,v--)if(X[b]!==pe[v]){if(b!==1||v!==1)do if(b--,v--,0>v||X[b]!==pe[v]){var we=`
`+X[b].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=b&&0<=v);break}}}finally{ce=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Tt(p):""}function Ae(l,d){switch(l.tag){case 26:case 27:case 5:return Tt(l.type);case 16:return Tt("Lazy");case 13:return l.child!==d&&d!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return ge(l.type,!1);case 11:return ge(l.type.render,!1);case 1:return ge(l.type,!0);case 31:return Tt("Activity");default:return""}}function He(l){try{var d="",p=null;do d+=Ae(l,p),p=l,l=l.return;while(l);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var Y=Object.prototype.hasOwnProperty,T=e.unstable_scheduleCallback,I=e.unstable_cancelCallback,P=e.unstable_shouldYield,ee=e.unstable_requestPaint,oe=e.unstable_now,Ee=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Be=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,Pe=e.unstable_IdlePriority,Mt=e.log,on=e.unstable_setDisableYieldValue,yn=null,sn=null;function xn(l){if(typeof Mt=="function"&&on(l),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(yn,l)}catch{}}var At=Math.clz32?Math.clz32:IH,ra=Math.log,eo=Math.LN2;function IH(l){return l>>>=0,l===0?32:31-(ra(l)/eo|0)|0}var Rp=256,Op=262144,Dp=4194304;function El(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Lp(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var v=0,w=l.suspendedLanes,D=l.pingedLanes;l=l.warmLanes;var H=b&134217727;return H!==0?(b=H&~w,b!==0?v=El(b):(D&=H,D!==0?v=El(D):p||(p=H&~l,p!==0&&(v=El(p))))):(H=b&~w,H!==0?v=El(H):D!==0?v=El(D):p||(p=b&~l,p!==0&&(v=El(p)))),v===0?0:d!==0&&d!==v&&(d&w)===0&&(w=v&-v,p=d&-d,w>=p||w===32&&(p&4194048)!==0)?d:v}function Ld(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function BH(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xk(){var l=Dp;return Dp<<=1,(Dp&62914560)===0&&(Dp=4194304),l}function sy(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function Id(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function PH(l,d,p,b,v,w){var D=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var H=l.entanglements,X=l.expirationTimes,pe=l.hiddenUpdates;for(p=D&~p;0<p;){var we=31-At(p),xe=1<<we;H[we]=0,X[we]=-1;var me=pe[we];if(me!==null)for(pe[we]=null,we=0;we<me.length;we++){var be=me[we];be!==null&&(be.lane&=-536870913)}p&=~xe}b!==0&&kk(l,b,0),w!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=w&~(D&~d))}function kk(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-At(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&261930}function _k(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-At(p),v=1<<b;v&d|l[b]&d&&(l[b]|=d),p&=~v}}function Ak(l,d){var p=d&-d;return p=(p&42)!==0?1:ay(p),(p&(l.suspendedLanes|d))!==0?0:p}function ay(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ly(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Nk(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:pN(l.type))}function Mk(l,d){var p=Z.p;try{return Z.p=l,d()}finally{Z.p=p}}var ia=Math.random().toString(36).slice(2),Jn="__reactFiber$"+ia,Rr="__reactProps$"+ia,Oc="__reactContainer$"+ia,cy="__reactEvents$"+ia,HH="__reactListeners$"+ia,UH="__reactHandles$"+ia,Rk="__reactResources$"+ia,Bd="__reactMarker$"+ia;function uy(l){delete l[Jn],delete l[Rr],delete l[cy],delete l[HH],delete l[UH]}function Dc(l){var d=l[Jn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Oc]||p[Jn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=Z3(l);l!==null;){if(p=l[Jn])return p;l=Z3(l)}return d}l=p,p=l.parentNode}return null}function Lc(l){if(l=l[Jn]||l[Oc]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Pd(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Ic(l){var d=l[Rk];return d||(d=l[Rk]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function qn(l){l[Bd]=!0}var Ok=new Set,Dk={};function vl(l,d){Bc(l,d),Bc(l+"Capture",d)}function Bc(l,d){for(Dk[l]=d,l=0;l<d.length;l++)Ok.add(d[l])}var FH=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lk={},Ik={};function jH(l){return Y.call(Ik,l)?!0:Y.call(Lk,l)?!1:FH.test(l)?Ik[l]=!0:(Lk[l]=!0,!1)}function Ip(l,d,p){if(jH(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Bp(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function ds(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}function ki(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Bk(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function zH(l,d,p){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var v=b.get,w=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return v.call(this)},set:function(D){p=""+D,w.call(this,D)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function dy(l){if(!l._valueTracker){var d=Bk(l)?"checked":"value";l._valueTracker=zH(l,d,""+l[d])}}function Pk(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Bk(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function Pp(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var $H=/[\n"\\]/g;function _i(l){return l.replace($H,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function fy(l,d,p,b,v,w,D,H){l.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.type=D:l.removeAttribute("type"),d!=null?D==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ki(d)):l.value!==""+ki(d)&&(l.value=""+ki(d)):D!=="submit"&&D!=="reset"||l.removeAttribute("value"),d!=null?hy(l,D,ki(d)):p!=null?hy(l,D,ki(p)):b!=null&&l.removeAttribute("value"),v==null&&w!=null&&(l.defaultChecked=!!w),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?l.name=""+ki(H):l.removeAttribute("name")}function Hk(l,d,p,b,v,w,D,H){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(l.type=w),d!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||d!=null)){dy(l);return}p=p!=null?""+ki(p):"",d=d!=null?""+ki(d):p,H||d===l.value||(l.value=d),l.defaultValue=d}b=b??v,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=H?l.checked:!!b,l.defaultChecked=!!b,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(l.name=D),dy(l)}function hy(l,d,p){d==="number"&&Pp(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Pc(l,d,p,b){if(l=l.options,d){d={};for(var v=0;v<p.length;v++)d["$"+p[v]]=!0;for(p=0;p<l.length;p++)v=d.hasOwnProperty("$"+l[p].value),l[p].selected!==v&&(l[p].selected=v),v&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ki(p),d=null,v=0;v<l.length;v++){if(l[v].value===p){l[v].selected=!0,b&&(l[v].defaultSelected=!0);return}d!==null||l[v].disabled||(d=l[v])}d!==null&&(d.selected=!0)}}function Uk(l,d,p){if(d!=null&&(d=""+ki(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ki(p):""}function Fk(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(ae(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ki(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b),dy(l)}function Hc(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var VH=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jk(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||VH.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function zk(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var v in d)b=d[v],d.hasOwnProperty(v)&&p[v]!==b&&jk(l,v,b)}else for(var w in d)d.hasOwnProperty(w)&&jk(l,w,d[w])}function py(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qH=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YH=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hp(l){return YH.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function fs(){}var my=null;function gy(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Uc=null,Fc=null;function $k(l){var d=Lc(l);if(d&&(l=d.stateNode)){var p=l[Rr]||null;e:switch(l=d.stateNode,d.type){case"input":if(fy(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+_i(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var v=b[Rr]||null;if(!v)throw Error(r(90));fy(b,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&Pk(b)}break e;case"textarea":Uk(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Pc(l,!!p.multiple,d,!1)}}}var by=!1;function Vk(l,d,p){if(by)return l(d,p);by=!0;try{var b=l(d);return b}finally{if(by=!1,(Uc!==null||Fc!==null)&&(xm(),Uc&&(d=Uc,l=Fc,Fc=Uc=null,$k(d),l)))for(d=0;d<l.length;d++)$k(l[d])}}function Hd(l,d){var p=l.stateNode;if(p===null)return null;var b=p[Rr]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yy=!1;if(hs)try{var Ud={};Object.defineProperty(Ud,"passive",{get:function(){yy=!0}}),window.addEventListener("test",Ud,Ud),window.removeEventListener("test",Ud,Ud)}catch{yy=!1}var oa=null,Ey=null,Up=null;function qk(){if(Up)return Up;var l,d=Ey,p=d.length,b,v="value"in oa?oa.value:oa.textContent,w=v.length;for(l=0;l<p&&d[l]===v[l];l++);var D=p-l;for(b=1;b<=D&&d[p-b]===v[w-b];b++);return Up=v.slice(l,1<b?1-b:void 0)}function Fp(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function jp(){return!0}function Yk(){return!1}function Or(l){function d(p,b,v,w,D){this._reactName=p,this._targetInst=v,this.type=b,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(p=l[H],this[H]=p?p(w):w[H]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?jp:Yk,this.isPropagationStopped=Yk,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),d}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zp=Or(Cl),Fd=h({},Cl,{view:0,detail:0}),GH=Or(Fd),vy,Cy,jd,$p=h({},Fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sy,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==jd&&(jd&&l.type==="mousemove"?(vy=l.screenX-jd.screenX,Cy=l.screenY-jd.screenY):Cy=vy=0,jd=l),vy)},movementY:function(l){return"movementY"in l?l.movementY:Cy}}),Gk=Or($p),WH=h({},$p,{dataTransfer:0}),KH=Or(WH),QH=h({},Fd,{relatedTarget:0}),wy=Or(QH),XH=h({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),ZH=Or(XH),JH=h({},Cl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),eU=Or(JH),tU=h({},Cl,{data:0}),Wk=Or(tU),nU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oU(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=iU[l])?!!d[l]:!1}function Sy(){return oU}var sU=h({},Fd,{key:function(l){if(l.key){var d=nU[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Fp(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?rU[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sy,charCode:function(l){return l.type==="keypress"?Fp(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Fp(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),aU=Or(sU),lU=h({},$p,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kk=Or(lU),cU=h({},Fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sy}),uU=Or(cU),dU=h({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fU=Or(dU),hU=h({},$p,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),pU=Or(hU),mU=h({},Cl,{newState:0,oldState:0}),gU=Or(mU),bU=[9,13,27,32],Ty=hs&&"CompositionEvent"in window,zd=null;hs&&"documentMode"in document&&(zd=document.documentMode);var yU=hs&&"TextEvent"in window&&!zd,Qk=hs&&(!Ty||zd&&8<zd&&11>=zd),Xk=" ",Zk=!1;function Jk(l,d){switch(l){case"keyup":return bU.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e_(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var jc=!1;function EU(l,d){switch(l){case"compositionend":return e_(d);case"keypress":return d.which!==32?null:(Zk=!0,Xk);case"textInput":return l=d.data,l===Xk&&Zk?null:l;default:return null}}function vU(l,d){if(jc)return l==="compositionend"||!Ty&&Jk(l,d)?(l=qk(),Up=Ey=oa=null,jc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Qk&&d.locale!=="ko"?null:d.data;default:return null}}var CU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t_(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!CU[l.type]:d==="textarea"}function n_(l,d,p,b){Uc?Fc?Fc.push(b):Fc=[b]:Uc=b,d=Om(d,"onChange"),0<d.length&&(p=new zp("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var $d=null,Vd=null;function wU(l){H3(l,0)}function Vp(l){var d=Pd(l);if(Pk(d))return l}function r_(l,d){if(l==="change")return d}var i_=!1;if(hs){var xy;if(hs){var ky="oninput"in document;if(!ky){var o_=document.createElement("div");o_.setAttribute("oninput","return;"),ky=typeof o_.oninput=="function"}xy=ky}else xy=!1;i_=xy&&(!document.documentMode||9<document.documentMode)}function s_(){$d&&($d.detachEvent("onpropertychange",a_),Vd=$d=null)}function a_(l){if(l.propertyName==="value"&&Vp(Vd)){var d=[];n_(d,Vd,l,gy(l)),Vk(wU,d)}}function SU(l,d,p){l==="focusin"?(s_(),$d=d,Vd=p,$d.attachEvent("onpropertychange",a_)):l==="focusout"&&s_()}function TU(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Vp(Vd)}function xU(l,d){if(l==="click")return Vp(d)}function kU(l,d){if(l==="input"||l==="change")return Vp(d)}function _U(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var ti=typeof Object.is=="function"?Object.is:_U;function qd(l,d){if(ti(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var v=p[b];if(!Y.call(d,v)||!ti(l[v],d[v]))return!1}return!0}function l_(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function c_(l,d){var p=l_(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=l_(p)}}function u_(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?u_(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function d_(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Pp(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Pp(l.document)}return d}function _y(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var AU=hs&&"documentMode"in document&&11>=document.documentMode,zc=null,Ay=null,Yd=null,Ny=!1;function f_(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ny||zc==null||zc!==Pp(b)||(b=zc,"selectionStart"in b&&_y(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Yd&&qd(Yd,b)||(Yd=b,b=Om(Ay,"onSelect"),0<b.length&&(d=new zp("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=zc)))}function wl(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var $c={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionrun:wl("Transition","TransitionRun"),transitionstart:wl("Transition","TransitionStart"),transitioncancel:wl("Transition","TransitionCancel"),transitionend:wl("Transition","TransitionEnd")},My={},h_={};hs&&(h_=document.createElement("div").style,"AnimationEvent"in window||(delete $c.animationend.animation,delete $c.animationiteration.animation,delete $c.animationstart.animation),"TransitionEvent"in window||delete $c.transitionend.transition);function Sl(l){if(My[l])return My[l];if(!$c[l])return l;var d=$c[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in h_)return My[l]=d[p];return l}var p_=Sl("animationend"),m_=Sl("animationiteration"),g_=Sl("animationstart"),NU=Sl("transitionrun"),MU=Sl("transitionstart"),RU=Sl("transitioncancel"),b_=Sl("transitionend"),y_=new Map,Ry="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ry.push("scrollEnd");function to(l,d){y_.set(l,d),vl(d,[l])}var qp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ai=[],Vc=0,Oy=0;function Yp(){for(var l=Vc,d=Oy=Vc=0;d<l;){var p=Ai[d];Ai[d++]=null;var b=Ai[d];Ai[d++]=null;var v=Ai[d];Ai[d++]=null;var w=Ai[d];if(Ai[d++]=null,b!==null&&v!==null){var D=b.pending;D===null?v.next=v:(v.next=D.next,D.next=v),b.pending=v}w!==0&&E_(p,v,w)}}function Gp(l,d,p,b){Ai[Vc++]=l,Ai[Vc++]=d,Ai[Vc++]=p,Ai[Vc++]=b,Oy|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function Dy(l,d,p,b){return Gp(l,d,p,b),Wp(l)}function Tl(l,d){return Gp(l,null,null,d),Wp(l)}function E_(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var v=!1,w=l.return;w!==null;)w.childLanes|=p,b=w.alternate,b!==null&&(b.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(v=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,v&&d!==null&&(v=31-At(p),l=w.hiddenUpdates,b=l[v],b===null?l[v]=[d]:b.push(d),d.lane=p|536870912),w):null}function Wp(l){if(50<mf)throw mf=0,zE=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var qc={};function OU(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(l,d,p,b){return new OU(l,d,p,b)}function Ly(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ps(l,d){var p=l.alternate;return p===null?(p=ni(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function v_(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Kp(l,d,p,b,v,w){var D=0;if(b=l,typeof l=="function")Ly(l)&&(D=1);else if(typeof l=="string")D=PF(l,p,Se.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=ni(31,p,d,v),l.elementType=z,l.lanes=w,l;case E:return xl(p.children,v,w,d);case C:D=8,v|=24;break;case S:return l=ni(12,p,d,v|2),l.elementType=S,l.lanes=w,l;case M:return l=ni(13,p,d,v),l.elementType=M,l.lanes=w,l;case R:return l=ni(19,p,d,v),l.elementType=R,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:D=10;break e;case N:D=9;break e;case O:D=11;break e;case L:D=14;break e;case F:D=16,b=null;break e}D=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ni(D,p,d,v),d.elementType=l,d.type=b,d.lanes=w,d}function xl(l,d,p,b){return l=ni(7,l,b,d),l.lanes=p,l}function Iy(l,d,p){return l=ni(6,l,null,d),l.lanes=p,l}function C_(l){var d=ni(18,null,null,0);return d.stateNode=l,d}function By(l,d,p){return d=ni(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var w_=new WeakMap;function Ni(l,d){if(typeof l=="object"&&l!==null){var p=w_.get(l);return p!==void 0?p:(d={value:l,source:d,stack:He(d)},w_.set(l,d),d)}return{value:l,source:d,stack:He(d)}}var Yc=[],Gc=0,Qp=null,Gd=0,Mi=[],Ri=0,sa=null,Ro=1,Oo="";function ms(l,d){Yc[Gc++]=Gd,Yc[Gc++]=Qp,Qp=l,Gd=d}function S_(l,d,p){Mi[Ri++]=Ro,Mi[Ri++]=Oo,Mi[Ri++]=sa,sa=l;var b=Ro;l=Oo;var v=32-At(b)-1;b&=~(1<<v),p+=1;var w=32-At(d)+v;if(30<w){var D=v-v%5;w=(b&(1<<D)-1).toString(32),b>>=D,v-=D,Ro=1<<32-At(d)+v|p<<v|b,Oo=w+l}else Ro=1<<w|p<<v|b,Oo=l}function Py(l){l.return!==null&&(ms(l,1),S_(l,1,0))}function Hy(l){for(;l===Qp;)Qp=Yc[--Gc],Yc[Gc]=null,Gd=Yc[--Gc],Yc[Gc]=null;for(;l===sa;)sa=Mi[--Ri],Mi[Ri]=null,Oo=Mi[--Ri],Mi[Ri]=null,Ro=Mi[--Ri],Mi[Ri]=null}function T_(l,d){Mi[Ri++]=Ro,Mi[Ri++]=Oo,Mi[Ri++]=sa,Ro=d.id,Oo=d.overflow,sa=l}var er=null,an=null,xt=!1,aa=null,Oi=!1,Uy=Error(r(519));function la(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wd(Ni(d,l)),Uy}function x_(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[Jn]=l,d[Rr]=b,p){case"dialog":Et("cancel",d),Et("close",d);break;case"iframe":case"object":case"embed":Et("load",d);break;case"video":case"audio":for(p=0;p<bf.length;p++)Et(bf[p],d);break;case"source":Et("error",d);break;case"img":case"image":case"link":Et("error",d),Et("load",d);break;case"details":Et("toggle",d);break;case"input":Et("invalid",d),Hk(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Et("invalid",d);break;case"textarea":Et("invalid",d),Fk(d,b.value,b.defaultValue,b.children)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||z3(d.textContent,p)?(b.popover!=null&&(Et("beforetoggle",d),Et("toggle",d)),b.onScroll!=null&&Et("scroll",d),b.onScrollEnd!=null&&Et("scrollend",d),b.onClick!=null&&(d.onclick=fs),d=!0):d=!1,d||la(l,!0)}function k_(l){for(er=l.return;er;)switch(er.tag){case 5:case 31:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:er=er.return}}function Wc(l){if(l!==er)return!1;if(!xt)return k_(l),xt=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||rv(l.type,l.memoizedProps)),p=!p),p&&an&&la(l),k_(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));an=X3(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));an=X3(l)}else d===27?(d=an,wa(l.type)?(l=lv,lv=null,an=l):an=d):an=er?Li(l.stateNode.nextSibling):null;return!0}function kl(){an=er=null,xt=!1}function Fy(){var l=aa;return l!==null&&(Br===null?Br=l:Br.push.apply(Br,l),aa=null),l}function Wd(l){aa===null?aa=[l]:aa.push(l)}var jy=K(null),_l=null,gs=null;function ca(l,d,p){j(jy,d._currentValue),d._currentValue=p}function bs(l){l._currentValue=jy.current,ie(jy)}function zy(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function $y(l,d,p,b){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var w=v.dependencies;if(w!==null){var D=v.child;w=w.firstContext;e:for(;w!==null;){var H=w;w=v;for(var X=0;X<d.length;X++)if(H.context===d[X]){w.lanes|=p,H=w.alternate,H!==null&&(H.lanes|=p),zy(w.return,p,l),b||(D=null);break e}w=H.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=p,w=D.alternate,w!==null&&(w.lanes|=p),zy(D,p,l),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===l){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Kc(l,d,p,b){l=null;for(var v=d,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var H=v.type;ti(v.pendingProps.value,D.value)||(l!==null?l.push(H):l=[H])}}else if(v===$e.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push(wf):l=[wf])}v=v.return}l!==null&&$y(d,l,p,b),d.flags|=262144}function Xp(l){for(l=l.firstContext;l!==null;){if(!ti(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Al(l){_l=l,gs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function tr(l){return __(_l,l)}function Zp(l,d){return _l===null&&Al(l),__(l,d)}function __(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},gs===null){if(l===null)throw Error(r(308));gs=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else gs=gs.next=d;return p}var DU=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},LU=e.unstable_scheduleCallback,IU=e.unstable_NormalPriority,Mn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vy(){return{controller:new DU,data:new Map,refCount:0}}function Kd(l){l.refCount--,l.refCount===0&&LU(IU,function(){l.controller.abort()})}var Qd=null,qy=0,Qc=0,Xc=null;function BU(l,d){if(Qd===null){var p=Qd=[];qy=0,Qc=WE(),Xc={status:"pending",value:void 0,then:function(b){p.push(b)}}}return qy++,d.then(A_,A_),d}function A_(){if(--qy===0&&Qd!==null){Xc!==null&&(Xc.status="fulfilled");var l=Qd;Qd=null,Qc=0,Xc=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function PU(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var v=0;v<p.length;v++)(0,p[v])(d)},function(v){for(b.status="rejected",b.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),b}var N_=W.S;W.S=function(l,d){f3=oe(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&BU(l,d),N_!==null&&N_(l,d)};var Nl=K(null);function Yy(){var l=Nl.current;return l!==null?l:Wt.pooledCache}function Jp(l,d){d===null?j(Nl,Nl.current):j(Nl,d.pool)}function M_(){var l=Yy();return l===null?null:{parent:Mn._currentValue,pool:l}}var Zc=Error(r(460)),Gy=Error(r(474)),em=Error(r(542)),tm={then:function(){}};function R_(l){return l=l.status,l==="fulfilled"||l==="rejected"}function O_(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(fs,fs),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,L_(l),l;default:if(typeof d.status=="string")d.then(fs,fs);else{if(l=Wt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var v=d;v.status="fulfilled",v.value=b}},function(b){if(d.status==="pending"){var v=d;v.status="rejected",v.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,L_(l),l}throw Rl=d,Zc}}function Ml(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Rl=p,Zc):p}}var Rl=null;function D_(){if(Rl===null)throw Error(r(459));var l=Rl;return Rl=null,l}function L_(l){if(l===Zc||l===em)throw Error(r(483))}var Jc=null,Xd=0;function nm(l){var d=Xd;return Xd+=1,Jc===null&&(Jc=[]),O_(Jc,l,d)}function Zd(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function rm(l,d){throw d.$$typeof===m?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function I_(l){function d(le,ne){if(l){var he=le.deletions;he===null?(le.deletions=[ne],le.flags|=16):he.push(ne)}}function p(le,ne){if(!l)return null;for(;ne!==null;)d(le,ne),ne=ne.sibling;return null}function b(le){for(var ne=new Map;le!==null;)le.key!==null?ne.set(le.key,le):ne.set(le.index,le),le=le.sibling;return ne}function v(le,ne){return le=ps(le,ne),le.index=0,le.sibling=null,le}function w(le,ne,he){return le.index=he,l?(he=le.alternate,he!==null?(he=he.index,he<ne?(le.flags|=67108866,ne):he):(le.flags|=67108866,ne)):(le.flags|=1048576,ne)}function D(le){return l&&le.alternate===null&&(le.flags|=67108866),le}function H(le,ne,he,Te){return ne===null||ne.tag!==6?(ne=Iy(he,le.mode,Te),ne.return=le,ne):(ne=v(ne,he),ne.return=le,ne)}function X(le,ne,he,Te){var We=he.type;return We===E?we(le,ne,he.props.children,Te,he.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===F&&Ml(We)===ne.type)?(ne=v(ne,he.props),Zd(ne,he),ne.return=le,ne):(ne=Kp(he.type,he.key,he.props,null,le.mode,Te),Zd(ne,he),ne.return=le,ne)}function pe(le,ne,he,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=By(he,le.mode,Te),ne.return=le,ne):(ne=v(ne,he.children||[]),ne.return=le,ne)}function we(le,ne,he,Te,We){return ne===null||ne.tag!==7?(ne=xl(he,le.mode,Te,We),ne.return=le,ne):(ne=v(ne,he),ne.return=le,ne)}function xe(le,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Iy(""+ne,le.mode,he),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return he=Kp(ne.type,ne.key,ne.props,null,le.mode,he),Zd(he,ne),he.return=le,he;case y:return ne=By(ne,le.mode,he),ne.return=le,ne;case F:return ne=Ml(ne),xe(le,ne,he)}if(ae(ne)||q(ne))return ne=xl(ne,le.mode,he,null),ne.return=le,ne;if(typeof ne.then=="function")return xe(le,nm(ne),he);if(ne.$$typeof===_)return xe(le,Zp(le,ne),he);rm(le,ne)}return null}function me(le,ne,he,Te){var We=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return We!==null?null:H(le,ne,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case g:return he.key===We?X(le,ne,he,Te):null;case y:return he.key===We?pe(le,ne,he,Te):null;case F:return he=Ml(he),me(le,ne,he,Te)}if(ae(he)||q(he))return We!==null?null:we(le,ne,he,Te,null);if(typeof he.then=="function")return me(le,ne,nm(he),Te);if(he.$$typeof===_)return me(le,ne,Zp(le,he),Te);rm(le,he)}return null}function be(le,ne,he,Te,We){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return le=le.get(he)||null,H(ne,le,""+Te,We);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return le=le.get(Te.key===null?he:Te.key)||null,X(ne,le,Te,We);case y:return le=le.get(Te.key===null?he:Te.key)||null,pe(ne,le,Te,We);case F:return Te=Ml(Te),be(le,ne,he,Te,We)}if(ae(Te)||q(Te))return le=le.get(he)||null,we(ne,le,Te,We,null);if(typeof Te.then=="function")return be(le,ne,he,nm(Te),We);if(Te.$$typeof===_)return be(le,ne,he,Zp(ne,Te),We);rm(ne,Te)}return null}function je(le,ne,he,Te){for(var We=null,Dt=null,Ve=ne,dt=ne=0,wt=null;Ve!==null&&dt<he.length;dt++){Ve.index>dt?(wt=Ve,Ve=null):wt=Ve.sibling;var Lt=me(le,Ve,he[dt],Te);if(Lt===null){Ve===null&&(Ve=wt);break}l&&Ve&&Lt.alternate===null&&d(le,Ve),ne=w(Lt,ne,dt),Dt===null?We=Lt:Dt.sibling=Lt,Dt=Lt,Ve=wt}if(dt===he.length)return p(le,Ve),xt&&ms(le,dt),We;if(Ve===null){for(;dt<he.length;dt++)Ve=xe(le,he[dt],Te),Ve!==null&&(ne=w(Ve,ne,dt),Dt===null?We=Ve:Dt.sibling=Ve,Dt=Ve);return xt&&ms(le,dt),We}for(Ve=b(Ve);dt<he.length;dt++)wt=be(Ve,le,dt,he[dt],Te),wt!==null&&(l&&wt.alternate!==null&&Ve.delete(wt.key===null?dt:wt.key),ne=w(wt,ne,dt),Dt===null?We=wt:Dt.sibling=wt,Dt=wt);return l&&Ve.forEach(function(_a){return d(le,_a)}),xt&&ms(le,dt),We}function Je(le,ne,he,Te){if(he==null)throw Error(r(151));for(var We=null,Dt=null,Ve=ne,dt=ne=0,wt=null,Lt=he.next();Ve!==null&&!Lt.done;dt++,Lt=he.next()){Ve.index>dt?(wt=Ve,Ve=null):wt=Ve.sibling;var _a=me(le,Ve,Lt.value,Te);if(_a===null){Ve===null&&(Ve=wt);break}l&&Ve&&_a.alternate===null&&d(le,Ve),ne=w(_a,ne,dt),Dt===null?We=_a:Dt.sibling=_a,Dt=_a,Ve=wt}if(Lt.done)return p(le,Ve),xt&&ms(le,dt),We;if(Ve===null){for(;!Lt.done;dt++,Lt=he.next())Lt=xe(le,Lt.value,Te),Lt!==null&&(ne=w(Lt,ne,dt),Dt===null?We=Lt:Dt.sibling=Lt,Dt=Lt);return xt&&ms(le,dt),We}for(Ve=b(Ve);!Lt.done;dt++,Lt=he.next())Lt=be(Ve,le,dt,Lt.value,Te),Lt!==null&&(l&&Lt.alternate!==null&&Ve.delete(Lt.key===null?dt:Lt.key),ne=w(Lt,ne,dt),Dt===null?We=Lt:Dt.sibling=Lt,Dt=Lt);return l&&Ve.forEach(function(WF){return d(le,WF)}),xt&&ms(le,dt),We}function Yt(le,ne,he,Te){if(typeof he=="object"&&he!==null&&he.type===E&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case g:e:{for(var We=he.key;ne!==null;){if(ne.key===We){if(We=he.type,We===E){if(ne.tag===7){p(le,ne.sibling),Te=v(ne,he.props.children),Te.return=le,le=Te;break e}}else if(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===F&&Ml(We)===ne.type){p(le,ne.sibling),Te=v(ne,he.props),Zd(Te,he),Te.return=le,le=Te;break e}p(le,ne);break}else d(le,ne);ne=ne.sibling}he.type===E?(Te=xl(he.props.children,le.mode,Te,he.key),Te.return=le,le=Te):(Te=Kp(he.type,he.key,he.props,null,le.mode,Te),Zd(Te,he),Te.return=le,le=Te)}return D(le);case y:e:{for(We=he.key;ne!==null;){if(ne.key===We)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){p(le,ne.sibling),Te=v(ne,he.children||[]),Te.return=le,le=Te;break e}else{p(le,ne);break}else d(le,ne);ne=ne.sibling}Te=By(he,le.mode,Te),Te.return=le,le=Te}return D(le);case F:return he=Ml(he),Yt(le,ne,he,Te)}if(ae(he))return je(le,ne,he,Te);if(q(he)){if(We=q(he),typeof We!="function")throw Error(r(150));return he=We.call(he),Je(le,ne,he,Te)}if(typeof he.then=="function")return Yt(le,ne,nm(he),Te);if(he.$$typeof===_)return Yt(le,ne,Zp(le,he),Te);rm(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ne!==null&&ne.tag===6?(p(le,ne.sibling),Te=v(ne,he),Te.return=le,le=Te):(p(le,ne),Te=Iy(he,le.mode,Te),Te.return=le,le=Te),D(le)):p(le,ne)}return function(le,ne,he,Te){try{Xd=0;var We=Yt(le,ne,he,Te);return Jc=null,We}catch(Ve){if(Ve===Zc||Ve===em)throw Ve;var Dt=ni(29,Ve,null,le.mode);return Dt.lanes=Te,Dt.return=le,Dt}finally{}}}var Ol=I_(!0),B_=I_(!1),ua=!1;function Wy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ky(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function da(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fa(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Pt&2)!==0){var v=b.pending;return v===null?d.next=d:(d.next=v.next,v.next=d),b.pending=d,d=Wp(l),E_(l,null,p),d}return Gp(l,b,d,p),Wp(l)}function Jd(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,_k(l,p)}}function Qy(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var v=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var D={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?v=w=D:w=w.next=D,p=p.next}while(p!==null);w===null?v=w=d:w=w.next=d}else v=w=d;p={baseState:b.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var Xy=!1;function ef(){if(Xy){var l=Xc;if(l!==null)throw l}}function tf(l,d,p,b){Xy=!1;var v=l.updateQueue;ua=!1;var w=v.firstBaseUpdate,D=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var X=H,pe=X.next;X.next=null,D===null?w=pe:D.next=pe,D=X;var we=l.alternate;we!==null&&(we=we.updateQueue,H=we.lastBaseUpdate,H!==D&&(H===null?we.firstBaseUpdate=pe:H.next=pe,we.lastBaseUpdate=X))}if(w!==null){var xe=v.baseState;D=0,we=pe=X=null,H=w;do{var me=H.lane&-536870913,be=me!==H.lane;if(be?(Ct&me)===me:(b&me)===me){me!==0&&me===Qc&&(Xy=!0),we!==null&&(we=we.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var je=l,Je=H;me=d;var Yt=p;switch(Je.tag){case 1:if(je=Je.payload,typeof je=="function"){xe=je.call(Yt,xe,me);break e}xe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Je.payload,me=typeof je=="function"?je.call(Yt,xe,me):je,me==null)break e;xe=h({},xe,me);break e;case 2:ua=!0}}me=H.callback,me!==null&&(l.flags|=64,be&&(l.flags|=8192),be=v.callbacks,be===null?v.callbacks=[me]:be.push(me))}else be={lane:me,tag:H.tag,payload:H.payload,callback:H.callback,next:null},we===null?(pe=we=be,X=xe):we=we.next=be,D|=me;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;be=H,H=be.next,be.next=null,v.lastBaseUpdate=be,v.shared.pending=null}}while(!0);we===null&&(X=xe),v.baseState=X,v.firstBaseUpdate=pe,v.lastBaseUpdate=we,w===null&&(v.shared.lanes=0),ba|=D,l.lanes=D,l.memoizedState=xe}}function P_(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function H_(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)P_(p[l],d)}var eu=K(null),im=K(0);function U_(l,d){l=ks,j(im,l),j(eu,d),ks=l|d.baseLanes}function Zy(){j(im,ks),j(eu,eu.current)}function Jy(){ks=im.current,ie(eu),ie(im)}var ri=K(null),Di=null;function ha(l){var d=l.alternate;j(kn,kn.current&1),j(ri,l),Di===null&&(d===null||eu.current!==null||d.memoizedState!==null)&&(Di=l)}function eE(l){j(kn,kn.current),j(ri,l),Di===null&&(Di=l)}function F_(l){l.tag===22?(j(kn,kn.current),j(ri,l),Di===null&&(Di=l)):pa()}function pa(){j(kn,kn.current),j(ri,ri.current)}function ii(l){ie(ri),Di===l&&(Di=null),ie(kn)}var kn=K(0);function om(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||sv(p)||av(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ys=0,lt=null,Vt=null,Rn=null,sm=!1,tu=!1,Dl=!1,am=0,nf=0,nu=null,HU=0;function En(){throw Error(r(321))}function tE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!ti(l[p],d[p]))return!1;return!0}function nE(l,d,p,b,v,w){return ys=w,lt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,W.H=l===null||l.memoizedState===null?SA:bE,Dl=!1,w=p(b,v),Dl=!1,tu&&(w=z_(d,p,b,v)),j_(l),w}function j_(l){W.H=sf;var d=Vt!==null&&Vt.next!==null;if(ys=0,Rn=Vt=lt=null,sm=!1,nf=0,nu=null,d)throw Error(r(300));l===null||On||(l=l.dependencies,l!==null&&Xp(l)&&(On=!0))}function z_(l,d,p,b){lt=l;var v=0;do{if(tu&&(nu=null),nf=0,tu=!1,25<=v)throw Error(r(301));if(v+=1,Rn=Vt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}W.H=TA,w=d(p,b)}while(tu);return w}function UU(){var l=W.H,d=l.useState()[0];return d=typeof d.then=="function"?rf(d):d,l=l.useState()[0],(Vt!==null?Vt.memoizedState:null)!==l&&(lt.flags|=1024),d}function rE(){var l=am!==0;return am=0,l}function iE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function oE(l){if(sm){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}sm=!1}ys=0,Rn=Vt=lt=null,tu=!1,nf=am=0,nu=null}function wr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?lt.memoizedState=Rn=l:Rn=Rn.next=l,Rn}function _n(){if(Vt===null){var l=lt.alternate;l=l!==null?l.memoizedState:null}else l=Vt.next;var d=Rn===null?lt.memoizedState:Rn.next;if(d!==null)Rn=d,Vt=l;else{if(l===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Vt=l,l={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Rn===null?lt.memoizedState=Rn=l:Rn=Rn.next=l}return Rn}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rf(l){var d=nf;return nf+=1,nu===null&&(nu=[]),l=O_(nu,l,d),d=lt,(Rn===null?d.memoizedState:Rn.next)===null&&(d=d.alternate,W.H=d===null||d.memoizedState===null?SA:bE),l}function cm(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return rf(l);if(l.$$typeof===_)return tr(l)}throw Error(r(438,String(l)))}function sE(l){var d=null,p=lt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=lt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(v){return v.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=lm(),lt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=B;return d.index++,p}function Es(l,d){return typeof d=="function"?d(l):d}function um(l){var d=_n();return aE(d,Vt,l)}function aE(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var v=l.baseQueue,w=b.pending;if(w!==null){if(v!==null){var D=v.next;v.next=w.next,w.next=D}d.baseQueue=v=w,b.pending=null}if(w=l.baseState,v===null)l.memoizedState=w;else{d=v.next;var H=D=null,X=null,pe=d,we=!1;do{var xe=pe.lane&-536870913;if(xe!==pe.lane?(Ct&xe)===xe:(ys&xe)===xe){var me=pe.revertLane;if(me===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),xe===Qc&&(we=!0);else if((ys&me)===me){pe=pe.next,me===Qc&&(we=!0);continue}else xe={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},X===null?(H=X=xe,D=w):X=X.next=xe,lt.lanes|=me,ba|=me;xe=pe.action,Dl&&p(w,xe),w=pe.hasEagerState?pe.eagerState:p(w,xe)}else me={lane:xe,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},X===null?(H=X=me,D=w):X=X.next=me,lt.lanes|=xe,ba|=xe;pe=pe.next}while(pe!==null&&pe!==d);if(X===null?D=w:X.next=H,!ti(w,l.memoizedState)&&(On=!0,we&&(p=Xc,p!==null)))throw p;l.memoizedState=w,l.baseState=D,l.baseQueue=X,b.lastRenderedState=w}return v===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function lE(l){var d=_n(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,v=p.pending,w=d.memoizedState;if(v!==null){p.pending=null;var D=v=v.next;do w=l(w,D.action),D=D.next;while(D!==v);ti(w,d.memoizedState)||(On=!0),d.memoizedState=w,d.baseQueue===null&&(d.baseState=w),p.lastRenderedState=w}return[w,b]}function $_(l,d,p){var b=lt,v=_n(),w=xt;if(w){if(p===void 0)throw Error(r(407));p=p()}else p=d();var D=!ti((Vt||v).memoizedState,p);if(D&&(v.memoizedState=p,On=!0),v=v.queue,dE(Y_.bind(null,b,v,l),[l]),v.getSnapshot!==d||D||Rn!==null&&Rn.memoizedState.tag&1){if(b.flags|=2048,ru(9,{destroy:void 0},q_.bind(null,b,v,p,d),null),Wt===null)throw Error(r(349));w||(ys&127)!==0||V_(b,d,p)}return p}function V_(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=lt.updateQueue,d===null?(d=lm(),lt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function q_(l,d,p,b){d.value=p,d.getSnapshot=b,G_(d)&&W_(l)}function Y_(l,d,p){return p(function(){G_(d)&&W_(l)})}function G_(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!ti(l,p)}catch{return!0}}function W_(l){var d=Tl(l,2);d!==null&&Pr(d,l,2)}function cE(l){var d=wr();if(typeof l=="function"){var p=l;if(l=p(),Dl){xn(!0);try{p()}finally{xn(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:l},d}function K_(l,d,p,b){return l.baseState=p,aE(l,Vt,typeof b=="function"?b:Es)}function FU(l,d,p,b,v){if(hm(l))throw Error(r(485));if(l=d.action,l!==null){var w={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};W.T!==null?p(!0):w.isTransition=!1,b(w),p=d.pending,p===null?(w.next=d.pending=w,Q_(d,w)):(w.next=p.next,d.pending=p.next=w)}}function Q_(l,d){var p=d.action,b=d.payload,v=l.state;if(d.isTransition){var w=W.T,D={};W.T=D;try{var H=p(v,b),X=W.S;X!==null&&X(D,H),X_(l,d,H)}catch(pe){uE(l,d,pe)}finally{w!==null&&D.types!==null&&(w.types=D.types),W.T=w}}else try{w=p(v,b),X_(l,d,w)}catch(pe){uE(l,d,pe)}}function X_(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){Z_(l,d,b)},function(b){return uE(l,d,b)}):Z_(l,d,p)}function Z_(l,d,p){d.status="fulfilled",d.value=p,J_(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,Q_(l,p)))}function uE(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,J_(d),d=d.next;while(d!==b)}l.action=null}function J_(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function eA(l,d){return d}function tA(l,d){if(xt){var p=Wt.formState;if(p!==null){e:{var b=lt;if(xt){if(an){t:{for(var v=an,w=Oi;v.nodeType!==8;){if(!w){v=null;break t}if(v=Li(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){an=Li(v.nextSibling),b=v.data==="F!";break e}}la(b)}b=!1}b&&(d=p[0])}}return p=wr(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eA,lastRenderedState:d},p.queue=b,p=vA.bind(null,lt,b),b.dispatch=p,b=cE(!1),w=gE.bind(null,lt,!1,b.queue),b=wr(),v={state:d,dispatch:null,action:l,pending:null},b.queue=v,p=FU.bind(null,lt,v,w,p),v.dispatch=p,b.memoizedState=l,[d,p,!1]}function nA(l){var d=_n();return rA(d,Vt,l)}function rA(l,d,p){if(d=aE(l,d,eA)[0],l=um(Es)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=rf(d)}catch(D){throw D===Zc?em:D}else b=d;d=_n();var v=d.queue,w=v.dispatch;return p!==d.memoizedState&&(lt.flags|=2048,ru(9,{destroy:void 0},jU.bind(null,v,p),null)),[b,w,l]}function jU(l,d){l.action=d}function iA(l){var d=_n(),p=Vt;if(p!==null)return rA(d,p,l);_n(),d=d.memoizedState,p=_n();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function ru(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=lt.updateQueue,d===null&&(d=lm(),lt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function oA(){return _n().memoizedState}function dm(l,d,p,b){var v=wr();lt.flags|=l,v.memoizedState=ru(1|d,{destroy:void 0},p,b===void 0?null:b)}function fm(l,d,p,b){var v=_n();b=b===void 0?null:b;var w=v.memoizedState.inst;Vt!==null&&b!==null&&tE(b,Vt.memoizedState.deps)?v.memoizedState=ru(d,w,p,b):(lt.flags|=l,v.memoizedState=ru(1|d,w,p,b))}function sA(l,d){dm(8390656,8,l,d)}function dE(l,d){fm(2048,8,l,d)}function zU(l){lt.flags|=4;var d=lt.updateQueue;if(d===null)d=lm(),lt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function aA(l){var d=_n().memoizedState;return zU({ref:d,nextImpl:l}),function(){if((Pt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function lA(l,d){return fm(4,2,l,d)}function cA(l,d){return fm(4,4,l,d)}function uA(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function dA(l,d,p){p=p!=null?p.concat([l]):null,fm(4,4,uA.bind(null,d,l),p)}function fE(){}function fA(l,d){var p=_n();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&tE(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function hA(l,d){var p=_n();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&tE(d,b[1]))return b[0];if(b=l(),Dl){xn(!0);try{l()}finally{xn(!1)}}return p.memoizedState=[b,d],b}function hE(l,d,p){return p===void 0||(ys&1073741824)!==0&&(Ct&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=p3(),lt.lanes|=l,ba|=l,p)}function pA(l,d,p,b){return ti(p,d)?p:eu.current!==null?(l=hE(l,p,b),ti(l,d)||(On=!0),l):(ys&42)===0||(ys&1073741824)!==0&&(Ct&261930)===0?(On=!0,l.memoizedState=p):(l=p3(),lt.lanes|=l,ba|=l,d)}function mA(l,d,p,b,v){var w=Z.p;Z.p=w!==0&&8>w?w:8;var D=W.T,H={};W.T=H,gE(l,!1,d,p);try{var X=v(),pe=W.S;if(pe!==null&&pe(H,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var we=PU(X,b);of(l,d,we,ai(l))}else of(l,d,b,ai(l))}catch(xe){of(l,d,{then:function(){},status:"rejected",reason:xe},ai())}finally{Z.p=w,D!==null&&H.types!==null&&(D.types=H.types),W.T=D}}function $U(){}function pE(l,d,p,b){if(l.tag!==5)throw Error(r(476));var v=gA(l).queue;mA(l,v,d,te,p===null?$U:function(){return bA(l),p(b)})}function gA(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:te},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function bA(l){var d=gA(l);d.next===null&&(d=l.alternate.memoizedState),of(l,d.next.queue,{},ai())}function mE(){return tr(wf)}function yA(){return _n().memoizedState}function EA(){return _n().memoizedState}function VU(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=ai();l=da(p);var b=fa(d,l,p);b!==null&&(Pr(b,d,p),Jd(b,d,p)),d={cache:Vy()},l.payload=d;return}d=d.return}}function qU(l,d,p){var b=ai();p={lane:b,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},hm(l)?CA(d,p):(p=Dy(l,d,p,b),p!==null&&(Pr(p,l,b),wA(p,d,b)))}function vA(l,d,p){var b=ai();of(l,d,p,b)}function of(l,d,p,b){var v={lane:b,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(hm(l))CA(d,v);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=d.lastRenderedReducer,w!==null))try{var D=d.lastRenderedState,H=w(D,p);if(v.hasEagerState=!0,v.eagerState=H,ti(H,D))return Gp(l,d,v,0),Wt===null&&Yp(),!1}catch{}finally{}if(p=Dy(l,d,v,b),p!==null)return Pr(p,l,b),wA(p,d,b),!0}return!1}function gE(l,d,p,b){if(b={lane:2,revertLane:WE(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},hm(l)){if(d)throw Error(r(479))}else d=Dy(l,p,b,2),d!==null&&Pr(d,l,2)}function hm(l){var d=l.alternate;return l===lt||d!==null&&d===lt}function CA(l,d){tu=sm=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function wA(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,_k(l,p)}}var sf={readContext:tr,use:cm,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};sf.useEffectEvent=En;var SA={readContext:tr,use:cm,useCallback:function(l,d){return wr().memoizedState=[l,d===void 0?null:d],l},useContext:tr,useEffect:sA,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,dm(4194308,4,uA.bind(null,d,l),p)},useLayoutEffect:function(l,d){return dm(4194308,4,l,d)},useInsertionEffect:function(l,d){dm(4,2,l,d)},useMemo:function(l,d){var p=wr();d=d===void 0?null:d;var b=l();if(Dl){xn(!0);try{l()}finally{xn(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=wr();if(p!==void 0){var v=p(d);if(Dl){xn(!0);try{p(d)}finally{xn(!1)}}}else v=d;return b.memoizedState=b.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},b.queue=l,l=l.dispatch=qU.bind(null,lt,l),[b.memoizedState,l]},useRef:function(l){var d=wr();return l={current:l},d.memoizedState=l},useState:function(l){l=cE(l);var d=l.queue,p=vA.bind(null,lt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:fE,useDeferredValue:function(l,d){var p=wr();return hE(p,l,d)},useTransition:function(){var l=cE(!1);return l=mA.bind(null,lt,l.queue,!0,!1),wr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=lt,v=wr();if(xt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Wt===null)throw Error(r(349));(Ct&127)!==0||V_(b,d,p)}v.memoizedState=p;var w={value:p,getSnapshot:d};return v.queue=w,sA(Y_.bind(null,b,w,l),[l]),b.flags|=2048,ru(9,{destroy:void 0},q_.bind(null,b,w,p,d),null),p},useId:function(){var l=wr(),d=Wt.identifierPrefix;if(xt){var p=Oo,b=Ro;p=(b&~(1<<32-At(b)-1)).toString(32)+p,d="_"+d+"R_"+p,p=am++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=HU++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:mE,useFormState:tA,useActionState:tA,useOptimistic:function(l){var d=wr();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=gE.bind(null,lt,!0,p),p.dispatch=d,[l,d]},useMemoCache:sE,useCacheRefresh:function(){return wr().memoizedState=VU.bind(null,lt)},useEffectEvent:function(l){var d=wr(),p={impl:l};return d.memoizedState=p,function(){if((Pt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},bE={readContext:tr,use:cm,useCallback:fA,useContext:tr,useEffect:dE,useImperativeHandle:dA,useInsertionEffect:lA,useLayoutEffect:cA,useMemo:hA,useReducer:um,useRef:oA,useState:function(){return um(Es)},useDebugValue:fE,useDeferredValue:function(l,d){var p=_n();return pA(p,Vt.memoizedState,l,d)},useTransition:function(){var l=um(Es)[0],d=_n().memoizedState;return[typeof l=="boolean"?l:rf(l),d]},useSyncExternalStore:$_,useId:yA,useHostTransitionStatus:mE,useFormState:nA,useActionState:nA,useOptimistic:function(l,d){var p=_n();return K_(p,Vt,l,d)},useMemoCache:sE,useCacheRefresh:EA};bE.useEffectEvent=aA;var TA={readContext:tr,use:cm,useCallback:fA,useContext:tr,useEffect:dE,useImperativeHandle:dA,useInsertionEffect:lA,useLayoutEffect:cA,useMemo:hA,useReducer:lE,useRef:oA,useState:function(){return lE(Es)},useDebugValue:fE,useDeferredValue:function(l,d){var p=_n();return Vt===null?hE(p,l,d):pA(p,Vt.memoizedState,l,d)},useTransition:function(){var l=lE(Es)[0],d=_n().memoizedState;return[typeof l=="boolean"?l:rf(l),d]},useSyncExternalStore:$_,useId:yA,useHostTransitionStatus:mE,useFormState:iA,useActionState:iA,useOptimistic:function(l,d){var p=_n();return Vt!==null?K_(p,Vt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:sE,useCacheRefresh:EA};TA.useEffectEvent=aA;function yE(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var EE={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=ai(),v=da(b);v.payload=d,p!=null&&(v.callback=p),d=fa(l,v,b),d!==null&&(Pr(d,l,b),Jd(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=ai(),v=da(b);v.tag=1,v.payload=d,p!=null&&(v.callback=p),d=fa(l,v,b),d!==null&&(Pr(d,l,b),Jd(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=ai(),b=da(p);b.tag=2,d!=null&&(b.callback=d),d=fa(l,b,p),d!==null&&(Pr(d,l,p),Jd(d,l,p))}};function xA(l,d,p,b,v,w,D){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,w,D):d.prototype&&d.prototype.isPureReactComponent?!qd(p,b)||!qd(v,w):!0}function kA(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&EE.enqueueReplaceState(d,d.state,null)}function Ll(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var v in l)p[v]===void 0&&(p[v]=l[v])}return p}function _A(l){qp(l)}function AA(l){console.error(l)}function NA(l){qp(l)}function pm(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function MA(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function vE(l,d,p){return p=da(p),p.tag=3,p.payload={element:null},p.callback=function(){pm(l,d)},p}function RA(l){return l=da(l),l.tag=3,l}function OA(l,d,p,b){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var w=b.value;l.payload=function(){return v(w)},l.callback=function(){MA(d,p,b)}}var D=p.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(l.callback=function(){MA(d,p,b),typeof v!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var H=b.stack;this.componentDidCatch(b.value,{componentStack:H!==null?H:""})})}function YU(l,d,p,b,v){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&Kc(d,p,v,!0),p=ri.current,p!==null){switch(p.tag){case 31:case 13:return Di===null?km():p.alternate===null&&vn===0&&(vn=3),p.flags&=-257,p.flags|=65536,p.lanes=v,b===tm?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),qE(l,b,v)),!1;case 22:return p.flags|=65536,b===tm?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),qE(l,b,v)),!1}throw Error(r(435,p.tag))}return qE(l,b,v),km(),!1}if(xt)return d=ri.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=v,b!==Uy&&(l=Error(r(422),{cause:b}),Wd(Ni(l,p)))):(b!==Uy&&(d=Error(r(423),{cause:b}),Wd(Ni(d,p))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,b=Ni(b,p),v=vE(l.stateNode,b,v),Qy(l,v),vn!==4&&(vn=2)),!1;var w=Error(r(520),{cause:b});if(w=Ni(w,p),pf===null?pf=[w]:pf.push(w),vn!==4&&(vn=2),d===null)return!0;b=Ni(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=v&-v,p.lanes|=l,l=vE(p.stateNode,b,l),Qy(p,l),!1;case 1:if(d=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w))))return p.flags|=65536,v&=-v,p.lanes|=v,v=RA(v),OA(v,l,p,b),Qy(p,v),!1}p=p.return}while(p!==null);return!1}var CE=Error(r(461)),On=!1;function nr(l,d,p,b){d.child=l===null?B_(d,null,p,b):Ol(d,l.child,p,b)}function DA(l,d,p,b,v){p=p.render;var w=d.ref;if("ref"in b){var D={};for(var H in b)H!=="ref"&&(D[H]=b[H])}else D=b;return Al(d),b=nE(l,d,p,D,w,v),H=rE(),l!==null&&!On?(iE(l,d,v),vs(l,d,v)):(xt&&H&&Py(d),d.flags|=1,nr(l,d,b,v),d.child)}function LA(l,d,p,b,v){if(l===null){var w=p.type;return typeof w=="function"&&!Ly(w)&&w.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=w,IA(l,d,w,b,v)):(l=Kp(p.type,null,b,d,d.mode,v),l.ref=d.ref,l.return=d,d.child=l)}if(w=l.child,!NE(l,v)){var D=w.memoizedProps;if(p=p.compare,p=p!==null?p:qd,p(D,b)&&l.ref===d.ref)return vs(l,d,v)}return d.flags|=1,l=ps(w,b),l.ref=d.ref,l.return=d,d.child=l}function IA(l,d,p,b,v){if(l!==null){var w=l.memoizedProps;if(qd(w,b)&&l.ref===d.ref)if(On=!1,d.pendingProps=b=w,NE(l,v))(l.flags&131072)!==0&&(On=!0);else return d.lanes=l.lanes,vs(l,d,v)}return wE(l,d,p,b,v)}function BA(l,d,p,b){var v=b.children,w=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((d.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(b=d.child=l.child,v=0;b!==null;)v=v|b.lanes|b.childLanes,b=b.sibling;b=v&~w}else b=0,d.child=null;return PA(l,d,w,p,b)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Jp(d,w!==null?w.cachePool:null),w!==null?U_(d,w):Zy(),F_(d);else return b=d.lanes=536870912,PA(l,d,w!==null?w.baseLanes|p:p,p,b)}else w!==null?(Jp(d,w.cachePool),U_(d,w),pa(),d.memoizedState=null):(l!==null&&Jp(d,null),Zy(),pa());return nr(l,d,v,p),d.child}function af(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function PA(l,d,p,b,v){var w=Yy();return w=w===null?null:{parent:Mn._currentValue,pool:w},d.memoizedState={baseLanes:p,cachePool:w},l!==null&&Jp(d,null),Zy(),F_(d),l!==null&&Kc(l,d,b,!0),d.childLanes=v,null}function mm(l,d){return d=bm({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function HA(l,d,p){return Ol(d,l.child,null,p),l=mm(d,d.pendingProps),l.flags|=2,ii(d),d.memoizedState=null,l}function GU(l,d,p){var b=d.pendingProps,v=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(xt){if(b.mode==="hidden")return l=mm(d,b),d.lanes=536870912,af(null,l);if(eE(d),(l=an)?(l=Q3(l,Oi),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:sa!==null?{id:Ro,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},p=C_(l),p.return=d,d.child=p,er=d,an=null)):l=null,l===null)throw la(d);return d.lanes=536870912,null}return mm(d,b)}var w=l.memoizedState;if(w!==null){var D=w.dehydrated;if(eE(d),v)if(d.flags&256)d.flags&=-257,d=HA(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(On||Kc(l,d,p,!1),v=(p&l.childLanes)!==0,On||v){if(b=Wt,b!==null&&(D=Ak(b,p),D!==0&&D!==w.retryLane))throw w.retryLane=D,Tl(l,D),Pr(b,l,D),CE;km(),d=HA(l,d,p)}else l=w.treeContext,an=Li(D.nextSibling),er=d,xt=!0,aa=null,Oi=!1,l!==null&&T_(d,l),d=mm(d,b),d.flags|=4096;return d}return l=ps(l.child,{mode:b.mode,children:b.children}),l.ref=d.ref,d.child=l,l.return=d,l}function gm(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function wE(l,d,p,b,v){return Al(d),p=nE(l,d,p,b,void 0,v),b=rE(),l!==null&&!On?(iE(l,d,v),vs(l,d,v)):(xt&&b&&Py(d),d.flags|=1,nr(l,d,p,v),d.child)}function UA(l,d,p,b,v,w){return Al(d),d.updateQueue=null,p=z_(d,b,p,v),j_(l),b=rE(),l!==null&&!On?(iE(l,d,w),vs(l,d,w)):(xt&&b&&Py(d),d.flags|=1,nr(l,d,p,w),d.child)}function FA(l,d,p,b,v){if(Al(d),d.stateNode===null){var w=qc,D=p.contextType;typeof D=="object"&&D!==null&&(w=tr(D)),w=new p(b,w),d.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=EE,d.stateNode=w,w._reactInternals=d,w=d.stateNode,w.props=b,w.state=d.memoizedState,w.refs={},Wy(d),D=p.contextType,w.context=typeof D=="object"&&D!==null?tr(D):qc,w.state=d.memoizedState,D=p.getDerivedStateFromProps,typeof D=="function"&&(yE(d,p,D,b),w.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&EE.enqueueReplaceState(w,w.state,null),tf(d,b,w,v),ef(),w.state=d.memoizedState),typeof w.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){w=d.stateNode;var H=d.memoizedProps,X=Ll(p,H);w.props=X;var pe=w.context,we=p.contextType;D=qc,typeof we=="object"&&we!==null&&(D=tr(we));var xe=p.getDerivedStateFromProps;we=typeof xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",H=d.pendingProps!==H,we||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H||pe!==D)&&kA(d,w,b,D),ua=!1;var me=d.memoizedState;w.state=me,tf(d,b,w,v),ef(),pe=d.memoizedState,H||me!==pe||ua?(typeof xe=="function"&&(yE(d,p,xe,b),pe=d.memoizedState),(X=ua||xA(d,p,X,b,me,pe,D))?(we||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(d.flags|=4194308)):(typeof w.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=pe),w.props=b,w.state=pe,w.context=D,b=X):(typeof w.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{w=d.stateNode,Ky(l,d),D=d.memoizedProps,we=Ll(p,D),w.props=we,xe=d.pendingProps,me=w.context,pe=p.contextType,X=qc,typeof pe=="object"&&pe!==null&&(X=tr(pe)),H=p.getDerivedStateFromProps,(pe=typeof H=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==xe||me!==X)&&kA(d,w,b,X),ua=!1,me=d.memoizedState,w.state=me,tf(d,b,w,v),ef();var be=d.memoizedState;D!==xe||me!==be||ua||l!==null&&l.dependencies!==null&&Xp(l.dependencies)?(typeof H=="function"&&(yE(d,p,H,b),be=d.memoizedState),(we=ua||xA(d,p,we,b,me,be,X)||l!==null&&l.dependencies!==null&&Xp(l.dependencies))?(pe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(b,be,X),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(b,be,X)),typeof w.componentDidUpdate=="function"&&(d.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===l.memoizedProps&&me===l.memoizedState||(d.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===l.memoizedProps&&me===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=be),w.props=b,w.state=be,w.context=X,b=we):(typeof w.componentDidUpdate!="function"||D===l.memoizedProps&&me===l.memoizedState||(d.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===l.memoizedProps&&me===l.memoizedState||(d.flags|=1024),b=!1)}return w=b,gm(l,d),b=(d.flags&128)!==0,w||b?(w=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:w.render(),d.flags|=1,l!==null&&b?(d.child=Ol(d,l.child,null,v),d.child=Ol(d,null,p,v)):nr(l,d,p,v),d.memoizedState=w.state,l=d.child):l=vs(l,d,v),l}function jA(l,d,p,b){return kl(),d.flags|=256,nr(l,d,p,b),d.child}var SE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function TE(l){return{baseLanes:l,cachePool:M_()}}function xE(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=si),l}function zA(l,d,p){var b=d.pendingProps,v=!1,w=(d.flags&128)!==0,D;if((D=w)||(D=l!==null&&l.memoizedState===null?!1:(kn.current&2)!==0),D&&(v=!0,d.flags&=-129),D=(d.flags&32)!==0,d.flags&=-33,l===null){if(xt){if(v?ha(d):pa(),(l=an)?(l=Q3(l,Oi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:sa!==null?{id:Ro,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},p=C_(l),p.return=d,d.child=p,er=d,an=null)):l=null,l===null)throw la(d);return av(l)?d.lanes=32:d.lanes=536870912,null}var H=b.children;return b=b.fallback,v?(pa(),v=d.mode,H=bm({mode:"hidden",children:H},v),b=xl(b,v,p,null),H.return=d,b.return=d,H.sibling=b,d.child=H,b=d.child,b.memoizedState=TE(p),b.childLanes=xE(l,D,p),d.memoizedState=SE,af(null,b)):(ha(d),kE(d,H))}var X=l.memoizedState;if(X!==null&&(H=X.dehydrated,H!==null)){if(w)d.flags&256?(ha(d),d.flags&=-257,d=_E(l,d,p)):d.memoizedState!==null?(pa(),d.child=l.child,d.flags|=128,d=null):(pa(),H=b.fallback,v=d.mode,b=bm({mode:"visible",children:b.children},v),H=xl(H,v,p,null),H.flags|=2,b.return=d,H.return=d,b.sibling=H,d.child=b,Ol(d,l.child,null,p),b=d.child,b.memoizedState=TE(p),b.childLanes=xE(l,D,p),d.memoizedState=SE,d=af(null,b));else if(ha(d),av(H)){if(D=H.nextSibling&&H.nextSibling.dataset,D)var pe=D.dgst;D=pe,b=Error(r(419)),b.stack="",b.digest=D,Wd({value:b,source:null,stack:null}),d=_E(l,d,p)}else if(On||Kc(l,d,p,!1),D=(p&l.childLanes)!==0,On||D){if(D=Wt,D!==null&&(b=Ak(D,p),b!==0&&b!==X.retryLane))throw X.retryLane=b,Tl(l,b),Pr(D,l,b),CE;sv(H)||km(),d=_E(l,d,p)}else sv(H)?(d.flags|=192,d.child=l.child,d=null):(l=X.treeContext,an=Li(H.nextSibling),er=d,xt=!0,aa=null,Oi=!1,l!==null&&T_(d,l),d=kE(d,b.children),d.flags|=4096);return d}return v?(pa(),H=b.fallback,v=d.mode,X=l.child,pe=X.sibling,b=ps(X,{mode:"hidden",children:b.children}),b.subtreeFlags=X.subtreeFlags&65011712,pe!==null?H=ps(pe,H):(H=xl(H,v,p,null),H.flags|=2),H.return=d,b.return=d,b.sibling=H,d.child=b,af(null,b),b=d.child,H=l.child.memoizedState,H===null?H=TE(p):(v=H.cachePool,v!==null?(X=Mn._currentValue,v=v.parent!==X?{parent:X,pool:X}:v):v=M_(),H={baseLanes:H.baseLanes|p,cachePool:v}),b.memoizedState=H,b.childLanes=xE(l,D,p),d.memoizedState=SE,af(l.child,b)):(ha(d),p=l.child,l=p.sibling,p=ps(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(D=d.deletions,D===null?(d.deletions=[l],d.flags|=16):D.push(l)),d.child=p,d.memoizedState=null,p)}function kE(l,d){return d=bm({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function bm(l,d){return l=ni(22,l,null,d),l.lanes=0,l}function _E(l,d,p){return Ol(d,l.child,null,p),l=kE(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function $A(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),zy(l.return,d,p)}function AE(l,d,p,b,v,w){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:v,treeForkCount:w}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=b,D.tail=p,D.tailMode=v,D.treeForkCount=w)}function VA(l,d,p){var b=d.pendingProps,v=b.revealOrder,w=b.tail;b=b.children;var D=kn.current,H=(D&2)!==0;if(H?(D=D&1|2,d.flags|=128):D&=1,j(kn,D),nr(l,d,b,p),b=xt?Gd:0,!H&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$A(l,p,d);else if(l.tag===19)$A(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(v){case"forwards":for(p=d.child,v=null;p!==null;)l=p.alternate,l!==null&&om(l)===null&&(v=p),p=p.sibling;p=v,p===null?(v=d.child,d.child=null):(v=p.sibling,p.sibling=null),AE(d,!1,v,p,w,b);break;case"backwards":case"unstable_legacy-backwards":for(p=null,v=d.child,d.child=null;v!==null;){if(l=v.alternate,l!==null&&om(l)===null){d.child=v;break}l=v.sibling,v.sibling=p,p=v,v=l}AE(d,!0,p,null,w,b);break;case"together":AE(d,!1,null,null,void 0,b);break;default:d.memoizedState=null}return d.child}function vs(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),ba|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Kc(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=ps(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=ps(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function NE(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Xp(l)))}function WU(l,d,p){switch(d.tag){case 3:ot(d,d.stateNode.containerInfo),ca(d,Mn,l.memoizedState.cache),kl();break;case 27:case 5:Bt(d);break;case 4:ot(d,d.stateNode.containerInfo);break;case 10:ca(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,eE(d),null;break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(ha(d),d.flags|=128,null):(p&d.child.childLanes)!==0?zA(l,d,p):(ha(d),l=vs(l,d,p),l!==null?l.sibling:null);ha(d);break;case 19:var v=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(Kc(l,d,p,!1),b=(p&d.childLanes)!==0),v){if(b)return VA(l,d,p);d.flags|=128}if(v=d.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),j(kn,kn.current),b)break;return null;case 22:return d.lanes=0,BA(l,d,p,d.pendingProps);case 24:ca(d,Mn,l.memoizedState.cache)}return vs(l,d,p)}function qA(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)On=!0;else{if(!NE(l,p)&&(d.flags&128)===0)return On=!1,WU(l,d,p);On=(l.flags&131072)!==0}else On=!1,xt&&(d.flags&1048576)!==0&&S_(d,Gd,d.index);switch(d.lanes=0,d.tag){case 16:e:{var b=d.pendingProps;if(l=Ml(d.elementType),d.type=l,typeof l=="function")Ly(l)?(b=Ll(l,b),d.tag=1,d=FA(null,d,l,b,p)):(d.tag=0,d=wE(null,d,l,b,p));else{if(l!=null){var v=l.$$typeof;if(v===O){d.tag=11,d=DA(null,d,l,b,p);break e}else if(v===L){d.tag=14,d=LA(null,d,l,b,p);break e}}throw d=J(l)||l,Error(r(306,d,""))}}return d;case 0:return wE(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,v=Ll(b,d.pendingProps),FA(l,d,b,v,p);case 3:e:{if(ot(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var w=d.memoizedState;v=w.element,Ky(l,d),tf(d,b,null,p);var D=d.memoizedState;if(b=D.cache,ca(d,Mn,b),b!==w.cache&&$y(d,[Mn],p,!0),ef(),b=D.element,w.isDehydrated)if(w={element:b,isDehydrated:!1,cache:D.cache},d.updateQueue.baseState=w,d.memoizedState=w,d.flags&256){d=jA(l,d,b,p);break e}else if(b!==v){v=Ni(Error(r(424)),d),Wd(v),d=jA(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(an=Li(l.firstChild),er=d,xt=!0,aa=null,Oi=!0,p=B_(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(kl(),b===v){d=vs(l,d,p);break e}nr(l,d,b,p)}d=d.child}return d;case 26:return gm(l,d),l===null?(p=nN(d.type,null,d.pendingProps,null))?d.memoizedState=p:xt||(p=d.type,l=d.pendingProps,b=Dm(Le.current).createElement(p),b[Jn]=d,b[Rr]=l,rr(b,p,l),qn(b),d.stateNode=b):d.memoizedState=nN(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Bt(d),l===null&&xt&&(b=d.stateNode=J3(d.type,d.pendingProps,Le.current),er=d,Oi=!0,v=an,wa(d.type)?(lv=v,an=Li(b.firstChild)):an=v),nr(l,d,d.pendingProps.children,p),gm(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&xt&&((v=b=an)&&(b=TF(b,d.type,d.pendingProps,Oi),b!==null?(d.stateNode=b,er=d,an=Li(b.firstChild),Oi=!1,v=!0):v=!1),v||la(d)),Bt(d),v=d.type,w=d.pendingProps,D=l!==null?l.memoizedProps:null,b=w.children,rv(v,w)?b=null:D!==null&&rv(v,D)&&(d.flags|=32),d.memoizedState!==null&&(v=nE(l,d,UU,null,null,p),wf._currentValue=v),gm(l,d),nr(l,d,b,p),d.child;case 6:return l===null&&xt&&((l=p=an)&&(p=xF(p,d.pendingProps,Oi),p!==null?(d.stateNode=p,er=d,an=null,l=!0):l=!1),l||la(d)),null;case 13:return zA(l,d,p);case 4:return ot(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=Ol(d,null,b,p):nr(l,d,b,p),d.child;case 11:return DA(l,d,d.type,d.pendingProps,p);case 7:return nr(l,d,d.pendingProps,p),d.child;case 8:return nr(l,d,d.pendingProps.children,p),d.child;case 12:return nr(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,ca(d,d.type,b.value),nr(l,d,b.children,p),d.child;case 9:return v=d.type._context,b=d.pendingProps.children,Al(d),v=tr(v),b=b(v),d.flags|=1,nr(l,d,b,p),d.child;case 14:return LA(l,d,d.type,d.pendingProps,p);case 15:return IA(l,d,d.type,d.pendingProps,p);case 19:return VA(l,d,p);case 31:return GU(l,d,p);case 22:return BA(l,d,p,d.pendingProps);case 24:return Al(d),b=tr(Mn),l===null?(v=Yy(),v===null&&(v=Wt,w=Vy(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=p),v=w),d.memoizedState={parent:b,cache:v},Wy(d),ca(d,Mn,v)):((l.lanes&p)!==0&&(Ky(l,d),tf(d,null,null,p),ef()),v=l.memoizedState,w=d.memoizedState,v.parent!==b?(v={parent:b,cache:b},d.memoizedState=v,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=v),ca(d,Mn,b)):(b=w.cache,ca(d,Mn,b),b!==v.cache&&$y(d,[Mn],p,!0))),nr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Cs(l){l.flags|=4}function ME(l,d,p,b,v){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(v&335544128)===v)if(l.stateNode.complete)l.flags|=8192;else if(y3())l.flags|=8192;else throw Rl=tm,Gy}else l.flags&=-16777217}function YA(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!aN(d))if(y3())l.flags|=8192;else throw Rl=tm,Gy}function ym(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?xk():536870912,l.lanes|=d,au|=d)}function lf(l,d){if(!xt)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function ln(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var v=l.child;v!==null;)p|=v.lanes|v.childLanes,b|=v.subtreeFlags&65011712,b|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)p|=v.lanes|v.childLanes,b|=v.subtreeFlags,b|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function KU(l,d,p){var b=d.pendingProps;switch(Hy(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(d),null;case 1:return ln(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),bs(Mn),Ye(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Wc(d)?Cs(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Fy())),ln(d),null;case 26:var v=d.type,w=d.memoizedState;return l===null?(Cs(d),w!==null?(ln(d),YA(d,w)):(ln(d),ME(d,v,null,b,p))):w?w!==l.memoizedState?(Cs(d),ln(d),YA(d,w)):(ln(d),d.flags&=-16777217):(l=l.memoizedProps,l!==b&&Cs(d),ln(d),ME(d,v,l,b,p)),null;case 27:if(mn(d),p=Le.current,v=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Cs(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return ln(d),null}l=Se.current,Wc(d)?x_(d):(l=J3(v,b,p),d.stateNode=l,Cs(d))}return ln(d),null;case 5:if(mn(d),v=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Cs(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return ln(d),null}if(w=Se.current,Wc(d))x_(d);else{var D=Dm(Le.current);switch(w){case 1:w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=D.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof b.is=="string"?D.createElement("select",{is:b.is}):D.createElement("select"),b.multiple?w.multiple=!0:b.size&&(w.size=b.size);break;default:w=typeof b.is=="string"?D.createElement(v,{is:b.is}):D.createElement(v)}}w[Jn]=d,w[Rr]=b;e:for(D=d.child;D!==null;){if(D.tag===5||D.tag===6)w.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===d)break e;for(;D.sibling===null;){if(D.return===null||D.return===d)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}d.stateNode=w;e:switch(rr(w,v,b),v){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Cs(d)}}return ln(d),ME(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&Cs(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Le.current,Wc(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,v=er,v!==null)switch(v.tag){case 27:case 5:b=v.memoizedProps}l[Jn]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||z3(l.nodeValue,p)),l||la(d,!0)}else l=Dm(l).createTextNode(b),l[Jn]=d,d.stateNode=l}return ln(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(b=Wc(d),p!==null){if(l===null){if(!b)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Jn]=d}else kl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ln(d),l=!1}else p=Fy(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(ii(d),d):(ii(d),null);if((d.flags&128)!==0)throw Error(r(558))}return ln(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=Wc(d),b!==null&&b.dehydrated!==null){if(l===null){if(!v)throw Error(r(318));if(v=d.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Jn]=d}else kl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ln(d),v=!1}else v=Fy(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return d.flags&256?(ii(d),d):(ii(d),null)}return ii(d),(d.flags&128)!==0?(d.lanes=p,d):(p=b!==null,l=l!==null&&l.memoizedState!==null,p&&(b=d.child,v=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(v=b.alternate.memoizedState.cachePool.pool),w=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(w=b.memoizedState.cachePool.pool),w!==v&&(b.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),ym(d,d.updateQueue),ln(d),null);case 4:return Ye(),l===null&&ZE(d.stateNode.containerInfo),ln(d),null;case 10:return bs(d.type),ln(d),null;case 19:if(ie(kn),b=d.memoizedState,b===null)return ln(d),null;if(v=(d.flags&128)!==0,w=b.rendering,w===null)if(v)lf(b,!1);else{if(vn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(w=om(l),w!==null){for(d.flags|=128,lf(b,!1),l=w.updateQueue,d.updateQueue=l,ym(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)v_(p,l),p=p.sibling;return j(kn,kn.current&1|2),xt&&ms(d,b.treeForkCount),d.child}l=l.sibling}b.tail!==null&&oe()>Sm&&(d.flags|=128,v=!0,lf(b,!1),d.lanes=4194304)}else{if(!v)if(l=om(w),l!==null){if(d.flags|=128,v=!0,l=l.updateQueue,d.updateQueue=l,ym(d,l),lf(b,!0),b.tail===null&&b.tailMode==="hidden"&&!w.alternate&&!xt)return ln(d),null}else 2*oe()-b.renderingStartTime>Sm&&p!==536870912&&(d.flags|=128,v=!0,lf(b,!1),d.lanes=4194304);b.isBackwards?(w.sibling=d.child,d.child=w):(l=b.last,l!==null?l.sibling=w:d.child=w,b.last=w)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=oe(),l.sibling=null,p=kn.current,j(kn,v?p&1|2:p&1),xt&&ms(d,b.treeForkCount),l):(ln(d),null);case 22:case 23:return ii(d),Jy(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(ln(d),d.subtreeFlags&6&&(d.flags|=8192)):ln(d),p=d.updateQueue,p!==null&&ym(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&ie(Nl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),bs(Mn),ln(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function QU(l,d){switch(Hy(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return bs(Mn),Ye(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return mn(d),null;case 31:if(d.memoizedState!==null){if(ii(d),d.alternate===null)throw Error(r(340));kl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(ii(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));kl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ie(kn),null;case 4:return Ye(),null;case 10:return bs(d.type),null;case 22:case 23:return ii(d),Jy(),l!==null&&ie(Nl),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return bs(Mn),null;case 25:return null;default:return null}}function GA(l,d){switch(Hy(d),d.tag){case 3:bs(Mn),Ye();break;case 26:case 27:case 5:mn(d);break;case 4:Ye();break;case 31:d.memoizedState!==null&&ii(d);break;case 13:ii(d);break;case 19:ie(kn);break;case 10:bs(d.type);break;case 22:case 23:ii(d),Jy(),l!==null&&ie(Nl);break;case 24:bs(Mn)}}function cf(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var v=b.next;p=v;do{if((p.tag&l)===l){b=void 0;var w=p.create,D=p.inst;b=w(),D.destroy=b}p=p.next}while(p!==v)}}catch(H){zt(d,d.return,H)}}function ma(l,d,p){try{var b=d.updateQueue,v=b!==null?b.lastEffect:null;if(v!==null){var w=v.next;b=w;do{if((b.tag&l)===l){var D=b.inst,H=D.destroy;if(H!==void 0){D.destroy=void 0,v=d;var X=p,pe=H;try{pe()}catch(we){zt(v,X,we)}}}b=b.next}while(b!==w)}}catch(we){zt(d,d.return,we)}}function WA(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{H_(d,p)}catch(b){zt(l,l.return,b)}}}function KA(l,d,p){p.props=Ll(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){zt(l,d,b)}}function uf(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(v){zt(l,d,v)}}function Do(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(v){zt(l,d,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){zt(l,d,v)}else p.current=null}function QA(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(v){zt(l,l.return,v)}}function RE(l,d,p){try{var b=l.stateNode;yF(b,l.type,p,d),b[Rr]=d}catch(v){zt(l,l.return,v)}}function XA(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&wa(l.type)||l.tag===4}function OE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||XA(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&wa(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function DE(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=fs));else if(b!==4&&(b===27&&wa(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(DE(l,d,p),l=l.sibling;l!==null;)DE(l,d,p),l=l.sibling}function Em(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&wa(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Em(l,d,p),l=l.sibling;l!==null;)Em(l,d,p),l=l.sibling}function ZA(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,v=d.attributes;v.length;)d.removeAttributeNode(v[0]);rr(d,b,p),d[Jn]=l,d[Rr]=p}catch(w){zt(l,l.return,w)}}var ws=!1,Dn=!1,LE=!1,JA=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function XU(l,d){if(l=l.containerInfo,tv=Fm,l=d_(l),_y(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var v=b.anchorOffset,w=b.focusNode;b=b.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var D=0,H=-1,X=-1,pe=0,we=0,xe=l,me=null;t:for(;;){for(var be;xe!==p||v!==0&&xe.nodeType!==3||(H=D+v),xe!==w||b!==0&&xe.nodeType!==3||(X=D+b),xe.nodeType===3&&(D+=xe.nodeValue.length),(be=xe.firstChild)!==null;)me=xe,xe=be;for(;;){if(xe===l)break t;if(me===p&&++pe===v&&(H=D),me===w&&++we===b&&(X=D),(be=xe.nextSibling)!==null)break;xe=me,me=xe.parentNode}xe=be}p=H===-1||X===-1?null:{start:H,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(nv={focusedElem:l,selectionRange:p},Fm=!1,Yn=d;Yn!==null;)if(d=Yn,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Yn=l;else for(;Yn!==null;){switch(d=Yn,w=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)v=l[p],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&w!==null){l=void 0,p=d,v=w.memoizedProps,w=w.memoizedState,b=p.stateNode;try{var je=Ll(p.type,v);l=b.getSnapshotBeforeUpdate(je,w),b.__reactInternalSnapshotBeforeUpdate=l}catch(Je){zt(p,p.return,Je)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)ov(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ov(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Yn=l;break}Yn=d.return}}function e3(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:Ts(l,p),b&4&&cf(5,p);break;case 1:if(Ts(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(D){zt(p,p.return,D)}else{var v=Ll(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(v,d,l.__reactInternalSnapshotBeforeUpdate)}catch(D){zt(p,p.return,D)}}b&64&&WA(p),b&512&&uf(p,p.return);break;case 3:if(Ts(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{H_(l,d)}catch(D){zt(p,p.return,D)}}break;case 27:d===null&&b&4&&ZA(p);case 26:case 5:Ts(l,p),d===null&&b&4&&QA(p),b&512&&uf(p,p.return);break;case 12:Ts(l,p);break;case 31:Ts(l,p),b&4&&r3(l,p);break;case 13:Ts(l,p),b&4&&i3(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=sF.bind(null,p),kF(l,p))));break;case 22:if(b=p.memoizedState!==null||ws,!b){d=d!==null&&d.memoizedState!==null||Dn,v=ws;var w=Dn;ws=b,(Dn=d)&&!w?xs(l,p,(p.subtreeFlags&8772)!==0):Ts(l,p),ws=v,Dn=w}break;case 30:break;default:Ts(l,p)}}function t3(l){var d=l.alternate;d!==null&&(l.alternate=null,t3(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&uy(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var hn=null,Dr=!1;function Ss(l,d,p){for(p=p.child;p!==null;)n3(l,d,p),p=p.sibling}function n3(l,d,p){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(yn,p)}catch{}switch(p.tag){case 26:Dn||Do(p,d),Ss(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Dn||Do(p,d);var b=hn,v=Dr;wa(p.type)&&(hn=p.stateNode,Dr=!1),Ss(l,d,p),Ef(p.stateNode),hn=b,Dr=v;break;case 5:Dn||Do(p,d);case 6:if(b=hn,v=Dr,hn=null,Ss(l,d,p),hn=b,Dr=v,hn!==null)if(Dr)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(p.stateNode)}catch(w){zt(p,d,w)}else try{hn.removeChild(p.stateNode)}catch(w){zt(p,d,w)}break;case 18:hn!==null&&(Dr?(l=hn,W3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),mu(l)):W3(hn,p.stateNode));break;case 4:b=hn,v=Dr,hn=p.stateNode.containerInfo,Dr=!0,Ss(l,d,p),hn=b,Dr=v;break;case 0:case 11:case 14:case 15:ma(2,p,d),Dn||ma(4,p,d),Ss(l,d,p);break;case 1:Dn||(Do(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&KA(p,d,b)),Ss(l,d,p);break;case 21:Ss(l,d,p);break;case 22:Dn=(b=Dn)||p.memoizedState!==null,Ss(l,d,p),Dn=b;break;default:Ss(l,d,p)}}function r3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{mu(l)}catch(p){zt(d,d.return,p)}}}function i3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{mu(l)}catch(p){zt(d,d.return,p)}}function ZU(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new JA),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new JA),d;default:throw Error(r(435,l.tag))}}function vm(l,d){var p=ZU(l);d.forEach(function(b){if(!p.has(b)){p.add(b);var v=aF.bind(null,l,b);b.then(v,v)}})}function Lr(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var v=p[b],w=l,D=d,H=D;e:for(;H!==null;){switch(H.tag){case 27:if(wa(H.type)){hn=H.stateNode,Dr=!1;break e}break;case 5:hn=H.stateNode,Dr=!1;break e;case 3:case 4:hn=H.stateNode.containerInfo,Dr=!0;break e}H=H.return}if(hn===null)throw Error(r(160));n3(w,D,v),hn=null,Dr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)o3(d,l),d=d.sibling}var no=null;function o3(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Lr(d,l),Ir(l),b&4&&(ma(3,l,l.return),cf(3,l),ma(5,l,l.return));break;case 1:Lr(d,l),Ir(l),b&512&&(Dn||p===null||Do(p,p.return)),b&64&&ws&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var v=no;if(Lr(d,l),Ir(l),b&512&&(Dn||p===null||Do(p,p.return)),b&4){var w=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,v=v.ownerDocument||v;t:switch(b){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Bd]||w[Jn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(b),v.head.insertBefore(w,v.querySelector("head > title"))),rr(w,b,p),w[Jn]=l,qn(w),b=w;break e;case"link":var D=oN("link","href",v).get(b+(p.href||""));if(D){for(var H=0;H<D.length;H++)if(w=D[H],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){D.splice(H,1);break t}}w=v.createElement(b),rr(w,b,p),v.head.appendChild(w);break;case"meta":if(D=oN("meta","content",v).get(b+(p.content||""))){for(H=0;H<D.length;H++)if(w=D[H],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){D.splice(H,1);break t}}w=v.createElement(b),rr(w,b,p),v.head.appendChild(w);break;default:throw Error(r(468,b))}w[Jn]=l,qn(w),b=w}l.stateNode=b}else sN(v,l.type,l.stateNode);else l.stateNode=iN(v,b,l.memoizedProps);else w!==b?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,b===null?sN(v,l.type,l.stateNode):iN(v,b,l.memoizedProps)):b===null&&l.stateNode!==null&&RE(l,l.memoizedProps,p.memoizedProps)}break;case 27:Lr(d,l),Ir(l),b&512&&(Dn||p===null||Do(p,p.return)),p!==null&&b&4&&RE(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Lr(d,l),Ir(l),b&512&&(Dn||p===null||Do(p,p.return)),l.flags&32){v=l.stateNode;try{Hc(v,"")}catch(je){zt(l,l.return,je)}}b&4&&l.stateNode!=null&&(v=l.memoizedProps,RE(l,v,p!==null?p.memoizedProps:v)),b&1024&&(LE=!0);break;case 6:if(Lr(d,l),Ir(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(je){zt(l,l.return,je)}}break;case 3:if(Bm=null,v=no,no=Lm(d.containerInfo),Lr(d,l),no=v,Ir(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{mu(d.containerInfo)}catch(je){zt(l,l.return,je)}LE&&(LE=!1,s3(l));break;case 4:b=no,no=Lm(l.stateNode.containerInfo),Lr(d,l),Ir(l),no=b;break;case 12:Lr(d,l),Ir(l);break;case 31:Lr(d,l),Ir(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,vm(l,b)));break;case 13:Lr(d,l),Ir(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(wm=oe()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,vm(l,b)));break;case 22:v=l.memoizedState!==null;var X=p!==null&&p.memoizedState!==null,pe=ws,we=Dn;if(ws=pe||v,Dn=we||X,Lr(d,l),Dn=we,ws=pe,Ir(l),b&8192)e:for(d=l.stateNode,d._visibility=v?d._visibility&-2:d._visibility|1,v&&(p===null||X||ws||Dn||Il(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){X=p=d;try{if(w=X.stateNode,v)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{H=X.stateNode;var xe=X.memoizedProps.style,me=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;H.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(je){zt(X,X.return,je)}}}else if(d.tag===6){if(p===null){X=d;try{X.stateNode.nodeValue=v?"":X.memoizedProps}catch(je){zt(X,X.return,je)}}}else if(d.tag===18){if(p===null){X=d;try{var be=X.stateNode;v?K3(be,!0):K3(X.stateNode,!1)}catch(je){zt(X,X.return,je)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,vm(l,p))));break;case 19:Lr(d,l),Ir(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,vm(l,b)));break;case 30:break;case 21:break;default:Lr(d,l),Ir(l)}}function Ir(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(XA(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var v=p.stateNode,w=OE(l);Em(l,w,v);break;case 5:var D=p.stateNode;p.flags&32&&(Hc(D,""),p.flags&=-33);var H=OE(l);Em(l,H,D);break;case 3:case 4:var X=p.stateNode.containerInfo,pe=OE(l);DE(l,pe,X);break;default:throw Error(r(161))}}catch(we){zt(l,l.return,we)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function s3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;s3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Ts(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)e3(l,d.alternate,d),d=d.sibling}function Il(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:ma(4,d,d.return),Il(d);break;case 1:Do(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&KA(d,d.return,p),Il(d);break;case 27:Ef(d.stateNode);case 26:case 5:Do(d,d.return),Il(d);break;case 22:d.memoizedState===null&&Il(d);break;case 30:Il(d);break;default:Il(d)}l=l.sibling}}function xs(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,v=l,w=d,D=w.flags;switch(w.tag){case 0:case 11:case 15:xs(v,w,p),cf(4,w);break;case 1:if(xs(v,w,p),b=w,v=b.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(pe){zt(b,b.return,pe)}if(b=w,v=b.updateQueue,v!==null){var H=b.stateNode;try{var X=v.shared.hiddenCallbacks;if(X!==null)for(v.shared.hiddenCallbacks=null,v=0;v<X.length;v++)P_(X[v],H)}catch(pe){zt(b,b.return,pe)}}p&&D&64&&WA(w),uf(w,w.return);break;case 27:ZA(w);case 26:case 5:xs(v,w,p),p&&b===null&&D&4&&QA(w),uf(w,w.return);break;case 12:xs(v,w,p);break;case 31:xs(v,w,p),p&&D&4&&r3(v,w);break;case 13:xs(v,w,p),p&&D&4&&i3(v,w);break;case 22:w.memoizedState===null&&xs(v,w,p),uf(w,w.return);break;case 30:break;default:xs(v,w,p)}d=d.sibling}}function IE(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Kd(p))}function BE(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Kd(l))}function ro(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)a3(l,d,p,b),d=d.sibling}function a3(l,d,p,b){var v=d.flags;switch(d.tag){case 0:case 11:case 15:ro(l,d,p,b),v&2048&&cf(9,d);break;case 1:ro(l,d,p,b);break;case 3:ro(l,d,p,b),v&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Kd(l)));break;case 12:if(v&2048){ro(l,d,p,b),l=d.stateNode;try{var w=d.memoizedProps,D=w.id,H=w.onPostCommit;typeof H=="function"&&H(D,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(X){zt(d,d.return,X)}}else ro(l,d,p,b);break;case 31:ro(l,d,p,b);break;case 13:ro(l,d,p,b);break;case 23:break;case 22:w=d.stateNode,D=d.alternate,d.memoizedState!==null?w._visibility&2?ro(l,d,p,b):df(l,d):w._visibility&2?ro(l,d,p,b):(w._visibility|=2,iu(l,d,p,b,(d.subtreeFlags&10256)!==0||!1)),v&2048&&IE(D,d);break;case 24:ro(l,d,p,b),v&2048&&BE(d.alternate,d);break;default:ro(l,d,p,b)}}function iu(l,d,p,b,v){for(v=v&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var w=l,D=d,H=p,X=b,pe=D.flags;switch(D.tag){case 0:case 11:case 15:iu(w,D,H,X,v),cf(8,D);break;case 23:break;case 22:var we=D.stateNode;D.memoizedState!==null?we._visibility&2?iu(w,D,H,X,v):df(w,D):(we._visibility|=2,iu(w,D,H,X,v)),v&&pe&2048&&IE(D.alternate,D);break;case 24:iu(w,D,H,X,v),v&&pe&2048&&BE(D.alternate,D);break;default:iu(w,D,H,X,v)}d=d.sibling}}function df(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,v=b.flags;switch(b.tag){case 22:df(p,b),v&2048&&IE(b.alternate,b);break;case 24:df(p,b),v&2048&&BE(b.alternate,b);break;default:df(p,b)}d=d.sibling}}var ff=8192;function ou(l,d,p){if(l.subtreeFlags&ff)for(l=l.child;l!==null;)l3(l,d,p),l=l.sibling}function l3(l,d,p){switch(l.tag){case 26:ou(l,d,p),l.flags&ff&&l.memoizedState!==null&&HF(p,no,l.memoizedState,l.memoizedProps);break;case 5:ou(l,d,p);break;case 3:case 4:var b=no;no=Lm(l.stateNode.containerInfo),ou(l,d,p),no=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=ff,ff=16777216,ou(l,d,p),ff=b):ou(l,d,p));break;default:ou(l,d,p)}}function c3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function hf(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];Yn=b,d3(b,l)}c3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)u3(l),l=l.sibling}function u3(l){switch(l.tag){case 0:case 11:case 15:hf(l),l.flags&2048&&ma(9,l,l.return);break;case 3:hf(l);break;case 12:hf(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Cm(l)):hf(l);break;default:hf(l)}}function Cm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];Yn=b,d3(b,l)}c3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:ma(8,d,d.return),Cm(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,Cm(d));break;default:Cm(d)}l=l.sibling}}function d3(l,d){for(;Yn!==null;){var p=Yn;switch(p.tag){case 0:case 11:case 15:ma(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Kd(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,Yn=b;else e:for(p=l;Yn!==null;){b=Yn;var v=b.sibling,w=b.return;if(t3(b),b===p){Yn=null;break e}if(v!==null){v.return=w,Yn=v;break e}Yn=w}}}var JU={getCacheForType:function(l){var d=tr(Mn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return tr(Mn).controller.signal}},eF=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Wt=null,yt=null,Ct=0,jt=0,oi=null,ga=!1,su=!1,PE=!1,ks=0,vn=0,ba=0,Bl=0,HE=0,si=0,au=0,pf=null,Br=null,UE=!1,wm=0,f3=0,Sm=1/0,Tm=null,ya=null,jn=0,Ea=null,lu=null,_s=0,FE=0,jE=null,h3=null,mf=0,zE=null;function ai(){return(Pt&2)!==0&&Ct!==0?Ct&-Ct:W.T!==null?WE():Nk()}function p3(){if(si===0)if((Ct&536870912)===0||xt){var l=Op;Op<<=1,(Op&3932160)===0&&(Op=262144),si=l}else si=536870912;return l=ri.current,l!==null&&(l.flags|=32),si}function Pr(l,d,p){(l===Wt&&(jt===2||jt===9)||l.cancelPendingCommit!==null)&&(cu(l,0),va(l,Ct,si,!1)),Id(l,p),((Pt&2)===0||l!==Wt)&&(l===Wt&&((Pt&2)===0&&(Bl|=p),vn===4&&va(l,Ct,si,!1)),Lo(l))}function m3(l,d,p){if((Pt&6)!==0)throw Error(r(327));var b=!p&&(d&127)===0&&(d&l.expiredLanes)===0||Ld(l,d),v=b?rF(l,d):VE(l,d,!0),w=b;do{if(v===0){su&&!b&&va(l,d,0,!1);break}else{if(p=l.current.alternate,w&&!tF(p)){v=VE(l,d,!1),w=!1;continue}if(v===2){if(w=d,l.errorRecoveryDisabledLanes&w)var D=0;else D=l.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){d=D;e:{var H=l;v=pf;var X=H.current.memoizedState.isDehydrated;if(X&&(cu(H,D).flags|=256),D=VE(H,D,!1),D!==2){if(PE&&!X){H.errorRecoveryDisabledLanes|=w,Bl|=w,v=4;break e}w=Br,Br=v,w!==null&&(Br===null?Br=w:Br.push.apply(Br,w))}v=D}if(w=!1,v!==2)continue}}if(v===1){cu(l,0),va(l,d,0,!0);break}e:{switch(b=l,w=v,w){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:va(b,d,si,!ga);break e;case 2:Br=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(v=wm+300-oe(),10<v)){if(va(b,d,si,!ga),Lp(b,0,!0)!==0)break e;_s=d,b.timeoutHandle=Y3(g3.bind(null,b,p,Br,Tm,UE,d,si,Bl,au,ga,w,"Throttled",-0,0),v);break e}g3(b,p,Br,Tm,UE,d,si,Bl,au,ga,w,null,-0,0)}}break}while(!0);Lo(l)}function g3(l,d,p,b,v,w,D,H,X,pe,we,xe,me,be){if(l.timeoutHandle=-1,xe=d.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fs},l3(d,w,xe);var je=(w&62914560)===w?wm-oe():(w&4194048)===w?f3-oe():0;if(je=UF(xe,je),je!==null){_s=w,l.cancelPendingCommit=je(T3.bind(null,l,d,w,p,b,v,D,H,X,we,xe,null,me,be)),va(l,w,D,!pe);return}}T3(l,d,w,p,b,v,D,H,X)}function tF(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var v=p[b],w=v.getSnapshot;v=v.value;try{if(!ti(w(),v))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function va(l,d,p,b){d&=~HE,d&=~Bl,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var v=d;0<v;){var w=31-At(v),D=1<<w;b[w]=-1,v&=~D}p!==0&&kk(l,p,d)}function xm(){return(Pt&6)===0?(gf(0),!1):!0}function $E(){if(yt!==null){if(jt===0)var l=yt.return;else l=yt,gs=_l=null,oE(l),Jc=null,Xd=0,l=yt;for(;l!==null;)GA(l.alternate,l),l=l.return;yt=null}}function cu(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,CF(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),_s=0,$E(),Wt=l,yt=p=ps(l.current,null),Ct=d,jt=0,oi=null,ga=!1,su=Ld(l,d),PE=!1,au=si=HE=Bl=ba=vn=0,Br=pf=null,UE=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var v=31-At(b),w=1<<v;d|=l[v],b&=~w}return ks=d,Yp(),p}function b3(l,d){lt=null,W.H=sf,d===Zc||d===em?(d=D_(),jt=3):d===Gy?(d=D_(),jt=4):jt=d===CE?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,oi=d,yt===null&&(vn=1,pm(l,Ni(d,l.current)))}function y3(){var l=ri.current;return l===null?!0:(Ct&4194048)===Ct?Di===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?l===Di:!1}function E3(){var l=W.H;return W.H=sf,l===null?sf:l}function v3(){var l=W.A;return W.A=JU,l}function km(){vn=4,ga||(Ct&4194048)!==Ct&&ri.current!==null||(su=!0),(ba&134217727)===0&&(Bl&134217727)===0||Wt===null||va(Wt,Ct,si,!1)}function VE(l,d,p){var b=Pt;Pt|=2;var v=E3(),w=v3();(Wt!==l||Ct!==d)&&(Tm=null,cu(l,d)),d=!1;var D=vn;e:do try{if(jt!==0&&yt!==null){var H=yt,X=oi;switch(jt){case 8:$E(),D=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(d=!0);var pe=jt;if(jt=0,oi=null,uu(l,H,X,pe),p&&su){D=0;break e}break;default:pe=jt,jt=0,oi=null,uu(l,H,X,pe)}}nF(),D=vn;break}catch(we){b3(l,we)}while(!0);return d&&l.shellSuspendCounter++,gs=_l=null,Pt=b,W.H=v,W.A=w,yt===null&&(Wt=null,Ct=0,Yp()),D}function nF(){for(;yt!==null;)C3(yt)}function rF(l,d){var p=Pt;Pt|=2;var b=E3(),v=v3();Wt!==l||Ct!==d?(Tm=null,Sm=oe()+500,cu(l,d)):su=Ld(l,d);e:do try{if(jt!==0&&yt!==null){d=yt;var w=oi;t:switch(jt){case 1:jt=0,oi=null,uu(l,d,w,1);break;case 2:case 9:if(R_(w)){jt=0,oi=null,w3(d);break}d=function(){jt!==2&&jt!==9||Wt!==l||(jt=7),Lo(l)},w.then(d,d);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:R_(w)?(jt=0,oi=null,w3(d)):(jt=0,oi=null,uu(l,d,w,7));break;case 5:var D=null;switch(yt.tag){case 26:D=yt.memoizedState;case 5:case 27:var H=yt;if(D?aN(D):H.stateNode.complete){jt=0,oi=null;var X=H.sibling;if(X!==null)yt=X;else{var pe=H.return;pe!==null?(yt=pe,_m(pe)):yt=null}break t}}jt=0,oi=null,uu(l,d,w,5);break;case 6:jt=0,oi=null,uu(l,d,w,6);break;case 8:$E(),vn=6;break e;default:throw Error(r(462))}}iF();break}catch(we){b3(l,we)}while(!0);return gs=_l=null,W.H=b,W.A=v,Pt=p,yt!==null?0:(Wt=null,Ct=0,Yp(),vn)}function iF(){for(;yt!==null&&!P();)C3(yt)}function C3(l){var d=qA(l.alternate,l,ks);l.memoizedProps=l.pendingProps,d===null?_m(l):yt=d}function w3(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=UA(p,d,d.pendingProps,d.type,void 0,Ct);break;case 11:d=UA(p,d,d.pendingProps,d.type.render,d.ref,Ct);break;case 5:oE(d);default:GA(p,d),d=yt=v_(d,ks),d=qA(p,d,ks)}l.memoizedProps=l.pendingProps,d===null?_m(l):yt=d}function uu(l,d,p,b){gs=_l=null,oE(d),Jc=null,Xd=0;var v=d.return;try{if(YU(l,v,d,p,Ct)){vn=1,pm(l,Ni(p,l.current)),yt=null;return}}catch(w){if(v!==null)throw yt=v,w;vn=1,pm(l,Ni(p,l.current)),yt=null;return}d.flags&32768?(xt||b===1?l=!0:su||(Ct&536870912)!==0?l=!1:(ga=l=!0,(b===2||b===9||b===3||b===6)&&(b=ri.current,b!==null&&b.tag===13&&(b.flags|=16384))),S3(d,l)):_m(d)}function _m(l){var d=l;do{if((d.flags&32768)!==0){S3(d,ga);return}l=d.return;var p=KU(d.alternate,d,ks);if(p!==null){yt=p;return}if(d=d.sibling,d!==null){yt=d;return}yt=d=l}while(d!==null);vn===0&&(vn=5)}function S3(l,d){do{var p=QU(l.alternate,l);if(p!==null){p.flags&=32767,yt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){yt=l;return}yt=l=p}while(l!==null);vn=6,yt=null}function T3(l,d,p,b,v,w,D,H,X){l.cancelPendingCommit=null;do Am();while(jn!==0);if((Pt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(w=d.lanes|d.childLanes,w|=Oy,PH(l,p,w,D,H,X),l===Wt&&(yt=Wt=null,Ct=0),lu=d,Ea=l,_s=p,FE=w,jE=v,h3=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,lF(Be,function(){return N3(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=W.T,W.T=null,v=Z.p,Z.p=2,D=Pt,Pt|=4;try{XU(l,d,p)}finally{Pt=D,Z.p=v,W.T=b}}jn=1,x3(),k3(),_3()}}function x3(){if(jn===1){jn=0;var l=Ea,d=lu,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=W.T,W.T=null;var b=Z.p;Z.p=2;var v=Pt;Pt|=4;try{o3(d,l);var w=nv,D=d_(l.containerInfo),H=w.focusedElem,X=w.selectionRange;if(D!==H&&H&&H.ownerDocument&&u_(H.ownerDocument.documentElement,H)){if(X!==null&&_y(H)){var pe=X.start,we=X.end;if(we===void 0&&(we=pe),"selectionStart"in H)H.selectionStart=pe,H.selectionEnd=Math.min(we,H.value.length);else{var xe=H.ownerDocument||document,me=xe&&xe.defaultView||window;if(me.getSelection){var be=me.getSelection(),je=H.textContent.length,Je=Math.min(X.start,je),Yt=X.end===void 0?Je:Math.min(X.end,je);!be.extend&&Je>Yt&&(D=Yt,Yt=Je,Je=D);var le=c_(H,Je),ne=c_(H,Yt);if(le&&ne&&(be.rangeCount!==1||be.anchorNode!==le.node||be.anchorOffset!==le.offset||be.focusNode!==ne.node||be.focusOffset!==ne.offset)){var he=xe.createRange();he.setStart(le.node,le.offset),be.removeAllRanges(),Je>Yt?(be.addRange(he),be.extend(ne.node,ne.offset)):(he.setEnd(ne.node,ne.offset),be.addRange(he))}}}}for(xe=[],be=H;be=be.parentNode;)be.nodeType===1&&xe.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<xe.length;H++){var Te=xe[H];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Fm=!!tv,nv=tv=null}finally{Pt=v,Z.p=b,W.T=p}}l.current=d,jn=2}}function k3(){if(jn===2){jn=0;var l=Ea,d=lu,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=W.T,W.T=null;var b=Z.p;Z.p=2;var v=Pt;Pt|=4;try{e3(l,d.alternate,d)}finally{Pt=v,Z.p=b,W.T=p}}jn=3}}function _3(){if(jn===4||jn===3){jn=0,ee();var l=Ea,d=lu,p=_s,b=h3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?jn=5:(jn=0,lu=Ea=null,A3(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(ya=null),ly(p),d=d.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(yn,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=W.T,v=Z.p,Z.p=2,W.T=null;try{for(var w=l.onRecoverableError,D=0;D<b.length;D++){var H=b[D];w(H.value,{componentStack:H.stack})}}finally{W.T=d,Z.p=v}}(_s&3)!==0&&Am(),Lo(l),v=l.pendingLanes,(p&261930)!==0&&(v&42)!==0?l===zE?mf++:(mf=0,zE=l):mf=0,gf(0)}}function A3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Kd(d)))}function Am(){return x3(),k3(),_3(),N3()}function N3(){if(jn!==5)return!1;var l=Ea,d=FE;FE=0;var p=ly(_s),b=W.T,v=Z.p;try{Z.p=32>p?32:p,W.T=null,p=jE,jE=null;var w=Ea,D=_s;if(jn=0,lu=Ea=null,_s=0,(Pt&6)!==0)throw Error(r(331));var H=Pt;if(Pt|=4,u3(w.current),a3(w,w.current,D,p),Pt=H,gf(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(yn,w)}catch{}return!0}finally{Z.p=v,W.T=b,A3(l,d)}}function M3(l,d,p){d=Ni(p,d),d=vE(l.stateNode,d,2),l=fa(l,d,2),l!==null&&(Id(l,2),Lo(l))}function zt(l,d,p){if(l.tag===3)M3(l,l,p);else for(;d!==null;){if(d.tag===3){M3(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ya===null||!ya.has(b))){l=Ni(p,l),p=RA(2),b=fa(d,p,2),b!==null&&(OA(p,b,d,l),Id(b,2),Lo(b));break}}d=d.return}}function qE(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new eF;var v=new Set;b.set(d,v)}else v=b.get(d),v===void 0&&(v=new Set,b.set(d,v));v.has(p)||(PE=!0,v.add(p),l=oF.bind(null,l,d,p),d.then(l,l))}function oF(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Wt===l&&(Ct&p)===p&&(vn===4||vn===3&&(Ct&62914560)===Ct&&300>oe()-wm?(Pt&2)===0&&cu(l,0):HE|=p,au===Ct&&(au=0)),Lo(l)}function R3(l,d){d===0&&(d=xk()),l=Tl(l,d),l!==null&&(Id(l,d),Lo(l))}function sF(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),R3(l,p)}function aF(l,d){var p=0;switch(l.tag){case 31:case 13:var b=l.stateNode,v=l.memoizedState;v!==null&&(p=v.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),R3(l,p)}function lF(l,d){return T(l,d)}var Nm=null,du=null,YE=!1,Mm=!1,GE=!1,Ca=0;function Lo(l){l!==du&&l.next===null&&(du===null?Nm=du=l:du=du.next=l),Mm=!0,YE||(YE=!0,uF())}function gf(l,d){if(!GE&&Mm){GE=!0;do for(var p=!1,b=Nm;b!==null;){if(l!==0){var v=b.pendingLanes;if(v===0)var w=0;else{var D=b.suspendedLanes,H=b.pingedLanes;w=(1<<31-At(42|l)+1)-1,w&=v&~(D&~H),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,I3(b,w))}else w=Ct,w=Lp(b,b===Wt?w:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(w&3)===0||Ld(b,w)||(p=!0,I3(b,w));b=b.next}while(p);GE=!1}}function cF(){O3()}function O3(){Mm=YE=!1;var l=0;Ca!==0&&vF()&&(l=Ca);for(var d=oe(),p=null,b=Nm;b!==null;){var v=b.next,w=D3(b,d);w===0?(b.next=null,p===null?Nm=v:p.next=v,v===null&&(du=p)):(p=b,(l!==0||(w&3)!==0)&&(Mm=!0)),b=v}jn!==0&&jn!==5||gf(l),Ca!==0&&(Ca=0)}function D3(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,v=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var D=31-At(w),H=1<<D,X=v[D];X===-1?((H&p)===0||(H&b)!==0)&&(v[D]=BH(H,d)):X<=d&&(l.expiredLanes|=H),w&=~H}if(d=Wt,p=Ct,p=Lp(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(jt===2||jt===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&I(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Ld(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&I(b),ly(p)){case 2:case 8:p=ye;break;case 32:p=Be;break;case 268435456:p=Pe;break;default:p=Be}return b=L3.bind(null,l),p=T(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&I(b),l.callbackPriority=2,l.callbackNode=null,2}function L3(l,d){if(jn!==0&&jn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Am()&&l.callbackNode!==p)return null;var b=Ct;return b=Lp(l,l===Wt?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(m3(l,b,d),D3(l,oe()),l.callbackNode!=null&&l.callbackNode===p?L3.bind(null,l):null)}function I3(l,d){if(Am())return null;m3(l,d,!0)}function uF(){wF(function(){(Pt&6)!==0?T(se,cF):O3()})}function WE(){if(Ca===0){var l=Qc;l===0&&(l=Rp,Rp<<=1,(Rp&261888)===0&&(Rp=256)),Ca=l}return Ca}function B3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Hp(""+l)}function P3(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function dF(l,d,p,b,v){if(d==="submit"&&p&&p.stateNode===v){var w=B3((v[Rr]||null).action),D=b.submitter;D&&(d=(d=D[Rr]||null)?B3(d.formAction):D.getAttribute("formAction"),d!==null&&(w=d,D=null));var H=new zp("action","action",null,b,v);l.push({event:H,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Ca!==0){var X=D?P3(v,D):new FormData(v);pE(p,{pending:!0,data:X,method:v.method,action:w},null,X)}}else typeof w=="function"&&(H.preventDefault(),X=D?P3(v,D):new FormData(v),pE(p,{pending:!0,data:X,method:v.method,action:w},w,X))},currentTarget:v}]})}}for(var KE=0;KE<Ry.length;KE++){var QE=Ry[KE],fF=QE.toLowerCase(),hF=QE[0].toUpperCase()+QE.slice(1);to(fF,"on"+hF)}to(p_,"onAnimationEnd"),to(m_,"onAnimationIteration"),to(g_,"onAnimationStart"),to("dblclick","onDoubleClick"),to("focusin","onFocus"),to("focusout","onBlur"),to(NU,"onTransitionRun"),to(MU,"onTransitionStart"),to(RU,"onTransitionCancel"),to(b_,"onTransitionEnd"),Bc("onMouseEnter",["mouseout","mouseover"]),Bc("onMouseLeave",["mouseout","mouseover"]),Bc("onPointerEnter",["pointerout","pointerover"]),Bc("onPointerLeave",["pointerout","pointerover"]),vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vl("onBeforeInput",["compositionend","keypress","textInput","paste"]),vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bf));function H3(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],v=b.event;b=b.listeners;e:{var w=void 0;if(d)for(var D=b.length-1;0<=D;D--){var H=b[D],X=H.instance,pe=H.currentTarget;if(H=H.listener,X!==w&&v.isPropagationStopped())break e;w=H,v.currentTarget=pe;try{w(v)}catch(we){qp(we)}v.currentTarget=null,w=X}else for(D=0;D<b.length;D++){if(H=b[D],X=H.instance,pe=H.currentTarget,H=H.listener,X!==w&&v.isPropagationStopped())break e;w=H,v.currentTarget=pe;try{w(v)}catch(we){qp(we)}v.currentTarget=null,w=X}}}}function Et(l,d){var p=d[cy];p===void 0&&(p=d[cy]=new Set);var b=l+"__bubble";p.has(b)||(U3(d,l,2,!1),p.add(b))}function XE(l,d,p){var b=0;d&&(b|=4),U3(p,l,b,d)}var Rm="_reactListening"+Math.random().toString(36).slice(2);function ZE(l){if(!l[Rm]){l[Rm]=!0,Ok.forEach(function(p){p!=="selectionchange"&&(pF.has(p)||XE(p,!1,l),XE(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Rm]||(d[Rm]=!0,XE("selectionchange",!1,d))}}function U3(l,d,p,b){switch(pN(d)){case 2:var v=zF;break;case 8:v=$F;break;default:v=hv}p=v.bind(null,d,p,l),v=void 0,!yy||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(v=!0),b?v!==void 0?l.addEventListener(d,p,{capture:!0,passive:v}):l.addEventListener(d,p,!0):v!==void 0?l.addEventListener(d,p,{passive:v}):l.addEventListener(d,p,!1)}function JE(l,d,p,b,v){var w=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var D=b.tag;if(D===3||D===4){var H=b.stateNode.containerInfo;if(H===v)break;if(D===4)for(D=b.return;D!==null;){var X=D.tag;if((X===3||X===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;H!==null;){if(D=Dc(H),D===null)return;if(X=D.tag,X===5||X===6||X===26||X===27){b=w=D;continue e}H=H.parentNode}}b=b.return}Vk(function(){var pe=w,we=gy(p),xe=[];e:{var me=y_.get(l);if(me!==void 0){var be=zp,je=l;switch(l){case"keypress":if(Fp(p)===0)break e;case"keydown":case"keyup":be=aU;break;case"focusin":je="focus",be=wy;break;case"focusout":je="blur",be=wy;break;case"beforeblur":case"afterblur":be=wy;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Gk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=KH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=uU;break;case p_:case m_:case g_:be=ZH;break;case b_:be=fU;break;case"scroll":case"scrollend":be=GH;break;case"wheel":be=pU;break;case"copy":case"cut":case"paste":be=eU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Kk;break;case"toggle":case"beforetoggle":be=gU}var Je=(d&4)!==0,Yt=!Je&&(l==="scroll"||l==="scrollend"),le=Je?me!==null?me+"Capture":null:me;Je=[];for(var ne=pe,he;ne!==null;){var Te=ne;if(he=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||he===null||le===null||(Te=Hd(ne,le),Te!=null&&Je.push(yf(ne,Te,he))),Yt)break;ne=ne.return}0<Je.length&&(me=new be(me,je,null,p,we),xe.push({event:me,listeners:Je}))}}if((d&7)===0){e:{if(me=l==="mouseover"||l==="pointerover",be=l==="mouseout"||l==="pointerout",me&&p!==my&&(je=p.relatedTarget||p.fromElement)&&(Dc(je)||je[Oc]))break e;if((be||me)&&(me=we.window===we?we:(me=we.ownerDocument)?me.defaultView||me.parentWindow:window,be?(je=p.relatedTarget||p.toElement,be=pe,je=je?Dc(je):null,je!==null&&(Yt=o(je),Je=je.tag,je!==Yt||Je!==5&&Je!==27&&Je!==6)&&(je=null)):(be=null,je=pe),be!==je)){if(Je=Gk,Te="onMouseLeave",le="onMouseEnter",ne="mouse",(l==="pointerout"||l==="pointerover")&&(Je=Kk,Te="onPointerLeave",le="onPointerEnter",ne="pointer"),Yt=be==null?me:Pd(be),he=je==null?me:Pd(je),me=new Je(Te,ne+"leave",be,p,we),me.target=Yt,me.relatedTarget=he,Te=null,Dc(we)===pe&&(Je=new Je(le,ne+"enter",je,p,we),Je.target=he,Je.relatedTarget=Yt,Te=Je),Yt=Te,be&&je)t:{for(Je=mF,le=be,ne=je,he=0,Te=le;Te;Te=Je(Te))he++;Te=0;for(var We=ne;We;We=Je(We))Te++;for(;0<he-Te;)le=Je(le),he--;for(;0<Te-he;)ne=Je(ne),Te--;for(;he--;){if(le===ne||ne!==null&&le===ne.alternate){Je=le;break t}le=Je(le),ne=Je(ne)}Je=null}else Je=null;be!==null&&F3(xe,me,be,Je,!1),je!==null&&Yt!==null&&F3(xe,Yt,je,Je,!0)}}e:{if(me=pe?Pd(pe):window,be=me.nodeName&&me.nodeName.toLowerCase(),be==="select"||be==="input"&&me.type==="file")var Dt=r_;else if(t_(me))if(i_)Dt=kU;else{Dt=TU;var Ve=SU}else be=me.nodeName,!be||be.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?pe&&py(pe.elementType)&&(Dt=r_):Dt=xU;if(Dt&&(Dt=Dt(l,pe))){n_(xe,Dt,p,we);break e}Ve&&Ve(l,me,pe),l==="focusout"&&pe&&me.type==="number"&&pe.memoizedProps.value!=null&&hy(me,"number",me.value)}switch(Ve=pe?Pd(pe):window,l){case"focusin":(t_(Ve)||Ve.contentEditable==="true")&&(zc=Ve,Ay=pe,Yd=null);break;case"focusout":Yd=Ay=zc=null;break;case"mousedown":Ny=!0;break;case"contextmenu":case"mouseup":case"dragend":Ny=!1,f_(xe,p,we);break;case"selectionchange":if(AU)break;case"keydown":case"keyup":f_(xe,p,we)}var dt;if(Ty)e:{switch(l){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else jc?Jk(l,p)&&(wt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(wt="onCompositionStart");wt&&(Qk&&p.locale!=="ko"&&(jc||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&jc&&(dt=qk()):(oa=we,Ey="value"in oa?oa.value:oa.textContent,jc=!0)),Ve=Om(pe,wt),0<Ve.length&&(wt=new Wk(wt,l,null,p,we),xe.push({event:wt,listeners:Ve}),dt?wt.data=dt:(dt=e_(p),dt!==null&&(wt.data=dt)))),(dt=yU?EU(l,p):vU(l,p))&&(wt=Om(pe,"onBeforeInput"),0<wt.length&&(Ve=new Wk("onBeforeInput","beforeinput",null,p,we),xe.push({event:Ve,listeners:wt}),Ve.data=dt)),dF(xe,l,pe,p,we)}H3(xe,d)})}function yf(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Om(l,d){for(var p=d+"Capture",b=[];l!==null;){var v=l,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Hd(l,p),v!=null&&b.unshift(yf(l,v,w)),v=Hd(l,d),v!=null&&b.push(yf(l,v,w))),l.tag===3)return b;l=l.return}return[]}function mF(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function F3(l,d,p,b,v){for(var w=d._reactName,D=[];p!==null&&p!==b;){var H=p,X=H.alternate,pe=H.stateNode;if(H=H.tag,X!==null&&X===b)break;H!==5&&H!==26&&H!==27||pe===null||(X=pe,v?(pe=Hd(p,w),pe!=null&&D.unshift(yf(p,pe,X))):v||(pe=Hd(p,w),pe!=null&&D.push(yf(p,pe,X)))),p=p.return}D.length!==0&&l.push({event:d,listeners:D})}var gF=/\r\n?/g,bF=/\u0000|\uFFFD/g;function j3(l){return(typeof l=="string"?l:""+l).replace(gF,`
`).replace(bF,"")}function z3(l,d){return d=j3(d),j3(l)===d}function qt(l,d,p,b,v,w){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Hc(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Hc(l,""+b);break;case"className":Bp(l,"class",b);break;case"tabIndex":Bp(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Bp(l,p,b);break;case"style":zk(l,b,w);break;case"data":if(d!=="object"){Bp(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Hp(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(d!=="input"&&qt(l,d,"name",v.name,v,null),qt(l,d,"formEncType",v.formEncType,v,null),qt(l,d,"formMethod",v.formMethod,v,null),qt(l,d,"formTarget",v.formTarget,v,null)):(qt(l,d,"encType",v.encType,v,null),qt(l,d,"method",v.method,v,null),qt(l,d,"target",v.target,v,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Hp(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=fs);break;case"onScroll":b!=null&&Et("scroll",l);break;case"onScrollEnd":b!=null&&Et("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=Hp(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":Et("beforetoggle",l),Et("toggle",l),Ip(l,"popover",b);break;case"xlinkActuate":ds(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":ds(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":ds(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":ds(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":ds(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":ds(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":ds(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":ds(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":ds(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Ip(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=qH.get(p)||p,Ip(l,p,b))}}function ev(l,d,p,b,v,w){switch(p){case"style":zk(l,b,w);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?Hc(l,b):(typeof b=="number"||typeof b=="bigint")&&Hc(l,""+b);break;case"onScroll":b!=null&&Et("scroll",l);break;case"onScrollEnd":b!=null&&Et("scrollend",l);break;case"onClick":b!=null&&(l.onclick=fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dk.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),d=p.slice(2,v?p.length-7:void 0),w=l[Rr]||null,w=w!=null?w[p]:null,typeof w=="function"&&l.removeEventListener(d,w,v),typeof b=="function")){typeof w!="function"&&w!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,v);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):Ip(l,p,b)}}}function rr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",l),Et("load",l);var b=!1,v=!1,w;for(w in p)if(p.hasOwnProperty(w)){var D=p[w];if(D!=null)switch(w){case"src":b=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:qt(l,d,w,D,p,null)}}v&&qt(l,d,"srcSet",p.srcSet,p,null),b&&qt(l,d,"src",p.src,p,null);return;case"input":Et("invalid",l);var H=w=D=v=null,X=null,pe=null;for(b in p)if(p.hasOwnProperty(b)){var we=p[b];if(we!=null)switch(b){case"name":v=we;break;case"type":D=we;break;case"checked":X=we;break;case"defaultChecked":pe=we;break;case"value":w=we;break;case"defaultValue":H=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:qt(l,d,b,we,p,null)}}Hk(l,w,H,X,pe,D,v,!1);return;case"select":Et("invalid",l),b=D=w=null;for(v in p)if(p.hasOwnProperty(v)&&(H=p[v],H!=null))switch(v){case"value":w=H;break;case"defaultValue":D=H;break;case"multiple":b=H;default:qt(l,d,v,H,p,null)}d=w,p=D,l.multiple=!!b,d!=null?Pc(l,!!b,d,!1):p!=null&&Pc(l,!!b,p,!0);return;case"textarea":Et("invalid",l),w=v=b=null;for(D in p)if(p.hasOwnProperty(D)&&(H=p[D],H!=null))switch(D){case"value":b=H;break;case"defaultValue":v=H;break;case"children":w=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:qt(l,d,D,H,p,null)}Fk(l,b,v,w);return;case"option":for(X in p)if(p.hasOwnProperty(X)&&(b=p[X],b!=null))switch(X){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:qt(l,d,X,b,p,null)}return;case"dialog":Et("beforetoggle",l),Et("toggle",l),Et("cancel",l),Et("close",l);break;case"iframe":case"object":Et("load",l);break;case"video":case"audio":for(b=0;b<bf.length;b++)Et(bf[b],l);break;case"image":Et("error",l),Et("load",l);break;case"details":Et("toggle",l);break;case"embed":case"source":case"link":Et("error",l),Et("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in p)if(p.hasOwnProperty(pe)&&(b=p[pe],b!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:qt(l,d,pe,b,p,null)}return;default:if(py(d)){for(we in p)p.hasOwnProperty(we)&&(b=p[we],b!==void 0&&ev(l,d,we,b,p,void 0));return}}for(H in p)p.hasOwnProperty(H)&&(b=p[H],b!=null&&qt(l,d,H,b,p,null))}function yF(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,D=null,H=null,X=null,pe=null,we=null;for(be in p){var xe=p[be];if(p.hasOwnProperty(be)&&xe!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":X=xe;default:b.hasOwnProperty(be)||qt(l,d,be,null,b,xe)}}for(var me in b){var be=b[me];if(xe=p[me],b.hasOwnProperty(me)&&(be!=null||xe!=null))switch(me){case"type":w=be;break;case"name":v=be;break;case"checked":pe=be;break;case"defaultChecked":we=be;break;case"value":D=be;break;case"defaultValue":H=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:be!==xe&&qt(l,d,me,be,b,xe)}}fy(l,D,H,X,pe,we,w,v);return;case"select":be=D=H=me=null;for(w in p)if(X=p[w],p.hasOwnProperty(w)&&X!=null)switch(w){case"value":break;case"multiple":be=X;default:b.hasOwnProperty(w)||qt(l,d,w,null,b,X)}for(v in b)if(w=b[v],X=p[v],b.hasOwnProperty(v)&&(w!=null||X!=null))switch(v){case"value":me=w;break;case"defaultValue":H=w;break;case"multiple":D=w;default:w!==X&&qt(l,d,v,w,b,X)}d=H,p=D,b=be,me!=null?Pc(l,!!p,me,!1):!!b!=!!p&&(d!=null?Pc(l,!!p,d,!0):Pc(l,!!p,p?[]:"",!1));return;case"textarea":be=me=null;for(H in p)if(v=p[H],p.hasOwnProperty(H)&&v!=null&&!b.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:qt(l,d,H,null,b,v)}for(D in b)if(v=b[D],w=p[D],b.hasOwnProperty(D)&&(v!=null||w!=null))switch(D){case"value":me=v;break;case"defaultValue":be=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==w&&qt(l,d,D,v,b,w)}Uk(l,me,be);return;case"option":for(var je in p)if(me=p[je],p.hasOwnProperty(je)&&me!=null&&!b.hasOwnProperty(je))switch(je){case"selected":l.selected=!1;break;default:qt(l,d,je,null,b,me)}for(X in b)if(me=b[X],be=p[X],b.hasOwnProperty(X)&&me!==be&&(me!=null||be!=null))switch(X){case"selected":l.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:qt(l,d,X,me,b,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in p)me=p[Je],p.hasOwnProperty(Je)&&me!=null&&!b.hasOwnProperty(Je)&&qt(l,d,Je,null,b,me);for(pe in b)if(me=b[pe],be=p[pe],b.hasOwnProperty(pe)&&me!==be&&(me!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,d));break;default:qt(l,d,pe,me,b,be)}return;default:if(py(d)){for(var Yt in p)me=p[Yt],p.hasOwnProperty(Yt)&&me!==void 0&&!b.hasOwnProperty(Yt)&&ev(l,d,Yt,void 0,b,me);for(we in b)me=b[we],be=p[we],!b.hasOwnProperty(we)||me===be||me===void 0&&be===void 0||ev(l,d,we,me,b,be);return}}for(var le in p)me=p[le],p.hasOwnProperty(le)&&me!=null&&!b.hasOwnProperty(le)&&qt(l,d,le,null,b,me);for(xe in b)me=b[xe],be=p[xe],!b.hasOwnProperty(xe)||me===be||me==null&&be==null||qt(l,d,xe,me,b,be)}function $3(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EF(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),b=0;b<p.length;b++){var v=p[b],w=v.transferSize,D=v.initiatorType,H=v.duration;if(w&&H&&$3(D)){for(D=0,H=v.responseEnd,b+=1;b<p.length;b++){var X=p[b],pe=X.startTime;if(pe>H)break;var we=X.transferSize,xe=X.initiatorType;we&&$3(xe)&&(X=X.responseEnd,D+=we*(X<H?1:(H-pe)/(X-pe)))}if(--b,d+=8*(w+D)/(v.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var tv=null,nv=null;function Dm(l){return l.nodeType===9?l:l.ownerDocument}function V3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function rv(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var iv=null;function vF(){var l=window.event;return l&&l.type==="popstate"?l===iv?!1:(iv=l,!0):(iv=null,!1)}var Y3=typeof setTimeout=="function"?setTimeout:void 0,CF=typeof clearTimeout=="function"?clearTimeout:void 0,G3=typeof Promise=="function"?Promise:void 0,wF=typeof queueMicrotask=="function"?queueMicrotask:typeof G3<"u"?function(l){return G3.resolve(null).then(l).catch(SF)}:Y3;function SF(l){setTimeout(function(){throw l})}function wa(l){return l==="head"}function W3(l,d){var p=d,b=0;do{var v=p.nextSibling;if(l.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"||p==="/&"){if(b===0){l.removeChild(v),mu(d);return}b--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")b++;else if(p==="html")Ef(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Ef(p);for(var w=p.firstChild;w;){var D=w.nextSibling,H=w.nodeName;w[Bd]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||p.removeChild(w),w=D}}else p==="body"&&Ef(l.ownerDocument.body);p=v}while(p);mu(d)}function K3(l,d){var p=l;l=0;do{var b=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=b}while(p)}function ov(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":ov(p),uy(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function TF(l,d,p,b){for(;l.nodeType===1;){var v=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Bd])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(w=l.getAttribute("rel"),w==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(w!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(w=l.getAttribute("src"),(w!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===w)return l}else return l;if(l=Li(l.nextSibling),l===null)break}return null}function xF(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Li(l.nextSibling),l===null))return null;return l}function Q3(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Li(l.nextSibling),l===null))return null;return l}function sv(l){return l.data==="$?"||l.data==="$~"}function av(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function kF(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Li(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var lv=null;function X3(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Li(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function Z3(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function J3(l,d,p){switch(d=Dm(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Ef(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);uy(l)}var Ii=new Map,eN=new Set;function Lm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var As=Z.d;Z.d={f:_F,r:AF,D:NF,C:MF,L:RF,m:OF,X:LF,S:DF,M:IF};function _F(){var l=As.f(),d=xm();return l||d}function AF(l){var d=Lc(l);d!==null&&d.tag===5&&d.type==="form"?bA(d):As.r(l)}var fu=typeof document>"u"?null:document;function tN(l,d,p){var b=fu;if(b&&typeof d=="string"&&d){var v=_i(d);v='link[rel="'+l+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),eN.has(v)||(eN.add(v),l={rel:l,crossOrigin:p,href:d},b.querySelector(v)===null&&(d=b.createElement("link"),rr(d,"link",l),qn(d),b.head.appendChild(d)))}}function NF(l){As.D(l),tN("dns-prefetch",l,null)}function MF(l,d){As.C(l,d),tN("preconnect",l,d)}function RF(l,d,p){As.L(l,d,p);var b=fu;if(b&&l&&d){var v='link[rel="preload"][as="'+_i(d)+'"]';d==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+_i(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+_i(p.imageSizes)+'"]')):v+='[href="'+_i(l)+'"]';var w=v;switch(d){case"style":w=hu(l);break;case"script":w=pu(l)}Ii.has(w)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Ii.set(w,l),b.querySelector(v)!==null||d==="style"&&b.querySelector(vf(w))||d==="script"&&b.querySelector(Cf(w))||(d=b.createElement("link"),rr(d,"link",l),qn(d),b.head.appendChild(d)))}}function OF(l,d){As.m(l,d);var p=fu;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",v='link[rel="modulepreload"][as="'+_i(b)+'"][href="'+_i(l)+'"]',w=v;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=pu(l)}if(!Ii.has(w)&&(l=h({rel:"modulepreload",href:l},d),Ii.set(w,l),p.querySelector(v)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Cf(w)))return}b=p.createElement("link"),rr(b,"link",l),qn(b),p.head.appendChild(b)}}}function DF(l,d,p){As.S(l,d,p);var b=fu;if(b&&l){var v=Ic(b).hoistableStyles,w=hu(l);d=d||"default";var D=v.get(w);if(!D){var H={loading:0,preload:null};if(D=b.querySelector(vf(w)))H.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Ii.get(w))&&cv(l,p);var X=D=b.createElement("link");qn(X),rr(X,"link",l),X._p=new Promise(function(pe,we){X.onload=pe,X.onerror=we}),X.addEventListener("load",function(){H.loading|=1}),X.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Im(D,d,b)}D={type:"stylesheet",instance:D,count:1,state:H},v.set(w,D)}}}function LF(l,d){As.X(l,d);var p=fu;if(p&&l){var b=Ic(p).hoistableScripts,v=pu(l),w=b.get(v);w||(w=p.querySelector(Cf(v)),w||(l=h({src:l,async:!0},d),(d=Ii.get(v))&&uv(l,d),w=p.createElement("script"),qn(w),rr(w,"link",l),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},b.set(v,w))}}function IF(l,d){As.M(l,d);var p=fu;if(p&&l){var b=Ic(p).hoistableScripts,v=pu(l),w=b.get(v);w||(w=p.querySelector(Cf(v)),w||(l=h({src:l,async:!0,type:"module"},d),(d=Ii.get(v))&&uv(l,d),w=p.createElement("script"),qn(w),rr(w,"link",l),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},b.set(v,w))}}function nN(l,d,p,b){var v=(v=Le.current)?Lm(v):null;if(!v)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=hu(p.href),p=Ic(v).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=hu(p.href);var w=Ic(v).hoistableStyles,D=w.get(l);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(l,D),(w=v.querySelector(vf(l)))&&!w._p&&(D.instance=w,D.state.loading=5),Ii.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ii.set(l,p),w||BF(v,l,p,D.state))),d&&b===null)throw Error(r(528,""));return D}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=pu(p),p=Ic(v).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function hu(l){return'href="'+_i(l)+'"'}function vf(l){return'link[rel="stylesheet"]['+l+"]"}function rN(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function BF(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),rr(d,"link",p),qn(d),l.head.appendChild(d))}function pu(l){return'[src="'+_i(l)+'"]'}function Cf(l){return"script[async]"+l}function iN(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+_i(p.href)+'"]');if(b)return d.instance=b,qn(b),b;var v=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),qn(b),rr(b,"style",v),Im(b,p.precedence,l),d.instance=b;case"stylesheet":v=hu(p.href);var w=l.querySelector(vf(v));if(w)return d.state.loading|=4,d.instance=w,qn(w),w;b=rN(p),(v=Ii.get(v))&&cv(b,v),w=(l.ownerDocument||l).createElement("link"),qn(w);var D=w;return D._p=new Promise(function(H,X){D.onload=H,D.onerror=X}),rr(w,"link",b),d.state.loading|=4,Im(w,p.precedence,l),d.instance=w;case"script":return w=pu(p.src),(v=l.querySelector(Cf(w)))?(d.instance=v,qn(v),v):(b=p,(v=Ii.get(w))&&(b=h({},p),uv(b,v)),l=l.ownerDocument||l,v=l.createElement("script"),qn(v),rr(v,"link",b),l.head.appendChild(v),d.instance=v);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,Im(b,p.precedence,l));return d.instance}function Im(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=b.length?b[b.length-1]:null,w=v,D=0;D<b.length;D++){var H=b[D];if(H.dataset.precedence===d)w=H;else if(w!==v)break}w?w.parentNode.insertBefore(l,w.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function cv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function uv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Bm=null;function oN(l,d,p){if(Bm===null){var b=new Map,v=Bm=new Map;v.set(p,b)}else v=Bm,b=v.get(p),b||(b=new Map,v.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),v=0;v<p.length;v++){var w=p[v];if(!(w[Bd]||w[Jn]||l==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(d)||"";D=l+D;var H=b.get(D);H?H.push(w):b.set(D,[w])}}return b}function sN(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function PF(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function aN(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function HF(l,d,p,b){if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var v=hu(b.href),w=d.querySelector(vf(v));if(w){d=w._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Pm.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=w,qn(w);return}w=d.ownerDocument||d,b=rN(b),(v=Ii.get(v))&&cv(b,v),w=w.createElement("link"),qn(w);var D=w;D._p=new Promise(function(H,X){D.onload=H,D.onerror=X}),rr(w,"link",b),p.instance=w}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Pm.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var dv=0;function UF(l,d){return l.stylesheets&&l.count===0&&Um(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var b=setTimeout(function(){if(l.stylesheets&&Um(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4+d);0<l.imgBytes&&dv===0&&(dv=62500*EF());var v=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Um(l,l.stylesheets),l.unsuspend)){var w=l.unsuspend;l.unsuspend=null,w()}},(l.imgBytes>dv?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(v)}}:null}function Pm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Hm=null;function Um(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Hm=new Map,d.forEach(FF,l),Hm=null,Pm.call(l))}function FF(l,d){if(!(d.state.loading&4)){var p=Hm.get(l);if(p)var b=p.get(null);else{p=new Map,Hm.set(l,p);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var D=v[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(p.set(D.dataset.precedence,D),b=D)}b&&p.set(null,b)}v=d.instance,D=v.getAttribute("data-precedence"),w=p.get(D)||b,w===b&&p.set(null,v),p.set(D,v),this.count++,b=Pm.bind(this),v.addEventListener("load",b),v.addEventListener("error",b),w?w.parentNode.insertBefore(v,w.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),d.state.loading|=4}}var wf={$$typeof:_,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function jF(l,d,p,b,v,w,D,H,X){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sy(0),this.hiddenUpdates=sy(null),this.identifierPrefix=b,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function lN(l,d,p,b,v,w,D,H,X,pe,we,xe){return l=new jF(l,d,p,D,X,pe,we,xe,H),d=1,w===!0&&(d|=24),w=ni(3,null,null,d),l.current=w,w.stateNode=l,d=Vy(),d.refCount++,l.pooledCache=d,d.refCount++,w.memoizedState={element:b,isDehydrated:p,cache:d},Wy(w),l}function cN(l){return l?(l=qc,l):qc}function uN(l,d,p,b,v,w){v=cN(v),b.context===null?b.context=v:b.pendingContext=v,b=da(d),b.payload={element:p},w=w===void 0?null:w,w!==null&&(b.callback=w),p=fa(l,b,d),p!==null&&(Pr(p,l,d),Jd(p,l,d))}function dN(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function fv(l,d){dN(l,d),(l=l.alternate)&&dN(l,d)}function fN(l){if(l.tag===13||l.tag===31){var d=Tl(l,67108864);d!==null&&Pr(d,l,67108864),fv(l,67108864)}}function hN(l){if(l.tag===13||l.tag===31){var d=ai();d=ay(d);var p=Tl(l,d);p!==null&&Pr(p,l,d),fv(l,d)}}var Fm=!0;function zF(l,d,p,b){var v=W.T;W.T=null;var w=Z.p;try{Z.p=2,hv(l,d,p,b)}finally{Z.p=w,W.T=v}}function $F(l,d,p,b){var v=W.T;W.T=null;var w=Z.p;try{Z.p=8,hv(l,d,p,b)}finally{Z.p=w,W.T=v}}function hv(l,d,p,b){if(Fm){var v=pv(b);if(v===null)JE(l,d,b,jm,p),mN(l,b);else if(qF(v,l,d,p,b))b.stopPropagation();else if(mN(l,b),d&4&&-1<VF.indexOf(l)){for(;v!==null;){var w=Lc(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=El(w.pendingLanes);if(D!==0){var H=w;for(H.pendingLanes|=2,H.entangledLanes|=2;D;){var X=1<<31-At(D);H.entanglements[1]|=X,D&=~X}Lo(w),(Pt&6)===0&&(Sm=oe()+500,gf(0))}}break;case 31:case 13:H=Tl(w,2),H!==null&&Pr(H,w,2),xm(),fv(w,2)}if(w=pv(b),w===null&&JE(l,d,b,jm,p),w===v)break;v=w}v!==null&&b.stopPropagation()}else JE(l,d,b,null,p)}}function pv(l){return l=gy(l),mv(l)}var jm=null;function mv(l){if(jm=null,l=Dc(l),l!==null){var d=o(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=a(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return jm=l,null}function pN(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case se:return 2;case ye:return 8;case Be:case Ie:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var gv=!1,Sa=null,Ta=null,xa=null,Sf=new Map,Tf=new Map,ka=[],VF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mN(l,d){switch(l){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Sf.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(d.pointerId)}}function xf(l,d,p,b,v,w){return l===null||l.nativeEvent!==w?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:w,targetContainers:[v]},d!==null&&(d=Lc(d),d!==null&&fN(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,v!==null&&d.indexOf(v)===-1&&d.push(v),l)}function qF(l,d,p,b,v){switch(d){case"focusin":return Sa=xf(Sa,l,d,p,b,v),!0;case"dragenter":return Ta=xf(Ta,l,d,p,b,v),!0;case"mouseover":return xa=xf(xa,l,d,p,b,v),!0;case"pointerover":var w=v.pointerId;return Sf.set(w,xf(Sf.get(w)||null,l,d,p,b,v)),!0;case"gotpointercapture":return w=v.pointerId,Tf.set(w,xf(Tf.get(w)||null,l,d,p,b,v)),!0}return!1}function gN(l){var d=Dc(l.target);if(d!==null){var p=o(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,Mk(l.priority,function(){hN(p)});return}}else if(d===31){if(d=a(p),d!==null){l.blockedOn=d,Mk(l.priority,function(){hN(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function zm(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=pv(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);my=b,p.target.dispatchEvent(b),my=null}else return d=Lc(p),d!==null&&fN(d),l.blockedOn=p,!1;d.shift()}return!0}function bN(l,d,p){zm(l)&&p.delete(d)}function YF(){gv=!1,Sa!==null&&zm(Sa)&&(Sa=null),Ta!==null&&zm(Ta)&&(Ta=null),xa!==null&&zm(xa)&&(xa=null),Sf.forEach(bN),Tf.forEach(bN)}function $m(l,d){l.blockedOn===d&&(l.blockedOn=null,gv||(gv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YF)))}var Vm=null;function yN(l){Vm!==l&&(Vm=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vm===l&&(Vm=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],v=l[d+2];if(typeof b!="function"){if(mv(b||p)===null)continue;break}var w=Lc(p);w!==null&&(l.splice(d,3),d-=3,pE(w,{pending:!0,data:v,method:p.method,action:b},b,v))}}))}function mu(l){function d(X){return $m(X,l)}Sa!==null&&$m(Sa,l),Ta!==null&&$m(Ta,l),xa!==null&&$m(xa,l),Sf.forEach(d),Tf.forEach(d);for(var p=0;p<ka.length;p++){var b=ka[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<ka.length&&(p=ka[0],p.blockedOn===null);)gN(p),p.blockedOn===null&&ka.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var v=p[b],w=p[b+1],D=v[Rr]||null;if(typeof w=="function")D||yN(p);else if(D){var H=null;if(w&&w.hasAttribute("formAction")){if(v=w,D=w[Rr]||null)H=D.formAction;else if(mv(v)!==null)continue}else H=D.action;typeof H=="function"?p[b+1]=H:(p.splice(b,3),b-=3),yN(p)}}}function EN(){function l(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(D){return v=D})},focusReset:"manual",scroll:"manual"})}function d(){v!==null&&(v(),v=null),b||setTimeout(p,20)}function p(){if(!b&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,v=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),v!==null&&(v(),v=null)}}}function bv(l){this._internalRoot=l}qm.prototype.render=bv.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=ai();uN(p,b,l,d,null,null)},qm.prototype.unmount=bv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;uN(l.current,2,null,l,null,null),xm(),d[Oc]=null}};function qm(l){this._internalRoot=l}qm.prototype.unstable_scheduleHydration=function(l){if(l){var d=Nk();l={blockedOn:null,target:l,priority:d};for(var p=0;p<ka.length&&d!==0&&d<ka[p].priority;p++);ka.splice(p,0,l),p===0&&gN(l)}};var vN=t.version;if(vN!=="19.2.0")throw Error(r(527,vN,"19.2.0"));Z.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var GF={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{yn=Ym.inject(GF),sn=Ym}catch{}}return _f.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,b="",v=_A,w=AA,D=NA;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(v=d.onUncaughtError),d.onCaughtError!==void 0&&(w=d.onCaughtError),d.onRecoverableError!==void 0&&(D=d.onRecoverableError)),d=lN(l,1,!1,null,null,p,b,null,v,w,D,EN),l[Oc]=d.current,ZE(l),new bv(d)},_f.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var b=!1,v="",w=_A,D=AA,H=NA,X=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(D=p.onCaughtError),p.onRecoverableError!==void 0&&(H=p.onRecoverableError),p.formState!==void 0&&(X=p.formState)),d=lN(l,1,!0,d,p??null,b,v,X,w,D,H,EN),d.context=cN(null),p=d.current,b=ai(),b=ay(b),v=da(b),v.callback=null,fa(p,v,b),p=b,d.current.lanes=p,Id(d,p),Lo(d),l[Oc]=d.current,ZE(l),new qm(d)},_f.version="19.2.0",_f}var MN;function rj(){if(MN)return vv.exports;MN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vv.exports=nj(),vv.exports}var ij=rj();const oj=ld(ij);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RN="popstate";function sj(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return fw("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bh(i)}return lj(t,n,null,e)}function bn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aj(){return Math.random().toString(36).substring(2,10)}function ON(e,t){return{usr:e.state,key:e.key,idx:t}}function fw(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?cd(t):t,state:n,key:t&&t.key||r||aj()}}function bh({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function cd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function lj(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){a="POP";let C=f(),S=C==null?null:C-u;u=C,c&&c({action:a,location:E.location,delta:S})}function m(C,S){a="PUSH";let N=fw(E.location,C,S);u=f()+1;let _=ON(N,u),O=E.createHref(N);try{s.pushState(_,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(O)}o&&c&&c({action:a,location:E.location,delta:1})}function g(C,S){a="REPLACE";let N=fw(E.location,C,S);u=f();let _=ON(N,u),O=E.createHref(N);s.replaceState(_,"",O),o&&c&&c({action:a,location:E.location,delta:0})}function y(C){return cj(C)}let E={get action(){return a},get location(){return e(i,s)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(RN,h),c=C,()=>{i.removeEventListener(RN,h),c=null}},createHref(C){return t(i,C)},createURL:y,encodeLocation(C){let S=y(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:g,go(C){return s.go(C)}};return E}function cj(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),bn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:bh(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Z6(e,t,n="/"){return uj(e,t,n,!1)}function uj(e,t,n,r){let i=typeof t=="string"?cd(t):t,o=Gs(i.pathname||"/",n);if(o==null)return null;let s=J6(e);dj(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let u=wj(o);a=vj(s[c],u,r)}return a}function J6(e,t=[],n=[],r="",i=!1){let o=(s,a,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;bn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=Fs([r,f.relativePath]),m=n.concat(f);s.children&&s.children.length>0&&(bn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),J6(s.children,t,m,h,c)),!(s.path==null&&!s.index)&&t.push({path:h,score:yj(h,s.index),routesMeta:m})};return e.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))o(s,a);else for(let c of eD(s.path))o(s,a,!0,c)}),t}function eD(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=eD(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function dj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ej(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fj=/^:[\w-]+$/,hj=3,pj=2,mj=1,gj=10,bj=-2,DN=e=>e==="*";function yj(e,t){let n=e.split("/"),r=n.length;return n.some(DN)&&(r+=bj),t&&(r+=pj),n.filter(i=>!DN(i)).reduce((i,o)=>i+(fj.test(o)?hj:o===""?mj:gj),r)}function Ej(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function vj(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=t0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=t0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Fs([o,h.pathname]),pathnameBase:kj(Fs([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=Fs([o,h.pathnameBase]))}return s}function t0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Cj(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},m)=>{if(f==="*"){let y=a[m]||"";s=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[m];return h&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function Cj(e,t=!1,n=!0){Qo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Gs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sj(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?cd(e):e;return{pathname:n?n.startsWith("/")?n:Tj(n,t):t,search:_j(r),hash:Aj(i)}}function Tj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tv(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xj(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tD(e){let t=xj(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function nD(e,t,n,r=!1){let i;typeof e=="string"?i=cd(e):(i={...e},bn(!i.pathname||!i.pathname.includes("?"),Tv("?","pathname","search",i)),bn(!i.pathname||!i.pathname.includes("#"),Tv("#","pathname","hash",i)),bn(!i.search||!i.search.includes("#"),Tv("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=t.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?t[h]:"/"}let c=Sj(i,a),u=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var Fs=e=>e.join("/").replace(/\/\/+/g,"/"),kj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_j=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Aj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Nj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var rD=["POST","PUT","PATCH","DELETE"];new Set(rD);var Mj=["GET",...rD];new Set(Mj);var ud=A.createContext(null);ud.displayName="DataRouter";var I1=A.createContext(null);I1.displayName="DataRouterState";A.createContext(!1);var iD=A.createContext({isTransitioning:!1});iD.displayName="ViewTransition";var Rj=A.createContext(new Map);Rj.displayName="Fetchers";var Oj=A.createContext(null);Oj.displayName="Await";var rs=A.createContext(null);rs.displayName="Navigation";var np=A.createContext(null);np.displayName="Location";var is=A.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var rS=A.createContext(null);rS.displayName="RouteError";function Dj(e,{relative:t}={}){bn(rp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(rs),{hash:i,pathname:o,search:s}=ip(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:Fs([n,o])),r.createHref({pathname:a,search:s,hash:i})}function rp(){return A.useContext(np)!=null}function Cc(){return bn(rp(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(np).location}var oD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sD(e){A.useContext(rs).static||A.useLayoutEffect(e)}function iS(){let{isDataRoute:e}=A.useContext(is);return e?Gj():Lj()}function Lj(){bn(rp(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(ud),{basename:t,navigator:n}=A.useContext(rs),{matches:r}=A.useContext(is),{pathname:i}=Cc(),o=JSON.stringify(tD(r)),s=A.useRef(!1);return sD(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Qo(s.current,oD),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=nD(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Fs([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}A.createContext(null);function Ij(){let{matches:e}=A.useContext(is),t=e[e.length-1];return t?t.params:{}}function ip(e,{relative:t}={}){let{matches:n}=A.useContext(is),{pathname:r}=Cc(),i=JSON.stringify(tD(n));return A.useMemo(()=>nD(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function Bj(e,t){return aD(e,t)}function aD(e,t,n,r,i){bn(rp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(rs),{matches:s}=A.useContext(is),a=s[s.length-1],c=a?a.params:{},u=a?a.pathname:"/",f=a?a.pathnameBase:"/",h=a&&a.route;{let N=h&&h.path||"";lD(u,!h||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let m=Cc(),g;if(t){let N=typeof t=="string"?cd(t):t;bn(f==="/"||N.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),g=N}else g=m;let y=g.pathname||"/",E=y;if(f!=="/"){let N=f.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=Z6(e,{pathname:E});Qo(h||C!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Qo(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=jj(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Fs([f,o.encodeLocation?o.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Fs([f,o.encodeLocation?o.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),s,n,r,i);return t&&S?A.createElement(np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function Pj(){let e=Yj(),t=Nj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,s)}var Hj=A.createElement(Pj,null),Uj=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?A.createElement(is.Provider,{value:this.props.routeContext},A.createElement(rS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fj({routeContext:e,match:t,children:n}){let r=A.useContext(ud);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(is.Provider,{value:e},n)}function jj(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,s=n?.errors;if(s!=null){let u=o.findIndex(f=>f.route.id&&s?.[f.route.id]!==void 0);bn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:m}=n,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){a=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,h)=>{let m,g=!1,y=null,E=null;n&&(m=s&&f.route.id?s[f.route.id]:void 0,y=f.route.errorElement||Hj,a&&(c<0&&h===0?(lD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,E=null):c===h&&(g=!0,E=f.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,h+1)),S=()=>{let N;return m?N=y:g?N=E:f.route.Component?N=A.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=u,A.createElement(Fj,{match:f,routeContext:{outlet:u,matches:C,isDataRoute:n!=null},children:N})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?A.createElement(Uj,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):S()},null)}function oS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zj(e){let t=A.useContext(ud);return bn(t,oS(e)),t}function $j(e){let t=A.useContext(I1);return bn(t,oS(e)),t}function Vj(e){let t=A.useContext(is);return bn(t,oS(e)),t}function sS(e){let t=Vj(e),n=t.matches[t.matches.length-1];return bn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function qj(){return sS("useRouteId")}function Yj(){let e=A.useContext(rS),t=$j("useRouteError"),n=sS("useRouteError");return e!==void 0?e:t.errors?.[n]}function Gj(){let{router:e}=zj("useNavigate"),t=sS("useNavigate"),n=A.useRef(!1);return sD(()=>{n.current=!0}),A.useCallback(async(i,o={})=>{Qo(n.current,oD),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var LN={};function lD(e,t,n){!t&&!LN[e]&&(LN[e]=!0,Qo(!1,n))}A.memo(Wj);function Wj({routes:e,future:t,state:n,unstable_onError:r}){return aD(e,void 0,n,r,t)}function hw(e){bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kj({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){bn(!rp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=A.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=cd(n));let{pathname:c="/",search:u="",hash:f="",state:h=null,key:m="default"}=n,g=A.useMemo(()=>{let y=Gs(c,s);return y==null?null:{location:{pathname:y,search:u,hash:f,state:h,key:m},navigationType:r}},[s,c,u,f,h,m,r]);return Qo(g!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:A.createElement(rs.Provider,{value:a},A.createElement(np.Provider,{children:t,value:g}))}function Qj({children:e,location:t}){return Bj(pw(e),t)}function pw(e,t=[]){let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let o=[...t,i];if(r.type===A.Fragment){n.push.apply(n,pw(r.props.children,o));return}bn(r.type===hw,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=pw(r.props.children,o)),n.push(s)}),n}var Rg="get",Og="application/x-www-form-urlencoded";function B1(e){return e!=null&&typeof e.tagName=="string"}function Xj(e){return B1(e)&&e.tagName.toLowerCase()==="button"}function Zj(e){return B1(e)&&e.tagName.toLowerCase()==="form"}function Jj(e){return B1(e)&&e.tagName.toLowerCase()==="input"}function ez(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tz(e,t){return e.button===0&&(!t||t==="_self")&&!ez(e)}var Gm=null;function nz(){if(Gm===null)try{new FormData(document.createElement("form"),0),Gm=!1}catch{Gm=!0}return Gm}var rz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xv(e){return e!=null&&!rz.has(e)?(Qo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Og}"`),null):e}function iz(e,t){let n,r,i,o,s;if(Zj(e)){let a=e.getAttribute("action");r=a?Gs(a,t):null,n=e.getAttribute("method")||Rg,i=xv(e.getAttribute("enctype"))||Og,o=new FormData(e)}else if(Xj(e)||Jj(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||a.getAttribute("action");if(r=c?Gs(c,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Rg,i=xv(e.getAttribute("formenctype"))||xv(a.getAttribute("enctype"))||Og,o=new FormData(a,e),!nz()){let{name:u,type:f,value:h}=e;if(f==="image"){let m=u?`${u}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else u&&o.append(u,h)}}else{if(B1(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Rg,r=null,i=Og,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function aS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oz(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Gs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function sz(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function az(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function lz(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await sz(o,n);return s.links?s.links():[]}return[]}));return fz(r.flat(1).filter(az).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function IN(e,t,n,r,i,o){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,a=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return o==="assets"?t.filter((c,u)=>s(c,u)||a(c,u)):o==="data"?t.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function cz(e,t,{includeHydrateFallback:n}={}){return uz(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function uz(e){return[...new Set(e)]}function dz(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function fz(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(dz(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function cD(){let e=A.useContext(ud);return aS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function hz(){let e=A.useContext(I1);return aS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lS=A.createContext(void 0);lS.displayName="FrameworkContext";function uD(){let e=A.useContext(lS);return aS(e,"You must render this element inside a <HydratedRouter> element"),e}function pz(e,t){let n=A.useContext(lS),[r,i]=A.useState(!1),[o,s]=A.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=t,m=A.useRef(null);A.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let E=S=>{S.forEach(N=>{s(N.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[e]),A.useEffect(()=>{if(r){let E=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{i(!0)},y=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,m,{}]:[o,m,{onFocus:Af(a,g),onBlur:Af(c,y),onMouseEnter:Af(u,g),onMouseLeave:Af(f,y),onTouchStart:Af(h,g)}]:[!1,m,{}]}function Af(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mz({page:e,...t}){let{router:n}=cD(),r=A.useMemo(()=>Z6(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?A.createElement(bz,{page:e,matches:r,...t}):null}function gz(e){let{manifest:t,routeModules:n}=uD(),[r,i]=A.useState([]);return A.useEffect(()=>{let o=!1;return lz(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function bz({page:e,matches:t,...n}){let r=Cc(),{manifest:i,routeModules:o}=uD(),{basename:s}=cD(),{loaderData:a,matches:c}=hz(),u=A.useMemo(()=>IN(e,t,c,i,r,"data"),[e,t,c,i,r]),f=A.useMemo(()=>IN(e,t,c,i,r,"assets"),[e,t,c,i,r]),h=A.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,E=!1;if(t.forEach(S=>{let N=i.routes[S.route.id];!N||!N.hasLoader||(!u.some(_=>_.route.id===S.route.id)&&S.route.id in a&&o[S.route.id]?.shouldRevalidate||N.hasClientLoader?E=!0:y.add(S.route.id))}),y.size===0)return[];let C=oz(e,s,"data");return E&&y.size>0&&C.searchParams.set("_routes",t.filter(S=>y.has(S.route.id)).map(S=>S.route.id).join(",")),[C.pathname+C.search]},[s,a,r,i,u,t,e,o]),m=A.useMemo(()=>cz(f,i),[f,i]),g=gz(f);return A.createElement(A.Fragment,null,h.map(y=>A.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>A.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),g.map(({key:y,link:E})=>A.createElement("link",{key:y,nonce:n.nonce,...E})))}function yz(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var dD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dD&&(window.__reactRouterVersion="7.9.4")}catch{}function Ez({basename:e,children:t,window:n}){let r=A.useRef();r.current==null&&(r.current=sj({window:n,v5Compat:!0}));let i=r.current,[o,s]=A.useState({action:i.action,location:i.location}),a=A.useCallback(c=>{A.startTransition(()=>s(c))},[s]);return A.useLayoutEffect(()=>i.listen(a),[i,a]),A.createElement(Kj,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var fD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hD=A.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:c,to:u,preventScrollReset:f,viewTransition:h,...m},g){let{basename:y}=A.useContext(rs),E=typeof u=="string"&&fD.test(u),C,S=!1;if(typeof u=="string"&&E&&(C=u,dD))try{let z=new URL(window.location.href),B=u.startsWith("//")?new URL(z.protocol+u):new URL(u),U=Gs(B.pathname,y);B.origin===z.origin&&U!=null?u=U+B.search+B.hash:S=!0}catch{Qo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Dj(u,{relative:i}),[_,O,M]=pz(r,m),R=Sz(u,{replace:s,state:a,target:c,preventScrollReset:f,relative:i,viewTransition:h});function L(z){t&&t(z),z.defaultPrevented||R(z)}let F=A.createElement("a",{...m,...M,href:C||N,onClick:S||o?t:L,ref:yz(g,O),target:c,"data-discover":!E&&n==="render"?"true":void 0});return _&&!E?A.createElement(A.Fragment,null,F,A.createElement(mz,{page:N})):F});hD.displayName="Link";var vz=A.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:c,...u},f){let h=ip(s,{relative:u.relative}),m=Cc(),g=A.useContext(I1),{navigator:y,basename:E}=A.useContext(rs),C=g!=null&&Az(h)&&a===!0,S=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,N=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(N=N.toLowerCase(),_=_?_.toLowerCase():null,S=S.toLowerCase()),_&&E&&(_=Gs(_,E)||_);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let M=N===S||!i&&N.startsWith(S)&&N.charAt(O)==="/",R=_!=null&&(_===S||!i&&_.startsWith(S)&&_.charAt(S.length)==="/"),L={isActive:M,isPending:R,isTransitioning:C},F=M?t:void 0,z;typeof r=="function"?z=r(L):z=[r,M?"active":null,R?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(L):o;return A.createElement(hD,{...u,"aria-current":F,className:z,ref:f,style:B,to:s,viewTransition:a},typeof c=="function"?c(L):c)});vz.displayName="NavLink";var Cz=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=Rg,action:a,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,...m},g)=>{let y=kz(),E=_z(a,{relative:u}),C=s.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&fD.test(a),N=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let O=_.nativeEvent.submitter,M=O?.getAttribute("formmethod")||s;y(O||_.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:i,state:o,relative:u,preventScrollReset:f,viewTransition:h})};return A.createElement("form",{ref:g,method:C,action:E,onSubmit:r?c:N,...m,"data-discover":!S&&e==="render"?"true":void 0})});Cz.displayName="Form";function wz(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(e){let t=A.useContext(ud);return bn(t,wz(e)),t}function Sz(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=iS(),c=Cc(),u=ip(e,{relative:o});return A.useCallback(f=>{if(tz(f,t)){f.preventDefault();let h=n!==void 0?n:bh(c)===bh(u);a(e,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[c,a,u,n,r,t,e,i,o,s])}var Tz=0,xz=()=>`__${String(++Tz)}__`;function kz(){let{router:e}=pD("useSubmit"),{basename:t}=A.useContext(rs),n=qj();return A.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:c,body:u}=iz(r,t);if(i.navigate===!1){let f=i.fetcherKey||xz();await e.fetch(f,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function _z(e,{relative:t}={}){let{basename:n}=A.useContext(rs),r=A.useContext(is);bn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...ip(e||".",{relative:t})},s=Cc();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),c=a.getAll("index");if(c.some(f=>f==="")){a.delete("index"),c.filter(h=>h).forEach(h=>a.append("index",h));let f=a.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Fs([n,o.pathname])),bh(o)}function Az(e,{relative:t}={}){let n=A.useContext(iD);bn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pD("useViewTransitionState"),i=ip(e,{relative:t});if(!n.isTransitioning)return!1;let o=Gs(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Gs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return t0(i.pathname,s)!=null||t0(i.pathname,o)!=null}var Xo=X6();const Nz=ld(Xo),Pl="/api";async function Hl(e,t={},n=5,r=1e3){let i=null;for(let o=0;o<n;o++)try{const s=await fetch(e,t);if(s.ok)return o>0&&console.log(` Request succeeded after ${o+1} attempts`),s;if(s.status===503&&o<n-1){console.log(` Backend service unavailable (attempt ${o+1}/${n})`),console.log(`   Waiting ${r}ms for backend to be ready...`),await new Promise(a=>setTimeout(a,r));continue}if(o<n-1&&s.status>=500){console.log(` Server error ${s.status} (attempt ${o+1}/${n})`),console.log(`   Retrying in ${r}ms...`),await new Promise(a=>setTimeout(a,r));continue}return s}catch(s){if(i=s,o<n-1)console.log(` Connection error (attempt ${o+1}/${n}): ${s.message}`),console.log(`   Backend may be restarting... retrying in ${r}ms`),await new Promise(a=>setTimeout(a,r));else throw console.error(` Failed after ${n} attempts:`,s),s}throw i||new Error("Failed to fetch after retries")}const li={async getTopics(){return(await Hl(`${Pl}/topics`)).json()},async getTopic(e){return(await Hl(`${Pl}/topics/${e}`)).json()},async getWorkspace(e){const t=`${Pl}/workspace/${e}`;console.log(` Fetching workspace: ${t}`);const n=await Hl(t);if(!n.ok)throw console.error(" Workspace API error:",{url:t,status:n.status,statusText:n.statusText}),new Error(`Failed to fetch workspace: ${n.status} ${n.statusText}`);const r=await n.json();return console.log(" Workspace loaded:",{topicId:e,blocks:r.content?.blocks?.length||0}),r},async saveContent(e,t,n){const r=`${Pl}/workspace/${e}/content`;console.log(" Saving content:",{url:r,blocks:t?.length||0});const i=await Hl(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t,updated_by:n})});if(!i.ok)throw console.error(" Save API error:",{url:r,status:i.status,statusText:i.statusText}),new Error(`Failed to save content: ${i.status} ${i.statusText}`);const o=await i.json();return console.log(" Content saved successfully"),o},async addFeedback(e,t,n){return(await Hl(`${Pl}/workspace/${e}/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author_name:t,content:n})})).json()},async addIdea(e,t,n){return(await Hl(`${Pl}/workspace/${e}/ideas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author_name:t,idea:n})})).json()},async voteIdea(e,t){return(await Hl(`${Pl}/workspace/${e}/ideas/${t}/vote`,{method:"POST"})).json()}};function Mz(){const[e,t]=A.useState([]),[n,r]=A.useState(!0),i=iS();A.useEffect(()=>{o()},[]);const o=async()=>{try{const a=await li.getTopics();t(a)}catch(a){console.error("Failed to load topics:",a)}finally{r(!1)}},s=a=>{i(`/topic/${a}`)};return n?k.jsxs("div",{className:"container loading",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Loading..."})]}):k.jsxs("div",{className:"container home-page",children:[k.jsxs("header",{className:"hero",children:[k.jsx("div",{className:"glitch-wrapper",children:k.jsx("h1",{className:"glitch","data-text":"SURE HACKERTON",children:"SURE HACKERTON"})}),k.jsxs("div",{className:"subtitle",children:[k.jsx("p",{className:"neon-text",children:"AI VIBE CODING CHALLENGE 2025"}),k.jsx("div",{className:"tagline",children:"    "})]}),k.jsxs("div",{className:"hero-decoration",children:[k.jsx("div",{className:"scan-line"}),k.jsx("div",{className:"grid-bg"})]})]}),k.jsxs("section",{className:"stats",children:[k.jsxs("div",{className:"stat-item",children:[k.jsx("div",{className:"stat-number",children:e.length}),k.jsx("div",{className:"stat-label",children:""})]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("div",{className:"stat-number",children:"LIVE"}),k.jsx("div",{className:"stat-label",children:""})]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("div",{className:"stat-number",children:"2025"}),k.jsx("div",{className:"stat-label",children:""})]})]}),k.jsxs("section",{className:"topics-section",children:[k.jsxs("h2",{className:"section-title",children:[k.jsx("span",{className:"bracket",children:"["})," ",k.jsx("span",{className:"bracket",children:"]"})]}),k.jsx("div",{className:"topics-grid",children:e.map(a=>k.jsxs("div",{className:"topic-card",onClick:()=>s(a.id),children:[k.jsx("div",{className:"topic-number",children:String(a.id).padStart(2,"0")}),k.jsx("h3",{className:"topic-title",children:a.title}),k.jsx("p",{className:"topic-description",children:a.description}),k.jsx("div",{className:"topic-footer",children:k.jsx("span",{className:"topic-link",children:"  "})})]},a.id))})]}),k.jsx("footer",{className:"footer",children:k.jsxs("div",{className:"footer-content",children:[k.jsx("p",{children:" 2025 Sure Hackerton  AI Vibe Coding Challenge"}),k.jsxs("div",{className:"footer-decoration",children:[k.jsx("span",{className:"pulse-dot"}),k.jsx("span",{className:"footer-text",children:"POWERED BY Peter(feat. Claude CODE)"}),k.jsx("span",{className:"pulse-dot"})]})]})})]})}const Rz="modulepreload",Oz=function(e){return"/"+e},BN={},n0=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var s=u;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=u(n.map(f=>{if(f=Oz(f),f in BN)return;BN[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":Rz,h||(g.as="script"),g.crossOrigin="",g.href=f,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((y,E)=>{g.addEventListener("load",y),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};function P1(){return typeof window<"u"}function dd(e){return cS(e)?(e.nodeName||"").toLowerCase():"#document"}function Gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ss(e){var t;return(t=(cS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function cS(e){return P1()?e instanceof Node||e instanceof Gr(e).Node:!1}function dn(e){return P1()?e instanceof Element||e instanceof Gr(e).Element:!1}function bi(e){return P1()?e instanceof HTMLElement||e instanceof Gr(e).HTMLElement:!1}function mw(e){return!P1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gr(e).ShadowRoot}const Dz=new Set(["inline","contents"]);function op(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ki(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Dz.has(i)}const Lz=new Set(["table","td","th"]);function Iz(e){return Lz.has(dd(e))}const Bz=[":popover-open",":modal"];function H1(e){return Bz.some(t=>{try{return e.matches(t)}catch{return!1}})}const Pz=["transform","translate","scale","rotate","perspective"],Hz=["transform","translate","scale","rotate","perspective","filter"],Uz=["paint","layout","strict","content"];function uS(e){const t=U1(),n=dn(e)?Ki(e):e;return Pz.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Hz.some(r=>(n.willChange||"").includes(r))||Uz.some(r=>(n.contain||"").includes(r))}function Fz(e){let t=Ws(e);for(;bi(t)&&!js(t);){if(uS(t))return t;if(H1(t))return null;t=Ws(t)}return null}function U1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jz=new Set(["html","body","#document"]);function js(e){return jz.has(dd(e))}function Ki(e){return Gr(e).getComputedStyle(e)}function F1(e){return dn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ws(e){if(dd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||mw(e)&&e.host||ss(e);return mw(t)?t.host:t}function mD(e){const t=Ws(e);return js(t)?e.ownerDocument?e.ownerDocument.body:e.body:bi(t)&&op(t)?t:mD(t)}function zs(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=mD(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Gr(i);if(o){const a=gw(s);return t.concat(s,s.visualViewport||[],op(i)?i:[],a&&n?zs(a):[])}return t.concat(i,zs(i,[],n))}function gw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const zz=["top","right","bottom","left"],po=Math.min,fr=Math.max,r0=Math.round,Wm=Math.floor,qo=e=>({x:e,y:e}),$z={left:"right",right:"left",bottom:"top",top:"bottom"},Vz={start:"end",end:"start"};function bw(e,t,n){return fr(e,po(t,n))}function Zo(e,t){return typeof e=="function"?e(t):e}function mo(e){return e.split("-")[0]}function fd(e){return e.split("-")[1]}function dS(e){return e==="x"?"y":"x"}function fS(e){return e==="y"?"height":"width"}const qz=new Set(["top","bottom"]);function so(e){return qz.has(mo(e))?"y":"x"}function hS(e){return dS(so(e))}function Yz(e,t,n){n===void 0&&(n=!1);const r=fd(e),i=hS(e),o=fS(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=i0(s)),[s,i0(s)]}function Gz(e){const t=i0(e);return[yw(e),t,yw(t)]}function yw(e){return e.replace(/start|end/g,t=>Vz[t])}const PN=["left","right"],HN=["right","left"],Wz=["top","bottom"],Kz=["bottom","top"];function Qz(e,t,n){switch(e){case"top":case"bottom":return n?t?HN:PN:t?PN:HN;case"left":case"right":return t?Wz:Kz;default:return[]}}function Xz(e,t,n,r){const i=fd(e);let o=Qz(mo(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(yw)))),o}function i0(e){return e.replace(/left|right|bottom|top/g,t=>$z[t])}function Zz(e){return{top:0,right:0,bottom:0,left:0,...e}}function pS(e){return typeof e!="number"?Zz(e):{top:e,right:e,bottom:e,left:e}}function Yu(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Jz=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ew=Jz.join(","),gD=typeof Element>"u",yh=gD?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,o0=!gD&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},s0=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},e$=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},t$=function(t,n,r){if(s0(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Ew));return n&&yh.call(t,Ew)&&i.unshift(t),i=i.filter(r),i},n$=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!s0(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,u=e(c,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:s,candidates:u})}else{var f=yh.call(s,Ew);f&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var h=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),m=!s0(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(h&&m){var g=e(h===!0?s.children:h.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:s,candidates:g})}else o.unshift.apply(o,s.children)}}return i},bD=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},yD=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||e$(t))&&!bD(t)?0:t.tabIndex},r$=function(t,n){var r=yD(t);return r<0&&n&&!bD(t)?0:r},i$=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},ED=function(t){return t.tagName==="INPUT"},o$=function(t){return ED(t)&&t.type==="hidden"},s$=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},a$=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},l$=function(t){if(!t.name)return!0;var n=t.form||o0(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=a$(i,t.form);return!o||o===t},c$=function(t){return ED(t)&&t.type==="radio"},u$=function(t){return c$(t)&&!l$(t)},d$=function(t){var n,r=t&&o0(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,a,c;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var u,f,h;r=o0(i),i=(u=r)===null||u===void 0?void 0:u.host,o=!!((f=i)!==null&&f!==void 0&&(h=f.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return o},UN=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},f$=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=yh.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(yh.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var c=t.parentElement,u=o0(t);if(c&&!c.shadowRoot&&i(c)===!0)return UN(t);t.assignedSlot?t=t.assignedSlot:!c&&u!==t.ownerDocument?t=u.host:t=c}t=a}if(d$(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return UN(t);return!1},h$=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return yh.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},p$=function(t,n){return!(n.disabled||s0(n)||o$(n)||f$(n,t)||s$(n)||h$(n))},FN=function(t,n){return!(u$(n)||yD(n)<0||!p$(t,n))},m$=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},g$=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,c=r$(a,s),u=s?e(i.candidates):a;c===0?s?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:c,item:i,isScope:s,content:u})}),r.sort(i$).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},vD=function(t,n){n=n||{};var r;return n.getShadowRoot?r=n$([t],n.includeContainer,{filter:FN.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:m$}):r=t$(t,n.includeContainer,FN.bind(null,n)),g$(r)};function b$(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function y$(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function CD(){return/apple/i.test(navigator.vendor)}function E$(){return b$().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function v$(){return y$().includes("jsdom/")}const jN="data-floating-ui-focusable",C$="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function vw(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Gu(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&mw(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Tu(e){return"composedPath"in e?e.composedPath()[0]:e.target}function kv(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function w$(e){return e.matches("html,body")}function Vo(e){return e?.ownerDocument||document}function S$(e){return bi(e)&&e.matches(C$)}function T$(e){if(!e||v$())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function x$(e){return e?e.hasAttribute(jN)?e:e.querySelector("["+jN+"]")||e:null}function Dg(e,t,n){return n===void 0&&(n=!0),e.filter(i=>{var o;return i.parentId===t&&(!n||((o=i.context)==null?void 0:o.open))}).flatMap(i=>[i,...Dg(e,i.id,n)])}function k$(e){return"nativeEvent"in e}function Cw(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}var _$=typeof document<"u",A$=function(){},mr=_$?A.useLayoutEffect:A$;const N$={...Q6};function ja(e){const t=A.useRef(e);return mr(()=>{t.current=e}),t}const M$=N$.useInsertionEffect,R$=M$||(e=>e());function $o(e){const t=A.useRef(()=>{});return R$(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}const wD=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function SD(e,t){const n=vD(e,wD()),r=n.length;if(r===0)return;const i=vw(Vo(e)),o=n.indexOf(i),s=o===-1?t===1?0:r-1:o+t;return n[s]}function O$(e){return SD(Vo(e).body,1)||e}function D$(e){return SD(Vo(e).body,-1)||e}function _v(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Gu(n,r)}function L$(e){vD(e,wD()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function zN(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function $N(e,t,n){let{reference:r,floating:i}=e;const o=so(t),s=hS(t),a=fS(s),c=mo(t),u=o==="y",f=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(c){case"top":g={x:f,y:r.y-i.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(fd(t)){case"start":g[s]-=m*(n&&u?-1:1);break;case"end":g[s]+=m*(n&&u?-1:1);break}return g}const I$=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=$N(u,r,c),m=r,g={},y=0;for(let E=0;E<a.length;E++){const{name:C,fn:S}=a[E],{x:N,y:_,data:O,reset:M}=await S({x:f,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:u,platform:s,elements:{reference:e,floating:t}});f=N??f,h=_??h,g={...g,[C]:{...g[C],...O}},M&&y<=50&&(y++,typeof M=="object"&&(M.placement&&(m=M.placement),M.rects&&(u=M.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:f,y:h}=$N(u,m,c)),E=-1)}return{x:f,y:h,placement:m,strategy:i,middlewareData:g}};async function Eh(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Zo(t,e),y=pS(g),C=a[m?h==="floating"?"reference":"floating":h],S=Yu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:c})),N=h==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),O=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},M=Yu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:N,offsetParent:_,strategy:c}):N);return{top:(S.top-M.top+y.top)/O.y,bottom:(M.bottom-S.bottom+y.bottom)/O.y,left:(S.left-M.left+y.left)/O.x,right:(M.right-S.right+y.right)/O.x}}const B$=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:c}=t,{element:u,padding:f=0}=Zo(e,t)||{};if(u==null)return{};const h=pS(f),m={x:n,y:r},g=hS(i),y=fS(g),E=await s.getDimensions(u),C=g==="y",S=C?"top":"left",N=C?"bottom":"right",_=C?"clientHeight":"clientWidth",O=o.reference[y]+o.reference[g]-m[g]-o.floating[y],M=m[g]-o.reference[g],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let L=R?R[_]:0;(!L||!await(s.isElement==null?void 0:s.isElement(R)))&&(L=a.floating[_]||o.floating[y]);const F=O/2-M/2,z=L/2-E[y]/2-1,B=po(h[S],z),U=po(h[N],z),q=B,re=L-E[y]-U,J=L/2-E[y]/2+F,ae=bw(q,J,re),W=!c.arrow&&fd(i)!=null&&J!==ae&&o.reference[y]/2-(J<q?B:U)-E[y]/2<0,Z=W?J<q?J-q:J-re:0;return{[g]:m[g]+Z,data:{[g]:ae,centerOffset:J-ae-Z,...W&&{alignmentOffset:Z}},reset:W}}}),P$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:E=!0,...C}=Zo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const S=mo(i),N=so(a),_=mo(a)===a,O=await(c.isRTL==null?void 0:c.isRTL(u.floating)),M=m||(_||!E?[i0(a)]:Gz(a)),R=y!=="none";!m&&R&&M.push(...Xz(a,E,y,O));const L=[a,...M],F=await Eh(t,C),z=[];let B=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&z.push(F[S]),h){const J=Yz(i,s,O);z.push(F[J[0]],F[J[1]])}if(B=[...B,{placement:i,overflows:z}],!z.every(J=>J<=0)){var U,q;const J=(((U=o.flip)==null?void 0:U.index)||0)+1,ae=L[J];if(ae&&(!(h==="alignment"?N!==so(ae):!1)||B.every(te=>so(te.placement)===N?te.overflows[0]>0:!0)))return{data:{index:J,overflows:B},reset:{placement:ae}};let W=(q=B.filter(Z=>Z.overflows[0]<=0).sort((Z,te)=>Z.overflows[1]-te.overflows[1])[0])==null?void 0:q.placement;if(!W)switch(g){case"bestFit":{var re;const Z=(re=B.filter(te=>{if(R){const ue=so(te.placement);return ue===N||ue==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(ue=>ue>0).reduce((ue,$)=>ue+$,0)]).sort((te,ue)=>te[1]-ue[1])[0])==null?void 0:re[0];Z&&(W=Z);break}case"initialPlacement":W=a;break}if(i!==W)return{reset:{placement:W}}}return{}}}};function VN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qN(e){return zz.some(t=>e[t]>=0)}const H$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Zo(e,t);switch(r){case"referenceHidden":{const o=await Eh(t,{...i,elementContext:"reference"}),s=VN(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:qN(s)}}}case"escaped":{const o=await Eh(t,{...i,altBoundary:!0}),s=VN(o,n.floating);return{data:{escapedOffsets:s,escaped:qN(s)}}}default:return{}}}}};function TD(e){const t=po(...e.map(o=>o.left)),n=po(...e.map(o=>o.top)),r=fr(...e.map(o=>o.right)),i=fr(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:i-n}}function U$(e){const t=e.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<t.length;i++){const o=t[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Yu(TD(i)))}const F$=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:o,strategy:s}=t,{padding:a=2,x:c,y:u}=Zo(e,t),f=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),h=U$(f),m=Yu(TD(f)),g=pS(a);function y(){if(h.length===2&&h[0].left>h[1].right&&c!=null&&u!=null)return h.find(C=>c>C.left-g.left&&c<C.right+g.right&&u>C.top-g.top&&u<C.bottom+g.bottom)||m;if(h.length>=2){if(so(n)==="y"){const B=h[0],U=h[h.length-1],q=mo(n)==="top",re=B.top,J=U.bottom,ae=q?B.left:U.left,W=q?B.right:U.right,Z=W-ae,te=J-re;return{top:re,bottom:J,left:ae,right:W,width:Z,height:te,x:ae,y:re}}const C=mo(n)==="left",S=fr(...h.map(B=>B.right)),N=po(...h.map(B=>B.left)),_=h.filter(B=>C?B.left===N:B.right===S),O=_[0].top,M=_[_.length-1].bottom,R=N,L=S,F=L-R,z=M-O;return{top:O,bottom:M,left:R,right:L,width:F,height:z,x:R,y:O}}return m}const E=await o.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:s});return i.reference.x!==E.reference.x||i.reference.y!==E.reference.y||i.reference.width!==E.reference.width||i.reference.height!==E.reference.height?{reset:{rects:E}}:{}}}},xD=new Set(["left","top"]);async function j$(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=mo(n),a=fd(n),c=so(n)==="y",u=xD.has(s)?-1:1,f=o&&c?-1:1,h=Zo(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),c?{x:g*f,y:m*u}:{x:m*u,y:g*f}}const z$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,c=await j$(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},$$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:S,y:N}=C;return{x:S,y:N}}},...c}=Zo(e,t),u={x:n,y:r},f=await Eh(t,c),h=so(mo(i)),m=dS(h);let g=u[m],y=u[h];if(o){const C=m==="y"?"top":"left",S=m==="y"?"bottom":"right",N=g+f[C],_=g-f[S];g=bw(N,g,_)}if(s){const C=h==="y"?"top":"left",S=h==="y"?"bottom":"right",N=y+f[C],_=y-f[S];y=bw(N,y,_)}const E=a.fn({...t,[m]:g,[h]:y});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[m]:o,[h]:s}}}}}},V$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Zo(e,t),f={x:n,y:r},h=so(i),m=dS(h);let g=f[m],y=f[h];const E=Zo(a,t),C=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(c){const _=m==="y"?"height":"width",O=o.reference[m]-o.floating[_]+C.mainAxis,M=o.reference[m]+o.reference[_]-C.mainAxis;g<O?g=O:g>M&&(g=M)}if(u){var S,N;const _=m==="y"?"width":"height",O=xD.has(mo(i)),M=o.reference[h]-o.floating[_]+(O&&((S=s.offset)==null?void 0:S[h])||0)+(O?0:C.crossAxis),R=o.reference[h]+o.reference[_]+(O?0:((N=s.offset)==null?void 0:N[h])||0)-(O?C.crossAxis:0);y<M?y=M:y>R&&(y=R)}return{[m]:g,[h]:y}}}},q$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:c=()=>{},...u}=Zo(e,t),f=await Eh(t,u),h=mo(i),m=fd(i),g=so(i)==="y",{width:y,height:E}=o.floating;let C,S;h==="top"||h==="bottom"?(C=h,S=m===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=h,C=m==="end"?"top":"bottom");const N=E-f.top-f.bottom,_=y-f.left-f.right,O=po(E-f[C],N),M=po(y-f[S],_),R=!t.middlewareData.shift;let L=O,F=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(F=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(L=N),R&&!m){const B=fr(f.left,0),U=fr(f.right,0),q=fr(f.top,0),re=fr(f.bottom,0);g?F=y-2*(B!==0||U!==0?B+U:fr(f.left,f.right)):L=E-2*(q!==0||re!==0?q+re:fr(f.top,f.bottom))}await c({...t,availableWidth:F,availableHeight:L});const z=await s.getDimensions(a.floating);return y!==z.width||E!==z.height?{reset:{rects:!0}}:{}}}};function kD(e){const t=Ki(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bi(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=r0(n)!==o||r0(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function mS(e){return dn(e)?e:e.contextElement}function Lu(e){const t=mS(e);if(!bi(t))return qo(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=kD(t);let s=(o?r0(n.width):n.width)/r,a=(o?r0(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Y$=qo(0);function _D(e){const t=Gr(e);return!U1()||!t.visualViewport?Y$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function G$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gr(e)?!1:t}function ic(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=mS(e);let s=qo(1);t&&(r?dn(r)&&(s=Lu(r)):s=Lu(e));const a=G$(o,n,r)?_D(o):qo(0);let c=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(o){const m=Gr(o),g=r&&dn(r)?Gr(r):r;let y=m,E=gw(y);for(;E&&r&&g!==y;){const C=Lu(E),S=E.getBoundingClientRect(),N=Ki(E),_=S.left+(E.clientLeft+parseFloat(N.paddingLeft))*C.x,O=S.top+(E.clientTop+parseFloat(N.paddingTop))*C.y;c*=C.x,u*=C.y,f*=C.x,h*=C.y,c+=_,u+=O,y=Gr(E),E=gw(y)}}return Yu({width:f,height:h,x:c,y:u})}function j1(e,t){const n=F1(e).scrollLeft;return t?t.left+n:ic(ss(e)).left+n}function AD(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-j1(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function W$(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=ss(r),a=t?H1(t.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},u=qo(1);const f=qo(0),h=bi(r);if((h||!h&&!o)&&((dd(r)!=="body"||op(s))&&(c=F1(r)),bi(r))){const g=ic(r);u=Lu(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=s&&!h&&!o?AD(s,c):qo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+m.x,y:n.y*u.y-c.scrollTop*u.y+f.y+m.y}}function K$(e){return Array.from(e.getClientRects())}function Q$(e){const t=ss(e),n=F1(e),r=e.ownerDocument.body,i=fr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=fr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+j1(e);const a=-n.scrollTop;return Ki(r).direction==="rtl"&&(s+=fr(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}const YN=25;function X$(e,t){const n=Gr(e),r=ss(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const f=U1();(!f||f&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const u=j1(r);if(u<=0){const f=r.ownerDocument,h=f.body,m=getComputedStyle(h),g=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-h.clientWidth-g);y<=YN&&(o-=y)}else u<=YN&&(o+=u);return{width:o,height:s,x:a,y:c}}const Z$=new Set(["absolute","fixed"]);function J$(e,t){const n=ic(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=bi(e)?Lu(e):qo(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,c=i*o.x,u=r*o.y;return{width:s,height:a,x:c,y:u}}function GN(e,t,n){let r;if(t==="viewport")r=X$(e,n);else if(t==="document")r=Q$(ss(e));else if(dn(t))r=J$(t,n);else{const i=_D(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Yu(r)}function ND(e,t){const n=Ws(e);return n===t||!dn(n)||js(n)?!1:Ki(n).position==="fixed"||ND(n,t)}function eV(e,t){const n=t.get(e);if(n)return n;let r=zs(e,[],!1).filter(a=>dn(a)&&dd(a)!=="body"),i=null;const o=Ki(e).position==="fixed";let s=o?Ws(e):e;for(;dn(s)&&!js(s);){const a=Ki(s),c=uS(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&Z$.has(i.position)||op(s)&&!c&&ND(e,s))?r=r.filter(f=>f!==s):i=a,s=Ws(s)}return t.set(e,r),r}function tV(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?H1(t)?[]:eV(t,this._c):[].concat(n),r],a=s[0],c=s.reduce((u,f)=>{const h=GN(t,f,i);return u.top=fr(h.top,u.top),u.right=po(h.right,u.right),u.bottom=po(h.bottom,u.bottom),u.left=fr(h.left,u.left),u},GN(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function nV(e){const{width:t,height:n}=kD(e);return{width:t,height:n}}function rV(e,t,n){const r=bi(t),i=ss(t),o=n==="fixed",s=ic(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=qo(0);function u(){c.x=j1(i)}if(r||!r&&!o)if((dd(t)!=="body"||op(i))&&(a=F1(t)),r){const g=ic(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else i&&u();o&&!r&&i&&u();const f=i&&!r&&!o?AD(i,a):qo(0),h=s.left+a.scrollLeft-c.x-f.x,m=s.top+a.scrollTop-c.y-f.y;return{x:h,y:m,width:s.width,height:s.height}}function Av(e){return Ki(e).position==="static"}function WN(e,t){if(!bi(e)||Ki(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ss(e)===n&&(n=n.ownerDocument.body),n}function MD(e,t){const n=Gr(e);if(H1(e))return n;if(!bi(e)){let i=Ws(e);for(;i&&!js(i);){if(dn(i)&&!Av(i))return i;i=Ws(i)}return n}let r=WN(e,t);for(;r&&Iz(r)&&Av(r);)r=WN(r,t);return r&&js(r)&&Av(r)&&!uS(r)?n:r||Fz(e)||n}const iV=async function(e){const t=this.getOffsetParent||MD,n=this.getDimensions,r=await n(e.floating);return{reference:rV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oV(e){return Ki(e).direction==="rtl"}const sV={convertOffsetParentRelativeRectToViewportRelativeRect:W$,getDocumentElement:ss,getClippingRect:tV,getOffsetParent:MD,getElementRects:iV,getClientRects:K$,getDimensions:nV,getScale:Lu,isElement:dn,isRTL:oV};function RD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function aV(e,t){let n=null,r;const i=ss(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=u;if(a||t(),!m||!g)return;const y=Wm(h),E=Wm(i.clientWidth-(f+m)),C=Wm(i.clientHeight-(h+g)),S=Wm(f),_={rootMargin:-y+"px "+-E+"px "+-C+"px "+-S+"px",threshold:fr(0,po(1,c))||1};let O=!0;function M(R){const L=R[0].intersectionRatio;if(L!==c){if(!O)return s();L?s(!1,L):r=setTimeout(()=>{s(!1,1e-7)},1e3)}L===1&&!RD(u,e.getBoundingClientRect())&&s(),O=!1}try{n=new IntersectionObserver(M,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,_)}n.observe(e)}return s(!0),o}function ww(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=mS(e),f=i||o?[...u?zs(u):[],...zs(t)]:[];f.forEach(S=>{i&&S.addEventListener("scroll",n,{passive:!0}),o&&S.addEventListener("resize",n)});const h=u&&a?aV(u,n):null;let m=-1,g=null;s&&(g=new ResizeObserver(S=>{let[N]=S;N&&N.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(t)})),n()}),u&&!c&&g.observe(u),g.observe(t));let y,E=c?ic(e):null;c&&C();function C(){const S=ic(e);E&&!RD(E,S)&&n(),E=S,y=requestAnimationFrame(C)}return n(),()=>{var S;f.forEach(N=>{i&&N.removeEventListener("scroll",n),o&&N.removeEventListener("resize",n)}),h?.(),(S=g)==null||S.disconnect(),g=null,c&&cancelAnimationFrame(y)}}const lV=z$,cV=$$,uV=P$,dV=q$,fV=H$,KN=B$,hV=F$,pV=V$,mV=(e,t,n)=>{const r=new Map,i={platform:sV,...n},o={...i.platform,_c:r};return I$(e,t,{...i,platform:o})};var gV=typeof document<"u",bV=function(){},Lg=gV?A.useLayoutEffect:bV;function a0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!a0(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!a0(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function OD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function QN(e,t){const n=OD(e);return Math.round(t*n)/n}function Nv(e){const t=A.useRef(e);return Lg(()=>{t.current=e}),t}function yV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[f,h]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=A.useState(r);a0(m,r)||g(r);const[y,E]=A.useState(null),[C,S]=A.useState(null),N=A.useCallback(te=>{te!==R.current&&(R.current=te,E(te))},[]),_=A.useCallback(te=>{te!==L.current&&(L.current=te,S(te))},[]),O=o||y,M=s||C,R=A.useRef(null),L=A.useRef(null),F=A.useRef(f),z=c!=null,B=Nv(c),U=Nv(i),q=Nv(u),re=A.useCallback(()=>{if(!R.current||!L.current)return;const te={placement:t,strategy:n,middleware:m};U.current&&(te.platform=U.current),mV(R.current,L.current,te).then(ue=>{const $={...ue,isPositioned:q.current!==!1};J.current&&!a0(F.current,$)&&(F.current=$,Xo.flushSync(()=>{h($)}))})},[m,t,n,U,q]);Lg(()=>{u===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h(te=>({...te,isPositioned:!1})))},[u]);const J=A.useRef(!1);Lg(()=>(J.current=!0,()=>{J.current=!1}),[]),Lg(()=>{if(O&&(R.current=O),M&&(L.current=M),O&&M){if(B.current)return B.current(O,M,re);re()}},[O,M,re,B,z]);const ae=A.useMemo(()=>({reference:R,floating:L,setReference:N,setFloating:_}),[N,_]),W=A.useMemo(()=>({reference:O,floating:M}),[O,M]),Z=A.useMemo(()=>{const te={position:n,left:0,top:0};if(!W.floating)return te;const ue=QN(W.floating,f.x),$=QN(W.floating,f.y);return a?{...te,transform:"translate("+ue+"px, "+$+"px)",...OD(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:$}},[n,a,W.floating,f.x,f.y]);return A.useMemo(()=>({...f,update:re,refs:ae,elements:W,floatingStyles:Z}),[f,re,ae,W,Z])}const EV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?KN({element:r.current,padding:i}).fn(n):{}:r?KN({element:r,padding:i}).fn(n):{}}}},as=(e,t)=>({...lV(e),options:[e,t]}),wc=(e,t)=>({...cV(e),options:[e,t]}),XN=(e,t)=>({...pV(e),options:[e,t]}),go=(e,t)=>({...uV(e),options:[e,t]}),z1=(e,t)=>({...dV(e),options:[e,t]}),vV=(e,t)=>({...fV(e),options:[e,t]}),Wf=(e,t)=>({...hV(e),options:[e,t]}),DD=(e,t)=>({...EV(e),options:[e,t]}),CV="data-floating-ui-focusable",ZN="active",JN="selected",wV={...Q6};let eM=!1,SV=0;const tM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+SV++;function TV(){const[e,t]=A.useState(()=>eM?tM():void 0);return mr(()=>{e==null&&t(tM())},[]),A.useEffect(()=>{eM=!0},[]),e}const xV=wV.useId,gS=xV||TV;function kV(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const _V=A.createContext(null),AV=A.createContext(null),bS=()=>{var e;return((e=A.useContext(_V))==null?void 0:e.id)||null},yS=()=>A.useContext(AV);function sp(e){return"data-floating-ui-"+e}function Pi(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const nM=sp("safe-polygon");function Ig(e,t,n){if(n&&!Cw(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r?.[t]}return e?.[t]}function Mv(e){return typeof e=="function"?e():e}function NV(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:c=0,handleClose:u=null,mouseOnly:f=!1,restMs:h=0,move:m=!0}=t,g=yS(),y=bS(),E=ja(u),C=ja(c),S=ja(n),N=ja(h),_=A.useRef(),O=A.useRef(-1),M=A.useRef(),R=A.useRef(-1),L=A.useRef(!0),F=A.useRef(!1),z=A.useRef(()=>{}),B=A.useRef(!1),U=$o(()=>{var Z;const te=(Z=i.current.openEvent)==null?void 0:Z.type;return te?.includes("mouse")&&te!=="mousedown"});A.useEffect(()=>{if(!a)return;function Z(te){let{open:ue}=te;ue||(Pi(O),Pi(R),L.current=!0,B.current=!1)}return o.on("openchange",Z),()=>{o.off("openchange",Z)}},[a,o]),A.useEffect(()=>{if(!a||!E.current||!n)return;function Z(ue){U()&&r(!1,ue,"hover")}const te=Vo(s.floating).documentElement;return te.addEventListener("mouseleave",Z),()=>{te.removeEventListener("mouseleave",Z)}},[s.floating,n,r,a,E,U]);const q=A.useCallback(function(Z,te,ue){te===void 0&&(te=!0),ue===void 0&&(ue="hover");const $=Ig(C.current,"close",_.current);$&&!M.current?(Pi(O),O.current=window.setTimeout(()=>r(!1,Z,ue),$)):te&&(Pi(O),r(!1,Z,ue))},[C,r]),re=$o(()=>{z.current(),M.current=void 0}),J=$o(()=>{if(F.current){const Z=Vo(s.floating).body;Z.style.pointerEvents="",Z.removeAttribute(nM),F.current=!1}}),ae=$o(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);A.useEffect(()=>{if(!a)return;function Z(ie){if(Pi(O),L.current=!1,f&&!Cw(_.current)||Mv(N.current)>0&&!Ig(C.current,"open"))return;const j=Ig(C.current,"open",_.current);j?O.current=window.setTimeout(()=>{S.current||r(!0,ie,"hover")},j):n||r(!0,ie,"hover")}function te(ie){if(ae()){J();return}z.current();const j=Vo(s.floating);if(Pi(R),B.current=!1,E.current&&i.current.floatingContext){n||Pi(O),M.current=E.current({...i.current.floatingContext,tree:g,x:ie.clientX,y:ie.clientY,onClose(){J(),re(),ae()||q(ie,!0,"safe-polygon")}});const Re=M.current;j.addEventListener("mousemove",Re),z.current=()=>{j.removeEventListener("mousemove",Re)};return}(_.current==="touch"?!Gu(s.floating,ie.relatedTarget):!0)&&q(ie)}function ue(ie){ae()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:g,x:ie.clientX,y:ie.clientY,onClose(){J(),re(),ae()||q(ie)}})(ie))}function $(){Pi(O)}function K(ie){ae()||q(ie,!1)}if(dn(s.domReference)){const ie=s.domReference,j=s.floating;return n&&ie.addEventListener("mouseleave",ue),m&&ie.addEventListener("mousemove",Z,{once:!0}),ie.addEventListener("mouseenter",Z),ie.addEventListener("mouseleave",te),j&&(j.addEventListener("mouseleave",ue),j.addEventListener("mouseenter",$),j.addEventListener("mouseleave",K)),()=>{n&&ie.removeEventListener("mouseleave",ue),m&&ie.removeEventListener("mousemove",Z),ie.removeEventListener("mouseenter",Z),ie.removeEventListener("mouseleave",te),j&&(j.removeEventListener("mouseleave",ue),j.removeEventListener("mouseenter",$),j.removeEventListener("mouseleave",K))}}},[s,a,e,f,m,q,re,J,r,n,S,g,C,E,i,ae,N]),mr(()=>{var Z;if(a&&n&&(Z=E.current)!=null&&(Z=Z.__options)!=null&&Z.blockPointerEvents&&U()){F.current=!0;const ue=s.floating;if(dn(s.domReference)&&ue){var te;const $=Vo(s.floating).body;$.setAttribute(nM,"");const K=s.domReference,ie=g==null||(te=g.nodesRef.current.find(j=>j.id===y))==null||(te=te.context)==null?void 0:te.elements.floating;return ie&&(ie.style.pointerEvents=""),$.style.pointerEvents="none",K.style.pointerEvents="auto",ue.style.pointerEvents="auto",()=>{$.style.pointerEvents="",K.style.pointerEvents="",ue.style.pointerEvents=""}}}},[a,n,y,s,g,E,U]),mr(()=>{n||(_.current=void 0,B.current=!1,re(),J())},[n,re,J]),A.useEffect(()=>()=>{re(),Pi(O),Pi(R),J()},[a,s.domReference,re,J]);const W=A.useMemo(()=>{function Z(te){_.current=te.pointerType}return{onPointerDown:Z,onPointerEnter:Z,onMouseMove(te){const{nativeEvent:ue}=te;function $(){!L.current&&!S.current&&r(!0,ue,"hover")}f&&!Cw(_.current)||n||Mv(N.current)===0||B.current&&te.movementX**2+te.movementY**2<2||(Pi(R),_.current==="touch"?$():(B.current=!0,R.current=window.setTimeout($,Mv(N.current))))}}},[f,r,n,S,N]);return A.useMemo(()=>a?{reference:W}:{},[a,W])}const Sw=()=>{},LD=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Sw,setState:Sw,isInstantPhase:!1}),MV=()=>A.useContext(LD);function RV(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,o]=A.useReducer((c,u)=>({...c,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=A.useRef(null),a=A.useCallback(c=>{o({currentId:c})},[]);return mr(()=>{i.currentId?s.current===null?s.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),k.jsx(LD.Provider,{value:A.useMemo(()=>({...i,setState:o,setCurrentId:a}),[i,a]),children:t})}function OV(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o,enabled:s=!0}=t,a=o??i,c=MV(),{currentId:u,setCurrentId:f,initialDelay:h,setState:m,timeoutMs:g}=c;return mr(()=>{s&&u&&(m({delay:{open:1,close:Ig(h,"close")}}),u!==a&&r(!1))},[s,a,r,m,u,h]),mr(()=>{function y(){r(!1),m({delay:h,currentId:null})}if(s&&u&&!n&&u===a){if(g){const E=window.setTimeout(y,g);return()=>{clearTimeout(E)}}y()}},[s,n,m,u,a,r,h,g]),mr(()=>{s&&(f===Sw||!n||f(a))},[s,n,f,a]),c}const ID={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},rM=A.forwardRef(function(t,n){const[r,i]=A.useState();mr(()=>{CD()&&i("button")},[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[sp("focus-guard")]:"",style:ID};return k.jsx("span",{...t,...o})}),BD=A.createContext(null),iM=sp("portal");function DV(e){e===void 0&&(e={});const{id:t,root:n}=e,r=gS(),i=IV(),[o,s]=A.useState(null),a=A.useRef(null);return mr(()=>()=>{o?.remove(),queueMicrotask(()=>{a.current=null})},[o]),mr(()=>{if(!r||a.current)return;const c=t?document.getElementById(t):null;if(!c)return;const u=document.createElement("div");u.id=r,u.setAttribute(iM,""),c.appendChild(u),a.current=u,s(u)},[t,r]),mr(()=>{if(n===null||!r||a.current)return;let c=n||i?.portalNode;c&&!cS(c)&&(c=c.current),c=c||document.body;let u=null;t&&(u=document.createElement("div"),u.id=t,c.appendChild(u));const f=document.createElement("div");f.id=r,f.setAttribute(iM,""),c=u||c,c.appendChild(f),a.current=f,s(f)},[t,n,r,i]),o}function LV(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=DV({id:n,root:r}),[s,a]=A.useState(null),c=A.useRef(null),u=A.useRef(null),f=A.useRef(null),h=A.useRef(null),m=s?.modal,g=s?.open,y=!!s&&!s.modal&&s.open&&i&&!!(r||o);return A.useEffect(()=>{if(!o||!i||m)return;function E(C){o&&_v(C)&&(C.type==="focusin"?zN:L$)(o)}return o.addEventListener("focusin",E,!0),o.addEventListener("focusout",E,!0),()=>{o.removeEventListener("focusin",E,!0),o.removeEventListener("focusout",E,!0)}},[o,i,m]),A.useEffect(()=>{o&&(g||zN(o))},[g,o]),k.jsxs(BD.Provider,{value:A.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:f,afterInsideRef:h,portalNode:o,setFocusManagerState:a}),[i,o]),children:[y&&o&&k.jsx(rM,{"data-type":"outside",ref:c,onFocus:E=>{if(_v(E,o)){var C;(C=f.current)==null||C.focus()}else{const S=s?s.domReference:null,N=D$(S);N?.focus()}}}),y&&o&&k.jsx("span",{"aria-owns":o.id,style:ID}),o&&Xo.createPortal(t,o),y&&o&&k.jsx(rM,{"data-type":"outside",ref:u,onFocus:E=>{if(_v(E,o)){var C;(C=h.current)==null||C.focus()}else{const S=s?s.domReference:null,N=O$(S);N?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const IV=()=>A.useContext(BD),BV={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},PV={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},oM=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function PD(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:f=!1,referencePressEvent:h="pointerdown",ancestorScroll:m=!1,bubbles:g,capture:y}=t,E=yS(),C=$o(typeof c=="function"?c:()=>!1),S=typeof c=="function"?C:c,N=A.useRef(!1),{escapeKey:_,outsidePress:O}=oM(g),{escapeKey:M,outsidePress:R}=oM(y),L=A.useRef(!1),F=$o(J=>{var ae;if(!n||!s||!a||J.key!=="Escape"||L.current)return;const W=(ae=o.current.floatingContext)==null?void 0:ae.nodeId,Z=E?Dg(E.nodesRef.current,W):[];if(!_&&(J.stopPropagation(),Z.length>0)){let te=!0;if(Z.forEach(ue=>{var $;if(($=ue.context)!=null&&$.open&&!ue.context.dataRef.current.__escapeKeyBubbles){te=!1;return}}),!te)return}r(!1,k$(J)?J.nativeEvent:J,"escape-key")}),z=$o(J=>{var ae;const W=()=>{var Z;F(J),(Z=Tu(J))==null||Z.removeEventListener("keydown",W)};(ae=Tu(J))==null||ae.addEventListener("keydown",W)}),B=$o(J=>{var ae;const W=o.current.insideReactTree;o.current.insideReactTree=!1;const Z=N.current;if(N.current=!1,u==="click"&&Z||W||typeof S=="function"&&!S(J))return;const te=Tu(J),ue="["+sp("inert")+"]",$=Vo(i.floating).querySelectorAll(ue);let K=dn(te)?te:null;for(;K&&!js(K);){const Re=Ws(K);if(js(Re)||!dn(Re))break;K=Re}if($.length&&dn(te)&&!w$(te)&&!Gu(te,i.floating)&&Array.from($).every(Re=>!Gu(K,Re)))return;if(bi(te)&&re){const Re=js(te),Le=Ki(te),$e=/auto|scroll/,ot=Re||$e.test(Le.overflowX),Ye=Re||$e.test(Le.overflowY),Bt=ot&&te.clientWidth>0&&te.scrollWidth>te.clientWidth,mn=Ye&&te.clientHeight>0&&te.scrollHeight>te.clientHeight,Jt=Le.direction==="rtl",rt=mn&&(Jt?J.offsetX<=te.offsetWidth-te.clientWidth:J.offsetX>te.clientWidth),Tt=Bt&&J.offsetY>te.clientHeight;if(rt||Tt)return}const ie=(ae=o.current.floatingContext)==null?void 0:ae.nodeId,j=E&&Dg(E.nodesRef.current,ie).some(Re=>{var Le;return kv(J,(Le=Re.context)==null?void 0:Le.elements.floating)});if(kv(J,i.floating)||kv(J,i.domReference)||j)return;const Se=E?Dg(E.nodesRef.current,ie):[];if(Se.length>0){let Re=!0;if(Se.forEach(Le=>{var $e;if(($e=Le.context)!=null&&$e.open&&!Le.context.dataRef.current.__outsidePressBubbles){Re=!1;return}}),!Re)return}r(!1,J,"outside-press")}),U=$o(J=>{var ae;const W=()=>{var Z;B(J),(Z=Tu(J))==null||Z.removeEventListener(u,W)};(ae=Tu(J))==null||ae.addEventListener(u,W)});A.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=_,o.current.__outsidePressBubbles=O;let J=-1;function ae($){r(!1,$,"ancestor-scroll")}function W(){window.clearTimeout(J),L.current=!0}function Z(){J=window.setTimeout(()=>{L.current=!1},U1()?5:0)}const te=Vo(i.floating);a&&(te.addEventListener("keydown",M?z:F,M),te.addEventListener("compositionstart",W),te.addEventListener("compositionend",Z)),S&&te.addEventListener(u,R?U:B,R);let ue=[];return m&&(dn(i.domReference)&&(ue=zs(i.domReference)),dn(i.floating)&&(ue=ue.concat(zs(i.floating))),!dn(i.reference)&&i.reference&&i.reference.contextElement&&(ue=ue.concat(zs(i.reference.contextElement)))),ue=ue.filter($=>{var K;return $!==((K=te.defaultView)==null?void 0:K.visualViewport)}),ue.forEach($=>{$.addEventListener("scroll",ae,{passive:!0})}),()=>{a&&(te.removeEventListener("keydown",M?z:F,M),te.removeEventListener("compositionstart",W),te.removeEventListener("compositionend",Z)),S&&te.removeEventListener(u,R?U:B,R),ue.forEach($=>{$.removeEventListener("scroll",ae)}),window.clearTimeout(J)}},[o,i,a,S,u,n,r,m,s,_,O,F,M,z,B,R,U]),A.useEffect(()=>{o.current.insideReactTree=!1},[o,S,u]);const q=A.useMemo(()=>({onKeyDown:F,...f&&{[BV[h]]:J=>{r(!1,J.nativeEvent,"reference-press")},...h!=="click"&&{onClick(J){r(!1,J.nativeEvent,"reference-press")}}}}),[F,r,f,h]),re=A.useMemo(()=>({onKeyDown:F,onMouseDown(){N.current=!0},onMouseUp(){N.current=!0},[PV[u]]:()=>{o.current.insideReactTree=!0}}),[F,u,o]);return A.useMemo(()=>s?{reference:q,floating:re}:{},[s,q,re])}function HV(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=gS(),o=A.useRef({}),[s]=A.useState(()=>kV()),a=bS()!=null,[c,u]=A.useState(r.reference),f=$o((g,y,E)=>{o.current.openEvent=g?y:void 0,s.emit("openchange",{open:g,event:y,reason:E,nested:a}),n?.(g,y,E)}),h=A.useMemo(()=>({setPositionReference:u}),[]),m=A.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return A.useMemo(()=>({dataRef:o,open:t,onOpenChange:f,elements:m,events:s,floatingId:i,refs:h}),[t,f,m,s,i,h])}function hd(e){e===void 0&&(e={});const{nodeId:t}=e,n=HV({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=A.useState(null),[a,c]=A.useState(null),f=i?.domReference||o,h=A.useRef(null),m=yS();mr(()=>{f&&(h.current=f)},[f]);const g=yV({...e,elements:{...i,...a&&{reference:a}}}),y=A.useCallback(_=>{const O=dn(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),getClientRects:()=>_.getClientRects(),contextElement:_}:_;c(O),g.refs.setReference(O)},[g.refs]),E=A.useCallback(_=>{(dn(_)||_===null)&&(h.current=_,s(_)),(dn(g.refs.reference.current)||g.refs.reference.current===null||_!==null&&!dn(_))&&g.refs.setReference(_)},[g.refs]),C=A.useMemo(()=>({...g.refs,setReference:E,setPositionReference:y,domReference:h}),[g.refs,E,y]),S=A.useMemo(()=>({...g.elements,domReference:f}),[g.elements,f]),N=A.useMemo(()=>({...g,...r,refs:C,elements:S,nodeId:t}),[g,C,S,t,r]);return mr(()=>{r.dataRef.current.floatingContext=N;const _=m?.nodesRef.current.find(O=>O.id===t);_&&(_.context=N)}),A.useMemo(()=>({...g,context:N,refs:C,elements:S}),[g,C,S,N])}function Rv(){return E$()&&CD()}function UV(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:s}=e,{enabled:a=!0,visibleOnly:c=!0}=t,u=A.useRef(!1),f=A.useRef(-1),h=A.useRef(!0);A.useEffect(()=>{if(!a)return;const g=Gr(s.domReference);function y(){!n&&bi(s.domReference)&&s.domReference===vw(Vo(s.domReference))&&(u.current=!0)}function E(){h.current=!0}function C(){h.current=!1}return g.addEventListener("blur",y),Rv()&&(g.addEventListener("keydown",E,!0),g.addEventListener("pointerdown",C,!0)),()=>{g.removeEventListener("blur",y),Rv()&&(g.removeEventListener("keydown",E,!0),g.removeEventListener("pointerdown",C,!0))}},[s.domReference,n,a]),A.useEffect(()=>{if(!a)return;function g(y){let{reason:E}=y;(E==="reference-press"||E==="escape-key")&&(u.current=!0)}return i.on("openchange",g),()=>{i.off("openchange",g)}},[i,a]),A.useEffect(()=>()=>{Pi(f)},[]);const m=A.useMemo(()=>({onMouseLeave(){u.current=!1},onFocus(g){if(u.current)return;const y=Tu(g.nativeEvent);if(c&&dn(y)){if(Rv()&&!g.relatedTarget){if(!h.current&&!S$(y))return}else if(!T$(y))return}r(!0,g.nativeEvent,"focus")},onBlur(g){u.current=!1;const y=g.relatedTarget,E=g.nativeEvent,C=dn(y)&&y.hasAttribute(sp("focus-guard"))&&y.getAttribute("data-type")==="outside";f.current=window.setTimeout(()=>{var S;const N=vw(s.domReference?s.domReference.ownerDocument:document);!y&&N===s.domReference||Gu((S=o.current.floatingContext)==null?void 0:S.refs.floating.current,N)||Gu(s.domReference,N)||C||r(!1,E,"focus")})}}),[o,s.domReference,r,c]);return A.useMemo(()=>a?{reference:m}:{},[a,m])}function Ov(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[ZN]:s,[JN]:a,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[CV]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(c=>{let[u,f]=c;if(!(i&&[ZN,JN].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var h;(h=r.get(u))==null||h.push(f),s[u]=function(){for(var m,g=arguments.length,y=new Array(g),E=0;E<g;E++)y[E]=arguments[E];return(m=r.get(u))==null?void 0:m.map(C=>C(...y)).find(C=>C!==void 0)}}}else s[u]=f}),s),{})}}function HD(e){e===void 0&&(e=[]);const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),i=A.useCallback(a=>Ov(a,e,"reference"),t),o=A.useCallback(a=>Ov(a,e,"floating"),n),s=A.useCallback(a=>Ov(a,e,"item"),r);return A.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const FV=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function jV(e,t){var n,r;t===void 0&&(t={});const{open:i,elements:o,floatingId:s}=e,{enabled:a=!0,role:c="dialog"}=t,u=gS(),f=((n=o.domReference)==null?void 0:n.id)||u,h=A.useMemo(()=>{var N;return((N=x$(o.floating))==null?void 0:N.id)||s},[o.floating,s]),m=(r=FV.get(c))!=null?r:c,y=bS()!=null,E=A.useMemo(()=>m==="tooltip"||c==="label"?{["aria-"+(c==="label"?"labelledby":"describedby")]:i?h:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":m==="alertdialog"?"dialog":m,"aria-controls":i?h:void 0,...m==="listbox"&&{role:"combobox"},...m==="menu"&&{id:f},...m==="menu"&&y&&{role:"menuitem"},...c==="select"&&{"aria-autocomplete":"none"},...c==="combobox"&&{"aria-autocomplete":"list"}},[m,h,y,i,f,c]),C=A.useMemo(()=>{const N={id:h,...m&&{role:m}};return m==="tooltip"||c==="label"?N:{...N,...m==="menu"&&{"aria-labelledby":f}}},[m,h,f,c]),S=A.useCallback(N=>{let{active:_,selected:O}=N;const M={role:"option",..._&&{id:h+"-fui-option"}};switch(c){case"select":case"combobox":return{...M,"aria-selected":O}}return{}},[h,c]);return A.useMemo(()=>a?{reference:E,floating:C,item:S}:{},[a,E,C,S])}const sM=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase());function gu(e,t){return typeof e=="function"?e(t):e}function zV(e,t){const[n,r]=A.useState(e);return e&&!n&&r(!0),A.useEffect(()=>{if(!e&&n){const i=setTimeout(()=>r(!1),t);return()=>clearTimeout(i)}},[e,n,t]),n}function $V(e,t){t===void 0&&(t={});const{open:n,elements:{floating:r}}=e,{duration:i=250}=t,s=(typeof i=="number"?i:i.close)||0,[a,c]=A.useState("unmounted"),u=zV(n,s);return!u&&a==="close"&&c("unmounted"),mr(()=>{if(r){if(n){c("initial");const f=requestAnimationFrame(()=>{Xo.flushSync(()=>{c("open")})});return()=>{cancelAnimationFrame(f)}}c("close")}},[n,r]),{isMounted:u,status:a}}function ES(e,t){t===void 0&&(t={});const{initial:n={opacity:0},open:r,close:i,common:o,duration:s=250}=t,a=e.placement,c=a.split("-")[0],u=A.useMemo(()=>({side:c,placement:a}),[c,a]),f=typeof s=="number",h=(f?s:s.open)||0,m=(f?s:s.close)||0,[g,y]=A.useState(()=>({...gu(o,u),...gu(n,u)})),{isMounted:E,status:C}=$V(e,{duration:s}),S=ja(n),N=ja(r),_=ja(i),O=ja(o);return mr(()=>{const M=gu(S.current,u),R=gu(_.current,u),L=gu(O.current,u),F=gu(N.current,u)||Object.keys(M).reduce((z,B)=>(z[B]="",z),{});if(C==="initial"&&y(z=>({transitionProperty:z.transitionProperty,...L,...M})),C==="open"&&y({transitionProperty:Object.keys(F).map(sM).join(","),transitionDuration:h+"ms",...L,...F}),C==="close"){const z=R||M;y({transitionProperty:Object.keys(z).map(sM).join(","),transitionDuration:m+"ms",...L,...z})}},[m,_,S,N,O,h,C,u]),{isMounted:E,styles:g}}function or(e){this.content=e}or.prototype={constructor:or,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return i==-1?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new or(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new or(n)},addToStart:function(e,t){return new or([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new or(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(o==-1?i.length:o,0,t,n),new or(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=or.from(e),e.size?new or(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=or.from(e),e.size?new or(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=or.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};or.from=function(e){if(e instanceof or)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new or(t)};function UD(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=UD(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function FD(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=e.child(--i),a=t.child(--o),c=s.nodeSize;if(s==a){n-=c,r-=c;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,f=Math.min(s.text.length,a.text.length);for(;u<f&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=FD(s.content,a.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class Ce{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let c=this.content[s],u=a+c.nodeSize;if(u>t&&r(c,i+a,o||null,s)!==!1&&c.content.size){let f=a+1;c.nodesBetween(Math.max(0,t-f),Math.min(c.content.size,n-f),r,i+f)}a=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let o="",s=!0;return this.nodesBetween(t,n,(a,c)=>{let u=a.isText?a.text.slice(Math.max(t,c)-c,n-c):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new Ce(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let o=0,s=0;s<n;o++){let a=this.content[o],c=s+a.nodeSize;c>t&&((s<t||c>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=c}return new Ce(r,i)}cutByIndex(t,n){return t==n?Ce.empty:t==0&&n==this.content.length?this:new Ce(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Ce(i,o)}addToStart(t){return new Ce([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Ce(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return UD(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return FD(this,t,n,r)}findIndex(t){if(t==0)return Km(0,t);if(t==this.size)return Km(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t?Km(n+1,o):Km(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Ce.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ce(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Ce.empty;let n,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Ce(n||t,r)}static from(t){if(!t)return Ce.empty;if(t instanceof Ce)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ce([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ce.empty=new Ce([],0);const Dv={index:0,offset:0};function Km(e,t){return Dv.index=e,Dv.offset=t,Dv}function l0(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!l0(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!l0(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Xt=class Tw{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&l0(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Tw.none;if(t instanceof Tw)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Xt.none=[];class c0 extends Error{}class De{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=zD(this.content,t+this.openStart,n);return r&&new De(r,this.openStart,this.openEnd)}removeBetween(t,n){return new De(jD(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return De.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new De(Ce.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new De(t,r,i)}}De.empty=new De(Ce.empty,0,0);function jD(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(jD(o.content,t-i-1,n-i-1)))}function zD(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=zD(s.content,t-o-1,n,s);return a&&e.replaceChild(i,s.copy(a))}function VV(e,t,n){if(n.openStart>e.depth)throw new c0("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new c0("Inconsistent open depths");return $D(e,t,n,0)}function $D(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=$D(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let s=e.parent,a=s.content;return Ql(s,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=qV(n,e);return Ql(o,qD(e,s,a,t,r))}else return Ql(o,u0(e,t,r))}function VD(e,t){if(!t.type.compatibleContent(e.type))throw new c0("Cannot join "+t.type.name+" onto "+e.type.name)}function xw(e,t,n){let r=e.node(n);return VD(r,t.node(n)),r}function Kl(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Kf(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Kl(e.nodeAfter,r),o++));for(let a=o;a<s;a++)Kl(i.child(a),r);t&&t.depth==n&&t.textOffset&&Kl(t.nodeBefore,r)}function Ql(e,t){return e.type.checkContent(t),e.copy(t)}function qD(e,t,n,r,i){let o=e.depth>i&&xw(e,t,i+1),s=r.depth>i&&xw(n,r,i+1),a=[];return Kf(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(VD(o,s),Kl(Ql(o,qD(e,t,n,r,i+1)),a)):(o&&Kl(Ql(o,u0(e,t,i+1)),a),Kf(t,n,i,a),s&&Kl(Ql(s,u0(n,r,i+1)),a)),Kf(r,null,i,a),new Ce(a)}function u0(e,t,n){let r=[];if(Kf(null,e,n,r),e.depth>n){let i=xw(e,t,n+1);Kl(Ql(i,u0(e,t,n+1)),r)}return Kf(t,null,n,r),new Ce(r)}function qV(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)i=t.node(o).copy(Ce.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class vh{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Xt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new d0(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=t;;){let{index:a,offset:c}=s.content.findIndex(o),u=o-c;if(r.push(s,a,i+c),!u||(s=s.child(a),s.isText))break;o=u-1,i+=c+1}return new vh(n,r,o)}static resolveCached(t,n){let r=aM.get(t);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else aM.set(t,r=new YV);let i=r.elts[r.i]=vh.resolve(t,n);return r.i=(r.i+1)%GV,i}}class YV{constructor(){this.elts=[],this.i=0}}const GV=12,aM=new WeakMap;class d0{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const WV=Object.create(null);let Wa=class kw{constructor(t,n,r,i=Xt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&l0(this.attrs,n||t.defaultAttrs||WV)&&Xt.sameSet(this.marks,r||Xt.none)}copy(t=null){return t==this.content?this:new kw(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new kw(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return De.empty;let i=this.resolve(t),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new De(u,i.depth-s,o.depth-s)}replace(t,n,r){return VV(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return vh.resolveCached(this,t)}resolveNoCache(t){return vh.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),YD(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Ce.empty,i=0,o=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Xt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Xt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Ce.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Wa.prototype.text=void 0;class f0 extends Wa{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):YD(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new f0(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new f0(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function YD(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class oc{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new KV(t,n);if(r.next==null)return oc.empty;let i=GD(r);r.next&&r.err("Unexpected trailing text");let o=nq(tq(i));return rq(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function o(s,a){let c=s.matchFragment(t,r);if(c&&(!n||c.validEnd))return Ce.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:f,next:h}=s.next[u];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let m=o(h,a.concat(f));if(m)return m}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:c}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return o}).join(`
`)}}oc.empty=new oc(!0);class KV{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function GD(e){let t=[];do t.push(QV(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function QV(e){let t=[];do t.push(XV(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function XV(e){let t=eq(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=ZV(e,t);else break;return t}function lM(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function ZV(e,t){let n=lM(e),r=n;return e.eat(",")&&(e.next!="}"?r=lM(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function JV(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(t)&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function eq(e){if(e.eat("(")){let t=GD(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=JV(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function tq(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,c){let u={term:c,to:a};return t[s].push(u),u}function i(s,a){s.forEach(c=>c.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((c,u)=>c.concat(o(u,a)),[]);if(s.type=="seq")for(let c=0;;c++){let u=o(s.exprs[c],a);if(c==s.exprs.length-1)return u;i(u,a=n())}else if(s.type=="star"){let c=n();return r(a,c),i(o(s.expr,c),c),[r(c)]}else if(s.type=="plus"){let c=n();return i(o(s.expr,a),c),i(o(s.expr,c),c),[r(c)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let c=a;for(let u=0;u<s.min;u++){let f=n();i(o(s.expr,c),f),c=f}if(s.max==-1)i(o(s.expr,c),c);else for(let u=s.min;u<s.max;u++){let f=n();r(c,f),i(o(s.expr,c),f),c=f}return[r(c)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function WD(e,t){return t-e}function cM(e,t){let n=[];return r(t),n.sort(WD);function r(i){let o=e[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:c}=o[s];!a&&n.indexOf(c)==-1&&r(c)}}}function nq(e){let t=Object.create(null);return n(cM(e,0));function n(r){let i=[];r.forEach(s=>{e[s].forEach(({term:a,to:c})=>{if(!a)return;let u;for(let f=0;f<i.length;f++)i[f][0]==a&&(u=i[f][1]);cM(e,c).forEach(f=>{u||i.push([a,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let o=t[r.join(",")]=new oc(r.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(WD);o.next.push({type:i[s][0],next:t[a.join(",")]||n(a)})}return o}}function rq(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:c,next:u}=i.next[a];s.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function KD(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function QD(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let o=e[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function XD(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let o=e[i];o.validate&&o.validate(t[i])}}function ZD(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new oq(e,r,t[r]);return n}let uM=class JD{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ZD(t,r.attrs),this.defaultAttrs=KD(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:QD(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wa(this,this.computeAttrs(t),Ce.from(n),Xt.setFrom(r))}createChecked(t=null,n,r){return n=Ce.from(n),this.checkContent(n),new Wa(this,this.computeAttrs(t),n,Xt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Ce.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(Ce.empty,!0);return o?new Wa(this,t,n.append(o),Xt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){XD(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Xt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,s)=>r[o]=new JD(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function iq(e,t,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}class oq{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?iq(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class $1{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=ZD(t,i.attrs),this.excluded=null;let o=KD(this.attrs);this.instance=o?new Xt(this,o):null}create(t=null){return!t&&this.instance?this.instance:new Xt(this,QD(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((o,s)=>r[o]=new $1(o,i++,n,s)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){XD(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let eL=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=or.from(t.nodes),n.marks=or.from(t.marks||{}),this.nodes=uM.compile(this.spec.nodes,this),this.marks=$1.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=oc.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?dM(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:dM(this,s.split(" "))}this.nodeFromJSON=i=>Wa.fromJSON(this,i),this.markFromJSON=i=>Xt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof uM){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new f0(r,r.defaultAttrs,t,Xt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function dM(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let a in e.marks){let c=e.marks[a];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function sq(e){return e.tag!=null}function aq(e){return e.style!=null}let co=class _w{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(sq(i))this.tags.push(i);else if(aq(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let r=new hM(this,n,!1);return r.addAll(t,Xt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new hM(this,n,!0);return r.addAll(t,Xt.none,n.from,n.to),De.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(uq(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(t);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(t,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(s.getAttrs){let c=s.getAttrs(n);if(c===!1)continue;s.attrs=c||void 0}return s}}}static schemaRules(t){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=pM(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=pM(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new _w(t,_w.schemaRules(t)))}};const tL={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lq={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},nL={ol:!0,ul:!0},Ch=1,Aw=2,Qf=4;function fM(e,t,n){return t!=null?(t?Ch:0)|(t==="full"?Aw:0):e&&e.whitespace=="pre"?Ch|Aw:n&~Qf}class Qm{constructor(t,n,r,i,o,s){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=Xt.none,this.match=o||(s&Qf?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ce.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Ch)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=Ce.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!tL.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class hM{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=fM(null,n.preserveWhitespace,0)|(r?Qf:0);i?o=new Qm(i.type,i.attrs,Xt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Qm(null,null,Xt.none,!0,null,s):o=new Qm(t.schema.topNodeType,null,Xt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,o=i.options&Aw?"full":this.localPreserveWS||(i.options&Ch)>0;if(o==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=t.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),a;nL.hasOwnProperty(s)&&this.parser.normalizeLists&&cq(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(c?c.ignore:lq.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let u,f=this.needsBlock;if(tL.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let h=c&&c.skip?n:this.readStyles(t,n);h&&this.addAll(t,h),u&&this.sync(o),this.needsBlock=f}else{let u=this.readStyles(t,n);u&&this.addElementByRule(t,c,u,c.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let c=this.parser.matchStyle(o,s,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return n}addElementByRule(t,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let c=this.enter(s,n.attrs||null,r,n.preserveWhitespace);c&&(o=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c,r),this.findAround(t,c,!1)}o&&this.sync(a)&&this.open--}addAll(t,n,r,i){let o=r||0;for(let s=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(s,n);this.findAtPoint(t,o)}findPlace(t,n,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let c=this.nodes[s],u=c.findWrapping(t);if(u&&(!i||i.length>u.length+a)&&(i=u,o=c,!u.length))break;if(c.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let s=Xt.none;for(let a of i.concat(t.marks))(o.type?o.type.allowsMarkType(a.type):mM(a.type,t.type))&&(s=a.addToSet(s));return o.content.push(t.mark(s)),!0}return!1}enter(t,n,r,i){let o=this.findPlace(t.create(n),r,!1);return o&&(o=this.enterInner(t,n,r,!0,i)),o}enterInner(t,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let a=fM(t,o,s.options);s.options&Qf&&s.content.length==0&&(a|=Qf);let c=Xt.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):mM(u.type,t))?(c=u.addToSet(c),!1):!0),this.nodes.push(new Qm(t,n,c,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ch)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,c)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;c>=o;c--)if(s(a-1,c))return!0;return!1}else{let f=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;c--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function cq(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&nL.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function uq(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function pM(e){let t={};for(let n in e)t[n]=e[n];return t}function mM(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=a=>{o.push(a);for(let c=0;c<a.edgeCount;c++){let{type:u,next:f}=a.edge(c);if(u==t||o.indexOf(f)<0&&s(f))return!0}};if(s(i.contentMatch))return!0}}class yi{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=Lv(n).createDocumentFragment());let i=r,o=[];return t.forEach(s=>{if(o.length||s.marks.length){let a=0,c=0;for(;a<o.length&&c<s.marks.length;){let u=s.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,c++}for(;a<o.length;)i=o.pop()[1];for(;c<s.marks.length;){let u=s.marks[c++],f=this.serializeMark(u,s.isInline,n);f&&(o.push([u,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=Bg(Lv(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&Bg(Lv(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return Bg(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new yi(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=gM(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return gM(t.marks)}}function gM(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Lv(e){return e.document||window.document}const bM=new WeakMap;function dq(e){let t=bM.get(e);return t===void 0&&bM.set(e,t=fq(e)),t}function fq(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function Bg(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=dq(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,c=n?e.createElementNS(n,i):e.createElement(i),u=t[1],f=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){f=2;for(let h in u)if(u[h]!=null){let m=h.indexOf(" ");m>0?c.setAttributeNS(h.slice(0,m),h.slice(m+1),u[h]):h=="style"&&c.style?c.style.cssText=u[h]:c.setAttribute(h,u[h])}}for(let h=f;h<t.length;h++){let m=t[h];if(m===0){if(h<t.length-1||h>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:g,contentDOM:y}=Bg(e,m,n,r);if(c.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:c,contentDOM:a}}const rL=65535,iL=Math.pow(2,16);function hq(e,t){return e+t*iL}function yM(e){return e&rL}function pq(e){return(e-(e&rL))/iL}const oL=1,sL=2,Pg=4,aL=8;class Nw{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&aL)>0}get deletedBefore(){return(this.delInfo&(oL|Pg))>0}get deletedAfter(){return(this.delInfo&(sL|Pg))>0}get deletedAcross(){return(this.delInfo&Pg)>0}}class di{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&di.empty)return di.empty}recover(t){let n=0,r=yM(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+pq(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?i:0);if(c>t)break;let u=this.ranges[a+o],f=this.ranges[a+s],h=c+u;if(t<=h){let m=u?t==c?-1:t==h?1:n:n,g=c+i+(m<0?0:f);if(r)return g;let y=t==(n<0?c:h)?null:hq(a/3,t-c),E=t==c?sL:t==h?oL:Pg;return(n<0?t!=c:t!=h)&&(E|=aL),new Nw(g,E,y)}i+=f-u}return r?t+i:new Nw(t+i,0,null)}touches(t,n){let r=0,i=yM(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>t)break;let u=this.ranges[a+o],f=c+u;if(t<=f&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),c=s+(this.inverted?0:o),u=this.ranges[i+n],f=this.ranges[i+r];t(a,a+u,c,c+f),o+=f-u}}invert(){return new di(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?di.empty:new di(t<0?[0,-t,0]:[0,0,t])}}di.empty=new di([]);class Wu{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Wu(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Wu;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(t,n);if(a.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,t=this._maps[c].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new Nw(t,i,null)}}const Iv=Object.create(null);class yr{getMap(){return di.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Iv[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Iv)throw new RangeError("Duplicate use of step JSON ID "+t);return Iv[t]=n,n.prototype.jsonID=t,n}}class Hn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Hn(t,null)}static fail(t){return new Hn(null,t)}static fromReplace(t,n,r,i){try{return Hn.ok(t.replace(n,r,i))}catch(o){if(o instanceof c0)return Hn.fail(o.message);throw o}}}function vS(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(vS(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return Ce.fromArray(r)}class za extends yr{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new De(vS(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Hn.fromReplace(t,this.from,this.to,o)}invert(){return new ao(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new za(n.pos,r.pos,this.mark)}merge(t){return t instanceof za&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new za(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new za(n.from,n.to,t.markFromJSON(n.mark))}}yr.jsonID("addMark",za);class ao extends yr{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new De(vS(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Hn.fromReplace(t,this.from,this.to,r)}invert(){return new za(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ao(n.pos,r.pos,this.mark)}merge(t){return t instanceof ao&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ao(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ao(n.from,n.to,t.markFromJSON(n.mark))}}yr.jsonID("removeMark",ao);class $a extends yr{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Hn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Hn.fromReplace(t,this.pos,this.pos+1,new De(Ce.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new $a(this.pos,n.marks[i]);return new $a(this.pos,this.mark)}}return new sc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new $a(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $a(n.pos,t.markFromJSON(n.mark))}}yr.jsonID("addNodeMark",$a);class sc extends yr{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Hn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Hn.fromReplace(t,this.pos,this.pos+1,new De(Ce.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new $a(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new sc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new sc(n.pos,t.markFromJSON(n.mark))}}yr.jsonID("removeNodeMark",sc);class Pn extends yr{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Mw(t,this.from,this.to)?Hn.fail("Structure replace would overwrite content"):Hn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new di([this.from,this.to-this.from,this.slice.size])}invert(t){return new Pn(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Pn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Pn)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?De.empty:new De(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Pn(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?De.empty:new De(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Pn(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pn(n.from,n.to,De.fromJSON(t,n.slice),!!n.structure)}}yr.jsonID("replace",Pn);class Nn extends yr{constructor(t,n,r,i,o,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(t){if(this.structure&&(Mw(t,this.from,this.gapFrom)||Mw(t,this.gapTo,this.to)))return Hn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Hn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Hn.fromReplace(t,this.from,this.to,r):Hn.fail("Content does not fit in gap")}getMap(){return new di([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Nn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Nn(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Nn(n.from,n.to,n.gapFrom,n.gapTo,De.fromJSON(t,n.slice),n.insert,!!n.structure)}}yr.jsonID("replaceAround",Nn);function Mw(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function mq(e,t,n,r){let i=[],o=[],s,a;e.doc.nodesBetween(t,n,(c,u,f)=>{if(!c.isInline)return;let h=c.marks;if(!r.isInSet(h)&&f.type.allowsMarkType(r.type)){let m=Math.max(u,t),g=Math.min(u+c.nodeSize,n),y=r.addToSet(h);for(let E=0;E<h.length;E++)h[E].isInSet(y)||(s&&s.to==m&&s.mark.eq(h[E])?s.to=g:i.push(s=new ao(m,g,h[E])));a&&a.to==m?a.to=g:o.push(a=new za(m,g,r))}}),i.forEach(c=>e.step(c)),o.forEach(c=>e.step(c))}function gq(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,(s,a)=>{if(!s.isInline)return;o++;let c=null;if(r instanceof $1){let u=s.marks,f;for(;f=r.isInSet(u);)(c||(c=[])).push(f),u=f.removeFromSet(u)}else r?r.isInSet(s.marks)&&(c=[r]):c=s.marks;if(c&&c.length){let u=Math.min(a+s.nodeSize,n);for(let f=0;f<c.length;f++){let h=c[f],m;for(let g=0;g<i.length;g++){let y=i[g];y.step==o-1&&h.eq(i[g].style)&&(m=y)}m?(m.to=u,m.step=o):i.push({style:h,from:Math.max(a,t),to:u,step:o})}}}),i.forEach(s=>e.step(new ao(s.from,s.to,s.style)))}function CS(e,t,n,r=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let c=0;c<o.childCount;c++){let u=o.child(c),f=a+u.nodeSize,h=r.matchType(u.type);if(!h)s.push(new Pn(a,f,De.empty));else{r=h;for(let m=0;m<u.marks.length;m++)n.allowsMarkType(u.marks[m].type)||e.step(new ao(a,f,u.marks[m]));if(i&&u.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,y;for(;m=g.exec(u.text);)y||(y=new De(Ce.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Pn(a+m.index,a+m.index+m[0].length,y))}}a=f}if(!r.validEnd){let c=r.fillBefore(Ce.empty,!0);e.replace(a,a,new De(c,0,0))}for(let c=s.length-1;c>=0;c--)e.step(s[c])}function bq(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function pd(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),o=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!bq(i,o,s))break}return null}function yq(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),c=s,u=a,f=Ce.empty,h=0;for(let y=o,E=!1;y>n;y--)E||r.index(y)>0?(E=!0,f=Ce.from(r.node(y).copy(f)),h++):c--;let m=Ce.empty,g=0;for(let y=o,E=!1;y>n;y--)E||i.after(y+1)<i.end(y)?(E=!0,m=Ce.from(i.node(y).copy(m)),g++):u++;e.step(new Nn(c,u,s,a,new De(f.append(m),h,g),f.size-h,!0))}function lL(e,t,n=null,r=e){let i=Eq(e,t),o=i&&vq(r,t);return o?i.map(EM).concat({type:t,attrs:n}).concat(o.map(EM)):null}function EM(e){return{type:e,attrs:null}}function Eq(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}function vq(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let c=(s.length?s[s.length-1]:t).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:s}function Cq(e,t,n){let r=Ce.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ce.from(n[s].type.create(n[s].attrs,r))}let i=t.start,o=t.end;e.step(new Nn(i,o,i,o,new De(r,0,0),n.length,!0))}function wq(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(s,a)=>{let c=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,c)&&Sq(e.doc,e.mapping.slice(o).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?u=!1:!g&&y&&(u=!0)}u===!1&&uL(e,s,a,o),CS(e,e.mapping.slice(o).map(a,1),r,void 0,u===null);let f=e.mapping.slice(o),h=f.map(a,1),m=f.map(a+s.nodeSize,1);return e.step(new Nn(h,m,h+1,m-1,new De(Ce.from(r.create(c,null,s.marks)),0,0),1,!0)),u===!0&&cL(e,s,a,o),!1}})}function cL(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let c=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function uL(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+o);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function Sq(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Tq(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Nn(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new De(Ce.from(s),0,0),1,!0))}function $s(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,f=n-2;u>o;u--,f--){let h=i.node(u),m=i.index(u);if(h.type.spec.isolating)return!1;let g=h.content.cutByIndex(m,h.childCount),y=r&&r[f+1];y&&(g=g.replaceChild(0,y.type.create(y.attrs)));let E=r&&r[f]||h;if(!h.canReplace(m+1,h.childCount)||!E.type.validContent(g))return!1}let a=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(a,a,c?c.type:i.node(o+1).type)}function xq(e,t,n=1,r){let i=e.doc.resolve(t),o=Ce.empty,s=Ce.empty;for(let a=i.depth,c=i.depth-n,u=n-1;a>c;a--,u--){o=Ce.from(i.node(a).copy(o));let f=r&&r[u];s=Ce.from(f?f.type.create(f.attrs,s):i.node(a).copy(s))}e.step(new Pn(t,t,new De(o.append(s),n,n),!0))}function Sc(e,t){let n=e.resolve(t),r=n.index();return dL(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function kq(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?e.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function dL(e,t){return!!(e&&t&&!e.isLeaf&&kq(e,t))}function V1(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&dL(o,s)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function _q(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),s=o.node().type;if(i&&s.inlineContent){let f=s.whitespace=="pre",h=!!s.contentMatch.matchType(i);f&&!h?r=!1:!f&&h&&(r=!0)}let a=e.steps.length;if(r===!1){let f=e.doc.resolve(t+n);uL(e,f.node(),f.before(),a)}s.inlineContent&&CS(e,t+n-1,s,o.node().contentMatchAt(o.index()),r==null);let c=e.mapping.slice(a),u=c.map(t-n);if(e.step(new Pn(u,c.map(t+n,-1),De.empty,!0)),r===!0){let f=e.doc.resolve(u);cL(e,f.node(),f.before(),e.steps.length)}return e}function Aq(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function fL(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(a>0?1:0),u=r.node(s),f=!1;if(o==1)f=u.canReplace(c,c,i);else{let h=u.contentMatchAt(c).findWrapping(i.firstChild.type);f=h&&u.canReplaceWith(c,c,h[0])}if(f)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function q1(e,t,n=t,r=De.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return hL(i,o,r)?new Pn(t,n,r):new Nq(i,o,r).fit()}function hL(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Nq{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ce.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Ce.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let c=new De(o,s,a);return t>-1?new Nn(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Pn(r.pos,i.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){t=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Bv(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:u}=this.frontier[a],f,h=null;if(n==1&&(s?u.matchType(s.type)||(h=u.fillBefore(Ce.from(s),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:h};if(n==2&&s&&(f=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:f};if(o&&u.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Bv(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new De(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Bv(t,n);if(i.childCount<=1&&n>0){let o=t.size-n<=n+i.size;this.unplaced=new De(Ff(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new De(Ff(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let s=this.unplaced,a=r?r.content:s.content,c=s.openStart-t,u=0,f=[],{match:h,type:m}=this.frontier[n];if(i){for(let E=0;E<i.childCount;E++)f.push(i.child(E));h=h.matchFragment(i)}let g=a.size+t-(s.content.size-s.openEnd);for(;u<a.childCount;){let E=a.child(u),C=h.matchType(E.type);if(!C)break;u++,(u>1||c==0||E.content.size)&&(h=C,f.push(pL(E.mark(m.allowedMarks(E.marks)),u==1?c:0,u==a.childCount?g:-1)))}let y=u==a.childCount;y||(g=-1),this.placed=jf(this.placed,n,Ce.from(f)),this.frontier[n].match=h,y&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,C=a;E<g;E++){let S=C.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),C=S.content}this.unplaced=y?t==0?De.empty:new De(Ff(s.content,t-1,1),t-1,g<0?s.openEnd:t-1):new De(Ff(s.content,t,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Pv(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=Pv(t,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:c,type:u}=this.frontier[a],f=Pv(t,a,u,c,!0);if(!f||f.childCount)continue e}return{depth:n,fit:s,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=jf(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=jf(this.placed,this.depth,Ce.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ce.empty,!0);n.childCount&&(this.placed=jf(this.placed,this.frontier.length,n))}}function Ff(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Ff(e.firstChild.content,t-1,n)))}function jf(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(jf(e.lastChild.content,t-1,n)))}function Bv(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function pL(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,pL(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ce.empty,!0)))),e.copy(r)}function Pv(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Mq(n,o.content,s)?a:null}function Mq(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Rq(e){return e.spec.defining||e.spec.definingForContent}function Oq(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(hL(i,o,r))return e.step(new Pn(t,n,r));let s=gL(i,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let m=i.depth,g=i.pos-1;m>0;m--,g--){let y=i.node(m).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(m)>-1?a=m:i.before(m)==g&&s.splice(1,0,-m)}let c=s.indexOf(a),u=[],f=r.openStart;for(let m=r.content,g=0;;g++){let y=m.firstChild;if(u.push(y),g==r.openStart)break;m=y.content}for(let m=f-1;m>=0;m--){let g=u[m],y=Rq(g.type);if(y&&!g.sameMarkup(i.node(Math.abs(a)-1)))f=m;else if(y||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+f+1)%(r.openStart+1),y=u[g];if(y)for(let E=0;E<s.length;E++){let C=s[(E+c)%s.length],S=!0;C<0&&(S=!1,C=-C);let N=i.node(C-1),_=i.index(C-1);if(N.canReplaceWith(_,_,y.type,y.marks))return e.replace(i.before(C),S?o.after(C):n,new De(mL(r.content,0,r.openStart,g),g,r.openEnd))}}let h=e.steps.length;for(let m=s.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>h));m--){let g=s[m];g<0||(t=i.before(g),n=o.after(g))}}function mL(e,t,n,r,i){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(mL(o.content,t+1,n,r,o)))}if(t>r){let o=i.contentMatchAt(0),s=o.fillBefore(e).append(e);e=s.append(o.matchFragment(s).fillBefore(Ce.empty,!0))}return e}function Dq(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=Aq(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new De(Ce.from(r),0,0))}function Lq(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=gL(r,i);for(let s=0;s<o.length;s++){let a=o[s],c=s==o.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}function gL(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}class Iu extends yr{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Hn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Hn.fromReplace(t,this.pos,this.pos+1,new De(Ce.from(i),0,n.isLeaf?0:1))}getMap(){return di.empty}invert(t){return new Iu(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Iu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Iu(n.pos,n.attr,n.value)}}yr.jsonID("attr",Iu);class wh extends yr{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Hn.ok(r)}getMap(){return di.empty}invert(t){return new wh(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wh(n.attr,n.value)}}yr.jsonID("docAttr",wh);let Ku=class extends Error{};Ku=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Ku.prototype=Object.create(Error.prototype);Ku.prototype.constructor=Ku;Ku.prototype.name="TransformError";class wS{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Wu}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Ku(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=De.empty){let i=q1(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new De(Ce.from(r),0,0))}delete(t,n){return this.replace(t,n,De.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Oq(this,t,n,r),this}replaceRangeWith(t,n,r){return Dq(this,t,n,r),this}deleteRange(t,n){return Lq(this,t,n),this}lift(t,n){return yq(this,t,n),this}join(t,n=1){return _q(this,t,n),this}wrap(t,n){return Cq(this,t,n),this}setBlockType(t,n=t,r,i=null){return wq(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return Tq(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Iu(t,n,r)),this}setDocAttribute(t,n){return this.step(new wh(t,n)),this}addNodeMark(t,n){return this.step(new $a(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Xt)n.isInSet(r.marks)&&this.step(new sc(t,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new sc(t,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(t,n=1,r){return xq(this,t,n,r),this}addMark(t,n,r){return mq(this,t,n,r),this}removeMark(t,n,r){return gq(this,t,n,r),this}clearIncompatible(t,n,r){return CS(this,t,n,r),this}}const Hv=Object.create(null);class Ze{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new bL(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=De.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:c,$to:u}=s[a],f=t.mapping.slice(o);t.replaceRange(f.map(c.pos),f.map(u.pos),a?De.empty:n),a==0&&wM(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],c=t.mapping.slice(r),u=c.map(s.pos),f=c.map(a.pos);o?t.deleteRange(u,f):(t.replaceRangeWith(u,f,n),wM(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ue(t):xu(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let s=n<0?xu(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):xu(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(s)return s}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Wr(t.node(0))}static atStart(t){return xu(t,t,0,0,1)||new Wr(t)}static atEnd(t){return xu(t,t,t.content.size,t.childCount,-1)||new Wr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Hv[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Hv)throw new RangeError("Duplicate use of selection JSON ID "+t);return Hv[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ue.between(this.$anchor,this.$head).getBookmark()}}Ze.prototype.visible=!0;class bL{constructor(t,n){this.$from=t,this.$to=n}}let vM=!1;function CM(e){!vM&&!e.parent.inlineContent&&(vM=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ue extends Ze{constructor(t,n=t){CM(t),CM(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ze.near(r);let i=t.resolve(n.map(this.anchor));return new Ue(i.parent.inlineContent?i:r,r)}replace(t,n=De.empty){if(super.replace(t,n),n==De.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ue&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Y1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ue(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Ze.findFrom(n,r,!0)||Ze.findFrom(n,-r,!0);if(o)n=o.$head;else return Ze.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ze.findFrom(t,-r,!0)||Ze.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ue(t,n)}}Ze.jsonID("text",Ue);class Y1{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Y1(t.map(this.anchor),t.map(this.head))}resolve(t){return Ue.between(t.resolve(this.anchor),t.resolve(this.head))}}class qe extends Ze{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=t.resolve(i);return r?Ze.near(o):new qe(o)}content(){return new De(Ce.from(this.node),0,0)}eq(t){return t instanceof qe&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new SS(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(t.resolve(n.anchor))}static create(t,n){return new qe(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}qe.prototype.visible=!1;Ze.jsonID("node",qe);class SS{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Y1(r,r):new SS(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&qe.isSelectable(r)?new qe(n):Ze.near(n)}}class Wr extends Ze{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=De.empty){if(n==De.empty){t.delete(0,t.doc.content.size);let r=Ze.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Wr(t)}map(t){return new Wr(t)}eq(t){return t instanceof Wr}getBookmark(){return Iq}}Ze.jsonID("all",Wr);const Iq={map(){return this},resolve(e){return new Wr(e)}};function xu(e,t,n,r,i,o=!1){if(t.inlineContent)return Ue.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let a=t.child(s);if(a.isAtom){if(!o&&qe.isSelectable(a))return qe.create(e,n-(i<0?a.nodeSize:0))}else{let c=xu(e,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}return null}function wM(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Pn||i instanceof Nn))return;let o=e.mapping.maps[r],s;o.forEach((a,c,u,f)=>{s==null&&(s=f)}),e.setSelection(Ze.near(e.doc.resolve(s),n))}const SM=1,Xm=2,TM=4;let Bq=class extends wS{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|SM)&~Xm,this.storedMarks=null,this}get selectionSet(){return(this.updated&SM)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Xm,this}ensureMarks(t){return Xt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Xm)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Xm,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Xt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,o)),this.selection.empty||this.setSelection(Ze.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=TM,this}get scrolledIntoView(){return(this.updated&TM)>0}};function xM(e,t){return!t||!e?e:e.bind(t)}class zf{constructor(t,n,r){this.name=t,this.init=xM(n.init,r),this.apply=xM(n.apply,r)}}const Pq=[new zf("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new zf("selection",{init(e,t){return e.selection||Ze.atStart(t.doc)},apply(e){return e.selection}}),new zf("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new zf("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Uv{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pq.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new zf(r.key,r.spec.state,r))})}}class Ru{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let c=i?i[s].n:0,u=i?i[s].state:this,f=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,u,r);if(f&&r.filterTransaction(f,s)){if(f.setMeta("appendedTransaction",t),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<s?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ru(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new Bq(this)}static create(t){let n=new Uv(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Ru(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Uv(this.schema,t.plugins),r=n.fields,i=new Ru(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Uv(t.schema,t.plugins),o=new Ru(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Wa.fromJSON(t.schema,n.doc);else if(s.name=="selection")o.selection=Ze.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],u=c.spec.state;if(c.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=u.fromJSON.call(c,t,n[a],o);return}}o[s.name]=s.init(t,o)}}),o}}function yL(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=yL(i,t,{})),n[r]=i}return n}class nt{constructor(t){this.spec=t,this.props={},t.props&&yL(t.props,this,this.props),this.key=t.key?t.key.key:EL("plugin")}getState(t){return t[this.key]}}const Fv=Object.create(null);function EL(e){return e in Fv?e+"$"+ ++Fv[e]:(Fv[e]=0,e+"$")}class pt{constructor(t="key"){this.key=EL(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const sr=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Qu=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Rw=null;const Is=function(e,t,n){let r=Rw||(Rw=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Hq=function(){Rw=null},ac=function(e,t,n,r){return n&&(kM(e,t,n,r,-1)||kM(e,t,n,r,1))},Uq=/^(img|br|input|textarea|hr)$/i;function kM(e,t,n,r,i){for(var o;;){if(e==n&&t==r)return!0;if(t==(i<0?0:zi(e))){let s=e.parentNode;if(!s||s.nodeType!=1||ap(e)||Uq.test(e.nodeName)||e.contentEditable=="false")return!1;t=sr(e)+(i<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=i;else return!1;else e=s,t=i<0?zi(e):0}else return!1}}function zi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Fq(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=zi(e)}else if(e.parentNode&&!ap(e))t=sr(e),e=e.parentNode;else return null}}function jq(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!ap(e))t=sr(e)+1,e=e.parentNode;else return null}}function zq(e,t,n){for(let r=t==0,i=t==zi(e);r||i;){if(e==n)return!0;let o=sr(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,i=i&&o==zi(e)}}function ap(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const G1=function(e){return e.focusNode&&ac(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function zl(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function $q(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Vq(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(zi(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(zi(r.startContainer),r.startOffset)}}}const Jo=typeof navigator<"u"?navigator:null,_M=typeof document<"u"?document:null,cl=Jo&&Jo.userAgent||"",Ow=/Edge\/(\d+)/.exec(cl),vL=/MSIE \d/.exec(cl),Dw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cl),Kr=!!(vL||Dw||Ow),Ka=vL?document.documentMode:Dw?+Dw[1]:Ow?+Ow[1]:0,Gi=!Kr&&/gecko\/(\d+)/i.test(cl);Gi&&+(/Firefox\/(\d+)/.exec(cl)||[0,0])[1];const Lw=!Kr&&/Chrome\/(\d+)/.exec(cl),hr=!!Lw,CL=Lw?+Lw[1]:0,kr=!Kr&&!!Jo&&/Apple Computer/.test(Jo.vendor),Xu=kr&&(/Mobile\/\w+/.test(cl)||!!Jo&&Jo.maxTouchPoints>2),Ui=Xu||(Jo?/Mac/.test(Jo.platform):!1),qq=Jo?/Win/.test(Jo.platform):!1,Ps=/Android \d/.test(cl),lp=!!_M&&"webkitFontSmoothing"in _M.documentElement.style,Yq=lp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Gq(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ns(e,t){return typeof e=="number"?e:e[t]}function Wq(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function AM(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(s.nodeType!=1){s=Qu(s);continue}let a=s,c=a==o.body,u=c?Gq(o):Wq(a),f=0,h=0;if(t.top<u.top+Ns(r,"top")?h=-(u.top-t.top+Ns(i,"top")):t.bottom>u.bottom-Ns(r,"bottom")&&(h=t.bottom-t.top>u.bottom-u.top?t.top+Ns(i,"top")-u.top:t.bottom-u.bottom+Ns(i,"bottom")),t.left<u.left+Ns(r,"left")?f=-(u.left-t.left+Ns(i,"left")):t.right>u.right-Ns(r,"right")&&(f=t.right-u.right+Ns(i,"right")),f||h)if(c)o.defaultView.scrollBy(f,h);else{let g=a.scrollLeft,y=a.scrollTop;h&&(a.scrollTop+=h),f&&(a.scrollLeft+=f);let E=a.scrollLeft-g,C=a.scrollTop-y;t={left:t.left-E,top:t.top-C,right:t.right-E,bottom:t.bottom-C}}let m=c?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(m))break;s=m=="absolute"?s.offsetParent:Qu(s)}}function Kq(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=e.root.elementFromPoint(o,s);if(!a||a==e.dom||!e.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=n-20){r=a,i=c.top;break}}return{refDOM:r,refTop:i,stack:wL(e.dom)}}function wL(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Qu(r));return t}function Qq({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;SL(n,r==0?0:r-t)}function SL(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let bu=null;function Xq(e){if(e.setActive)return e.setActive();if(bu)return e.focus(bu);let t=wL(e);e.focus(bu==null?{get preventScroll(){return bu={preventScroll:!0},!0}}:void 0),bu||(bu=!1,SL(t,0))}function TL(e,t){let n,r=2e8,i,o=0,s=t.top,a=t.top,c,u;for(let f=e.firstChild,h=0;f;f=f.nextSibling,h++){let m;if(f.nodeType==1)m=f.getClientRects();else if(f.nodeType==3)m=Is(f).getClientRects();else continue;for(let g=0;g<m.length;g++){let y=m[g];if(y.top<=s&&y.bottom>=a){s=Math.max(y.bottom,s),a=Math.min(y.top,a);let E=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(E<r){n=f,r=E,i=E&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,f.nodeType==1&&E&&(o=h+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!c&&y.left<=t.left&&y.right>=t.left&&(c=f,u={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(o=h+1)}}return!n&&c&&(n=c,i=u,r=0),n&&n.nodeType==3?Zq(n,i):!n||r&&n.nodeType==1?{node:e,offset:o}:TL(n,i)}function Zq(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let o=Ma(r,1);if(o.top!=o.bottom&&TS(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function TS(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Jq(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function eY(e,t,n){let{node:r,offset:i}=TL(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}function tY(e,t,n,r){let i=-1;for(let o=t,s=!1;o!=e.dom;){let a=e.docView.nearestDesc(o,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&c.left>r.left||c.top>r.top?i=a.posBefore:(!s&&c.right<r.left||c.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function xL(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=e.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(TS(t,u))return xL(s,t,u)}}if((o=(o+1)%r)==i)break}return e}function nY(e,t){let n=e.dom.ownerDocument,r,i=0,o=Vq(n,t.left,t.top);o&&({node:r,offset:i}=o);let s=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=e.dom.getBoundingClientRect();if(!TS(t,u)||(s=xL(e.dom,t,u),!s))return null}if(kr)for(let u=s;r&&u;u=Qu(u))u.draggable&&(r=void 0);if(s=Jq(s,t),r){if(Gi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let f=r.childNodes[i],h;f.nodeName=="IMG"&&(h=f.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&i++}let u;lp&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=tY(e,r,i,t))}a==null&&(a=eY(e,s,t));let c=e.docView.nearestDesc(s,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function NM(e){return e.top<e.bottom||e.left<e.right}function Ma(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(NM(r))return r}return Array.prototype.find.call(n,NM)||e.getBoundingClientRect()}const rY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kL(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=lp||Gi;if(r.nodeType==3)if(s&&(rY.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=Ma(Is(r,i,i),n);if(Gi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Ma(Is(r,i-1,i-1),-1);if(u.top==c.top){let f=Ma(Is(r,i,i+1),-1);if(f.top!=c.top)return Nf(f,f.left<u.left)}}return c}else{let c=i,u=i,f=n<0?1:-1;return n<0&&!i?(u++,f=-1):n>=0&&i==r.nodeValue.length?(c--,f=1):n<0?c--:u++,Nf(Ma(Is(r,c,u),f),f<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==zi(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return jv(c.getBoundingClientRect(),!1)}if(o==null&&i<zi(r)){let c=r.childNodes[i];if(c.nodeType==1)return jv(c.getBoundingClientRect(),!0)}return jv(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==zi(r))){let c=r.childNodes[i-1],u=c.nodeType==3?Is(c,zi(c)-(s?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return Nf(Ma(u,1),!1)}if(o==null&&i<zi(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?Is(c,0,s?0:1):c.nodeType==1?c:null:null;if(u)return Nf(Ma(u,-1),!0)}return Nf(Ma(r.nodeType==3?Is(r):r,-n),n>=0)}function Nf(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function jv(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function _L(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function iY(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return _L(e,t,()=>{let{node:o}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=kL(e,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Is(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let f=c[u];if(f.bottom>f.top+1&&(n=="up"?s.top-f.top>(f.bottom-s.top)*2:f.bottom-s.bottom>(s.bottom-f.top)*2))return!1}}return!0})}const oY=/[\u0590-\u08ac]/;function sY(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return a?!oY.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:_L(e,t,()=>{let{focusNode:c,focusOffset:u,anchorNode:f,anchorOffset:h}=e.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:E}=e.domSelectionRange(),C=y&&!g.contains(y.nodeType==1?y:y.parentNode)||c==y&&u==E;try{a.collapse(f,h),c&&(c!=f||u!=h)&&a.extend&&a.extend(c,u)}catch{}return m!=null&&(a.caretBidiLevel=m),C}):r.pos==r.start()||r.pos==r.end()}let MM=null,RM=null,OM=!1;function aY(e,t,n){return MM==t&&RM==n?OM:(MM=t,RM=n,OM=n=="up"||n=="down"?iY(e,t,n):sY(e,t,n))}const Wi=0,DM=1,ql=2,es=3;class cp{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Wi,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,s;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>sr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(t<o)return i.descAt(t-r-i.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>t||s instanceof NL){i=t-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof AL&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?sr(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?sr(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let c=this.children[a],u=s+c.size;if(i==-1&&t<=u){let f=s+c.border;if(t>=f&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,f);t=s;for(let h=a;h>0;h--){let m=this.children[h-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=sr(m.dom)+1;break}t-=m.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let f=a+1;f<this.children.length;f++){let h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=sr(h.dom);break}n+=h.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let o=Math.min(t,n),s=Math.max(t,n);for(let g=0,y=0;g<this.children.length;g++){let E=this.children[g],C=y+E.size;if(o>y&&s<C)return E.setSelection(t-y-E.border,n-y-E.border,r,i);y=C}let a=this.domFromPos(t,t?-1:1),c=n==t?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),f=r.domSelectionRange(),h=!1;if((Gi||kr)&&t==n){let{node:g,offset:y}=a;if(g.nodeType==3){if(h=!!(y&&g.nodeValue[y-1]==`
`),h&&y==g.nodeValue.length)for(let E=g,C;E;E=E.parentNode){if(C=E.nextSibling){C.nodeName=="BR"&&(a=c={node:C.parentNode,offset:sr(C)+1});break}let S=E.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let E=g.childNodes[y-1];h=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Gi&&f.focusNode&&f.focusNode!=c.node&&f.focusNode.nodeType==1){let g=f.focusNode.childNodes[f.focusOffset];g&&g.contentEditable=="false"&&(i=!0)}if(!(i||h&&kr)&&ac(a.node,a.offset,f.anchorNode,f.anchorOffset)&&ac(c.node,c.offset,f.focusNode,f.focusOffset))return;let m=!1;if((u.extend||t==n)&&!(h&&Gi)){u.collapse(a.node,a.offset);try{t!=n&&u.extend(c.node,c.offset),m=!0}catch{}}if(!m){if(t>n){let y=a;a=c,c=y}let g=document.createRange();g.setEnd(c.node,c.offset),g.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(g)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?t<=s&&n>=r:t<s&&n>r){let a=r+o.border,c=s-o.border;if(t>=a&&n<=c){this.dirty=t==r||n==s?ql:DM,t==a&&n==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=es:o.markDirty(t-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ql:es}r=s}this.dirty=ql}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?ql:DM;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class AL extends cp{constructor(t,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==Wi&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lY extends cp{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class lc extends cp{constructor(t,n,r,i,o){super(t,[],r,i),this.mark=n,this.spec=o}static create(t,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=yi.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new lc(t,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&es||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=es&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Wi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Wi}}slice(t,n,r){let i=lc.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Bw(o,n,s,r)),t>0&&(o=Bw(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Qa extends cp{constructor(t,n,r,i,o,s,a,c,u){super(t,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,o,s){let a=o.nodeViews[n.type.name],c,u=a&&a(n,o,()=>{if(!c)return s;if(c.parent)return c.parent.posBeforeChild(c)},r,i),f=u&&u.dom,h=u&&u.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:h}=yi.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let m=f;return f=OL(f,r,n),u?c=new cY(t,n,r,i,f,h||null,m,u,o,s+1):n.isText?new W1(t,n,r,i,f,m,o):new Qa(t,n,r,i,f,h||null,m,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ce.empty)}return t}matchesNode(t,n,r){return this.dirty==Wi&&t.eq(this.node)&&h0(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,o=t.composing?this.localCompositionInfo(t,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,c=new dY(this,s&&s.node,t);pY(this.node,this.innerDeco,(u,f,h)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,t):u.type.side>=0&&!h&&c.syncToMarks(f==this.node.childCount?Xt.none:this.node.child(f).marks,r,t),c.placeWidget(u,t,i)},(u,f,h,m)=>{c.syncToMarks(u.marks,r,t);let g;c.findNodeMatch(u,f,h,m)||a&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(g=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(u,f,h,g,t)||c.updateNextNode(u,f,h,t,m,i)||c.addNode(u,f,h,t,i),i+=u.nodeSize}),c.syncToMarks([],r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==ql)&&(s&&this.protectLocalComposition(t,s),ML(this.contentDOM,this.children,t),Xu&&mY(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ue)||r<n||i>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=gY(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new lY(this,o,n,i);t.input.compositionNodes.push(s),this.children=Bw(this.children,r,r+i.length,t,s)}update(t,n,r,i){return this.dirty==es||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Wi}updateOuterDeco(t){if(h0(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=RL(this.dom,this.nodeDOM,Iw(this.outerDeco,this.node,n),Iw(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function LM(e,t,n,r,i){OL(r,t,e);let o=new Qa(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class W1 extends Qa{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==es||this.dirty!=Wi&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Wi||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Wi,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),o=document.createTextNode(i.text);return new W1(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=es)}get domAtom(){return!1}isText(t){return this.node.text==t}}class NL extends cp{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Wi&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cY extends Qa{constructor(t,n,r,i,o,s,a,c,u,f){super(t,n,r,i,o,s,a,u,f),this.spec=c}update(t,n,r,i){if(this.dirty==es)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function ML(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=IM(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof lc){let c=r?r.previousSibling:e.lastChild;ML(s.contentDOM,s.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=IM(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Xf=function(e){e&&(this.nodeName=e)};Xf.prototype=Object.create(null);const Yl=[new Xf];function Iw(e,t,n){if(e.length==0)return Yl;let r=n?Yl[0]:new Xf,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(r=new Xf(s.nodeName));for(let a in s){let c=s[a];c!=null&&(n&&i.length==1&&i.push(r=new Xf(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return i}function RL(e,t,n,r){if(n==Yl&&r==Yl)return t;let i=t;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let c;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.nodeName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=Yl[0]),i=c}uY(i,a||Yl[0],s)}return i}function uY(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&e.classList.add(i[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function OL(e,t,n){return RL(e,e,Yl,Iw(t,n,e.nodeType!=1))}function h0(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function IM(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class dY{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=fY(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,t.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Wi,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(t[o])&&!this.isLocked(u.dom)){a=c;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let c=lc.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let u=this.top.children[a];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,i,o){let s=this.top.children[i];return s.dirty==es&&s.dom==s.contentDOM&&(s.dirty=ql),s.update(t,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof Qa){let u=this.preMatch.matched.get(c);if(u!=null&&u!=o)return!1;let f=c.dom,h,m=this.isLocked(f)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=es&&h0(n,c.outerDeco));if(!m&&c.update(t,n,r,i))return this.destroyBetween(this.index,a),c.dom!=f&&(this.changed=!0),this.index++,!0;if(!m&&(h=this.recreateWrapper(c,t,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=ql,h.updateChildren(i,s+1),h.dirty=Wi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,o,s){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!h0(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Qa.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let c of a.children)c.parent=a}return t.destroy(),a}addNode(t,n,r,i,o){let s=Qa.create(this.top,t,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new AL(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof lc;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof W1)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((kr||hr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new NL(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function fY(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof lc)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function hY(e,t){return e.type.side-t.type.side}function pY(e,t,n,r){let i=t.locals(e),o=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let f=e.child(u);r(f,i,t.forChild(o,f),u),o+=f.nodeSize}return}let s=0,a=[],c=null;for(let u=0;;){let f,h;for(;s<i.length&&i[s].to==o;){let C=i[s++];C.widget&&(f?(h||(h=[f])).push(C):f=C)}if(f)if(h){h.sort(hY);for(let C=0;C<h.length;C++)n(h[C],u,!!c)}else n(f,u,!!c);let m,g;if(c)g=-1,m=c,c=null;else if(u<e.childCount)g=u,m=e.child(u++);else break;for(let C=0;C<a.length;C++)a[C].to<=o&&a.splice(C--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let y=o+m.nodeSize;if(m.isText){let C=y;s<i.length&&i[s].from<C&&(C=i[s].from);for(let S=0;S<a.length;S++)a[S].to<C&&(C=a[S].to);C<y&&(c=m.cut(C-o),m=m.cut(0,C-o),y=C,g=-1)}else for(;s<i.length&&i[s].to<y;)s++;let E=m.isInline&&!m.isLeaf?a.filter(C=>!C.inline):a.slice();r(m,E,t.forChild(o,m),g),o=y}}function mY(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function gY(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let c=s.text;for(;i<e.childCount;){let u=e.child(i++);if(o+=u.nodeSize,!u.isText)break;c+=u.text}if(o>=n){if(o>=r&&c.slice(r-t.length-a,r-a)==t)return r-t.length;let u=a<r?c.lastIndexOf(t,r-a-1):-1;if(u>=0&&u+t.length+a>=n)return a+u;if(n==r&&c.length>=r+t.length-a&&c.slice(r-a,r-a+t.length)==t)return r}}return-1}function Bw(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let c=e[s],u=a,f=a+=c.size;u>=n||f<=t?o.push(c):(u<t&&o.push(c.slice(0,t-u,r)),i&&(o.push(i),i=void 0),f>n&&o.push(c.slice(n-u,c.size,r)))}return o}function xS(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),c,u;if(G1(n)){for(c=s;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&qe.isSelectable(h)&&i.parent&&!(h.isInline&&zq(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;u=new qe(s==m?a:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=s,m=s;for(let g=0;g<n.rangeCount;g++){let y=n.getRangeAt(g);h=Math.min(h,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(h<0)return null;[c,s]=m==e.state.selection.anchor?[m,h]:[h,m],a=r.resolve(s)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let f=r.resolve(c);if(!u){let h=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;u=kS(e,f,a,h)}return u}function DL(e){return e.editable?e.hasFocus():IL(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Vs(e,t=!1){let n=e.state.selection;if(LL(e,n),!!DL(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&hr){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ac(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)yY(e);else{let{anchor:r,head:i}=n,o,s;BM&&!(n instanceof Ue)&&(n.$from.parent.inlineContent||(o=PM(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=PM(e,n.to))),e.docView.setSelection(r,i,e,t),BM&&(o&&HM(o),s&&HM(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bY(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const BM=kr||hr&&CL<63;function PM(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(kr&&i&&i.contentEditable=="false")return zv(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return zv(i);if(o)return zv(o)}}function zv(e){return e.contentEditable="true",kr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function HM(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function bY(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!DL(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function yY(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,sr(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Kr&&Ka<=11&&(n.disabled=!0,n.disabled=!1)}function LL(e,t){if(t instanceof qe){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(UM(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else UM(e)}function UM(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function kS(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ue.between(t,n,r)}function FM(e){return e.editable&&!e.hasFocus()?!1:IL(e)}function IL(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function EY(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ac(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Pw(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Ze.findFrom(o,t)}function Da(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function jM(e,t,n){let r=e.state.selection;if(r instanceof Ue)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return Da(e,new Ue(r.$anchor,s))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Pw(e.state,t);return i&&i instanceof qe?Da(e,i):!1}else if(!(Ui&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?qe.isSelectable(o)?Da(e,new qe(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):lp?Da(e,new Ue(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return Da(e,new Ue(t>0?r.$to:r.$from));{let i=Pw(e.state,t);return i?Da(e,i):!1}}}function p0(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Zf(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function yu(e,t){return t<0?vY(e):CY(e)}function vY(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;for(Gi&&n.nodeType==1&&r<p0(n)&&Zf(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Zf(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(BL(n))break;{let a=n.previousSibling;for(;a&&Zf(a,-1);)i=n.parentNode,o=sr(a),a=a.previousSibling;if(a)n=a,r=p0(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Hw(e,n,r):i&&Hw(e,i,o)}function CY(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=p0(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Zf(a,1))o=n,s=++r;else break}else{if(BL(n))break;{let a=n.nextSibling;for(;a&&Zf(a,1);)o=a.parentNode,s=sr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=p0(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}o&&Hw(e,o,s)}function BL(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function wY(e,t){for(;e&&t==e.childNodes.length&&!ap(e);)t=sr(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function SY(e,t){for(;e&&!t&&!ap(e);)t=sr(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Hw(e,t,n){if(t.nodeType!=3){let o,s;(s=wY(t,n))?(t=s,n=0):(o=SY(t,n))&&(t=o,n=o.nodeValue.length)}let r=e.domSelection();if(!r)return;if(G1(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Vs(e)},50)}function zM(e,t){let n=e.state.doc.resolve(t);if(!(hr||qq)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function $M(e,t,n){let r=e.state.selection;if(r instanceof Ue&&!r.empty||n.indexOf("s")>-1||Ui&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=Pw(e.state,t);if(s&&s instanceof qe)return Da(e,s)}if(!i.parent.inlineContent){let s=t<0?i:o,a=r instanceof Wr?Ze.near(s,t):Ze.findFrom(s,t);return a?Da(e,a):!1}return!1}function VM(e,t){if(!(e.state.selection instanceof Ue))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=e.state.tr;return t<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),e.dispatch(s),!0}return!1}function qM(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function TY(e){if(!kr||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;qM(e,r,"true"),setTimeout(()=>qM(e,r,"false"),20)}return!1}function xY(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function kY(e,t){let n=t.keyCode,r=xY(t);if(n==8||Ui&&n==72&&r=="c")return VM(e,-1)||yu(e,-1);if(n==46&&!t.shiftKey||Ui&&n==68&&r=="c")return VM(e,1)||yu(e,1);if(n==13||n==27)return!0;if(n==37||Ui&&n==66&&r=="c"){let i=n==37?zM(e,e.state.selection.from)=="ltr"?-1:1:-1;return jM(e,i,r)||yu(e,i)}else if(n==39||Ui&&n==70&&r=="c"){let i=n==39?zM(e,e.state.selection.from)=="ltr"?1:-1:1;return jM(e,i,r)||yu(e,i)}else{if(n==38||Ui&&n==80&&r=="c")return $M(e,-1,r)||yu(e,-1);if(n==40||Ui&&n==78&&r=="c")return TY(e)||$M(e,1,r)||yu(e,1);if(r==(Ui?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _S(e,t){e.someProp("transformCopied",g=>{t=g(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let s=e.someProp("clipboardSerializer")||yi.fromSchema(e.state.schema),a=zL(),c=a.createElement("div");c.appendChild(s.serializeFragment(r,{document:a}));let u=c.firstChild,f,h=0;for(;u&&u.nodeType==1&&(f=jL[u.nodeName.toLowerCase()]);){for(let g=f.length-1;g>=0;g--){let y=a.createElement(f[g]);for(;c.firstChild;)y.appendChild(c.firstChild);c.appendChild(y),h++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${h?` -${h}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",g=>g(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:m,slice:t}}function PL(e,t,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!t)return null;let c=!!t&&(r||o||!n);if(c){if(e.someProp("transformPastedText",m=>{t=m(t,o||r,e)}),o)return a=new De(Ce.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{a=m(a,e,!0)}),a;let h=e.someProp("clipboardTextParser",m=>m(t,i,r,e));if(h)a=h;else{let m=i.marks(),{schema:g}=e.state,y=yi.fromSchema(g);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(E=>{let C=s.appendChild(document.createElement("p"));E&&C.appendChild(y.serializeNode(g.text(E,m)))})}}else e.someProp("transformPastedHTML",h=>{n=h(n,e)}),s=MY(n),lp&&RY(s);let u=s&&s.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let h=+f[3];h>0;h--){let m=s.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;s=m}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||co.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(c||f),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!_Y.test(m.parentNode.nodeName)?{ignore:!0}:null}})),f)a=OY(YM(a,+f[1],+f[2]),f[4]);else if(a=De.maxOpen(AY(a.content,i),!0),a.openStart||a.openEnd){let h=0,m=0;for(let g=a.content.firstChild;h<a.openStart&&!g.type.spec.isolating;h++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=YM(a,h,m)}return e.someProp("transformPasted",h=>{a=h(a,e,c)}),a}const _Y=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AY(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),o,s=[];if(e.forEach(a=>{if(!s)return;let c=i.findWrapping(a.type),u;if(!c)return s=null;if(u=s.length&&o.length&&UL(c,o,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=FL(s[s.length-1],o.length));let f=HL(a,c);s.push(f),i=i.matchType(f.type),o=c}}),s)return Ce.from(s)}return e}function HL(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ce.from(e));return e}function UL(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=UL(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Ce.from(HL(n,e,i+1))))}}function FL(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,FL(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ce.empty,!0);return e.copy(n.append(r))}function Uw(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=Uw(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Ce.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function YM(e,t,n){return t<e.openStart&&(e=new De(Uw(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new De(Uw(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const jL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let GM=null;function zL(){return GM||(GM=document.implementation.createHTMLDocument("title"))}let $v=null;function NY(e){let t=window.trustedTypes;return t?($v||($v=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),$v.createHTML(e)):e}function MY(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=zL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&jL[r[1].toLowerCase()])&&(e=i.map(o=>"<"+o+">").join("")+e+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=NY(e),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function RY(e){let t=e.querySelectorAll(hr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function OY(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:s}=e;for(let a=r.length-2;a>=0;a-=2){let c=n.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;i=Ce.from(c.create(r[a+1],i)),o++,s++}return new De(i,o,s)}const _r={},Ar={},DY={touchstart:!0,touchmove:!0};class LY{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function IY(e){for(let t in _r){let n=_r[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{PY(e,r)&&!AS(e,r)&&(e.editable||!(r.type in Ar))&&n(e,r)},DY[t]?{passive:!0}:void 0)}kr&&e.dom.addEventListener("input",()=>null),Fw(e)}function Va(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function BY(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Fw(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>AS(e,r))})}function AS(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function PY(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function HY(e,t){!AS(e,t)&&_r[t.type]&&(e.editable||!(t.type in Ar))&&_r[t.type](e,t)}Ar.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!VL(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ps&&hr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Xu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,zl(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||kY(e,n)?n.preventDefault():Va(e,"key")};Ar.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ar.keypress=(e,t)=>{let n=t;if(VL(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ui&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ue)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",s=>s(e,r.$from.pos,r.$to.pos,i,o))&&e.dispatch(o()),n.preventDefault()}};function K1(e){return{left:e.clientX,top:e.clientY}}function UY(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function NS(e,t,n,r,i){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,a=>s>o.depth?a(e,n,o.nodeAfter,o.before(s),i,!0):a(e,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Bu(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function FY(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(Bu(e,new qe(n)),!0):!1}function jY(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof qe&&(r=n.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(qe.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Bu(e,qe.create(e.state.doc,i)),!0):!1}function zY(e,t,n,r,i){return NS(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(i?jY(e,n):FY(e,n))}function $Y(e,t,n,r){return NS(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function VY(e,t,n,r){return NS(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||qY(e,n,r)}function qY(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Bu(e,Ue.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Bu(e,Ue.create(r,a+1,a+1+s.content.size));else if(qe.isSelectable(s))Bu(e,qe.create(r,a));else continue;return!0}}function MS(e){return m0(e)}const $L=Ui?"metaKey":"ctrlKey";_r.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=MS(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&UY(n,e.input.lastClick)&&!n[$L]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=e.posAtCoords(K1(n));s&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new YY(e,s,n,!!r)):(o=="doubleClick"?$Y:VY)(e,s.pos,s.inside,n)?n.preventDefault():Va(e,"pointer"))};class YY{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[$L],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),s=n.inside;else{let f=t.state.doc.resolve(n.pos);o=f.parent,s=f.depth?f.before():0}const a=i?null:r.target,c=a?t.docView.nearestDesc(a,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof qe&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Va(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Vs(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(K1(t))),this.updateAllowDefault(t),this.allowDefault||!n?Va(this.view,"pointer"):zY(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||kr&&this.mightDrag&&!this.mightDrag.node.isAtom||hr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bu(this.view,Ze.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Va(this.view,"pointer")}move(t){this.updateAllowDefault(t),Va(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}_r.touchstart=e=>{e.input.lastTouch=Date.now(),MS(e),Va(e,"pointer")};_r.touchmove=e=>{e.input.lastTouch=Date.now(),Va(e,"pointer")};_r.contextmenu=e=>MS(e);function VL(e,t){return e.composing?!0:kr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const GY=Ps?5e3:-1;Ar.compositionstart=Ar.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ue&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),m0(e,!0),e.markCursor=null;else if(m0(e,!t.selection.empty),Gi&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=e.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}e.input.composing=!0}qL(e,GY)};Ar.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,qL(e,20))};function qL(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>m0(e),t))}function YL(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=KY());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function WY(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Fq(t.focusNode,t.focusOffset),r=jq(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function KY(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function m0(e,t=!1){if(!(Ps&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),YL(e),t||e.docView&&e.docView.dirty){let n=xS(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function QY(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Sh=Kr&&Ka<15||Xu&&Yq<604;_r.copy=Ar.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let o=Sh?null:n.clipboardData,s=r.content(),{dom:a,text:c}=_S(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):QY(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function XY(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function ZY(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Th(e,r.value,null,i,t):Th(e,r.textContent,r.innerHTML,i,t)},50)}function Th(e,t,n,r,i){let o=PL(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,i,o||De.empty)))return!0;if(!o)return!1;let s=XY(o),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function GL(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ar.paste=(e,t)=>{let n=t;if(e.composing&&!Ps)return;let r=Sh?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Th(e,GL(r),r.getData("text/html"),i,n)?n.preventDefault():ZY(e,n)};class WL{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const JY=Ui?"altKey":"ctrlKey";function KL(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[JY]}_r.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(K1(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)s=qe.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=e.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=e.docView&&(s=qe.create(e.state.doc,h.posBefore))}}let a=(s||e.state.selection).content(),{dom:c,text:u,slice:f}=_S(e,a);(!n.dataTransfer.files.length||!hr||CL>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Sh?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Sh||n.dataTransfer.setData("text/plain",u),e.dragging=new WL(f,KL(e,n),s)};_r.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ar.dragover=Ar.dragenter=(e,t)=>t.preventDefault();Ar.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(K1(n));if(!i)return;let o=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",y=>{s=y(s,e,!1)}):s=PL(e,GL(n.dataTransfer),Sh?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&KL(e,n));if(e.someProp("handleDrop",y=>y(e,n,s||De.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let c=s?fL(e.state.doc,o.pos,s):o.pos;c==null&&(c=o.pos);let u=e.state.tr;if(a){let{node:y}=r;y?y.replace(u):u.deleteSelection()}let f=u.mapping.map(c),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=u.doc;if(h?u.replaceRangeWith(f,f,s.content.firstChild):u.replaceRange(f,f,s),u.doc.eq(m))return;let g=u.doc.resolve(f);if(h&&qe.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new qe(g));else{let y=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((E,C,S,N)=>y=N),u.setSelection(kS(e,g,u.doc.resolve(y)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))};_r.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Vs(e)},20))};_r.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};_r.beforeinput=(e,t)=>{if(hr&&Ps&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,zl(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ar)_r[e]=Ar[e];function xh(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class g0{constructor(t,n){this.toDOM=t,this.spec=n||Xl,this.side=this.spec.side||0}map(t,n,r,i){let{pos:o,deleted:s}=t.mapResult(n.from+i,this.side<0?-1:1);return s?null:new It(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof g0&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&xh(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Xa{constructor(t,n){this.attrs=t,this.spec=n||Xl}map(t,n,r,i){let o=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new It(o,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Xa&&xh(this.attrs,t.attrs)&&xh(this.spec,t.spec)}static is(t){return t.type instanceof Xa}destroy(){}}class RS{constructor(t,n){this.attrs=t,this.spec=n||Xl}map(t,n,r,i){let o=t.mapResult(n.from+i,1);if(o.deleted)return null;let s=t.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new It(o.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),o;return i==n.from&&!(o=t.child(r)).isText&&i+o.nodeSize==n.to}eq(t){return this==t||t instanceof RS&&xh(this.attrs,t.attrs)&&xh(this.spec,t.spec)}destroy(){}}class It{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new It(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new It(t,t,new g0(n,r))}static inline(t,n,r,i){return new It(t,n,new Xa(r,i))}static node(t,n,r,i){return new It(t,n,new RS(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xa}get widget(){return this.type instanceof g0}}const ku=[],Xl={};class ct{constructor(t,n){this.local=t.length?t:ku,this.children=n.length?n:ku}static create(t,n){return n.length?b0(n,t,0,Xl):dr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,n-a,r,i+a,o)}}map(t,n,r){return this==dr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Xl)}mapInner(t,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(t,r,i);c&&c.type.valid(n,c)?(s||(s=[])).push(c):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?eG(this.children,s||[],t,n,r,i,o):s?new ct(s.sort(Zl),ku):dr}add(t,n){return n.length?this==dr?ct.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,o=0;t.forEach((a,c)=>{let u=c+r,f;if(f=XL(n,a,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<c;)o+=3;i[o]==c?i[o+2]=i[o+2].addInner(a,f,u+1):i.splice(o,0,c,c+a.nodeSize,b0(f,a,u+1,Xl)),o+=3}});let s=QL(o?ZL(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new ct(s.length?this.local.concat(s).sort(Zl):this.local,i||this.children)}remove(t){return t.length==0||this==dr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,c=r[o+1]+n;for(let f=0,h;f<t.length;f++)(h=t[f])&&h.from>a&&h.to<c&&(t[f]=null,(s||(s=[])).push(h));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,a+1);u!=dr?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<t.length;o++)if(s=t[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ct(i,r):dr}forChild(t,n){if(this==dr)return this;if(n.isLeaf)return ct.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof Xa){let u=Math.max(o,c.from)-o,f=Math.min(s,c.to)-o;u<f&&(i||(i=[])).push(c.copy(u,f))}}if(i){let a=new ct(i.sort(Zl),ku);return r?new Pa([a,r]):a}return r||dr}eq(t){if(this==t)return!0;if(!(t instanceof ct)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return OS(this.localsInner(t))}localsInner(t){if(this==dr)return ku;if(t.inlineContent||!this.local.some(Xa.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xa||n.push(this.local[r]);return n}forEachSet(t){t(this)}}ct.empty=new ct([],[]);ct.removeOverlap=OS;const dr=ct.empty;class Pa{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Xl));return Pa.from(r)}forChild(t,n){if(n.isLeaf)return ct.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,n);o!=dr&&(o instanceof Pa?r=r.concat(o.members):r.push(o))}return Pa.from(r)}eq(t){if(!(t instanceof Pa)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?OS(r?n:n.sort(Zl)):ku}static from(t){switch(t.length){case 0:return dr;case 1:return t[0];default:return new Pa(t.every(n=>n instanceof ct)?t:t.reduce((n,r)=>n.concat(r instanceof ct?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function eG(e,t,n,r,i,o,s){let a=e.slice();for(let u=0,f=o;u<n.maps.length;u++){let h=0;n.maps[u].forEach((m,g,y,E)=>{let C=E-y-(g-m);for(let S=0;S<a.length;S+=3){let N=a[S+1];if(N<0||m>N+f-h)continue;let _=a[S]+f-h;g>=_?a[S+1]=m<=_?-2:-1:m>=f&&C&&(a[S]+=C,a[S+1]+=C)}h+=C}),f=n.maps[u].map(f,-1)}let c=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){c=!0,a[u+1]=-1;continue}let f=n.map(e[u]+o),h=f-i;if(h<0||h>=r.content.size){c=!0;continue}let m=n.map(e[u+1]+o,-1),g=m-i,{index:y,offset:E}=r.content.findIndex(h),C=r.maybeChild(y);if(C&&E==h&&E+C.nodeSize==g){let S=a[u+2].mapInner(n,C,f+1,e[u]+o+1,s);S!=dr?(a[u]=h,a[u+1]=g,a[u+2]=S):(a[u+1]=-2,c=!0)}else c=!0}if(c){let u=tG(a,e,t,n,i,o,s),f=b0(u,r,0,s);t=f.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,m=0;h<f.children.length;h+=3){let g=f.children[h];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,f.children[h],f.children[h+1],f.children[h+2])}}return new ct(t.sort(Zl),a)}function QL(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new It(i.from+t,i.to+t,i.type))}return n}function tG(e,t,n,r,i,o,s){function a(c,u){for(let f=0;f<c.local.length;f++){let h=c.local[f].map(r,i,u);h?n.push(h):s.onRemove&&s.onRemove(c.local[f].spec)}for(let f=0;f<c.children.length;f+=3)a(c.children[f+2],c.children[f]+u+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&a(e[c+2],t[c]+o+1);return n}function XL(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o=0,s;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function ZL(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function b0(e,t,n,r){let i=[],o=!1;t.forEach((a,c)=>{let u=XL(e,a,c+n);if(u){o=!0;let f=b0(u,a,n+c+1,r);f!=dr&&i.push(c,c+a.nodeSize,f)}});let s=QL(o?ZL(e):e,-n).sort(Zl);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new ct(s,i):dr}function Zl(e,t){return e.from-t.from||e.to-t.to}function OS(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),WM(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),WM(t,i,r.copy(o.from,r.to)));break}}}return t}function WM(e,t,n){for(;t<e.length&&Zl(n,e[t])>0;)t++;e.splice(t,0,n)}function Vv(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=dr&&t.push(r)}),e.cursorWrapper&&t.push(ct.create(e.state.doc,[e.cursorWrapper.deco])),Pa.from(t)}const nG={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rG=Kr&&Ka<=11;class iG{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class oG{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iG,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Kr&&Ka<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),rG&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nG)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(FM(this.view)){if(this.suppressingSelectionUpdates)return Vs(this.view);if(Kr&&Ka<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ac(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=Qu(o))n.add(o);for(let o=t.anchorNode;o;o=Qu(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&FM(t)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,c=[];if(t.editable)for(let f=0;f<n.length;f++){let h=this.registerMutation(n[f],c);h&&(o=o<0?h.from:Math.min(h.from,o),s=s<0?h.to:Math.max(h.to,s),h.typeOver&&(a=!0))}if(Gi&&c.length){let f=c.filter(h=>h.nodeName=="BR");if(f.length==2){let[h,m]=f;h.parentNode&&h.parentNode.parentNode==m.parentNode?m.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let m of f){let g=m.parentNode;g&&g.nodeName=="LI"&&(!h||lG(t,h)!=g)&&m.remove()}}}let u=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&G1(r)&&(u=xS(t))&&u.eq(Ze.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Vs(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),sG(t)),this.handleDOMChange(o,s,a,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Vs(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let f=0;f<t.addedNodes.length;f++){let h=t.addedNodes[f];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,o=t.nextSibling;if(Kr&&Ka<=11&&t.addedNodes.length)for(let f=0;f<t.addedNodes.length;f++){let{previousSibling:h,nextSibling:m}=t.addedNodes[f];(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(i=h),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(o=m)}let s=i&&i.parentNode==t.target?sr(i)+1:0,a=r.localPosFromDOM(t.target,s,-1),c=o&&o.parentNode==t.target?sr(o):t.target.childNodes.length,u=r.localPosFromDOM(t.target,c,1);return{from:a,to:u}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let KM=new WeakMap,QM=!1;function sG(e){if(!KM.has(e)&&(KM.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Gi,QM)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),QM=!0}}function XM(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return ac(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function aG(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return XM(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?XM(e,n):null}function lG(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function cG(e,t,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u,f=c.anchorNode;if(f&&e.dom.contains(f.nodeType==1?f:f.parentNode)&&(u=[{node:f,offset:c.anchorOffset}],G1(c)||u.push({node:c.focusNode,offset:c.focusOffset})),hr&&e.input.lastKeyCode===8)for(let C=o;C>i;C--){let S=r.childNodes[C-1],N=S.pmViewDesc;if(S.nodeName=="BR"&&!N){o=C;break}if(!N||N.size)break}let h=e.state.doc,m=e.someProp("domParser")||co.fromSchema(e.state.schema),g=h.resolve(s),y=null,E=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:uG,context:g});if(u&&u[0].pos!=null){let C=u[0].pos,S=u[1]&&u[1].pos;S==null&&(S=C),y={anchor:C+s,head:S+s}}return{doc:E,sel:y,from:s,to:a}}function uG(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(kr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||kr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dG=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fG(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let L=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,F=xS(e,L);if(F&&!e.state.selection.eq(F)){if(hr&&Ps&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,zl(13,"Enter"))))return;let z=e.state.tr.setSelection(F);L=="pointer"?z.setMeta("pointer",!0):L=="key"&&z.scrollIntoView(),o&&z.setMeta("composition",o),e.dispatch(z)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let c=e.state.selection,u=cG(e,t,n),f=e.state.doc,h=f.slice(u.from,u.to),m,g;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let y=mG(h.content,u.doc.content,u.from,m,g);if(y&&e.input.domChangeCount++,(Xu&&e.input.lastIOSEnter>Date.now()-225||Ps)&&i.some(L=>L.nodeType==1&&!dG.test(L.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",L=>L(e,zl(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&c instanceof Ue&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))y={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let L=ZM(e,e.state.doc,u.sel);if(L&&!L.eq(e.state.selection)){let F=e.state.tr.setSelection(L);o&&F.setMeta("composition",o),e.dispatch(F)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Ue&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),Kr&&Ka<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>u.from&&u.doc.textBetween(y.start-u.from-1,y.start-u.from+1)==" "&&(y.start--,y.endA--,y.endB--);let E=u.doc.resolveNoCache(y.start-u.from),C=u.doc.resolveNoCache(y.endB-u.from),S=f.resolve(y.start),N=E.sameParent(C)&&E.parent.inlineContent&&S.end()>=y.endA;if((Xu&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!N&&E.pos<u.doc.content.size&&(!E.sameParent(C)||!E.parent.inlineContent)&&E.pos<C.pos&&!/\S/.test(u.doc.textBetween(E.pos,C.pos,"","")))&&e.someProp("handleKeyDown",L=>L(e,zl(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&pG(f,y.start,y.endA,E,C)&&e.someProp("handleKeyDown",L=>L(e,zl(8,"Backspace")))){Ps&&hr&&e.domObserver.suppressSelectionUpdates();return}hr&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),Ps&&!N&&E.start()!=C.start()&&C.parentOffset==0&&E.depth==C.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==y.endA&&(y.endB-=2,C=u.doc.resolveNoCache(y.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(L){return L(e,zl(13,"Enter"))})},20));let _=y.start,O=y.endA,M=L=>{let F=L||e.state.tr.replace(_,O,u.doc.slice(y.start-u.from,y.endB-u.from));if(u.sel){let z=ZM(e,F.doc,u.sel);z&&!(hr&&e.composing&&z.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&(z.head==_||z.head==F.mapping.map(O)-1)||Kr&&z.empty&&z.head==_)&&F.setSelection(z)}return o&&F.setMeta("composition",o),F.scrollIntoView()},R;if(N)if(E.pos==C.pos){Kr&&Ka<=11&&E.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Vs(e),20));let L=M(e.state.tr.delete(_,O)),F=f.resolve(y.start).marksAcross(f.resolve(y.endA));F&&L.ensureMarks(F),e.dispatch(L)}else if(y.endA==y.endB&&(R=hG(E.parent.content.cut(E.parentOffset,C.parentOffset),S.parent.content.cut(S.parentOffset,y.endA-S.start())))){let L=M(e.state.tr);R.type=="add"?L.addMark(_,O,R.mark):L.removeMark(_,O,R.mark),e.dispatch(L)}else if(E.parent.child(E.index()).isText&&E.index()==C.index()-(C.textOffset?0:1)){let L=E.parent.textBetween(E.parentOffset,C.parentOffset),F=()=>M(e.state.tr.insertText(L,_,O));e.someProp("handleTextInput",z=>z(e,_,O,L,F))||e.dispatch(F())}else e.dispatch(M());else e.dispatch(M())}function ZM(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:kS(e,t.resolve(n.anchor),t.resolve(n.head))}function hG(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,s,a,c;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<n.length;f++)o=n[f].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",c=f=>f.mark(a.addToSet(f.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",c=f=>f.mark(a.removeFromSet(f.marks));else return null;let u=[];for(let f=0;f<t.childCount;f++)u.push(c(t.child(f)));if(Ce.from(u).eq(e))return{mark:a,type:s}}function pG(e,t,n,r,i){if(n-t<=i.pos-r.pos||qv(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==t+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(qv(o,!0,!0));return!s.parent.isTextblock||s.pos>n||qv(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function qv(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function mG(e,t,n,r,i){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let c=Math.max(0,o-Math.min(s,a));r-=s+c-o}if(s<o&&e.size<t.size){let c=r<=o&&r>=s?o-r:0;o-=c,o&&o<t.size&&JM(t.textBetween(o-1,o+1))&&(o+=c?1:-1),a=o+(a-s),s=o}else if(a<o){let c=r<=o&&r>=a?o-r:0;o-=c,o&&o<e.size&&JM(e.textBetween(o-1,o+1))&&(o+=c?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function JM(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class JL{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new LY,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(iR),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=nR(this),tR(this),this.nodeViews=rR(this),this.docView=LM(this.state.doc,eR(this),Vv(this),this.dom,this),this.domObserver=new oG(this,(r,i,o,s)=>fG(this,r,i,o,s)),this.domObserver.start(),IY(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Fw(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(iR),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,o=!1,s=!1;t.storedMarks&&this.composing&&(YL(this),s=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=rR(this);bG(g,this.nodeViews)&&(this.nodeViews=g,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Fw(this),this.editable=nR(this),tR(this);let c=Vv(this),u=eR(this),f=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=o||!this.docView.matchesNode(t.doc,u,c);(h||!t.selection.eq(i.selection))&&(s=!0);let m=f=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Kq(this);if(s){this.domObserver.stop();let g=h&&(Kr||hr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&gG(i.selection,t.selection);if(h){let y=hr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=WY(this)),(o||!this.docView.update(t.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=LM(t.doc,u,c,this.dom,this)),y&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&EY(this))?Vs(this,g):(LL(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():m&&Qq(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof qe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&AM(this,n.getBoundingClientRect(),t)}else AM(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new WL(t.slice,t.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Kr){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xq(this.dom),Vs(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return nY(this,t)}coordsAtPos(t,n=1){return kL(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return aY(this,n||this.state,t)}pasteHTML(t,n){return Th(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Th(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return _S(this,t)}destroy(){this.docView&&(BY(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Vv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Hq())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return HY(this,t)}domSelectionRange(){let t=this.domSelection();return t?kr&&this.root.nodeType===11&&$q(this.dom.ownerDocument)==this.dom&&aG(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}JL.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function eR(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[It.node(0,e.state.doc.content.size,t)]}function tR(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:It.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function nR(e){return!e.someProp("editable",t=>t(e.state)===!1)}function gG(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function rR(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function bG(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function iR(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Za={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yG=typeof navigator<"u"&&/Mac/.test(navigator.platform),EG=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ar=0;ar<10;ar++)Za[48+ar]=Za[96+ar]=String(ar);for(var ar=1;ar<=24;ar++)Za[ar+111]="F"+ar;for(var ar=65;ar<=90;ar++)Za[ar]=String.fromCharCode(ar+32),y0[ar]=String.fromCharCode(ar);for(var Yv in Za)y0.hasOwnProperty(Yv)||(y0[Yv]=Za[Yv]);function vG(e){var t=yG&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||EG&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?y0:Za)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const CG=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),wG=typeof navigator<"u"&&/Win/.test(navigator.platform);function SG(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<t.length-1;a++){let c=t[a];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))CG?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function TG(e){let t=Object.create(null);for(let n in e)t[SG(n)]=e[n];return t}function Gv(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function xG(e){return new nt({props:{handleKeyDown:DS(e)}})}function DS(e){let t=TG(e);return function(n,r){let i=vG(r),o,s=t[Gv(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[Gv(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(wG&&r.ctrlKey&&r.altKey)&&(o=Za[r.keyCode])&&o!=i){let a=t[Gv(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var jw,zw;if(typeof WeakMap<"u"){let e=new WeakMap;jw=t=>e.get(t),zw=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;jw=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},zw=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var tn=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let o=r+1,s=i+1;for(let a=1;o<this.width&&this.map[t+a]==n;a++)o++;for(let a=1;s<this.height&&this.map[t+this.width*a]==n;a++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:o,bottom:s}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:s==this.height)?null:this.map[r+this.width*(n<0?o-1:s)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:o}=this.findCell(e),{left:s,right:a,top:c,bottom:u}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(i,c),right:Math.max(r,a),bottom:Math.max(o,u)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,!(i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s)&&t.push(s))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==e){let s=t+e*this.width;const a=(e+1)*this.width;for(;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}}static get(e){return jw(e)||zw(e,kG(e))}};function kG(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=_G(e),n=e.childCount,r=[];let i=0,o=null;const s=[];for(let u=0,f=t*n;u<f;u++)r[u]=0;for(let u=0,f=0;u<n;u++){const h=e.child(u);f++;for(let y=0;;y++){for(;i<r.length&&r[i]!=0;)i++;if(y==h.childCount)break;const E=h.child(y),{colspan:C,rowspan:S,colwidth:N}=E.attrs;for(let _=0;_<S;_++){if(_+u>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:f,n:S-_});break}const O=i+_*t;for(let M=0;M<C;M++){r[O+M]==0?r[O+M]=f:(o||(o=[])).push({type:"collision",row:u,pos:f,n:C-M});const R=N&&N[M];if(R){const L=(O+M)%t*2,F=s[L];F==null||F!=R&&s[L+1]==1?(s[L]=R,s[L+1]=1):F==R&&s[L+1]++}}}i+=C,f+=E.nodeSize}const m=(u+1)*t;let g=0;for(;i<m;)r[i++]==0&&g++;g&&(o||(o=[])).push({type:"missing",row:u,n:g}),f++}(t===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const a=new tn(t,n,r,o);let c=!1;for(let u=0;!c&&u<s.length;u+=2)s[u]!=null&&s[u+1]<n&&(c=!0);return c&&AG(a,s,e),a}function _G(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let o=0;if(n)for(let s=0;s<r;s++){const a=e.child(s);for(let c=0;c<a.childCount;c++){const u=a.child(c);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const a=i.child(s);o+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function AG(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const o=e.map[i];if(r[o])continue;r[o]=!0;const s=n.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null;const c=s.attrs;for(let u=0;u<c.colspan;u++){const f=(i+u)%e.width,h=t[f*2];h!=null&&(!c.colwidth||c.colwidth[u]!=h)&&((a||(a=NG(c)))[u]=h)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function NG(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function br(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var Ha=new pt("selectingCells");function md(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function MG(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function ls(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function LS(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=md(t.$head)||RG(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function RG(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function $w(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function OG(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function IS(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function eI(e,t,n){const r=e.node(-1),i=tn.get(r),o=e.start(-1),s=i.nextCell(e.pos-o,t,n);return s==null?null:e.node(0).resolve(o+s)}function cc(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function tI(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function DG(e,t,n){const r=br(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var $t=class Ds extends Ze{constructor(t,n=t){const r=t.node(-1),i=tn.get(r),o=t.start(-1),s=i.rectBetween(t.pos-o,n.pos-o),a=t.node(0),c=i.cellsInRect(s).filter(f=>f!=n.pos-o);c.unshift(n.pos-o);const u=c.map(f=>{const h=r.nodeAt(f);if(!h)throw RangeError(`No cell with offset ${f} found`);const m=o+f+1;return new bL(a.resolve(m),a.resolve(m+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if($w(r)&&$w(i)&&IS(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Ds.rowSelection(r,i):o&&this.isColSelection()?Ds.colSelection(r,i):new Ds(r,i)}return Ue.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=tn.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let c=i.top;c<i.bottom;c++){const u=[];for(let f=c*n.width+i.left,h=i.left;h<i.right;h++,f++){const m=n.map[f];if(o[m])continue;o[m]=!0;const g=n.findCell(m);let y=t.nodeAt(m);if(!y)throw RangeError(`No cell with offset ${m} found`);const E=i.left-g.left,C=g.right-i.right;if(E>0||C>0){let S=y.attrs;if(E>0&&(S=cc(S,0,E)),C>0&&(S=cc(S,S.colspan-C,C)),g.left<i.left){if(y=y.type.createAndFill(S),!y)throw RangeError(`Could not create cell with attrs ${JSON.stringify(S)}`)}else y=y.type.create(S,y.content)}if(g.top<i.top||g.bottom>i.bottom){const S={...y.attrs,rowspan:Math.min(g.bottom,i.bottom)-Math.max(g.top,i.top)};g.top<i.top?y=y.type.createAndFill(S):y=y.type.create(S,y.content)}u.push(y)}s.push(t.child(c).copy(Ce.from(u)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new De(Ce.from(a),1,1)}replace(t,n=De.empty){const r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:a,$to:c}=i[s],u=t.mapping.slice(r);t.replace(u.map(a.pos),u.map(c.pos),s?De.empty:n)}const o=Ze.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,n){this.replace(t,new De(Ce.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=tn.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)t(n.nodeAt(o[s]),i+o[s])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=tn.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),c=t.node(0);return s.top<=a.top?(s.top>0&&(t=c.resolve(o+i.map[s.left])),a.bottom<i.height&&(n=c.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=c.resolve(o+i.map[a.left])),s.bottom<i.height&&(t=c.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new Ds(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=tn.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(t){return t instanceof Ds&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=tn.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),c=t.node(0);return s.left<=a.left?(s.left>0&&(t=c.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(n=c.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=c.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(t=c.resolve(o+i.map[i.width*(s.top+1)-1]))),new Ds(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Ds(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Ds(t.resolve(n),t.resolve(r))}getBookmark(){return new LG(this.$anchorCell.pos,this.$headCell.pos)}};$t.prototype.visible=!1;Ze.jsonID("cell",$t);var LG=class nI{constructor(t,n){this.anchor=t,this.head=n}map(t){return new nI(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&IS(n,r)?new $t(n,r):Ze.near(r,1)}};function IG(e){if(!(e.selection instanceof $t))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(It.node(r,r+n.nodeSize,{class:"selectedCell"}))}),ct.create(e.doc,t)}function BG({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let o=t.depth;o>=0&&!(t.before(o+1)>t.start(o));o--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}function PG({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&t.parentOffset===0}function HG(e,t,n){const r=(t||e).selection,i=(t||e).doc;let o,s;if(r instanceof qe&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=$t.create(i,r.from);else if(s=="row"){const a=i.resolve(r.from+1);o=$t.rowSelection(a,a)}else if(!n){const a=tn.get(r.node),c=r.from+1,u=c+a.map[a.width*a.height-1];o=$t.create(i,c+1,u)}}else r instanceof Ue&&BG(r)?o=Ue.create(i,r.from):r instanceof Ue&&PG(r)&&(o=Ue.create(i,r.$from.start(),r.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t}var UG=new pt("fix-tables");function rI(e,t,n,r){const i=e.childCount,o=t.childCount;e:for(let s=0,a=0;s<o;s++){const c=t.child(s);for(let u=a,f=Math.min(i,s+3);u<f;u++)if(e.child(u)==c){a=u+1,n+=c.nodeSize;continue e}r(c,n),a<i&&e.child(a).sameMarkup(c)?rI(e.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function FG(e,t){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=jG(e,i,o,n))};return t?t.doc!=e.doc&&rI(t.doc,e.doc,0,r):e.doc.descendants(r),n}function jG(e,t,n,r){const i=tn.get(t);if(!i.problems)return r;r||(r=e.tr);const o=[];for(let c=0;c<i.height;c++)o.push(0);for(let c=0;c<i.problems.length;c++){const u=i.problems[c];if(u.type=="collision"){const f=t.nodeAt(u.pos);if(!f)continue;const h=f.attrs;for(let m=0;m<h.rowspan;m++)o[u.row+m]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,cc(h,h.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const f=t.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const f=t.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...f.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const f=r.mapping.map(n);r.delete(f,f+t.nodeSize)}}let s,a;for(let c=0;c<o.length;c++)o[c]&&(s==null&&(s=c),a=c);for(let c=0,u=n+1;c<i.height;c++){const f=t.child(c),h=u+f.nodeSize,m=o[c];if(m>0){let g="cell";f.firstChild&&(g=f.firstChild.type.spec.tableRole);const y=[];for(let C=0;C<m;C++){const S=br(e.schema)[g].createAndFill();S&&y.push(S)}const E=(c==0||s==c-1)&&a==c?u+1:h-1;r.insert(r.mapping.map(E),y)}u=h}return r.setMeta(UG,{fixTables:!0})}function cs(e){const t=e.selection,n=LS(e),r=n.node(-1),i=n.start(-1),o=tn.get(r);return{...t instanceof $t?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function iI(e,{map:t,tableStart:n,table:r},i){let o=i>0?-1:0;DG(t,r,i+o)&&(o=i==0||i==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const c=t.map[a],u=r.nodeAt(c);e.setNodeMarkup(e.mapping.map(n+c),null,tI(u.attrs,i-t.colCount(c))),s+=u.attrs.rowspan-1}else{const c=o==null?br(r.type.schema).cell:r.nodeAt(t.map[a+o]).type,u=t.positionAt(s,i,r);e.insert(e.mapping.map(n+u),c.createAndFill())}}return e}function zG(e,t){if(!ls(e))return!1;if(t){const n=cs(e);t(iI(e.tr,n,n.left))}return!0}function $G(e,t){if(!ls(e))return!1;if(t){const n=cs(e);t(iI(e.tr,n,n.right))}return!0}function VG(e,{map:t,table:n,tableStart:r},i){const o=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+i,c=t.map[a],u=n.nodeAt(c),f=u.attrs;if(i>0&&t.map[a-1]==c||i<t.width-1&&t.map[a+1]==c)e.setNodeMarkup(e.mapping.slice(o).map(r+c),null,cc(f,i-t.colCount(c)));else{const h=e.mapping.slice(o).map(r+c);e.delete(h,h+u.nodeSize)}s+=f.rowspan}}function qG(e,t){if(!ls(e))return!1;if(t){const n=cs(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;VG(r,n,i),i!=n.left;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=tn.get(o)}t(r)}return!0}function YG(e,t,n){var r;const i=br(t.type.schema).header_cell;for(let o=0;o<e.width;o++)if(((r=t.nodeAt(e.map[o+n*e.width]))==null?void 0:r.type)!=i)return!1;return!0}function oI(e,{map:t,tableStart:n,table:r},i){var o;let s=n;for(let u=0;u<i;u++)s+=r.child(u).nodeSize;const a=[];let c=i>0?-1:0;YG(t,r,i+c)&&(c=i==0||i==t.height?null:0);for(let u=0,f=t.width*i;u<t.width;u++,f++)if(i>0&&i<t.height&&t.map[f]==t.map[f-t.width]){const h=t.map[f],m=r.nodeAt(h).attrs;e.setNodeMarkup(n+h,null,{...m,rowspan:m.rowspan+1}),u+=m.colspan-1}else{const h=c==null?br(r.type.schema).cell:(o=r.nodeAt(t.map[f+c*t.width]))==null?void 0:o.type,m=h?.createAndFill();m&&a.push(m)}return e.insert(s,br(r.type.schema).row.create(null,a)),e}function GG(e,t){if(!ls(e))return!1;if(t){const n=cs(e);t(oI(e.tr,n,n.top))}return!0}function WG(e,t){if(!ls(e))return!1;if(t){const n=cs(e);t(oI(e.tr,n,n.bottom))}return!0}function KG(e,{map:t,table:n,tableStart:r},i){let o=0;for(let u=0;u<i;u++)o+=n.child(u).nodeSize;const s=o+n.child(i).nodeSize,a=e.mapping.maps.length;e.delete(o+r,s+r);const c=new Set;for(let u=0,f=i*t.width;u<t.width;u++,f++){const h=t.map[f];if(!c.has(h)){if(c.add(h),i>0&&h==t.map[f-t.width]){const m=n.nodeAt(h).attrs;e.setNodeMarkup(e.mapping.slice(a).map(h+r),null,{...m,rowspan:m.rowspan-1}),u+=m.colspan-1}else if(i<t.height&&h==t.map[f+t.width]){const m=n.nodeAt(h),g=m.attrs,y=m.type.create({...g,rowspan:m.attrs.rowspan-1},m.content),E=t.positionAt(i+1,u,n);e.insert(e.mapping.slice(a).map(r+E),y),u+=g.colspan-1}}}}function QG(e,t){if(!ls(e))return!1;if(t){const n=cs(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;KG(r,n,i),i!=n.top;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=tn.get(n.table)}t(r)}return!0}function oR(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function XG({width:e,height:t,map:n},r){let i=r.top*e+r.left,o=i,s=(r.bottom-1)*e+r.left,a=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[o]==n[o-1]||r.right<e&&n[a]==n[a+1])return!0;o+=e,a+=e}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[s]==n[s+e])return!0;i++,s++}return!1}function ZG(e,t){const n=e.selection;if(!(n instanceof $t)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=cs(e),{map:i}=r;if(XG(i,r))return!1;if(t){const o=e.tr,s={};let a=Ce.empty,c,u;for(let f=r.top;f<r.bottom;f++)for(let h=r.left;h<r.right;h++){const m=i.map[f*i.width+h],g=r.table.nodeAt(m);if(!(s[m]||!g))if(s[m]=!0,c==null)c=m,u=g;else{oR(g)||(a=a.append(g.content));const y=o.mapping.map(m+r.tableStart);o.delete(y,y+g.nodeSize)}}if(c==null||u==null)return!0;if(o.setNodeMarkup(c+r.tableStart,null,{...tI(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const f=c+1+u.content.size,h=oR(u)?c+1:f;o.replaceWith(h+r.tableStart,f+r.tableStart,a)}o.setSelection(new $t(o.doc.resolve(c+r.tableStart))),t(o)}return!0}function JG(e,t){const n=br(e.schema);return eW(({node:r})=>n[r.type.spec.tableRole])(e,t)}function eW(e){return(t,n)=>{var r;const i=t.selection;let o,s;if(i instanceof $t){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,s=i.$anchorCell.pos}else{if(o=MG(i.$from),!o)return!1;s=(r=md(i.$from))==null?void 0:r.pos}if(o==null||s==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let a=o.attrs;const c=[],u=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const f=cs(t),h=t.tr;for(let g=0;g<f.right-f.left;g++)c.push(u?{...a,colwidth:u&&u[g]?[u[g]]:null}:a);let m;for(let g=f.top;g<f.bottom;g++){let y=f.map.positionAt(g,f.left,f.table);g==f.top&&(y+=o.nodeSize);for(let E=f.left,C=0;E<f.right;E++,C++)E==f.left&&g==f.top||h.insert(m=h.mapping.map(y+f.tableStart,1),e({node:o,row:g,col:E}).createAndFill(c[C]))}h.setNodeMarkup(s,e({node:o,row:f.top,col:f.left}),c[0]),i instanceof $t&&h.setSelection(new $t(h.doc.resolve(i.$anchorCell.pos),m?h.doc.resolve(m):void 0)),n(h)}return!0}}function tW(e){return function(t,n){if(!ls(t))return!1;if(n){const r=br(t.schema),i=cs(t),o=t.tr,s=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map(c=>i.table.nodeAt(c));for(let c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(o.steps.length==0)for(let c=0;c<s.length;c++)o.setNodeMarkup(i.tableStart+s[c],r.header_cell,a[c].attrs);n(o)}return!0}}function sR(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const o=t.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function BS(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?tW(e):function(n,r){if(!ls(n))return!1;if(r){const i=br(n.schema),o=cs(n),s=n.tr,a=sR("row",o,i),c=sR("column",o,i),f=(e==="column"?a:e==="row"?c:!1)?1:0,h=e=="column"?{left:0,top:f,right:1,bottom:o.map.height}:e=="row"?{left:f,top:0,right:o.map.width,bottom:1}:o,m=e=="column"?c?i.cell:i.header_cell:e=="row"?a?i.cell:i.header_cell:i.cell;o.map.cellsInRect(h).forEach(g=>{const y=g+o.tableStart,E=s.doc.nodeAt(y);E&&s.setNodeMarkup(y,m,E.attrs)}),r(s)}return!0}}BS("row",{useDeprecatedLogic:!0});BS("column",{useDeprecatedLogic:!0});BS("cell",{useDeprecatedLogic:!0});function nW(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,i=e.before();r>=0;r--){const o=e.node(-1).child(r),s=o.lastChild;if(s)return i-1-s.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),i=e.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function aR(e){return function(t,n){if(!ls(t))return!1;const r=nW(LS(t),e);if(r==null)return!1;if(n){const i=t.doc.resolve(r);n(t.tr.setSelection(Ue.between(i,OG(i))).scrollIntoView())}return!0}}function Zm(e,t){const n=e.selection;if(!(n instanceof $t))return!1;if(t){const r=e.tr,i=br(e.schema).cell.createAndFill().content;n.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new De(i,0,0))}),r.docChanged&&t(r)}return!0}function rW(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if(o=="row")for(let c=0;c<t.childCount;c++){let u=t.child(c).content;const f=c?0:Math.max(0,n-1),h=c<t.childCount-1?0:Math.max(0,r-1);(f||h)&&(u=Vw(br(s).row,new De(u,f,h)).content),a.push(u)}else if(o=="cell"||o=="header_cell")a.push(n||r?Vw(br(s).row,new De(t,n,r)).content:t);else return null;return iW(s,a)}function iW(e,t){const n=[];for(let i=0;i<t.length;i++){const o=t[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:a,colspan:c}=o.child(s).attrs;for(let u=i;u<i+a;u++)n[u]=(n[u]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(Ce.empty),n[i]<r){const o=br(e).cell.createAndFill(),s=[];for(let a=n[i];a<r;a++)s.push(o);t[i]=t[i].append(Ce.from(s))}return{height:t.length,width:r,rows:t}}function Vw(e,t){const n=e.createAndFill();return new wS(n).replace(0,n.content.size,t).doc}function oW({width:e,height:t,rows:n},r,i){if(e!=r){const o=[],s=[];for(let a=0;a<n.length;a++){const c=n[a],u=[];for(let f=o[a]||0,h=0;f<r;h++){let m=c.child(h%c.childCount);f+m.attrs.colspan>r&&(m=m.type.createChecked(cc(m.attrs,m.attrs.colspan,f+m.attrs.colspan-r),m.content)),u.push(m),f+=m.attrs.colspan;for(let g=1;g<m.attrs.rowspan;g++)o[a+g]=(o[a+g]||0)+m.attrs.colspan}s.push(Ce.from(u))}n=s,e=r}if(t!=i){const o=[];for(let s=0,a=0;s<i;s++,a++){const c=[],u=n[a%t];for(let f=0;f<u.childCount;f++){let h=u.child(f);s+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),c.push(h)}o.push(Ce.from(c))}n=o,t=i}return{width:e,height:t,rows:n}}function sW(e,t,n,r,i,o,s){const a=e.doc.type.schema,c=br(a);let u,f;if(i>t.width)for(let h=0,m=0;h<t.height;h++){const g=n.child(h);m+=g.nodeSize;const y=[];let E;g.lastChild==null||g.lastChild.type==c.cell?E=u||(u=c.cell.createAndFill()):E=f||(f=c.header_cell.createAndFill());for(let C=t.width;C<i;C++)y.push(E);e.insert(e.mapping.slice(s).map(m-1+r),y)}if(o>t.height){const h=[];for(let y=0,E=(t.height-1)*t.width;y<Math.max(t.width,i);y++){const C=y>=t.width?!1:n.nodeAt(t.map[E+y]).type==c.header_cell;h.push(C?f||(f=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const m=c.row.create(null,Ce.from(h)),g=[];for(let y=t.height;y<o;y++)g.push(m);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),g)}return!!(u||f)}function lR(e,t,n,r,i,o,s,a){if(s==0||s==t.height)return!1;let c=!1;for(let u=i;u<o;u++){const f=s*t.width+u,h=t.map[f];if(t.map[f-t.width]==h){c=!0;const m=n.nodeAt(h),{top:g,left:y}=t.findCell(h);e.setNodeMarkup(e.mapping.slice(a).map(h+r),null,{...m.attrs,rowspan:s-g}),e.insert(e.mapping.slice(a).map(t.positionAt(s,y,n)),m.type.createAndFill({...m.attrs,rowspan:g+m.attrs.rowspan-s})),u+=m.attrs.colspan-1}}return c}function cR(e,t,n,r,i,o,s,a){if(s==0||s==t.width)return!1;let c=!1;for(let u=i;u<o;u++){const f=u*t.width+s,h=t.map[f];if(t.map[f-1]==h){c=!0;const m=n.nodeAt(h),g=t.colCount(h),y=e.mapping.slice(a).map(h+r);e.setNodeMarkup(y,null,cc(m.attrs,s-g,m.attrs.colspan-(s-g))),e.insert(y+m.nodeSize,m.type.createAndFill(cc(m.attrs,0,s-g))),u+=m.attrs.rowspan-1}}return c}function uR(e,t,n,r,i){let o=n?e.doc.nodeAt(n-1):e.doc;if(!o)throw new Error("No table found");let s=tn.get(o);const{top:a,left:c}=r,u=c+i.width,f=a+i.height,h=e.tr;let m=0;function g(){if(o=n?h.doc.nodeAt(n-1):h.doc,!o)throw new Error("No table found");s=tn.get(o),m=h.mapping.maps.length}sW(h,s,o,n,u,f,m)&&g(),lR(h,s,o,n,c,u,a,m)&&g(),lR(h,s,o,n,c,u,f,m)&&g(),cR(h,s,o,n,a,f,c,m)&&g(),cR(h,s,o,n,a,f,u,m)&&g();for(let y=a;y<f;y++){const E=s.positionAt(y,c,o),C=s.positionAt(y,u,o);h.replace(h.mapping.slice(m).map(E+n),h.mapping.slice(m).map(C+n),new De(i.rows[y-a],0,0))}g(),h.setSelection(new $t(h.doc.resolve(n+s.positionAt(a,c,o)),h.doc.resolve(n+s.positionAt(f-1,u-1,o)))),t(h)}var aW=DS({ArrowLeft:Jm("horiz",-1),ArrowRight:Jm("horiz",1),ArrowUp:Jm("vert",-1),ArrowDown:Jm("vert",1),"Shift-ArrowLeft":eg("horiz",-1),"Shift-ArrowRight":eg("horiz",1),"Shift-ArrowUp":eg("vert",-1),"Shift-ArrowDown":eg("vert",1),Backspace:Zm,"Mod-Backspace":Zm,Delete:Zm,"Mod-Delete":Zm});function Hg(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Jm(e,t){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof $t)return Hg(n,r,Ze.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;const s=sI(i,e,t);if(s==null)return!1;if(e=="horiz")return Hg(n,r,Ze.near(n.doc.resolve(o.head+t),t));{const a=n.doc.resolve(s),c=eI(a,e,t);let u;return c?u=Ze.near(c,1):t<0?u=Ze.near(n.doc.resolve(a.before(-1)),-1):u=Ze.near(n.doc.resolve(a.after(-1)),1),Hg(n,r,u)}}}function eg(e,t){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let s;if(o instanceof $t)s=o;else{const c=sI(i,e,t);if(c==null)return!1;s=new $t(n.doc.resolve(c))}const a=eI(s.$headCell,e,t);return a?Hg(n,r,new $t(s.$anchorCell,a)):!1}}function lW(e,t){const n=e.state.doc,r=md(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new $t(r))),!0):!1}function cW(e,t,n){if(!ls(e.state))return!1;let r=rW(n);const i=e.state.selection;if(i instanceof $t){r||(r={width:1,height:1,rows:[Ce.from(Vw(br(e.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=tn.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=oW(r,a.right-a.left,a.bottom-a.top),uR(e.state,e.dispatch,s,a,r),!0}else if(r){const o=LS(e.state),s=o.start(-1);return uR(e.state,e.dispatch,s,tn.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function uW(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=dR(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof $t)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(i=md(e.state.selection.$anchor))!=null&&((n=Wv(e,t))==null?void 0:n.pos)!=i.pos)o(i,t),t.preventDefault();else if(!r)return;function o(c,u){let f=Wv(e,u);const h=Ha.getState(e.state)==null;if(!f||!IS(c,f))if(h)f=c;else return;const m=new $t(c,f);if(h||!e.state.selection.eq(m)){const g=e.state.tr.setSelection(m);h&&g.setMeta(Ha,c.pos),e.dispatch(g)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),Ha.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Ha,-1))}function a(c){const u=c,f=Ha.getState(e.state);let h;if(f!=null)h=e.state.doc.resolve(f);else if(dR(e,u.target)!=r&&(h=Wv(e,t),!h))return s();h&&o(h,u)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function sI(e,t,n){if(!(e.state.selection instanceof Ue))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const a=r.before(i),c=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(c)?a:null}}return null}function dR(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function Wv(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?md(e.state.doc.resolve(n.pos)):null}var aI=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),qw(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,qw(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function qw(e,t,n,r,i,o){var s;let a=0,c=!0,u=t.firstChild;const f=e.firstChild;if(f){for(let h=0,m=0;h<f.childCount;h++){const{colspan:g,colwidth:y}=f.child(h).attrs;for(let E=0;E<g;E++,m++){const C=i==m?o:y&&y[E],S=C?C+"px":"";if(a+=C||r,C||(c=!1),u)u.style.width!=S&&(u.style.width=S),u=u.nextSibling;else{const N=document.createElement("col");N.style.width=S,t.appendChild(N)}}}for(;u;){const h=u.nextSibling;(s=u.parentNode)==null||s.removeChild(u),u=h}c?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var fi=new pt("tableColumnResizing");function dW({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=aI,lastColumnResizable:i=!0}={}){const o=new nt({key:fi,state:{init(s,a){var c,u;const f=(u=(c=o.spec)==null?void 0:c.props)==null?void 0:u.nodeViews,h=br(a.schema).table.name;return r&&f&&(f[h]=(m,g)=>new r(m,n,g)),new fW(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=fi.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{hW(s,a,e,i)},mouseleave:s=>{pW(s)},mousedown:(s,a)=>{mW(s,a,t,n)}},decorations:s=>{const a=fi.getState(s);if(a&&a.activeHandle>-1)return vW(s,a.activeHandle)},nodeViews:{}}});return o}var fW=class Ug{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(fi);if(r&&r.setHandle!=null)return new Ug(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Ug(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let i=t.mapping.map(n.activeHandle,-1);return $w(t.doc.resolve(i))||(i=-1),new Ug(i,n.dragging)}return n}};function hW(e,t,n,r){if(!e.editable)return;const i=fi.getState(e.state);if(i&&!i.dragging){const o=bW(t.target);let s=-1;if(o){const{left:a,right:c}=o.getBoundingClientRect();t.clientX-a<=n?s=fR(e,t,"left",n):c-t.clientX<=n&&(s=fR(e,t,"right",n))}if(s!=i.activeHandle){if(!r&&s!==-1){const a=e.state.doc.resolve(s),c=a.node(-1),u=tn.get(c),f=a.start(-1);if(u.colCount(a.pos-f)+a.nodeAfter.attrs.colspan-1==u.width-1)return}lI(e,s)}}}function pW(e){if(!e.editable)return;const t=fi.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&lI(e,-1)}function mW(e,t,n,r){var i;if(!e.editable)return!1;const o=(i=e.dom.ownerDocument.defaultView)!=null?i:window,s=fi.getState(e.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=e.state.doc.nodeAt(s.activeHandle),c=gW(e,s.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(fi,{setDragging:{startX:t.clientX,startWidth:c}}));function u(h){o.removeEventListener("mouseup",u),o.removeEventListener("mousemove",f);const m=fi.getState(e.state);m?.dragging&&(yW(e,m.activeHandle,hR(m.dragging,h,n)),e.dispatch(e.state.tr.setMeta(fi,{setDragging:null})))}function f(h){if(!h.which)return u(h);const m=fi.getState(e.state);if(m&&m.dragging){const g=hR(m.dragging,h,n);pR(e,m.activeHandle,g,r)}}return pR(e,s.activeHandle,c,r),o.addEventListener("mouseup",u),o.addEventListener("mousemove",f),t.preventDefault(),!0}function gW(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=e.domAtPos(t);let a=o.node.childNodes[o.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(a-=r[u],c--);return a/c}function bW(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function fR(e,t,n,r){const i=n=="right"?-r:r,o=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!o)return-1;const{pos:s}=o,a=md(e.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const c=tn.get(a.node(-1)),u=a.start(-1),f=c.map.indexOf(a.pos-u);return f%c.width==0?-1:u+c.map[f-1]}function hR(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function lI(e,t){e.dispatch(e.state.tr.setMeta(fi,{setHandle:t}))}function yW(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),o=tn.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=e.state.tr;for(let u=0;u<o.height;u++){const f=u*o.width+a;if(u&&o.map[f]==o.map[f-o.width])continue;const h=o.map[f],m=i.nodeAt(h).attrs,g=m.colspan==1?0:a-o.colCount(h);if(m.colwidth&&m.colwidth[g]==n)continue;const y=m.colwidth?m.colwidth.slice():EW(m.colspan);y[g]=n,c.setNodeMarkup(s+h,null,{...m,colwidth:y})}c.docChanged&&e.dispatch(c)}function pR(e,t,n,r){const i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=tn.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let c=e.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&qw(o,c.firstChild,c,r,a,n)}function EW(e){return Array(e).fill(0)}function vW(e,t){var n;const r=[],i=e.doc.resolve(t),o=i.node(-1);if(!o)return ct.empty;const s=tn.get(o),a=i.start(-1),c=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<s.height;u++){const f=c+u*s.width;if((c==s.width-1||s.map[f]!=s.map[f+1])&&(u==0||s.map[f]!=s.map[f-s.width])){const h=s.map[f],m=a+h+o.nodeAt(h).nodeSize-1,g=document.createElement("div");g.className="column-resize-handle",(n=fi.getState(e))!=null&&n.dragging&&r.push(It.node(a+h,a+h+o.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(It.widget(m,g))}}return ct.create(e.doc,r)}function CW({allowTableNodeSelection:e=!1}={}){return new nt({key:Ha,state:{init(){return null},apply(t,n){const r=t.getMeta(Ha);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:i,pos:o}=t.mapping.mapResult(n);return i?null:o}},props:{decorations:IG,handleDOMEvents:{mousedown:uW},createSelectionBetween(t){return Ha.getState(t.state)!=null?t.state.selection:null},handleTripleClick:lW,handleKeyDown:aW,handlePaste:cW},appendTransaction(t,n,r){return HG(r,FG(r,n),e)}})}const PS=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function cI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const uI=(e,t,n)=>{let r=cI(e,n);if(!r)return!1;let i=HS(r);if(!i){let s=r.blockRange(),a=s&&pd(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(EI(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Zu(o,"end")||qe.isSelectable(o)))for(let s=r.depth;;s--){let a=q1(e.doc,r.before(s),r.after(s),De.empty);if(a&&a.slice.size<a.to-a.from){if(t){let c=e.tr.step(a);c.setSelection(Zu(o,"end")?Ze.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):qe.create(c.doc,i.pos-o.nodeSize)),t(c.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},wW=(e,t,n)=>{let r=cI(e,n);if(!r)return!1;let i=HS(r);return i?dI(e,i,t):!1},SW=(e,t,n)=>{let r=hI(e,n);if(!r)return!1;let i=US(r);return i?dI(e,i,t):!1};function dI(e,t,n){let r=t.nodeBefore,i=r,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let s=t.nodeAfter,a=s,c=t.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let f=a.firstChild;if(!f)return!1;a=f}let u=q1(e.doc,o,c,De.empty);if(!u||u.from!=o||u instanceof Pn&&u.slice.size>=c-o)return!1;if(n){let f=e.tr.step(u);f.setSelection(Ue.create(f.doc,o)),n(f.scrollIntoView())}return!0}function Zu(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const fI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=HS(r)}let s=o&&o.nodeBefore;return!s||!qe.isSelectable(s)?!1:(t&&t(e.tr.setSelection(qe.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function HS(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function hI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const pI=(e,t,n)=>{let r=hI(e,n);if(!r)return!1;let i=US(r);if(!i)return!1;let o=i.nodeAfter;if(EI(e,i,t,1))return!0;if(r.parent.content.size==0&&(Zu(o,"start")||qe.isSelectable(o))){let s=q1(e.doc,r.before(),r.after(),De.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(Zu(o,"start")?Ze.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):qe.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},mI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=US(r)}let s=o&&o.nodeAfter;return!s||!qe.isSelectable(s)?!1:(t&&t(e.tr.setSelection(qe.create(e.doc,o.pos)).scrollIntoView()),!0)};function US(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const TW=(e,t)=>{let n=e.selection,r=n instanceof qe,i;if(r){if(n.node.isTextblock||!Sc(e.doc,n.from))return!1;i=n.from}else if(i=V1(e.doc,n.from,-1),i==null)return!1;if(t){let o=e.tr.join(i);r&&o.setSelection(qe.create(o.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},xW=(e,t)=>{let n=e.selection,r;if(n instanceof qe){if(n.node.isTextblock||!Sc(e.doc,n.to))return!1;r=n.to}else if(r=V1(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},kW=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&pd(i);return o==null?!1:(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},gI=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function FS(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const _W=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=FS(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let a=n.after(),c=e.tr.replaceWith(a,a,s.createAndFill());c.setSelection(Ze.near(c.doc.resolve(a),1)),t(c.scrollIntoView())}return!0},bI=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Wr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=FS(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(Ue.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},yI=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if($s(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&pd(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function AW(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof qe&&t.selection.node.isBlock)return!r.parentOffset||!$s(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,a,c=!1,u=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){c=r.end(g)==r.pos+(r.depth-g),u=r.start(g)==r.pos-(r.depth-g),a=FS(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),o.unshift(c&&a?{type:a}:null),s=g;break}else{if(g==1)return!1;o.unshift(null)}let f=t.tr;(t.selection instanceof Ue||t.selection instanceof Wr)&&f.deleteSelection();let h=f.mapping.map(r.pos),m=$s(f.doc,h,o.length,o);if(m||(o[0]=a?{type:a}:null,m=$s(f.doc,h,o.length,o)),!m)return!1;if(f.split(h,o.length,o),!c&&u&&r.node(s).type!=a){let g=f.mapping.map(r.before(s)),y=f.doc.resolve(g);a&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,a)&&f.setNodeMarkup(f.mapping.map(r.before(s)),a)}return n&&n(f.scrollIntoView()),!0}}const NW=AW(),MW=(e,t)=>{let{$from:n,to:r}=e.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),t&&t(e.tr.setSelection(qe.create(e.doc,i))),!0)};function RW(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Sc(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function EI(e,t,n,r){let i=t.nodeBefore,o=t.nodeAfter,s,a,c=i.type.spec.isolating||o.type.spec.isolating;if(!c&&RW(e,t,n))return!0;let u=!c&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let g=t.pos+o.nodeSize,y=Ce.empty;for(let S=s.length-1;S>=0;S--)y=Ce.from(s[S].create(null,y));y=Ce.from(i.copy(y));let E=e.tr.step(new Nn(t.pos-1,g,t.pos,g,new De(y,1,0),s.length,!0)),C=E.doc.resolve(g+2*s.length);C.nodeAfter&&C.nodeAfter.type==i.type&&Sc(E.doc,C.pos)&&E.join(C.pos),n(E.scrollIntoView())}return!0}let f=o.type.spec.isolating||r>0&&c?null:Ze.findFrom(t,1),h=f&&f.$from.blockRange(f.$to),m=h&&pd(h);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(h,m).scrollIntoView()),!0;if(u&&Zu(o,"start",!0)&&Zu(i,"end")){let g=i,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let E=o,C=1;for(;!E.isTextblock;E=E.firstChild)C++;if(g.canReplace(g.childCount,g.childCount,E.content)){if(n){let S=Ce.empty;for(let _=y.length-1;_>=0;_--)S=Ce.from(y[_].copy(S));let N=e.tr.step(new Nn(t.pos-y.length,t.pos+o.nodeSize,t.pos+C,t.pos+o.nodeSize-C,new De(S,y.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function vI(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(t.tr.setSelection(Ue.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}const OW=vI(-1),DW=vI(1);function LW(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&lL(s,e,t);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function mR(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)i=!0;else{let f=n.doc.resolve(u),h=f.index();i=f.parent.canReplaceWith(h,h+1,e)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[s];o.setBlockType(a,c,e,t)}r(o.scrollIntoView())}return!0}}function jS(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}jS(PS,uI,fI);jS(PS,pI,mI);jS(gI,bI,yI,NW);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function IW(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return BW(a,s,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function BW(e,t,n,r=null){let i=!1,o=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=s.resolve(t.start-2);o=new d0(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new d0(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=lL(o,n,r,t);return a?(e&&PW(e,t,a,i,n),!0):!1}function PW(e,t,n,r,i){let o=Ce.empty;for(let f=n.length-1;f>=0;f--)o=Ce.from(n[f].type.create(n[f].attrs,o));e.step(new Nn(t.start-(r?2:0),t.end,t.start,t.end,new De(o,0,0),n.length,!0));let s=0;for(let f=0;f<n.length;f++)n[f].type==i&&(s=f+1);let a=n.length-s,c=t.start+n.length-(r?2:0),u=t.parent;for(let f=t.startIndex,h=t.endIndex,m=!0;f<h;f++,m=!1)!m&&$s(e.doc,c,a)&&(e.split(c,a),c+=2*a),c+=u.child(f).nodeSize;return e}function HW(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?UW(t,n,e,o):FW(t,n,o):!0:!1}}function UW(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Nn(o-1,s,o,s,new De(Ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new d0(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=pd(r);if(a==null)return!1;i.lift(r,a);let c=i.doc.resolve(i.mapping.map(o,-1)-1);return Sc(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),t(i.scrollIntoView()),!0}function FW(e,t,n){let r=e.tr,i=n.parent;for(let g=n.end,y=n.endIndex-1,E=n.startIndex;y>E;y--)g-=i.child(y).nodeSize,r.delete(g-1,g+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,c=n.endIndex==i.childCount,u=o.node(-1),f=o.index(-1);if(!u.canReplace(f+(a?0:1),f+1,s.content.append(c?Ce.empty:Ce.from(i))))return!1;let h=o.pos,m=h+s.nodeSize;return r.step(new Nn(h-(a?1:0),m+(c?1:0),h+1,m-1,new De((a?Ce.empty:Ce.from(i.copy(Ce.empty))).append(c?Ce.empty:Ce.from(i.copy(Ce.empty))),a?0:1,c?0:1),a?0:1)),t(r.scrollIntoView()),!0}function jW(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,c=a.child(s-1);if(c.type!=e)return!1;if(n){let u=c.lastChild&&c.lastChild.type==a.type,f=Ce.from(u?e.create():null),h=new De(Ce.from(e.create(null,Ce.from(a.type.create(null,f)))),u?3:1,0),m=o.start,g=o.end;n(t.tr.step(new Nn(m-(u?3:1),g,m,g,h,1,!0)).scrollIntoView())}return!0}}var zW=Object.defineProperty,zS=(e,t)=>{for(var n in t)zW(e,n,{get:t[n],enumerable:!0})};function Q1(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var X1=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([s,a])=>[s,(...u)=>{const f=a(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!e,c=e||i.tr,u=()=>(!a&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),s.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(n).map(([h,m])=>[h,(...y)=>{const E=this.buildProps(c,t),C=m(...y)(E);return s.push(C),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:e,editor:r,view:o,state:Q1({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)(s)]))}};return s}},CI={};zS(CI,{blur:()=>$W,clearContent:()=>VW,clearNodes:()=>qW,command:()=>YW,createParagraphNear:()=>GW,cut:()=>WW,deleteCurrentNode:()=>KW,deleteNode:()=>QW,deleteRange:()=>XW,deleteSelection:()=>ZW,enter:()=>JW,exitCode:()=>eK,extendMarkRange:()=>tK,first:()=>nK,focus:()=>iK,forEach:()=>oK,insertContent:()=>sK,insertContentAt:()=>lK,joinBackward:()=>dK,joinDown:()=>uK,joinForward:()=>fK,joinItemBackward:()=>hK,joinItemForward:()=>pK,joinTextblockBackward:()=>mK,joinTextblockForward:()=>gK,joinUp:()=>cK,keyboardShortcut:()=>yK,lift:()=>EK,liftEmptyBlock:()=>vK,liftListItem:()=>CK,newlineInCode:()=>wK,resetAttributes:()=>SK,scrollIntoView:()=>TK,selectAll:()=>xK,selectNodeBackward:()=>kK,selectNodeForward:()=>_K,selectParentNode:()=>AK,selectTextblockEnd:()=>NK,selectTextblockStart:()=>MK,setContent:()=>RK,setMark:()=>qK,setMeta:()=>YK,setNode:()=>GK,setNodeSelection:()=>WK,setTextSelection:()=>KK,sinkListItem:()=>QK,splitBlock:()=>XK,splitListItem:()=>ZK,toggleList:()=>JK,toggleMark:()=>eQ,toggleNode:()=>tQ,toggleWrap:()=>nQ,undoInputRule:()=>rQ,unsetAllMarks:()=>iQ,unsetMark:()=>oQ,updateAttributes:()=>sQ,wrapIn:()=>aQ,wrapInList:()=>lQ});var $W=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),VW=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),qW=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{e.doc.nodesBetween(o.pos,s.pos,(a,c)=>{if(a.type.isText)return;const{doc:u,mapping:f}=t,h=u.resolve(f.map(c)),m=u.resolve(f.map(c+a.nodeSize)),g=h.blockRange(m);if(!g)return;const y=pd(g);if(a.type.isTextblock){const{defaultType:E}=h.parent.contentMatchAt(h.index());t.setNodeMarkup(g.start,E)}(y||y===0)&&t.lift(g,y)})}),!0},YW=e=>t=>e(t),GW=()=>({state:e,dispatch:t})=>bI(e,t),WW=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const s=r.mapping.map(t);return r.insert(s,o.content),r.setSelection(new Ue(r.doc.resolve(Math.max(s-1,0)))),!0},KW=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(t){const a=i.before(o),c=i.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1};function Zn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var QW=e=>({tr:t,state:n,dispatch:r})=>{const i=Zn(e,n.schema),o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const c=o.before(s),u=o.after(s);t.delete(c,u).scrollIntoView()}return!0}return!1},XW=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},ZW=()=>({state:e,dispatch:t})=>PS(e,t),JW=()=>({commands:e})=>e.keyboardShortcut("Enter"),eK=()=>({state:e,dispatch:t})=>_W(e,t);function $S(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function E0(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:$S(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function wI(e,t,n={}){return e.find(r=>r.type===t&&E0(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function gR(e,t,n={}){return!!wI(e,t,n)}function kh(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!wI([...i.node.marks],t,n)))return;let s=i.index,a=e.start()+i.offset,c=s+1,u=a+i.node.nodeSize;for(;s>0&&gR([...e.parent.child(s-1).marks],t,n);)s-=1,a-=e.parent.child(s).nodeSize;for(;c<e.parent.childCount&&gR([...e.parent.child(c).marks],t,n);)u+=e.parent.child(c).nodeSize,c+=1;return{from:a,to:u}}function Zs(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var tK=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const o=Zs(e,r.schema),{doc:s,selection:a}=n,{$from:c,from:u,to:f}=a;if(i){const h=kh(c,o,t);if(h&&h.from<=u&&h.to>=f){const m=Ue.create(s,h.from,h.to);n.setSelection(m)}}return!0},nK=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function VS(e){return e instanceof Ue}function Hs(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function SI(e,t=null){if(!t)return null;const n=Ze.atStart(e),r=Ze.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,o=r.to;return t==="all"?Ue.create(e,Hs(0,i,o),Hs(e.content.size,i,o)):Ue.create(e,Hs(t,i,o),Hs(t,i,o))}function rK(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function qS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var iK=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const s=()=>{(qS()||rK())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!VS(n.state.selection))return s(),!0;const a=SI(i.doc,e)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},oK=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),sK=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),TI=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&TI(r)}return e};function tg(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return TI(n)}function _h(e,t,n){if(e instanceof Wa||e instanceof Ce)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Ce.fromArray(e.map(a=>t.nodeFromJSON(a)));const s=t.nodeFromJSON(e);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),_h("",t,n)}if(i){if(n.errorOnInvalidContent){let s=!1,a="";const c=new eL({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?co.fromSchema(c).parseSlice(tg(e),n.parseOptions):co.fromSchema(c).parse(tg(e),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=co.fromSchema(t);return n.slice?o.parseSlice(tg(e),n.parseOptions).content:o.parse(tg(e),n.parseOptions)}return _h("",t,n)}function xI(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Pn||i instanceof Nn))return;const o=e.mapping.maps[r];let s=0;o.forEach((a,c,u,f)=>{s===0&&(s=f)}),e.setSelection(Ze.near(e.doc.resolve(s),n))}var aK=e=>!("type"in e),lK=(e,t,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const c=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{_h(t,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(C){c(C)}try{a=_h(t,o.schema,{parseOptions:u,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:o.options.enableContentCheck})}catch(C){return c(C),!1}let{from:f,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if((aK(a)?a:[a]).forEach(C=>{C.check(),m=m?C.isText&&C.marks.length===0:!1,g=g?C.isBlock:!1}),f===h&&g){const{parent:C}=r.doc.resolve(f);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(f-=1,h+=1)}let E;if(m){if(Array.isArray(t))E=t.map(C=>C.text||"").join("");else if(t instanceof Ce){let C="";t.forEach(S=>{S.text&&(C+=S.text)}),E=C}else typeof t=="object"&&t&&t.text?E=t.text:E=t;r.insertText(E,f,h)}else{E=a;const C=r.doc.resolve(f),S=C.node(),N=C.parentOffset===0,_=S.isText||S.isTextblock,O=S.content.size>0;N&&_&&O&&(f=Math.max(0,f-1)),r.replaceWith(f,h,E)}n.updateSelection&&xI(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:E}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:E})}return!0},cK=()=>({state:e,dispatch:t})=>TW(e,t),uK=()=>({state:e,dispatch:t})=>xW(e,t),dK=()=>({state:e,dispatch:t})=>uI(e,t),fK=()=>({state:e,dispatch:t})=>pI(e,t),hK=()=>({state:e,dispatch:t,tr:n})=>{try{const r=V1(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},pK=()=>({state:e,dispatch:t,tr:n})=>{try{const r=V1(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},mK=()=>({state:e,dispatch:t})=>wW(e,t),gK=()=>({state:e,dispatch:t})=>SW(e,t);function kI(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function bK(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<t.length-1;a+=1){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))qS()||kI()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var yK=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const o=bK(e).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return c?.steps.forEach(u=>{const f=u.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function Ah(e,t,n={}){const{from:r,to:i,empty:o}=e.selection,s=t?Zn(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(h,m)=>{if(h.isText)return;const g=Math.max(r,m),y=Math.min(i,m+h.nodeSize);a.push({node:h,from:g,to:y})});const c=i-r,u=a.filter(h=>s?s.name===h.node.type.name:!0).filter(h=>E0(h.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((h,m)=>h+m.to-m.from,0)>=c}var EK=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return Ah(n,i,t)?kW(n,r):!1},vK=()=>({state:e,dispatch:t})=>yI(e,t),CK=e=>({state:t,dispatch:n})=>{const r=Zn(e,t.schema);return HW(r)(t,n)},wK=()=>({state:e,dispatch:t})=>gI(e,t);function Z1(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function bR(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var SK=(e,t)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Z1(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=Zn(e,r.schema)),a==="mark"&&(s=Zs(e,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{o&&o===u.type&&n.setNodeMarkup(f,void 0,bR(u.attrs,t)),s&&u.marks.length&&u.marks.forEach(h=>{s===h.type&&n.addMark(f,f+u.nodeSize,s.create(bR(h.attrs,t)))})})}),!0):!1},TK=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),xK=()=>({tr:e,dispatch:t})=>{if(t){const n=new Wr(e.doc);e.setSelection(n)}return!0},kK=()=>({state:e,dispatch:t})=>fI(e,t),_K=()=>({state:e,dispatch:t})=>mI(e,t),AK=()=>({state:e,dispatch:t})=>MW(e,t),NK=()=>({state:e,dispatch:t})=>DW(e,t),MK=()=>({state:e,dispatch:t})=>OW(e,t);function v0(e,t,n={},r={}){return _h(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var RK=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{const{doc:c}=o;if(r.preserveWhitespace!=="full"){const u=v0(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!n),!0}return s&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:c.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function _I(e,t){const n=Zs(t,e.schema),{from:r,to:i,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,c=>{s.push(...c.marks)});const a=s.find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function J1(e,t){const n=new wS(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function OK(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function yR(e,t){const n=[];return e.descendants((r,i)=>{t(r)&&n.push({node:r,pos:i})}),n}function AI(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function DK(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function eb(e){return t=>DK(t.$from,e)}function Ge(e,t,n){return e.config[t]===void 0&&e.parent?Ge(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Ge(e.parent,t,n):null}):e.config[t]}function YS(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Ge(t,"addExtensions",n);return r?[t,...YS(r())]:t}).flat(10)}function GS(e,t){const n=yi.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function NI(e){return typeof e=="function"}function Kt(e,t=void 0,...n){return NI(e)?t?e.bind(t)(...n):e(...n):e}function LK(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Nh(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function MI(e){const t=[],{nodeExtensions:n,markExtensions:r}=Nh(e),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},c=Ge(s,"addGlobalAttributes",a);if(!c)return;c().forEach(f=>{f.types.forEach(h=>{Object.entries(f.attributes).forEach(([m,g])=>{t.push({type:h,name:m,attribute:{...o,...g}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},c=Ge(s,"addAttributes",a);if(!c)return;const u=c();Object.entries(u).forEach(([f,h])=>{const m={...o,...h};typeof m?.default=="function"&&(m.default=m.default()),m?.isRequired&&m?.default===void 0&&delete m.default,t.push({type:s.name,name:f,attribute:m})})}),t}function Ei(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],c=r[i]?r[i].split(" "):[],u=a.filter(f=>!c.includes(f));r[i]=[...c,...u].join(" ")}else if(i==="style"){const a=o?o.split(";").map(f=>f.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;c.forEach(f=>{const[h,m]=f.split(":").map(g=>g.trim());u.set(h,m)}),a.forEach(f=>{const[h,m]=f.split(":").map(g=>g.trim());u.set(h,m)}),r[i]=Array.from(u.entries()).map(([f,h])=>`${f}: ${h}`).join("; ")}else r[i]=o}),r},{})}function C0(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Ei(n,r),{})}function IK(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function ER(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):IK(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function vR(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&LK(n)?!1:n!=null))}function RI(e,t){var n;const r=MI(e),{nodeExtensions:i,markExtensions:o}=Nh(e),s=(n=i.find(u=>Ge(u,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(u=>{const f=r.filter(S=>S.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:t},m=e.reduce((S,N)=>{const _=Ge(N,"extendNodeSchema",h);return{...S,..._?_(u):{}}},{}),g=vR({...m,content:Kt(Ge(u,"content",h)),marks:Kt(Ge(u,"marks",h)),group:Kt(Ge(u,"group",h)),inline:Kt(Ge(u,"inline",h)),atom:Kt(Ge(u,"atom",h)),selectable:Kt(Ge(u,"selectable",h)),draggable:Kt(Ge(u,"draggable",h)),code:Kt(Ge(u,"code",h)),whitespace:Kt(Ge(u,"whitespace",h)),linebreakReplacement:Kt(Ge(u,"linebreakReplacement",h)),defining:Kt(Ge(u,"defining",h)),isolating:Kt(Ge(u,"isolating",h)),attrs:Object.fromEntries(f.map(S=>{var N,_;return[S.name,{default:(N=S?.attribute)==null?void 0:N.default,validate:(_=S?.attribute)==null?void 0:_.validate}]}))}),y=Kt(Ge(u,"parseHTML",h));y&&(g.parseDOM=y.map(S=>ER(S,f)));const E=Ge(u,"renderHTML",h);E&&(g.toDOM=S=>E({node:S,HTMLAttributes:C0(S,f)}));const C=Ge(u,"renderText",h);return C&&(g.toText=C),[u.name,g]})),c=Object.fromEntries(o.map(u=>{const f=r.filter(C=>C.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:t},m=e.reduce((C,S)=>{const N=Ge(S,"extendMarkSchema",h);return{...C,...N?N(u):{}}},{}),g=vR({...m,inclusive:Kt(Ge(u,"inclusive",h)),excludes:Kt(Ge(u,"excludes",h)),group:Kt(Ge(u,"group",h)),spanning:Kt(Ge(u,"spanning",h)),code:Kt(Ge(u,"code",h)),attrs:Object.fromEntries(f.map(C=>{var S,N;return[C.name,{default:(S=C?.attribute)==null?void 0:S.default,validate:(N=C?.attribute)==null?void 0:N.validate}]}))}),y=Kt(Ge(u,"parseHTML",h));y&&(g.parseDOM=y.map(C=>ER(C,f)));const E=Ge(u,"renderHTML",h);return E&&(g.toDOM=C=>E({mark:C,HTMLAttributes:C0(C,f)})),[u.name,g]}));return new eL({topNode:s,nodes:a,marks:c})}function BK(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function WS(e){return e.sort((n,r)=>{const i=Ge(n,"priority")||100,o=Ge(r,"priority")||100;return i>o?-1:i<o?1:0})}function KS(e){const t=WS(YS(e)),n=BK(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function PK(e,t){const n=KS(e);return RI(n,t)}function OI(e,t,n){const{from:r,to:i}=t,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return e.nodesBetween(r,i,(c,u,f,h)=>{var m;c.isBlock&&u>r&&(a+=o);const g=s?.[c.type.name];if(g)return f&&(a+=g({node:c,pos:u,parent:f,index:h,range:t})),!1;c.isText&&(a+=(m=c?.text)==null?void 0:m.slice(Math.max(r,u)-u,i-u))}),a}function HK(e,t){const n={from:0,to:e.content.size};return OI(e,n,t)}function DI(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function UK(e,t){const n=Zn(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function LI(e,t){const n=Z1(typeof t=="string"?t:t.name,e.schema);return n==="node"?UK(e,t):n==="mark"?_I(e,t):{}}function FK(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function jK(e){const t=FK(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function QS(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,c)=>{s.push({from:a,to:c})});else{const{from:a,to:c}=n[o];if(a===void 0||c===void 0)return;s.push({from:a,to:c})}s.forEach(({from:a,to:c})=>{const u=t.slice(o).map(a,-1),f=t.slice(o).map(c),h=t.invert().map(u,-1),m=t.invert().map(f);r.push({oldRange:{from:h,to:m},newRange:{from:u,to:f}})})}),jK(r)}function XS(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const o=n.resolve(e),s=kh(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(e,t,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function Kv(e,t){return t.nodes[e]||t.marks[e]||null}function Fg(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(o=>o.type===t&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var zK=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,o,s,a)=>{var c,u;const f=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,r-o))}),n};function Yw(e,t,n={}){const{empty:r,ranges:i}=e.selection,o=t?Zs(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(h=>o?o.name===h.type.name:!0).find(h=>E0(h.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:h,$to:m})=>{const g=h.pos,y=m.pos;e.doc.nodesBetween(g,y,(E,C)=>{if(!E.isText&&!E.marks.length)return;const S=Math.max(g,C),N=Math.min(y,C+E.nodeSize),_=N-S;s+=_,a.push(...E.marks.map(O=>({mark:O,from:S,to:N})))})}),s===0)return!1;const c=a.filter(h=>o?o.name===h.mark.type.name:!0).filter(h=>E0(h.mark.attrs,n,{strict:!1})).reduce((h,m)=>h+m.to-m.from,0),u=a.filter(h=>o?h.mark.type!==o&&h.mark.type.excludes(o):!0).reduce((h,m)=>h+m.to-m.from,0);return(c>0?c+u:c)>=s}function $K(e,t,n={}){if(!t)return Ah(e,null,n)||Yw(e,null,n);const r=Z1(t,e.schema);return r==="node"?Ah(e,t,n):r==="mark"?Yw(e,t,n):!1}function CR(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function wR(e,t){const{nodeExtensions:n}=Nh(t),r=n.find(s=>s.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Kt(Ge(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function tb(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(o=>{i!==!1&&(tb(o,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function w0(e){return e instanceof qe}function S0(e,t,n){const i=e.state.doc.content.size,o=Hs(t,0,i),s=Hs(n,0,i),a=e.coordsAtPos(o),c=e.coordsAtPos(s,-1),u=Math.min(a.top,c.top),f=Math.max(a.bottom,c.bottom),h=Math.min(a.left,c.left),m=Math.max(a.right,c.right),g=m-h,y=f-u,S={top:u,bottom:f,left:h,right:m,width:g,height:y,x:h,y:u};return{...S,toJSON:()=>S}}function VK(e,t,n){var r;const{selection:i}=t;let o=null;if(VS(i)&&(o=i.$cursor),o){const a=(r=e.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(u=>u.type.excludes(n)))}const{ranges:s}=i;return s.some(({$from:a,$to:c})=>{let u=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,c.pos,(f,h,m)=>{if(u)return!1;if(f.isInline){const g=!m||m.type.allowsMarkType(n),y=!!n.isInSet(f.marks)||!f.marks.some(E=>E.type.excludes(n));u=g&&y}return!u}),u})}var qK=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,c=Zs(e,r.schema);if(i)if(s){const u=_I(r,c);n.addStoredMark(c.create({...u,...t}))}else a.forEach(u=>{const f=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(f,h,(m,g)=>{const y=Math.max(g,f),E=Math.min(g+m.nodeSize,h);m.marks.find(S=>S.type===c)?m.marks.forEach(S=>{c===S.type&&n.addMark(y,E,c.create({...S.attrs,...t}))}):n.addMark(y,E,c.create(t))})});return VK(r,n,c)},YK=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),GK=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const o=Zn(e,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>mR(o,{...s,...t})(n)?!0:a.clearNodes()).command(({state:a})=>mR(o,{...s,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},WK=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Hs(e,0,r.content.size),o=qe.create(r,i);t.setSelection(o)}return!0},KK=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:o}=typeof e=="number"?{from:e,to:e}:e,s=Ue.atStart(r).from,a=Ue.atEnd(r).to,c=Hs(i,s,a),u=Hs(o,s,a),f=Ue.create(r,c,u);t.setSelection(f)}return!0},QK=e=>({state:t,dispatch:n})=>{const r=Zn(e,t.schema);return jW(r)(t,n)};function SR(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var XK=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=t,{$from:a,$to:c}=o,u=i.extensionManager.attributes,f=Fg(u,a.node().type.name,a.node().attrs);if(o instanceof qe&&o.node.isBlock)return!a.parentOffset||!$s(s,a.pos)?!1:(r&&(e&&SR(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=c.parentOffset===c.parent.content.size,m=a.depth===0?void 0:OK(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=h&&m?[{type:m,attrs:f}]:void 0,y=$s(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!y&&$s(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(y=!0,g=m?[{type:m,attrs:f}]:void 0),r){if(y&&(o instanceof Ue&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!h&&!a.parentOffset&&a.parent.type!==m)){const E=t.mapping.map(a.before()),C=t.doc.resolve(E);a.node(-1).canReplaceWith(C.index(),C.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&SR(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return y},ZK=(e,t={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const a=Zn(e,r.schema),{$from:c,$to:u}=r.selection,f=r.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==a)return!1;const m=o.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let S=Ce.empty;const N=c.index(-1)?1:c.index(-2)?2:3;for(let F=c.depth-N;F>=c.depth-3;F-=1)S=Ce.from(c.node(F).copy(S));const _=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,O={...Fg(m,c.node().type.name,c.node().attrs),...t},M=((s=a.contentMatch.defaultType)==null?void 0:s.createAndFill(O))||void 0;S=S.append(Ce.from(a.createAndFill(null,M)||void 0));const R=c.before(c.depth-(N-1));n.replace(R,c.after(-_),new De(S,4-N,0));let L=-1;n.doc.nodesBetween(R,n.doc.content.size,(F,z)=>{if(L>-1)return!1;F.isTextblock&&F.content.size===0&&(L=z+1)}),L>-1&&n.setSelection(Ue.near(n.doc.resolve(L))),n.scrollIntoView()}return!0}const g=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,y={...Fg(m,h.type.name,h.attrs),...t},E={...Fg(m,c.node().type.name,c.node().attrs),...t};n.delete(c.pos,u.pos);const C=g?[{type:a,attrs:y},{type:g,attrs:E}]:[{type:a,attrs:y}];if(!$s(n.doc,c.pos,2))return!1;if(i){const{selection:S,storedMarks:N}=r,{splittableMarks:_}=o.extensionManager,O=N||S.$to.parentOffset&&S.$from.marks();if(n.split(c.pos,2,C).scrollIntoView(),!O||!i)return!0;const M=O.filter(R=>_.includes(R.type.name));n.ensureMarks(M)}return!0},Qv=(e,t)=>{const n=eb(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Sc(e.doc,n.pos)&&e.join(n.pos),!0},Xv=(e,t)=>{const n=eb(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Sc(e.doc,r)&&e.join(r),!0},JK=(e,t,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:c,commands:u,can:f})=>{const{extensions:h,splittableMarks:m}=i.extensionManager,g=Zn(e,s.schema),y=Zn(t,s.schema),{selection:E,storedMarks:C}=s,{$from:S,$to:N}=E,_=S.blockRange(N),O=C||E.$to.parentOffset&&E.$from.marks();if(!_)return!1;const M=eb(R=>wR(R.type.name,h))(E);if(_.depth>=1&&M&&_.depth-M.depth<=1){if(M.node.type===g)return u.liftListItem(y);if(wR(M.node.type.name,h)&&g.validContent(M.node.content)&&a)return c().command(()=>(o.setNodeMarkup(M.pos,g),!0)).command(()=>Qv(o,g)).command(()=>Xv(o,g)).run()}return!n||!O||!a?c().command(()=>f().wrapInList(g,r)?!0:u.clearNodes()).wrapInList(g,r).command(()=>Qv(o,g)).command(()=>Xv(o,g)).run():c().command(()=>{const R=f().wrapInList(g,r),L=O.filter(F=>m.includes(F.type.name));return o.ensureMarks(L),R?!0:u.clearNodes()}).wrapInList(g,r).command(()=>Qv(o,g)).command(()=>Xv(o,g)).run()},eQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Zs(e,r.schema);return Yw(r,s,t)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,t)},tQ=(e,t,n={})=>({state:r,commands:i})=>{const o=Zn(e,r.schema),s=Zn(t,r.schema),a=Ah(r,o,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a?i.setNode(s,c):i.setNode(o,{...c,...n})},nQ=(e,t={})=>({state:n,commands:r})=>{const i=Zn(e,n.schema);return Ah(n,i,t)?r.lift(i):r.wrapIn(i,t)},rQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){const s=e.tr,a=o.transform;for(let c=a.steps.length-1;c>=0;c-=1)s.step(a.steps[c].invert(a.docs[c]));if(o.text){const c=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,e.schema.text(o.text,c))}else s.delete(o.from,o.to)}return!0}}return!1},iQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},oQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,c=Zs(e,r.schema),{$from:u,empty:f,ranges:h}=a;if(!i)return!0;if(f&&s){let{from:m,to:g}=a;const y=(o=u.marks().find(C=>C.type===c))==null?void 0:o.attrs,E=kh(u,c,y);E&&(m=E.from,g=E.to),n.removeMark(m,g,c)}else h.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,c)});return n.removeStoredMark(c),!0},sQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Z1(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=Zn(e,r.schema)),a==="mark"&&(s=Zs(e,r.schema)),i&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let h,m,g,y;n.selection.empty?r.doc.nodesBetween(u,f,(E,C)=>{o&&o===E.type&&(g=Math.max(C,u),y=Math.min(C+E.nodeSize,f),h=C,m=E)}):r.doc.nodesBetween(u,f,(E,C)=>{C<u&&o&&o===E.type&&(g=Math.max(C,u),y=Math.min(C+E.nodeSize,f),h=C,m=E),C>=u&&C<=f&&(o&&o===E.type&&n.setNodeMarkup(C,void 0,{...E.attrs,...t}),s&&E.marks.length&&E.marks.forEach(S=>{if(s===S.type){const N=Math.max(C,u),_=Math.min(C+E.nodeSize,f);n.addMark(N,_,s.create({...S.attrs,...t}))}}))}),m&&(h!==void 0&&n.setNodeMarkup(h,void 0,{...m.attrs,...t}),s&&m.marks.length&&m.marks.forEach(E=>{s===E.type&&n.addMark(g,y,s.create({...E.attrs,...t}))}))}),!0):!1},aQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return LW(i,t)(n,r)},lQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return IW(i,t)(n,r)},cQ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},II=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},uQ=(e,t)=>{if($S(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ng(e){var t;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=e,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(t=u.nodeBefore||u.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let f=!1;const h=zK(u)+o;return s.forEach(m=>{if(f)return;const g=uQ(h,m.find);if(!g)return;const y=c.state.tr,E=Q1({state:c.state,transaction:y}),C={from:r-(g[0].length-o.length),to:i},{commands:S,chain:N,can:_}=new X1({editor:n,state:E});m.handler({state:E,range:C,match:g,commands:S,chain:N,can:_})===null||!y.steps.length||(m.undoable&&y.setMeta(a,{transform:y,from:r,to:i,text:o}),c.dispatch(y),f=!0)}),f}function dQ(e){const{editor:t,rules:n}=e,r=new nt({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:f}=c;typeof f=="string"?f=f:f=GS(Ce.from(f),s.schema);const{from:h}=c,m=h+f.length;ng({editor:t,from:h,to:m,text:f,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return ng({editor:t,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ng({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?ng({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function fQ(e){return Object.prototype.toString.call(e).slice(8,-1)}function rg(e){return fQ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function BI(e,t){const n={...e};return rg(e)&&rg(t)&&Object.keys(t).forEach(r=>{rg(t[r])&&rg(e[r])?n[r]=BI(e[r],t[r]):n[r]=t[r]}),n}var ZS=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Kt(Ge(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Kt(Ge(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>BI(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ti=class PI extends ZS{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new PI(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>u?.type.name===n.name))return!1;const c=s.find(u=>u?.type.name===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function hQ(e){return typeof e=="number"}var pQ=class{constructor(e){this.find=e.find,this.handler=e.handler}},mQ=(e,t,n)=>{if($S(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=e,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function gQ(e){const{editor:t,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=e,{commands:c,chain:u,can:f}=new X1({editor:t,state:n}),h=[];return n.doc.nodesBetween(r,i,(g,y)=>{var E,C,S,N,_;if((C=(E=g.type)==null?void 0:E.spec)!=null&&C.code||!(g.isText||g.isTextblock||g.isInline))return;const O=(_=(N=(S=g.content)==null?void 0:S.size)!=null?N:g.nodeSize)!=null?_:0,M=Math.max(r,y),R=Math.min(i,y+O);if(M>=R)return;const L=g.isText?g.text||"":g.textBetween(M-y,R-y,void 0,"");mQ(L,o.find,s).forEach(z=>{if(z.index===void 0)return;const B=M+z.index+1,U=B+z[0].length,q={from:n.tr.mapping.map(B),to:n.tr.mapping.map(U)},re=o.handler({state:n,range:q,match:z,commands:c,chain:u,can:f,pasteEvent:s,dropEvent:a});h.push(re)})}),h.every(g=>g!==null)}var ig=null,bQ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function yQ(e){const{editor:t,rules:n}=e;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:f,from:h,to:m,rule:g,pasteEvt:y})=>{const E=f.tr,C=Q1({state:f,transaction:E});if(!(!gQ({editor:t,state:C,from:Math.max(h-1,0),to:m.b-1,rule:g,pasteEvent:y,dropEvent:a})||!E.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return n.map(f=>new nt({view(h){const m=y=>{var E;r=(E=h.dom.parentElement)!=null&&E.contains(y.target)?h.dom.parentElement:null,r&&(ig=t)},g=()=>{ig&&(ig=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(h,m)=>{if(o=r===h.dom.parentElement,a=m,!o){const g=ig;g?.isEditable&&setTimeout(()=>{const y=g.state.selection;y&&g.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(h,m)=>{var g;const y=(g=m.clipboardData)==null?void 0:g.getData("text/html");return s=m,i=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(h,m,g)=>{const y=h[0],E=y.getMeta("uiEvent")==="paste"&&!i,C=y.getMeta("uiEvent")==="drop"&&!o,S=y.getMeta("applyPasteRules"),N=!!S;if(!E&&!C&&!N)return;if(N){let{text:M}=S;typeof M=="string"?M=M:M=GS(Ce.from(M),g.schema);const{from:R}=S,L=R+M.length,F=bQ(M);return c({rule:f,state:g,from:R,to:{b:L},pasteEvt:F})}const _=m.doc.content.findDiffStart(g.doc.content),O=m.doc.content.findDiffEnd(g.doc.content);if(!(!hQ(_)||!O||_===O.b))return c({rule:f,state:g,from:_,to:O,pasteEvt:s})}}))}var nb=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=KS(e),this.schema=RI(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Kv(t.name,this.schema)},r=Ge(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return WS([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Kv(r.name,this.schema)},o=[],s=Ge(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&Ge(r,"exitable",i)&&(a.ArrowRight=()=>Ti.handleExit({editor:e,mark:r})),s){const m=Object.fromEntries(Object.entries(s()).map(([g,y])=>[g,()=>y({editor:e})]));a={...a,...m}}const c=xG(a);o.push(c);const u=Ge(r,"addInputRules",i);if(CR(r,e.options.enableInputRules)&&u){const m=u();if(m&&m.length){const g=dQ({editor:e,rules:m}),y=Array.isArray(g)?g:[g];o.push(...y)}}const f=Ge(r,"addPasteRules",i);if(CR(r,e.options.enablePasteRules)&&f){const m=f();if(m&&m.length){const g=yQ({editor:e,rules:m});o.push(...g)}}const h=Ge(r,"addProseMirrorPlugins",i);if(h){const m=h();o.push(...m)}return o})}get attributes(){return MI(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Nh(this.extensions);return Object.fromEntries(t.filter(n=>!!Ge(n,"addNodeView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Zn(n.name,this.schema)},o=Ge(n,"addNodeView",i);if(!o)return[];const s=(a,c,u,f,h)=>{const m=C0(a,r);return o()({node:a,view:c,getPos:u,decorations:f,innerDecorations:h,editor:e,extension:n,HTMLAttributes:m})};return[n.name,s]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Nh(this.extensions);return Object.fromEntries(t.filter(n=>!!Ge(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Zs(n.name,this.schema)},o=Ge(n,"addMarkView",i);if(!o)return[];const s=(a,c,u)=>{const f=C0(a,r);return o()({mark:a,view:c,inline:u,editor:e,extension:n,HTMLAttributes:f,updateAttributes:h=>{RQ(a,e,h)}})};return[n.name,s]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Kv(t.name,this.schema)};t.type==="mark"&&((n=Kt(Ge(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=Ge(t,"onBeforeCreate",r),o=Ge(t,"onCreate",r),s=Ge(t,"onUpdate",r),a=Ge(t,"onSelectionUpdate",r),c=Ge(t,"onTransaction",r),u=Ge(t,"onFocus",r),f=Ge(t,"onBlur",r),h=Ge(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),f&&this.editor.on("blur",f),h&&this.editor.on("destroy",h)})}};nb.resolve=KS;nb.sort=WS;nb.flatten=YS;var _u={};zS(_u,{ClipboardTextSerializer:()=>UI,Commands:()=>FI,Delete:()=>jI,Drop:()=>zI,Editable:()=>$I,FocusEvents:()=>qI,Keymap:()=>YI,Paste:()=>GI,Tabindex:()=>WI,focusEventsPluginKey:()=>VI});var Ht=class HI extends ZS{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new HI(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},UI=Ht.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nt({key:new pt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,s=Math.min(...o.map(f=>f.$from.pos)),a=Math.max(...o.map(f=>f.$to.pos)),c=DI(n);return OI(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),FI=Ht.create({name:"commands",addCommands(){return{...CI}}}),jI=Ht.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const o=()=>{var s,a,c,u;if((u=(c=(a=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:a.filterTransaction)==null?void 0:c.call(a,e))!=null?u:e.getMeta("y-sync$"))return;const f=J1(e.before,[e,...t]);QS(f).forEach(g=>{f.mapping.mapResult(g.oldRange.from).deletedAfter&&f.mapping.mapResult(g.oldRange.to).deletedBefore&&f.before.nodesBetween(g.oldRange.from,g.oldRange.to,(y,E)=>{const C=E+y.nodeSize-2,S=g.oldRange.from<=E&&C<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:E,to:C,newFrom:f.mapping.map(E),newTo:f.mapping.map(C),deletedRange:g.oldRange,newRange:g.newRange,partial:!S,editor:this.editor,transaction:e,combinedTransform:f})})});const m=f.mapping;f.steps.forEach((g,y)=>{var E,C;if(g instanceof ao){const S=m.slice(y).map(g.from,-1),N=m.slice(y).map(g.to),_=m.invert().map(S,-1),O=m.invert().map(N),M=(E=f.doc.nodeAt(S-1))==null?void 0:E.marks.some(L=>L.eq(g.mark)),R=(C=f.doc.nodeAt(N))==null?void 0:C.marks.some(L=>L.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:_,to:O},newRange:{from:S,to:N},partial:!!(R||M),editor:this.editor,transaction:e,combinedTransform:f})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),zI=Ht.create({name:"drop",addProseMirrorPlugins(){return[new nt({key:new pt("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),$I=Ht.create({name:"editable",addProseMirrorPlugins(){return[new nt({key:new pt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),VI=new pt("focusEvents"),qI=Ht.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new nt({key:VI,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),YI=Ht.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:c,doc:u}=a,{empty:f,$anchor:h}=c,{pos:m,parent:g}=h,y=h.parent.isTextblock&&m>0?a.doc.resolve(m-1):h,E=y.parent.type.spec.isolating,C=h.pos-h.parentOffset,S=E&&y.parent.childCount===1?C===h.pos:Ze.atStart(u).from===m;return!f||!g.type.isTextblock||g.textContent.length||!S||S&&h.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return qS()||kI()?o:i},addProseMirrorPlugins(){return[new nt({key:new pt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(E=>E.getMeta("composition")))return;const r=e.some(E=>E.docChanged)&&!t.doc.eq(n.doc),i=e.some(E=>E.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=t.selection,c=Ze.atStart(t.doc).from,u=Ze.atEnd(t.doc).to;if(o||!(s===c&&a===u)||!tb(n.doc))return;const m=n.tr,g=Q1({state:n,transaction:m}),{commands:y}=new X1({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),GI=Ht.create({name:"paste",addProseMirrorPlugins(){return[new nt({key:new pt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),WI=Ht.create({name:"tabindex",addProseMirrorPlugins(){return[new nt({key:new pt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),EQ=class Au{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Au(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Au(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Au(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const c=new Au(a,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),t.push(new Au(a,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const c=s[a];if(o[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===t&&o.every(c=>n[c]===s.node.attrs[c])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},vQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function CQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var wQ=class extends cQ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=SI(t,this.options.autofocus);this.editorState=Ru.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=CQ(vQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=NI(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(s=>!s.key.startsWith(o))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[$I,UI.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),FI,qI,YI,WI,zI,GI,jI].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new nb(r,this)}createCommandManager(){this.commandManager=new X1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=v0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=v0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new JL(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(u)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=s?.getMeta("focus"),c=s?.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:s}),c&&this.emit("blur",{editor:this,event:c.event,transaction:s}),!(e.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||o.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return LI(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return $K(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return GS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return HK(this.state.doc,{blockSeparator:t,textSerializers:{...DI(this.schema),...n}})}get isEmpty(){return tb(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new EQ(t,this)}get $doc(){return this.$pos(0)}};function Ju(e){return new II({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Kt(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=t,s=r[r.length-1],a=r[0];if(s){const c=a.search(/\S/),u=n.from+a.indexOf(s),f=u+s.length;if(XS(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(E=>E===e.type&&E!==g.mark.type)).filter(g=>g.to>u).length)return null;f<n.to&&o.delete(f,n.to),u>n.from&&o.delete(n.from+c,u);const m=n.from+c+s.length;o.addMark(n.from+c,m,e.type.create(i||{})),o.removeStoredMark(e.type)}},undoable:e.undoable})}var SQ={};zS(SQ,{createAtomBlockMarkdownSpec:()=>TQ,createBlockMarkdownSpec:()=>xQ,createInlineMarkdownSpec:()=>AQ,parseAttributes:()=>JS,parseIndentedBlocks:()=>NQ,renderNestedMarkdownContent:()=>MQ,serializeAttributes:()=>eT});function JS(e){if(!e?.trim())return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(f=>f.trim().slice(1));t.class=u.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,u,f])=>{var h;const m=parseInt(((h=f.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),g=n[m];g&&(t[u]=g.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(f=>{f.match(/^[a-zA-Z][\w-]*$/)&&(t[f]=!0)}),t}function eT(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function TQ(e){const{nodeName:t,name:n,parseAttributes:r=JS,serializeAttributes:i=eT,defaultAttributes:o={},requiredAttributes:s=[],allowedAttributes:a}=e,c=n||t,u=f=>{if(!a)return f;const h={};return a.forEach(m=>{m in f&&(h[m]=f[m])}),h};return{parseMarkdown:(f,h)=>{const m={...o,...f.attributes};return h.createNode(t,m,[])},markdownTokenizer:{name:t,level:"block",start(f){var h;const m=new RegExp(`^:::${c}(?:\\s|$)`,"m"),g=(h=f.match(m))==null?void 0:h.index;return g!==void 0?g:-1},tokenize(f,h,m){const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=f.match(g);if(!y)return;const E=y[1]||"",C=r(E);if(!s.find(N=>!(N in C)))return{type:t,raw:y[0],attributes:C}}},renderMarkdown:f=>{const h=u(f.attrs||{}),m=i(h),g=m?` {${m}}`:"";return`:::${c}${g} :::`}}}function xQ(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=JS,serializeAttributes:o=eT,defaultAttributes:s={},content:a="block",allowedAttributes:c}=e,u=n||t,f=h=>{if(!c)return h;const m={};return c.forEach(g=>{g in h&&(m[g]=h[g])}),m};return{parseMarkdown:(h,m)=>{let g;if(r){const E=r(h);g=typeof E=="string"?[{type:"text",text:E}]:E}else a==="block"?g=m.parseChildren(h.tokens||[]):g=m.parseInline(h.tokens||[]);const y={...s,...h.attributes};return m.createNode(t,y,g)},markdownTokenizer:{name:t,level:"block",start(h){var m;const g=new RegExp(`^:::${u}`,"m"),y=(m=h.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(h,m,g){var y;const E=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),C=h.match(E);if(!C)return;const[S,N=""]=C,_=i(N);let O=1;const M=S.length;let R="";const L=/^:::([\w-]*)(\s.*)?/gm,F=h.slice(M);for(L.lastIndex=0;;){const z=L.exec(F);if(z===null)break;const B=z.index,U=z[1];if(!((y=z[2])!=null&&y.endsWith(":::"))){if(U)O+=1;else if(O-=1,O===0){const q=F.slice(0,B);R=q.trim();const re=h.slice(0,M+B+z[0].length);let J=[];if(R)if(a==="block")for(J=g.blockTokens(q),J.forEach(ae=>{ae.text&&(!ae.tokens||ae.tokens.length===0)&&(ae.tokens=g.inlineTokens(ae.text))});J.length>0;){const ae=J[J.length-1];if(ae.type==="paragraph"&&(!ae.text||ae.text.trim()===""))J.pop();else break}else J=g.inlineTokens(R);return{type:t,raw:re,attributes:_,content:R,tokens:J}}}}}},renderMarkdown:(h,m)=>{const g=f(h.attrs||{}),y=o(g),E=y?` {${y}}`:"",C=m.renderChildren(h.content||[],`

`);return`:::${u}${E}

${C}

:::`}}}function kQ(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,o,s]=r;t[i]=o||s,r=n.exec(e)}return t}function _Q(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function AQ(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=kQ,serializeAttributes:o=_Q,defaultAttributes:s={},selfClosing:a=!1,allowedAttributes:c}=e,u=n||t,f=m=>{if(!c)return m;const g={};return c.forEach(y=>{y in m&&(g[y]=m[y])}),g},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const y={...s,...m.attributes};if(a)return g.createNode(t,y);const E=r?r(m):m.content||"";return E?g.createNode(t,y,[g.createTextNode(E)]):g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"inline",start(m){const g=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),y=m.match(g),E=y?.index;return E!==void 0?E:-1},tokenize(m,g,y){const E=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),C=m.match(E);if(!C)return;let S="",N="";if(a){const[,O]=C;N=O}else{const[,O,M]=C;N=O,S=M||""}const _=i(N.trim());return{type:t,raw:C[0],content:S.trim(),attributes:_}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(S=>S.type==="text").map(S=>S.text).join(""));const y=f(m.attrs||{}),E=o(y),C=E?` ${E}`:"";return a?`[${u}${C}]`:`[${u}${C}]${g}[/${u}]`}}}function NQ(e,t,n){var r,i,o,s;const a=e.split(`
`),c=[];let u="",f=0;const h=t.baseIndentSize||2;for(;f<a.length;){const m=a[f],g=m.match(t.itemPattern);if(!g){if(c.length>0)break;if(m.trim()===""){f+=1;continue}else return}const y=t.extractItemData(g),{indentLevel:E,mainContent:C}=y;u=`${u}${m}
`;const S=[C];for(f+=1;f<a.length;){const M=a[f];if(M.trim()===""){const L=a.slice(f+1).findIndex(B=>B.trim()!=="");if(L===-1)break;if((((i=(r=a[f+1+L].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>E){S.push(M),u=`${u}${M}
`,f+=1;continue}else break}if((((s=(o=M.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:s.length)||0)>E)S.push(M),u=`${u}${M}
`,f+=1;else break}let N;const _=S.slice(1);if(_.length>0){const M=_.map(R=>R.slice(E+h)).join(`
`);M.trim()&&(t.customNestedParser?N=t.customNestedParser(M):N=n.blockTokens(M))}const O=t.createToken(y,N);c.push(O)}if(c.length!==0)return{items:c,raw:u.trim()}}function MQ(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[o,...s]=e.content,a=t.renderChildren([o]),c=[`${i}${a}`];return s&&s.length>0&&s.forEach(u=>{const f=t.renderChildren([u]);if(f){const h=f.split(`
`).map(m=>m?t.indent(m):"").join(`
`);c.push(h)}}),c.join(`
`)}function RQ(e,t,n={}){const{state:r}=t,{doc:i,tr:o}=r,s=e;i.descendants((a,c)=>{const u=o.mapping.map(c),f=o.mapping.map(c)+a.nodeSize;let h=null;if(a.marks.forEach(g=>{if(g!==s)return!1;h=g}),!h)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==h.attrs[g]&&(m=!0)}),m){const g=e.type.create({...e.attrs,...n});o.removeMark(u,f,e.type),o.addMark(u,f,g)}}),o.docChanged&&t.view.dispatch(o)}var Zi=class KI extends ZS{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new KI(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function uc(e){return new pQ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const o=Kt(e.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=t,a=r[r.length-1],c=r[0];let u=n.to;if(a){const f=c.search(/\S/),h=n.from+c.indexOf(a),m=h+a.length;if(XS(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(C=>C===e.type&&C!==y.mark.type)).filter(y=>y.to>h).length)return null;m<n.to&&s.delete(m,n.to),h>n.from&&s.delete(n.from+f,h),u=n.from+f+a.length,s.addMark(n.from+f,u,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}var TR=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},OQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,DQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,LQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,IQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,BQ=Ti.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return TR("strong",{...Ei(this.options.HTMLAttributes,e),children:TR("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ju({find:OQ,type:this.type}),Ju({find:LQ,type:this.type})]},addPasteRules(){return[uc({find:DQ,type:this.type}),uc({find:IQ,type:this.type})]}}),PQ=BQ,HQ=/(^|[^`])`([^`]+)`(?!`)$/,UQ=/(^|[^`])`([^`]+)`(?!`)/g,FQ=Ti.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ei(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ju({find:HQ,type:this.type})]},addPasteRules(){return[uc({find:UQ,type:this.type})]}}),jQ=FQ,zQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,$Q=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,VQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,qQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YQ=Ti.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ei(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ju({find:zQ,type:this.type}),Ju({find:VQ,type:this.type})]},addPasteRules(){return[uc({find:$Q,type:this.type}),uc({find:qQ,type:this.type})]}}),GQ=YQ,WQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,KQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,QQ=Ti.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ei(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ju({find:WQ,type:this.type})]},addPasteRules(){return[uc({find:KQ,type:this.type})]}}),XQ=QQ,ZQ=Ti.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ei(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),JQ=ZQ,og,eX=new Uint8Array(16);function tX(){if(!og&&(og=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!og))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return og(eX)}const nX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rX(e){return typeof e=="string"&&nX.test(e)}var ir=[];for(var Zv=0;Zv<256;++Zv)ir.push((Zv+256).toString(16).substr(1));function iX(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ir[e[t+0]]+ir[e[t+1]]+ir[e[t+2]]+ir[e[t+3]]+"-"+ir[e[t+4]]+ir[e[t+5]]+"-"+ir[e[t+6]]+ir[e[t+7]]+"-"+ir[e[t+8]]+ir[e[t+9]]+"-"+ir[e[t+10]]+ir[e[t+11]]+ir[e[t+12]]+ir[e[t+13]]+ir[e[t+14]]+ir[e[t+15]]).toLowerCase();if(!rX(n))throw TypeError("Stringified UUID is invalid");return n}function QI(e,t,n){e=e||{};var r=e.random||(e.rng||tX)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iX(r)}var oX=class XI{constructor(t){this.cache=new Map(t)}get(t){return this.cache.get(t)}set(t,n,r){t<0||this.cache.set(t,[n,r])}replace(t,n,r,i){this.remove(t),this.set(n,r,i)}remove(t){this.cache.delete(t)}invalidate(t){const n=new XI(this.cache),r=t.mapping;return this.cache.forEach(([i,o],s)=>{if(s<0)return;const a=r.mapResult(s),c=t.doc.nodeAt(a.pos);if(a.deleted||!c?.eq(i))n.remove(s);else if(s!==a.pos){const u=o.map(f=>f.map(r,0,0)).filter(f=>f!=null);n.replace(s,a.pos,c,u)}}),n}};function sX({parser:e,nodeTypes:t=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new pt("prosemirror-highlight");return new nt({key:r,state:{init(i,o){const s=new oX,[a,c]=xR(o.doc,e,t,n,s);return{cache:s,decorations:a,promises:c}},apply:(i,o)=>{const s=o.cache.invalidate(i),a=!!i.getMeta("prosemirror-highlight-refresh");if(!i.docChanged&&!a){const f=o.decorations.map(i.mapping,i.doc),h=o.promises;return{cache:s,decorations:f,promises:h}}const[c,u]=xR(i.doc,e,t,n,s);return{cache:s,decorations:c,promises:u}}},view:i=>{const o=new Set,s=()=>{if(o.size>0)return;const c=i.state.tr.setMeta("prosemirror-highlight-refresh",!0);i.dispatch(c)},a=()=>{var c;const u=r.getState(i.state);for(const f of(c=u?.promises)!=null?c:[])o.add(f),f.then(()=>{o.delete(f),s()}).catch(()=>{o.delete(f)})};return a(),{update:()=>{a()}}},props:{decorations(i){var o;return(o=this.getState(i))==null?void 0:o.decorations}}})}function xR(e,t,n,r,i){const o=[],s=[];return e.descendants((a,c)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const u=r(a),f=i.get(c);if(f){const[h,m]=f;o.push(...m)}else{const h=t({content:a.textContent,language:u||void 0,pos:c,size:a.nodeSize});h&&Array.isArray(h)?(i.set(c,a,h),o.push(...h)):h instanceof Promise&&(i.remove(c),s.push(h))}}return!1}),[ct.create(e,o),s]}function aX(e,t){return function({content:r,language:i,pos:o,size:s}){var a;const c=[],{tokens:u,fg:f,bg:h,rootStyle:m}=e.codeToTokens(r,{lang:i,theme:e.getLoadedThemes()[0]}),g=m||(f&&h?`--prosemirror-highlight:${f};--prosemirror-highlight-bg:${h}`:"");if(g){const E=It.node(o,o+s,{style:g});c.push(E)}let y=o+1;for(const E of u){for(const C of E){const S=y+C.content.length,N=It.inline(y,S,{style:lX((a=C.htmlStyle)!=null?a:`color: ${C.color}`),class:"shiki"});c.push(N),y=S}y+=1}return c}}function lX(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}var cX=Object.defineProperty,uX=(e,t,n)=>t in e?cX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jr=(e,t,n)=>uX(e,typeof t!="symbol"?t+"":t,n);function dX(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function fX(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return dX(t)}const rb=Ht.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const e=window.__TEST_OPTIONS;return e.mockID===void 0?e.mockID=0:e.mockID++,e.mockID.toString()}return QI()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute(`data-${this.options.attributeName}`),renderHTML:e=>{const t={[`data-${this.options.attributeName}`]:e[this.options.attributeName]};return this.options.setIdAttribute?{...t,id:e[this.options.attributeName]}:t}}}}]},addProseMirrorPlugins(){let e=null,t=!1;return[new nt({key:new pt("uniqueID"),appendTransaction:(n,r,i)=>{const o=n.some(g=>g.docChanged)&&!r.doc.eq(i.doc),s=this.options.filterTransaction&&n.some(g=>{var y,E;return!((E=(y=this.options).filterTransaction)!=null&&E.call(y,g))});if(!o||s)return;const{tr:a}=i,{types:c,attributeName:u,generateID:f}=this.options,h=J1(r.doc,n),{mapping:m}=h;if(QS(h).forEach(({newRange:g})=>{const y=AI(i.doc,g,S=>c.includes(S.type.name)),E=y.map(({node:S})=>S.attrs[u]).filter(S=>S!==null),C=fX(E);y.forEach(({node:S,pos:N})=>{var _;const O=(_=a.doc.nodeAt(N))==null?void 0:_.attrs[u];if(O===null){const R=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(R)===null){const L=JSON.parse(JSON.stringify(i.doc.toJSON()));if(L.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(L.content)===JSON.stringify(R.toJSON())){a.setNodeMarkup(N,void 0,{...S.attrs,[u]:"initialBlockId"});return}}a.setNodeMarkup(N,void 0,{...S.attrs,[u]:f()});return}const{deleted:M}=m.invert().mapResult(N);M&&C.includes(O)&&a.setNodeMarkup(N,void 0,{...S.attrs,[u]:f()})})}),!!a.steps.length)return a.setMeta("uniqueID",!0),a},view(n){const r=i=>{let o;e=!((o=n.dom.parentElement)===null||o===void 0)&&o.contains(i.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let i;return e!==n.dom.parentElement||((i=r.dataTransfer)===null||i===void 0?void 0:i.effectAllowed)==="copy"?t=!0:t=!1,e=null,!1},paste:()=>(t=!0,!1)},transformPasted:n=>{if(!t)return n;const{types:r,attributeName:i}=this.options,o=s=>{const a=[];return s.forEach(c=>{if(c.isText){a.push(c);return}if(!r.includes(c.type.name)){a.push(c.copy(o(c.content)));return}const u=c.type.create({...c.attrs,[i]:null},o(c.content),c.marks);a.push(u)}),Ce.from(a)};return t=!1,new De(o(n.content),n.openStart,n.openEnd)}}})]}});function kR(e){return e.type==="link"}function ZI(e){return typeof e!="string"&&e.type==="link"}function dc(e){return typeof e!="string"&&e.type==="text"}function Ja(e){var t,n,r,i,o;return el(e)?{...e}:Mh(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:((t=e.props)==null?void 0:t.backgroundColor)??"default",textColor:((n=e.props)==null?void 0:n.textColor)??"default",textAlignment:((r=e.props)==null?void 0:r.textAlignment)??"left",colspan:((i=e.props)==null?void 0:i.colspan)??1,rowspan:((o=e.props)==null?void 0:o.rowspan)??1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Mh(e){return e!=null&&typeof e!="string"&&!Array.isArray(e)&&e.type==="tableCell"}function el(e){return Mh(e)&&e.props!==void 0&&e.content!==void 0}function fc(e){return el(e)?e.props.colspan??1:1}function Rh(e){return el(e)?e.props.rowspan??1:1}class ts extends Error{constructor(t){super(`Unreachable case: ${t}`)}}function mt(e,t=!0){const{"data-test":n,...r}=e;if(Object.keys(r).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}const hX=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function ui(e,t="Ctrl"){return hX()?e.replace("Mod",""):e.replace("Mod",t)}function Sn(...e){return[...new Set(e.filter(t=>t).join(" ").split(" "))].join(" ")}const Gw=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function pX(e,t,n,r){const i=document.createElement("div");i.className=Sn("bn-block-content",n.class),i.setAttribute("data-content-type",e);for(const[s,a]of Object.entries(n))s!=="class"&&i.setAttribute(s,a);const o=document.createElement(t);o.className=Sn("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&o.setAttribute(s,a);return i.appendChild(o),{dom:i,contentDOM:o}}const _R=(e,t)=>{let n=Tc(e,t.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const i=r(n);if(typeof i!="object"||!("dom"in i))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return i};function mX(e,t="<br>"){const n=e.querySelectorAll("p");if(n.length>1){const r=n[0];for(let i=1;i<n.length;i++){const o=n[i];r.innerHTML+=t+o.innerHTML,o.remove()}}}function Ww(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function AR(e){const t=e.split("/");return!t.length||t[t.length-1]===""?e:t[t.length-1]}function gX(e){var t;const n=["mp4","webm","ogg","mov","mkv","flv","avi","wmv","m4v"];try{const r=((t=new URL(e).pathname.split(".").pop())==null?void 0:t.toLowerCase())||"";return n.includes(r)}catch{return!1}}function bX(e){const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={default:r.default,keepOnSplit:!0,parseHTML:i=>{const o=i.getAttribute(Ww(n));if(o===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return o==="true"?!0:o==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(o);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return o},renderHTML:i=>i[n]!==r.default?{[Ww(n)]:i[n]}:{}}}),t}function yX(e,t,n,r){const i=e();if(i===void 0)throw new Error("Cannot find node position");const o=n.state.doc.resolve(i).node().attrs.id;if(!o)throw new Error("Block doesn't have id");const s=t.getBlock(o);if(s.type!==r)throw new Error("Block type does not match");return s}function Kw(e,t,n,r,i=!1,o){const s=document.createElement("div");if(o!==void 0)for(const[a,c]of Object.entries(o))a!=="class"&&s.setAttribute(a,c);s.className=Sn("bn-block-content",o?.class||""),s.setAttribute("data-content-type",t);for(const[a,c]of Object.entries(n)){const u=r[a].default;c!==u&&s.setAttribute(Ww(a),c)}return i&&s.setAttribute("data-file-block",""),s.appendChild(e.dom),e.contentDOM&&(e.contentDOM.className=Sn("bn-inline-content",e.contentDOM.className)),{...e,dom:s}}function EX(e,t,n){return{config:{type:e.type,content:e.content,propSchema:t},implementation:{node:e.node,render:_R,toExternalHTML:_R},extensions:n}}function vX(e,t){e.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{t.view.dom.blur()},10),!0)}function CX(e,t){const n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t.parse&&n.push({tag:"*",getAttrs(r){var i;if(typeof r=="string")return!1;const o=(i=t.parse)==null?void 0:i.call(t,r);return o===void 0?!1:o},getContent:e.content==="inline"||e.content==="none"?(r,i)=>{var o;if(t.parseContent)return t.parseContent({el:r,schema:i});if(e.content==="inline"){const s=r.cloneNode(!0);return mX(s,(o=t.meta)!=null&&o.code?`
`:"<br>"),co.fromSchema(i).parse(s,{topNode:i.nodes.paragraph.create()}).content}return Ce.empty}:void 0}),n}function wX(e,t,n,r){var i,o,s,a;const c=t.node||Zi.create({name:e.type,content:e.content==="inline"?"inline*":e.content==="none"?"":e.content,group:"blockContent",selectable:((i=t.meta)==null?void 0:i.selectable)??!0,isolating:((o=t.meta)==null?void 0:o.isolating)??!0,code:((s=t.meta)==null?void 0:s.code)??!1,defining:((a=t.meta)==null?void 0:a.defining)??!0,priority:r,addAttributes(){return bX(e.propSchema)},parseHTML(){return CX(e,t)},renderHTML({HTMLAttributes:u}){var f;const h=document.createElement("div");return Kw({dom:h,contentDOM:e.content==="inline"?h:void 0},e.type,{},e.propSchema,((f=t.meta)==null?void 0:f.fileBlockAccept)!==void 0,u)},addNodeView(){return u=>{var f,h;const m=this.options.editor,g=yX(u.getPos,m,this.editor,e.type),y=((f=this.options.domAttributes)==null?void 0:f.blockContent)||{},E=t.render.call({blockContentDOMAttributes:y,props:u,renderType:"nodeView"},g,m);return((h=t.meta)==null?void 0:h.selectable)===!1&&vX(E,this.editor),E}}});if(c.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return{config:e,implementation:{...t,node:c,render(u,f){var h;const m=((h=c.options.domAttributes)==null?void 0:h.blockContent)||{};return t.render.call({blockContentDOMAttributes:m,props:void 0,renderType:"dom"},u,f)},toExternalHTML:(u,f)=>{var h,m;const g=((h=c.options.domAttributes)==null?void 0:h.blockContent)||{};return((m=t.toExternalHTML)==null?void 0:m.call({blockContentDOMAttributes:g},u,f))??t.render.call({blockContentDOMAttributes:g,renderType:"dom",props:void 0},u,f)}},extensions:n}}function xi(e,t,n){return(r={})=>{const i=typeof e=="function"?e(r):e,o=typeof t=="function"?t(r):t,s=n?typeof n=="function"?n(r):n:void 0;return{config:i,implementation:{...o,toExternalHTML(a,c){var u,f;const h=(u=o.toExternalHTML)==null?void 0:u.call({blockContentDOMAttributes:this.blockContentDOMAttributes},a,c);if(h!==void 0)return Kw(h,a.type,a.props,i.propSchema,((f=o.meta)==null?void 0:f.fileBlockAccept)!==void 0)},render(a,c){var u;const f=o.render.call({blockContentDOMAttributes:this.blockContentDOMAttributes,renderType:this.renderType,props:this.props},a,c);return Kw(f,a.type,a.props,i.propSchema,((u=o.meta)==null?void 0:u.fileBlockAccept)!==void 0,this.blockContentDOMAttributes)}},extensions:s}}}function tl(e,t){const n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,i=n.node(r);for(;r>0;){if(i.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:i};r--,i=n.node(r)}const o=[];e.descendants((a,c)=>{a.type.isInGroup("bnBlock")&&o.push(c)}),console.warn(`Position ${t} is not within a blockContainer node.`);const s=e.resolve(o.find(a=>a>=t)||o[o.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function tT(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${e.type.name}`);const n=e,r=t,i=r+n.nodeSize,o={node:n,beforePos:r,afterPos:i};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((c,u)=>{if(c.type.spec.group==="blockContent"){const f=c,h=r+u+1,m=h+c.nodeSize;s={node:f,beforePos:h,afterPos:m}}else if(c.type.name==="blockGroup"){const f=c,h=r+u+1,m=h+c.nodeSize;a={node:f,beforePos:h,afterPos:m}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:o,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!o.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${o.node}`);return{isBlockContainer:!1,bnBlock:o,childContainer:o,blockNoteType:o.node.type.name}}}function nl(e){return tT(e.node,e.posBeforeNode)}function up(e){if(!e.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${e.pos} but a node at this position does not exist`);return tT(e.nodeAfter,e.pos)}function Fr(e){const t=tl(e.doc,e.selection.anchor);return nl(t)}function dp(e){const t=tl(e.doc,e.selection.anchor);return nl(t)}function $n(e){return"doc"in e?e.doc.type.schema:e.type.schema}function JI(e){return e.cached.blockNoteEditor}function fp(e){return JI(e).schema}function nT(e){return fp(e).blockSchema}function rT(e){return fp(e).inlineContentSchema}function gd(e){return fp(e).styleSchema}function iT(e){return JI(e).blockCache}function e5(e,t,n){var r,i;const o={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];e.content.forEach((a,c,u)=>{const f={cells:[]};u===0&&a.content.forEach(h=>{let m=h.attrs.colwidth;m==null&&(m=new Array(h.attrs.colspan??1).fill(void 0)),o.columnWidths.push(...m)}),f.cells=a.content.content.map((h,m)=>(s[u]||(s[u]=[]),s[u][m]=h.type.name==="tableHeader",{type:"tableCell",content:h.content.content.map(g=>ib(g,t,n)).reduce((g,y)=>{if(!g.length)return y;const E=g[g.length-1],C=y[0];return C&&dc(E)&&dc(C)&&JSON.stringify(E.styles)===JSON.stringify(C.styles)?(E.text+=`
`+C.text,g.push(...y.slice(1)),g):(g.push(...y),g)},[]),props:{colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,backgroundColor:h.attrs.backgroundColor,textColor:h.attrs.textColor,textAlignment:h.attrs.textAlignment}})),o.rows.push(f)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(c=>c)&&(o.headerRows=(o.headerRows??0)+1);for(let a=0;a<((i=s[0])==null?void 0:i.length);a++)s!=null&&s.every(c=>c[a])&&(o.headerCols=(o.headerCols??0)+1);return o}function ib(e,t,n){const r=[];let i;return e.content.forEach(o=>{if(o.type.name==="hardBreak"){if(i)if(dc(i))i.text+=`
`;else if(kR(i))i.content[i.content.length-1].text+=`
`;else throw new Error("unexpected");else i={type:"text",text:`
`,styles:{}};return}if(o.type.name!=="link"&&o.type.name!=="text"){if(!t[o.type.name]){console.warn("unrecognized inline content type",o.type.name);return}i&&(r.push(i),i=void 0),r.push(oT(o,t,n));return}const s={};let a;for(const c of o.marks)if(c.type.name==="link")a=c;else{const u=n[c.type.name];if(!u){if(c.type.spec.blocknoteIgnore)continue;throw new Error(`style ${c.type.name} not found in styleSchema`)}if(u.propSchema==="boolean")s[u.type]=!0;else if(u.propSchema==="string")s[u.type]=c.attrs.stringValue;else throw new ts(u.propSchema)}i?dc(i)?a?(r.push(i),i={type:"link",href:a.attrs.href,content:[{type:"text",text:o.textContent,styles:s}]}):JSON.stringify(i.styles)===JSON.stringify(s)?i.text+=o.textContent:(r.push(i),i={type:"text",text:o.textContent,styles:s}):kR(i)&&(a?i.href===a.attrs.href?JSON.stringify(i.content[i.content.length-1].styles)===JSON.stringify(s)?i.content[i.content.length-1].text+=o.textContent:i.content.push({type:"text",text:o.textContent,styles:s}):(r.push(i),i={type:"link",href:a.attrs.href,content:[{type:"text",text:o.textContent,styles:s}]}):(r.push(i),i={type:"text",text:o.textContent,styles:s})):a?i={type:"link",href:a.attrs.href,content:[{type:"text",text:o.textContent,styles:s}]}:i={type:"text",text:o.textContent,styles:s}}),i&&r.push(i),r}function oT(e,t,n){if(e.type.name==="text"||e.type.name==="link")throw new Error("unexpected");const r={},i=t[e.type.name];for(const[s,a]of Object.entries(e.attrs)){if(!i)throw Error("ic node is of an unrecognized type: "+e.type.name);const c=i.propSchema;s in c&&(r[s]=a)}let o;return i.content==="styled"?o=ib(e,t,n):o=void 0,{type:e.type.name,props:r,content:o}}function gn(e,t,n=nT(t),r=rT(t),i=gd(t),o=iT(t)){var s;if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);const a=o?.get(e);if(a)return a;const c=tT(e,0);let u=c.bnBlock.node.attrs.id;u===null&&(u=rb.options.generateID());const f=n[c.blockNoteType];if(!f)throw Error("Block is of an unrecognized type: "+c.blockNoteType);const h={};for(const[C,S]of Object.entries({...e.attrs,...c.isBlockContainer?c.blockContent.node.attrs:{}})){const N=f.propSchema;C in N&&!(N[C].default===void 0&&S===void 0)&&(h[C]=S)}const m=n[c.blockNoteType],g=[];(s=c.childContainer)==null||s.node.forEach(C=>{g.push(gn(C,t,n,r,i,o))});let y;if(m.content==="inline"){if(!c.isBlockContainer)throw new Error("impossible");y=ib(c.blockContent.node,r,i)}else if(m.content==="table"){if(!c.isBlockContainer)throw new Error("impossible");y=e5(c.blockContent.node,r,i)}else if(m.content==="none")y=void 0;else throw new ts(m.content);const E={id:u,type:m.type,props:h,content:y,children:g};return o?.set(e,E),E}function SX(e,t,n=nT(t),r=rT(t),i=gd(t),o=iT(t)){const s=[];return e.firstChild.descendants(a=>(s.push(gn(a,t,n,r,i,o)),!1)),s}function TX(e,t,n=nT(t),r=rT(t),i=gd(t),o=iT(t)){function s(a,c,u){if(a.type.name!=="blockGroup")throw new Error("unexpected");const f=[];let h,m;return a.forEach((g,y,E)=>{if(g.type.name!=="blockContainer")throw new Error("unexpected");if(g.childCount===0)return;if(g.childCount===0||g.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+g.childCount);const C=E===0,S=E===a.childCount-1;if(g.firstChild.type.name==="blockGroup"){if(!C)throw new Error("unexpected");const M=s(g.firstChild,Math.max(0,c-1),S?Math.max(0,u-1):0);h=M.blockCutAtStart,S&&(m=M.blockCutAtEnd),f.push(...M.blocks);return}const N=gn(g,t,n,r,i,o),_=g.childCount>1?g.child(1):void 0;let O=[];if(_){const M=s(_,0,S?Math.max(0,u-1):0);O=M.blocks,S&&(m=M.blockCutAtEnd)}S&&!_&&u>1&&(m=N.id),C&&c>1&&(h=N.id),f.push({...N,children:O})}),{blocks:f,blockCutAtStart:h,blockCutAtEnd:m}}if(e.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(e.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}function t5(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function xX(e){return e==="boolean"?{}:{stringValue:{default:void 0,keepOnSplit:!0,parseHTML:t=>t.getAttribute("data-value"),renderHTML:t=>t.stringValue!==void 0?{"data-value":t.stringValue}:{}}}}function sg(e,t,n,r){return e.dom.setAttribute("data-style-type",t),r==="string"&&e.dom.setAttribute("data-value",n),e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}function n5(e,t){return{config:e,implementation:t}}function Mf(e,t){return n5({type:e.name,propSchema:t},{mark:e,render(n,r){const i=r.pmSchema.marks[e.name].spec.toDOM;if(i===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r.pmSchema.mark(e.name,{stringValue:n}),s=yi.renderSpec(document,i(o,!0));if(typeof s!="object"||!("dom"in s))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return s},toExternalHTML(n,r){const i=r.pmSchema.marks[e.name].spec.toDOM;if(i===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r.pmSchema.mark(e.name,{stringValue:n}),s=yi.renderSpec(document,i(o,!0));if(typeof s!="object"||!("dom"in s))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return s}})}function r5(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function kX(e,t){const n=[{tag:`[data-style-type="${e.type}"]`,contentElement:r=>{const i=r;return i.matches("[data-editable]")?i:i.querySelector("[data-editable]")||i}}];return t&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const i=t?.(r);return i===void 0?!1:{stringValue:i}}}),n}function i5(e,t){const n=Ti.create({name:e.type,addAttributes(){return xX(e.propSchema)},parseHTML(){return kX(e,t.parse)},renderHTML({mark:r}){const i=(t.toExternalHTML||t.render)(r.attrs.stringValue);return sg(i,e.type,r.attrs.stringValue,e.propSchema)},addMarkView(){return({mark:r})=>{const i=t.render(r.attrs.stringValue);return sg(i,e.type,r.attrs.stringValue,e.propSchema)}}});return n5(e,{mark:n,render:r=>{const i=t.render(r);return sg(i,e.type,r,e.propSchema)},toExternalHTML:r=>{const i=(t.toExternalHTML||t.render)(r);return sg(i,e.type,r,e.propSchema)}})}function _X(e){const t=NX(e);let{roots:n,nonRoots:r}=NR(t);const i=[];for(;n.size;){i.push(n);const o=new Set;for(const s of n){const a=e.get(s);if(a)for(const c of a){const u=t.get(c);if(u===void 0)continue;const f=u-1;t.set(c,f),f===0&&o.add(c)}}n=o}if(r=NR(t).nonRoots,r.size)throw new Error(`Cycle(s) detected; toposort only works on acyclic graphs. Cyclic nodes: ${Array.from(r).join(", ")}`);return i}function AX(e){const t=MX(e);return _X(t)}function NX(e){const t=new Map;for(const[n,r]of e.entries()){t.has(n)||t.set(n,0);for(const i of r){const o=t.get(i)??0;t.set(i,o+1)}}return t}function NR(e){const t=new Set,n=new Set;for(const[r,i]of e.entries())i===0?t.add(r):n.add(r);return{roots:t,nonRoots:n}}function MX(e){const t=new Map;for(const[n,r]of e.entries()){t.has(n)||t.set(n,new Set);for(const i of r)t.has(i)||t.set(i,new Set),t.get(i).add(n)}return t}function RX(){return new Map}function MR(e){return e&&Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}class OX{constructor(t){jr(this,"BlockNoteEditor","only for types"),jr(this,"Block","only for types"),jr(this,"PartialBlock","only for types"),jr(this,"inlineContentSpecs"),jr(this,"styleSpecs"),jr(this,"blockSpecs"),jr(this,"blockSchema"),jr(this,"inlineContentSchema"),jr(this,"styleSchema"),this.opts=t;const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:i,blockSchema:o,inlineContentSchema:s,styleSchema:a}=this.init();this.blockSpecs=n,this.styleSpecs=i,this.styleSchema=a,this.inlineContentSpecs=r,this.blockSchema=o,this.inlineContentSchema=s}init(){const t=RX(),n=new Set;t.set("default",n);for(const[a,c]of Object.entries(this.opts.blockSpecs))c.implementation.runsBefore?t.set(a,new Set(c.implementation.runsBefore)):n.add(a);const r=AX(t),i=r.findIndex(a=>a.has("default")),o=a=>91+(r.findIndex(c=>c.has(a))+i)*10,s=Object.fromEntries(Object.entries(this.opts.blockSpecs).map(([a,c])=>[a,wX(c.config,c.implementation,c.extensions,o(a))]));return{blockSpecs:s,blockSchema:Object.fromEntries(Object.entries(s).map(([a,c])=>[a,c.config])),inlineContentSpecs:MR(this.opts.inlineContentSpecs),styleSpecs:MR(this.opts.styleSpecs),inlineContentSchema:t5(this.opts.inlineContentSpecs),styleSchema:r5(this.opts.styleSpecs)}}extend(t){Object.assign(this.opts.blockSpecs,t.blockSpecs),Object.assign(this.opts.inlineContentSpecs,t.inlineContentSpecs),Object.assign(this.opts.styleSpecs,t.styleSpecs);const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:i,blockSchema:o,inlineContentSchema:s,styleSchema:a}=this.init();return this.blockSpecs=n,this.styleSpecs=i,this.styleSchema=a,this.inlineContentSpecs=r,this.blockSchema=o,this.inlineContentSchema=s,this}}function ul(e){const{height:t,width:n}=sT(e),r=new Array(t).fill(!1).map(()=>new Array(n).fill(null)),i=(o,s)=>{for(let a=o;a<t;a++)for(let c=s;c<n;c++)if(!r[a][c])return{row:a,col:c};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let o=0;o<e.content.rows.length;o++)for(let s=0;s<e.content.rows[o].cells.length;s++){const a=Ja(e.content.rows[o].cells[s]),c=Rh(a),u=fc(a),{row:f,col:h}=i(o,s);for(let m=f;m<f+c;m++)for(let g=h;g<h+u;g++){if(r[m][g])throw new Error(`Unable to create occupancy grid for table, cell at ${m},${g} is already occupied`);r[m][g]={row:o,col:s,rowspan:c,colspan:u,cell:a}}}return r}function Oh(e){const t=new Set;return e.map(n=>({cells:n.map(r=>t.has(r.row+":"+r.col)?!1:(t.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function hc(e,t,n=ul(t)){for(let r=0;r<n.length;r++)for(let i=0;i<n[r].length;i++){const o=n[r][i];if(o.row===e.row&&o.col===e.col)return{row:r,col:i,cell:o.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${e.row},${e.col} is not occupied`)}function sT(e){const t=e.content.rows.length;let n=0;return e.content.rows.forEach(r=>{let i=0;r.cells.forEach(o=>{i+=fc(o)}),n=Math.max(n,i)}),{height:t,width:n}}function o5(e,t,n=ul(t)){var r;const i=(r=n[e.row])==null?void 0:r[e.col];if(i)return{row:i.row,col:i.col,cell:i.cell}}function Qw(e,t){var n;const r=ul(e);if(t<0||t>=r.length)return[];let i=0;for(let s=0;s<t;s++){const a=(n=r[i])==null?void 0:n[0];if(!a)return[];i+=a.rowspan}const o=new Array(r[0].length).fill(!1).map((s,a)=>o5({row:i,col:a},e,r)).filter(s=>s!==void 0);return o.filter((s,a)=>o.findIndex(c=>c.row===s.row&&c.col===s.col)===a)}function Xw(e,t){var n;const r=ul(e);if(t<0||t>=r[0].length)return[];let i=0;for(let s=0;s<t;s++){const a=(n=r[0])==null?void 0:n[i];if(!a)return[];i+=a.colspan}const o=new Array(r.length).fill(!1).map((s,a)=>o5({row:a,col:i},e,r)).filter(s=>s!==void 0);return o.filter((s,a)=>o.findIndex(c=>c.row===s.row&&c.col===s.col)===a)}function DX(e,t,n,r=ul(e)){const{col:i}=hc({row:0,col:t},e,r),{col:o}=hc({row:0,col:n},e,r);return r.forEach(s=>{const[a]=s.splice(i,1);s.splice(o,0,a)}),Oh(r)}function LX(e,t,n,r=ul(e)){const{row:i}=hc({row:t,col:0},e,r),{row:o}=hc({row:n,col:0},e,r),[s]=r.splice(i,1);return r.splice(o,0,s),Oh(r)}function Zw(e){return e?Mh(e)?Zw(e.content):typeof e=="string"?e.length===0:Array.isArray(e)?e.every(t=>typeof t=="string"?t.length===0:dc(t)?t.text.length===0:ZI(t)?typeof t.content=="string"?t.content.length===0:t.content.every(n=>n.text.length===0):!1):!1:!0}function IX(e,t,n=ul(e)){if(t==="columns"){let o=0;for(let s=n[0].length-1;s>=0&&n.every(a=>Zw(a[s].cell)&&a[s].colspan===1);s--)o++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-o,1);n[s]=n[s].slice(0,a)}return Oh(n)}let r=0;for(let o=n.length-1;o>=0&&n[o].every(s=>Zw(s.cell)&&s.rowspan===1);o--)r++;const i=Math.min(r,n.length-1);return n.splice(n.length-i,i),Oh(n)}function BX(e,t,n,r=ul(e)){const{width:i,height:o}=sT(e);if(t==="columns")r.forEach((s,a)=>{if(n>=0)for(let c=0;c<n;c++)s.push({row:a,col:Math.max(...s.map(u=>u.col))+1,rowspan:1,colspan:1,cell:Ja("")});else s.splice(i+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(i).fill(null).map((c,u)=>({row:o+s,col:u,rowspan:1,colspan:1,cell:Ja("")}));r.push(a)}else n<0&&r.splice(o+n,-1*n);return Oh(r)}function s5(e,t,n){const r=Qw(e,n);if(!r.some(s=>Rh(s.cell)>1))return!0;let i=n,o=n;return r.forEach(s=>{const a=Rh(s.cell);i=Math.max(i,s.row+a-1),o=Math.min(o,s.row)}),t<n?n===i:n===o}function a5(e,t,n){const r=Xw(e,n);if(!r.some(s=>fc(s.cell)>1))return!0;let i=n,o=n;return r.forEach(s=>{const a=fc(s.cell);i=Math.max(i,s.col+a-1),o=Math.min(o,s.col)}),t<n?n===i:n===o}function PX(e,t,n){const r=hc(e,n),i=hc(t,n);return r.col===i.col}function RR(e,t,n,r){const i=[];for(const[o,s]of Object.entries(e.styles||{})){const a=n[o];if(!a)throw new Error(`style ${o} not found in styleSchema`);if(a.propSchema==="boolean")s&&i.push(t.mark(o));else if(a.propSchema==="string")s&&i.push(t.mark(o,{stringValue:s}));else throw new ts(a.propSchema)}return!r||!t.nodes[r].spec.code?e.text.split(/(\n)/g).filter(o=>o.length>0).map(o=>o===`
`?t.nodes.hardBreak.createChecked():t.text(o,i)):e.text.length>0?[t.text(e.text,i)]:[]}function HX(e,t,n){const r=t.marks.link.create({href:e.href});return Jw(e.content,t,n).map(i=>{if(i.type.name==="text")return i.mark([...i.marks,r]);if(i.type.name==="hardBreak")return i;throw new Error("unexpected node type")})}function Jw(e,t,n,r){const i=[];if(typeof e=="string")return i.push(...RR({text:e,styles:{}},t,n,r)),i;for(const o of e)i.push(...RR(o,t,n,r));return i}function bo(e,t,n,r=gd(t)){const i=[];for(const o of e)typeof o=="string"?i.push(...Jw(o,t,r,n)):ZI(o)?i.push(...HX(o,t,r)):dc(o)?i.push(...Jw([o],t,r,n)):i.push(l5(o,t,r));return i}function ob(e,t,n=gd(t)){const r=[],i=new Array(e.headerRows??0).fill(!0),o=new Array(e.headerCols??0).fill(!0),s=e.columnWidths??[];for(let a=0;a<e.rows.length;a++){const c=e.rows[a],u=[],f=i[a];for(let m=0;m<c.cells.length;m++){const g=c.cells[m],y=o[m],E=void 0;let C=null;const S=hc({row:a,col:m},{content:e});let N=s[S.col]?[s[S.col]]:null;if(g)if(typeof g=="string")C=t.text(g);else if(Mh(g)){g.content&&(C=bo(g.content,t,"tableParagraph",n));const O=fc(g);O>1&&(N=new Array(O).fill(!1).map((M,R)=>s[S.col+R]??void 0))}else C=bo(g,t,"tableParagraph",n);const _=t.nodes[y||f?"tableHeader":"tableCell"].createChecked({...Mh(g)?g.props:{},colwidth:N},t.nodes.tableParagraph.createChecked(E,C));u.push(_)}const h=t.nodes.tableRow.createChecked({},u);r.push(h)}return r}function l5(e,t,n){let r,i=e.type;if(i===void 0&&(i="paragraph"),!t.nodes[i])throw new Error(`node type ${i} not found in schema`);if(!e.content)r=t.nodes[i].createChecked(e.props);else if(typeof e.content=="string"){const o=bo([e.content],t,i,n);r=t.nodes[i].createChecked(e.props,o)}else if(Array.isArray(e.content)){const o=bo(e.content,t,i,n);r=t.nodes[i].createChecked(e.props,o)}else if(e.content.type==="tableContent"){const o=ob(e.content,t,n);r=t.nodes[i].createChecked(e.props,o)}else throw new ts(e.content.type);return r}function Tc(e,t,n=gd(t)){let r=e.id;r===void 0&&(r=rb.options.generateID());const i=[];if(e.children)for(const o of e.children)i.push(Tc(o,t,n));if(!e.type||t.nodes[e.type].isInGroup("blockContent")){const o=l5(e,t,n),s=i.length>0?t.nodes.blockGroup.createChecked({},i):void 0;return t.nodes.blockContainer.createChecked({id:r,...e.props},s?[o,s]:o)}else{if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked({id:r,...e.props},i);throw new Error(`block type ${e.type} doesn't match blockContent or bnBlock group`)}}function vi(e,t){let n,r;if(t.firstChild.descendants((i,o)=>n?!1:!aT(i)||i.attrs.id!==e?!0:(n=i,r=o+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function aT(e){return e.type.isInGroup("bnBlock")}const UX=(e,t)=>({tr:n,dispatch:r})=>(r&&sb(n,e,t),!0);function sb(e,t,n,r,i){const o=up(e.doc.resolve(t));let s=null;o.blockNoteType==="table"&&(s=zX(e));const a=$n(e),c=a.nodes[o.blockNoteType],u=a.nodes[n.type||o.blockNoteType],f=u.isInGroup("bnBlock")?u:a.nodes.blockContainer;if(o.isBlockContainer&&u.isInGroup("blockContent"))OR(n,e,o),FX(n,e,c,u,o);else if(!o.isBlockContainer&&u.isInGroup("bnBlock"))OR(n,e,o);else{const h=gn(o.bnBlock.node,a);e.replaceWith(o.bnBlock.beforePos,o.bnBlock.afterPos,Tc({children:h.children,...n},a));return}e.setNodeMarkup(o.bnBlock.beforePos,f,{...o.bnBlock.node.attrs,...n.props}),s&&$X(e,o,s)}function FX(e,t,n,r,i,o,s){const a=$n(t);let c="keep";if(e.content)if(typeof e.content=="string")c=bo([e.content],a,r.name);else if(Array.isArray(e.content))c=bo(e.content,a,r.name);else if(e.content.type==="tableContent")c=ob(e.content,a);else throw new ts(e.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(c=[]);c==="keep"?t.setNodeMarkup(i.blockContent.beforePos,r,{...i.blockContent.node.attrs,...e.props}):t.replaceWith(i.blockContent.beforePos,i.blockContent.afterPos,r.createChecked({...i.blockContent.node.attrs,...e.props},c))}function OR(e,t,n){const r=$n(t);if(e.children!==void 0&&e.children.length>0){const i=e.children.map(o=>Tc(o,r));if(n.childContainer)t.step(new Pn(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new De(Ce.from(i),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},i))}}}function jX(e,t,n,r,i){const o=typeof t=="string"?t:t.id,s=vi(o,e.doc);if(!s)throw new Error(`Block with ID ${o} not found`);sb(e,s.posBeforeNode,n);const a=e.doc.resolve(s.posBeforeNode+1).node(),c=$n(e);return gn(a,c)}function zX(e){const t="selection"in e?e.selection:null;if(!(t instanceof Ue))return null;const n=e.doc.resolve(t.head);let r=-1,i=-1;for(let E=n.depth;E>=0;E--){const C=n.node(E).type.name;if(r<0&&(C==="tableCell"||C==="tableHeader")&&(r=E),C==="table"){i=E;break}}if(r<0||i<0)return null;const o=n.before(r),s=n.before(i),a=e.doc.nodeAt(s);if(!a||a.type.name!=="table")return null;const c=tn.get(a),u=o-(s+1),f=c.map.indexOf(u);if(f<0)return null;const h=Math.floor(f/c.width),m=f%c.width,g=o+1+1,y=Math.max(0,t.head-g);return{row:h,col:m,offset:y}}function $X(e,t,n){var r;if(t.blockNoteType!=="table")return!1;let i=-1;if(t.isBlockContainer)i=e.mapping.map(t.blockContent.beforePos);else{const C=e.mapping.map(t.bnBlock.beforePos),S=C+(((r=e.doc.nodeAt(C))==null?void 0:r.nodeSize)||0);e.doc.nodesBetween(C,S,(N,_)=>N.type.name==="table"?(i=_,!1):!0)}const o=i>=0?e.doc.nodeAt(i):null;if(!o||o.type.name!=="table")return!1;const s=tn.get(o),a=Math.max(0,Math.min(n.row,s.height-1)),c=Math.max(0,Math.min(n.col,s.width-1)),u=a*s.width+c,f=s.map[u];if(f==null)return!1;const h=i+1+f+1,m=e.doc.nodeAt(h),g=h+1,y=m?m.content.size:0,E=g+Math.max(0,Math.min(n.offset,y));return"selection"in e&&e.setSelection(Ue.create(e.doc,E)),!0}const qa={gray:{text:"#9b9a97",background:"#ebeced"},brown:{text:"#64473a",background:"#e9e5e3"},red:{text:"#e03e3e",background:"#fbe4e4"},orange:{text:"#d9730d",background:"#f6e9d9"},yellow:{text:"#dfab01",background:"#fbf3db"},green:{text:"#4d6461",background:"#ddedea"},blue:{text:"#0b6e99",background:"#ddebf1"},purple:{text:"#6940a5",background:"#eae4f2"},pink:{text:"#ad1a72",background:"#f4dfeb"}},Ot={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Xr=e=>{const t={};return e.hasAttribute("data-background-color")?t.backgroundColor=e.getAttribute("data-background-color"):e.style.backgroundColor&&(t.backgroundColor=e.style.backgroundColor),e.hasAttribute("data-text-color")?t.textColor=e.getAttribute("data-text-color"):e.style.color&&(t.textColor=e.style.color),t.textAlignment=Ot.textAlignment.values.includes(e.style.textAlign)?e.style.textAlign:void 0,t},xc=(e,t)=>{e.backgroundColor&&e.backgroundColor!==Ot.backgroundColor.default&&(t.style.backgroundColor=e.backgroundColor in qa?qa[e.backgroundColor].background:e.backgroundColor),e.textColor&&e.textColor!==Ot.textColor.default&&(t.style.color=e.textColor in qa?qa[e.textColor].text:e.textColor),e.textAlignment&&e.textAlignment!==Ot.textAlignment.default&&(t.style.textAlign=e.textAlignment)},VX=(e="backgroundColor")=>({default:Ot.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):t.style.backgroundColor?t.style.backgroundColor:Ot.backgroundColor.default,renderHTML:t=>t[e]===Ot.backgroundColor.default?{}:{"data-background-color":t[e]}}),qX=(e="textColor")=>({default:Ot.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):t.style.color?t.style.color:Ot.textColor.default,renderHTML:t=>t[e]===Ot.textColor.default?{}:{"data-text-color":t[e]}}),ab=(e,t)=>{const n=e.querySelector(t);if(!n)return;const r=e.querySelector("figcaption"),i=r?.textContent??void 0;return{targetElement:n,caption:i}},YX=(e,t,n)=>{const r=document.createElement("div");r.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",n?i.appendChild(n):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',r.appendChild(i);const o=document.createElement("p");o.className="bn-add-file-button-text",o.innerHTML=e.type in t.dictionary.file_blocks.add_button_text?t.dictionary.file_blocks.add_button_text[e.type]:t.dictionary.file_blocks.add_button_text.file,r.appendChild(o);const s=c=>{c.preventDefault()},a=()=>{t.transact(c=>c.setMeta(t.filePanel.plugins[0],{block:e}))};return r.addEventListener("mousedown",s,!0),r.addEventListener("click",a,!0),{dom:r,destroy:()=>{r.removeEventListener("mousedown",s,!0),r.removeEventListener("click",a,!0)}}},GX='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',WX=e=>{const t=document.createElement("div");t.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=GX,t.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}},lT=(e,t,n,r)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",e.props.url===""){const s=YX(e,t,r);i.appendChild(s.dom);const a=t.onUploadStart(c=>{if(c===e.id){i.removeChild(s.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",i.appendChild(u)}});return{dom:i,destroy:()=>{a(),s.destroy()}}}const o={dom:i};if(e.props.showPreview===!1||!n){const s=WX(e);i.appendChild(s.dom),o.destroy=()=>{var a;(a=s.destroy)==null||a.call(s)}}else i.appendChild(n.dom);if(e.props.caption){const s=document.createElement("p");s.className="bn-file-caption",s.textContent=e.props.caption,i.appendChild(s)}return o},cT=(e,t)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},lb=(e,t)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},DR=e=>({url:e.src||void 0}),KX='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',QX=e=>({type:"audio",propSchema:{backgroundColor:Ot.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none"}),XX=(e={})=>t=>{if(t.tagName==="AUDIO"){if(t.closest("figure"))return;const{backgroundColor:n}=Xr(t);return{...DR(t),backgroundColor:n}}if(t.tagName==="FIGURE"){const n=ab(t,"audio");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=Xr(t);return{...DR(r),backgroundColor:o,caption:i}}},ZX=(e={})=>(t,n)=>{const r=document.createElement("div");r.innerHTML=e.icon??KX;const i=document.createElement("audio");return i.className="bn-audio",n.resolveFileUrl?n.resolveFileUrl(t.props.url).then(o=>{i.src=o}):i.src=t.props.url,i.controls=!0,i.contentEditable="false",i.draggable=!1,lT(t,n,{dom:i},r.firstElementChild)},JX=(e={})=>(t,n)=>{if(!t.props.url){const i=document.createElement("p");return i.textContent="Add audio",{dom:i}}let r;return t.props.showPreview?(r=document.createElement("audio"),r.src=t.props.url):(r=document.createElement("a"),r.href=t.props.url,r.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?cT(r,t.props.caption):lb(r,t.props.caption):{dom:r}},eZ=xi(QX,e=>({meta:{fileBlockAccept:["audio/*"]},parse:XX(e),render:ZX(e),toExternalHTML:JX(e),runsBefore:["file"]}));let cb=class{constructor(){jr(this,"callbacks",{})}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),()=>this.off(t,n)}emit(t,...n){const r=this.callbacks[t];r&&r.forEach(i=>i.apply(this,n))}off(t,n){const r=this.callbacks[t];r&&(n?this.callbacks[t]=r.filter(i=>i!==n):delete this.callbacks[t])}removeAllListeners(){this.callbacks={}}},Un=class extends cb{constructor(...t){super(),jr(this,"plugins",[]),jr(this,"inputRules"),jr(this,"keyboardShortcuts"),jr(this,"tiptapExtensions")}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(t){this.plugins.push(t)}get priority(){}};function Qi(e){const t=Object.create(Un.prototype);return t.key=e.key,t.inputRules=e.inputRules,t.keyboardShortcuts=e.keyboardShortcuts,t.plugins=e.plugins??[],t.tiptapExtensions=e.tiptapExtensions,t}const LR=Symbol.for("blocknote.shikiParser"),Jv=Symbol.for("blocknote.shikiHighlighterPromise");function tZ(e){const t=globalThis;let n,r;return sX({parser:i=>{if(!e.createHighlighter)return[];if(!n)return t[Jv]=t[Jv]||e.createHighlighter(),t[Jv].then(s=>{n=s});const o=c5(e,i.language);return!o||o==="text"||o==="none"||o==="plaintext"||o==="txt"?[]:n.getLoadedLanguages().includes(o)?(r||(r=t[LR]||aX(n),t[LR]=r),r(i)):n.loadLanguage(o)},languageExtractor:i=>i.attrs.language,nodeTypes:["codeBlock"]})}const nZ=({defaultLanguage:e="text"})=>({type:"codeBlock",propSchema:{language:{default:e}},content:"inline"}),rZ=xi(nZ,e=>({meta:{code:!0,defining:!0,isolating:!1},parse:t=>{var n,r;if(t.tagName!=="PRE"||t.childElementCount!==1||((n=t.firstElementChild)==null?void 0:n.tagName)!=="CODE")return;const i=t.firstElementChild;return{language:i.getAttribute("data-language")||((r=i.className.split(" ").find(o=>o.includes("language-")))==null?void 0:r.replace("language-",""))}},parseContent:({el:t,schema:n})=>{const r=co.fromSchema(n),i=t.firstElementChild;return r.parse(i,{topNode:n.nodes.codeBlock.create()}).content},render(t,n){const r=document.createDocumentFragment(),i=document.createElement("pre"),o=document.createElement("code");i.appendChild(o);let s;if(e.supportedLanguages){const a=document.createElement("select");Object.entries(e.supportedLanguages??{}).forEach(([f,{name:h}])=>{const m=document.createElement("option");m.value=f,m.text=h,a.appendChild(m)}),a.value=t.props.language||e.defaultLanguage||"text";const c=f=>{const h=f.target.value;n.updateBlock(t.id,{props:{language:h}})};a.addEventListener("change",c),s=()=>a.removeEventListener("change",c);const u=document.createElement("div");u.contentEditable="false",u.appendChild(a),r.appendChild(u)}return r.appendChild(i),{dom:r,contentDOM:o,destroy:()=>{s?.()}}},toExternalHTML(t){const n=document.createElement("pre"),r=document.createElement("code");return r.className=`language-${t.props.language}`,r.dataset.language=t.props.language,n.appendChild(r),{dom:n,contentDOM:r}}}),e=>[Qi({key:"code-block-highlighter",plugins:[tZ(e)]}),Qi({key:"code-block-keyboard-shortcuts",keyboardShortcuts:{Delete:({editor:t})=>t.transact(n=>{const{block:r}=t.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:i}=n.selection;return i.parent.textContent?!1:(t.removeBlocks([r]),!0)}),Tab:({editor:t})=>e.indentLineWithTab===!1?!1:t.transact(n=>{const{block:r}=t.getTextCursorPosition();return r.type==="codeBlock"?(n.insertText("  "),!0):!1}),Enter:({editor:t})=>t.transact(n=>{const{block:r,nextBlock:i}=t.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:o}=n.selection,s=o.parentOffset===o.parent.nodeSize-2,a=o.parent.textContent.endsWith(`

`);if(s&&a){if(n.delete(o.pos-2,o.pos),i)return t.setTextCursorPosition(i,"start"),!0;const[c]=t.insertBlocks([{type:"paragraph"}],r,"after");return t.setTextCursorPosition(c,"start"),!0}return n.insertText(`
`),!0}),"Shift-Enter":({editor:t})=>t.transact(()=>{const{block:n}=t.getTextCursorPosition();if(n.type!=="codeBlock")return!1;const[r]=t.insertBlocks([{type:"paragraph"}],n,"after");return t.setTextCursorPosition(r,"start"),!0})},inputRules:[{find:/^```(.*?)\s$/,replace:({match:t})=>{const n=t[1].trim();return{type:"codeBlock",props:{language:{language:c5(e,n)??n}.language},content:[]}}}]})]);function c5(e,t){var n;return(n=Object.entries(e.supportedLanguages??{}).find(([r,{aliases:i}])=>i?.includes(t)||r===t))==null?void 0:n[0]}const iZ=()=>({type:"divider",propSchema:{},content:"none"}),oZ=xi(iZ,{meta:{isolating:!1},parse(e){if(e.tagName==="HR")return{}},render(){return{dom:document.createElement("hr")}}},[Qi({key:"divider-block-shortcuts",inputRules:[{find:new RegExp("^---$"),replace(){return{type:"divider",props:{},content:[]}}}]})]),IR=e=>({url:e.src||void 0}),sZ=()=>({type:"file",propSchema:{backgroundColor:Ot.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none"}),aZ=()=>e=>{if(e.tagName==="EMBED"){if(e.closest("figure"))return;const{backgroundColor:t}=Xr(e);return{...IR(e),backgroundColor:t}}if(e.tagName==="FIGURE"){const t=ab(e,"embed");if(!t)return;const{targetElement:n,caption:r}=t,{backgroundColor:i}=Xr(e);return{...IR(n),backgroundColor:i,caption:r}}},lZ=xi(sZ,{meta:{fileBlockAccept:["*/*"]},parse:aZ(),render(e,t){return lT(e,t)},toExternalHTML(e){if(!e.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const t=document.createElement("a");return t.href=e.props.url,t.textContent=e.props.name||e.props.url,e.props.caption?lb(t,e.props.caption):{dom:t}}}),cZ={set:(e,t)=>window.localStorage.setItem(`toggle-${e.id}`,t?"true":"false"),get:e=>window.localStorage.getItem(`toggle-${e.id}`)==="true"},u5=(e,t,n,r=cZ)=>{if("isToggleable"in e.props&&!e.props.isToggleable)return{dom:n};const i=document.createElement("div"),o=document.createElement("div");o.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=y=>y.preventDefault();s.addEventListener("mousedown",a);const c=()=>{var y;o.getAttribute("data-show-children")==="true"?(o.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1),i.contains(u)&&i.removeChild(u)):(o.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0),((y=t.getBlock(e))==null?void 0:y.children.length)===0&&!i.contains(u)&&i.appendChild(u))};s.addEventListener("click",c),o.appendChild(s),o.appendChild(n);const u=document.createElement("button");u.className="bn-toggle-add-block-button",u.type="button",u.textContent=t.dictionary.toggle_blocks.add_block_button;const f=y=>y.preventDefault();u.addEventListener("mousedown",f);const h=()=>{t.transact(()=>{const y=t.updateBlock(e,{children:[{}]});t.setTextCursorPosition(y.children[0].id,"end"),t.focus()})};u.addEventListener("click",h),i.appendChild(o);let m=e.children.length;const g=t.onChange(()=>{var y;const E=((y=t.getBlock(e))==null?void 0:y.children.length)??0;E>m?(o.getAttribute("data-show-children")==="false"&&(o.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0)),i.contains(u)&&i.removeChild(u)):E===0&&E<m&&(o.getAttribute("data-show-children")==="true"&&(o.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1)),i.contains(u)&&i.removeChild(u)),m=E});return r.get(e)?(o.setAttribute("data-show-children","true"),e.children.length===0&&i.appendChild(u)):o.setAttribute("data-show-children","false"),{dom:i,ignoreMutation:y=>y instanceof MutationRecord&&(y.type==="attributes"&&y.target===o&&y.attributeName==="data-show-children"||y.type==="childList"&&(y.addedNodes[0]===u||y.removedNodes[0]===u)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",c),u.removeEventListener("mousedown",f),u.removeEventListener("click",h),g?.()}}},d5=[1,2,3,4,5,6],uZ=({defaultLevel:e=1,levels:t=d5,allowToggleHeadings:n=!0}={})=>({type:"heading",propSchema:{...Ot,level:{default:e,values:t},...n?{isToggleable:{default:!1,optional:!0}}:{}},content:"inline"}),dZ=xi(uZ,({allowToggleHeadings:e=!0}={})=>({meta:{isolating:!1},parse(t){let n;switch(t.tagName){case"H1":n=1;break;case"H2":n=2;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6;break;default:return}return{...Xr(t),level:n}},render(t,n){const r=document.createElement(`h${t.props.level}`);return e?{...u5(t,n,r),contentDOM:r}:{dom:r,contentDOM:r}},toExternalHTML(t){const n=document.createElement(`h${t.props.level}`);return xc(t.props,n),{dom:n,contentDOM:n}}}),({levels:e=d5}={})=>[Qi({key:"heading-shortcuts",keyboardShortcuts:Object.fromEntries(e.map(t=>[`Mod-Alt-${t}`,({editor:n})=>{const r=n.getTextCursorPosition();return n.schema.blockSchema[r.block.type].content!=="inline"?!1:(n.updateBlock(r.block,{type:"heading",props:{level:t}}),!0)}])??[]),inputRules:e.map(t=>({find:new RegExp(`^(#{${t}})\\s$`),replace({match:n}){return{type:"heading",props:{level:n[1].length}}}}))})]),f5=(e,t,n,r,i)=>{const{dom:o,destroy:s}=lT(e,t,n,i),a=o;a.style.position="relative",e.props.url&&e.props.showPreview&&(e.props.previewWidth?a.style.width=`${e.props.previewWidth}px`:a.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";const f=document.createElement("div");f.style.position="absolute",f.style.height="100%",f.style.width="100%";let h,m=e.props.previewWidth;const g=_=>{var O,M;if(!h){!t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u));return}let R;const L="touches"in _?_.touches[0].clientX:_.clientX;e.props.textAlignment==="center"?h.handleUsed==="left"?R=h.initialWidth+(h.initialClientX-L)*2:R=h.initialWidth+(L-h.initialClientX)*2:h.handleUsed==="left"?R=h.initialWidth+h.initialClientX-L:R=h.initialWidth+L-h.initialClientX,m=Math.min(Math.max(R,64),((M=(O=t.domElement)==null?void 0:O.firstElementChild)==null?void 0:M.clientWidth)||Number.MAX_VALUE),a.style.width=`${m}px`},y=_=>{(!_.target||!a.contains(_.target)||!t.isEditable)&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u)),h&&(h=void 0,a.contains(f)&&a.removeChild(f),t.updateBlock(e,{props:{previewWidth:m}}))},E=()=>{t.isEditable&&(r.appendChild(c),r.appendChild(u))},C=_=>{_.relatedTarget===c||_.relatedTarget===u||h||t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u))},S=_=>{_.preventDefault(),a.contains(f)||a.appendChild(f);const O="touches"in _?_.touches[0].clientX:_.clientX;h={handleUsed:"left",initialWidth:a.clientWidth,initialClientX:O}},N=_=>{_.preventDefault(),a.contains(f)||a.appendChild(f);const O="touches"in _?_.touches[0].clientX:_.clientX;h={handleUsed:"right",initialWidth:a.clientWidth,initialClientX:O}};return window.addEventListener("mousemove",g),window.addEventListener("touchmove",g),window.addEventListener("mouseup",y),window.addEventListener("touchend",y),a.addEventListener("mouseenter",E),a.addEventListener("mouseleave",C),c.addEventListener("mousedown",S),c.addEventListener("touchstart",S),u.addEventListener("mousedown",N),u.addEventListener("touchstart",N),{dom:a,destroy:()=>{s?.(),window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",y),a.removeEventListener("mouseenter",E),a.removeEventListener("mouseleave",C),c.removeEventListener("mousedown",S),c.removeEventListener("touchstart",S),u.removeEventListener("mousedown",N),u.removeEventListener("touchstart",N)}}},BR=e=>{const t=e.src||void 0,n=e.width||void 0,r=e.alt||void 0;return{url:t,previewWidth:n,name:r}},fZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',hZ=(e={})=>({type:"image",propSchema:{textAlignment:Ot.textAlignment,backgroundColor:Ot.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),pZ=(e={})=>t=>{if(t.tagName==="IMG"){if(t.closest("figure"))return;const{backgroundColor:n}=Xr(t);return{...BR(t),backgroundColor:n}}if(t.tagName==="FIGURE"){const n=ab(t,"img");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=Xr(t);return{...BR(r),backgroundColor:o,caption:i}}},mZ=(e={})=>(t,n)=>{const r=document.createElement("div");r.innerHTML=e.icon??fZ;const i=document.createElement("div");i.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,i.appendChild(o),f5(t,n,{dom:i},i,r.firstElementChild)},gZ=(e={})=>(t,n)=>{if(!t.props.url){const i=document.createElement("p");return i.textContent="Add image",{dom:i}}let r;return t.props.showPreview?(r=document.createElement("img"),r.src=t.props.url,r.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(r.width=t.props.previewWidth)):(r=document.createElement("a"),r.href=t.props.url,r.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?cT(r,t.props.caption):lb(r,t.props.caption):{dom:r}},bZ=xi(hZ,e=>({meta:{fileBlockAccept:["image/*"]},parse:pZ(e),render:mZ(e),toExternalHTML:gZ(e),runsBefore:["file"]})),yZ=(e,t,n)=>({state:r,dispatch:i})=>i?h5(r.tr,e,t,n):!0,h5=(e,t,n,r)=>{const i=tl(e.doc,t),o=nl(i);if(!o.isBlockContainer)return!1;const s=$n(e),a=[{type:o.bnBlock.node.type,attrs:r?{...o.bnBlock.node.attrs,id:void 0}:{}},{type:n?o.blockContent.node.type:s.nodes.paragraph,attrs:r?{...o.blockContent.node.attrs}:{}}];return e.split(t,2,a),!0},ub=(e,t)=>{const{blockInfo:n,selectionEmpty:r}=e.transact(s=>({blockInfo:dp(s),selectionEmpty:s.selection.anchor===s.selection.head}));if(!n.isBlockContainer)return!1;const{bnBlock:i,blockContent:o}=n;return o.node.type.name!==t||!r?!1:o.node.childCount===0?(e.transact(s=>{sb(s,i.beforePos,{type:"paragraph",props:{}})}),!0):o.node.childCount>0?e.transact(s=>(s.deleteSelection(),h5(s,s.selection.from,!0))):!1};function uT(e,t,n){var r,i,o;const s=co.fromSchema(t),a=e,c=document.createElement("div");c.setAttribute("data-node-type","blockGroup");for(const g of Array.from(a.childNodes))c.appendChild(g.cloneNode(!0));let u=s.parse(c,{topNode:t.nodes.blockGroup.create()});((i=(r=u.firstChild)==null?void 0:r.firstChild)==null?void 0:i.type.name)==="checkListItem"&&(u=u.copy(u.content.cut(u.firstChild.firstChild.nodeSize+2)));const f=(o=u.firstChild)==null?void 0:o.firstChild;if(!(f!=null&&f.isTextblock))return Ce.from(u);const h=t.nodes[n].create({},f.content),m=u.content.cut(f.nodeSize+2);if(m.size>0){const g=u.copy(m);return h.content.addToEnd(g)}return h.content}const EZ=()=>({type:"bulletListItem",propSchema:{...Ot},content:"inline"}),vZ=xi(EZ,{meta:{isolating:!1},parse(e){var t;if(e.tagName!=="LI")return;const n=e.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL"))return Xr(e)},parseContent:({el:e,schema:t})=>uT(e,t,"bulletListItem"),render(){const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML(e){const t=document.createElement("li"),n=document.createElement("p");return xc(e.props,t),t.appendChild(n),{dom:t,contentDOM:n}}},[Qi({key:"bullet-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>ub(e,"bulletListItem"),"Mod-Shift-8":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"bulletListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^[-+*]\\s$"),replace({editor:e}){if(Fr(e.prosemirrorState).blockNoteType!=="heading")return{type:"bulletListItem",props:{}}}}]})]),CZ=()=>({type:"checkListItem",propSchema:{...Ot,checked:{default:!1,type:"boolean"}},content:"inline"}),wZ=xi(CZ,{meta:{isolating:!1},parse(e){var t;if(e.tagName==="input")return e.closest("[data-content-type]")||e.closest("li")?void 0:e.type==="checkbox"?{checked:e.checked}:void 0;if(e.tagName!=="LI")return;const n=e.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL")){const r=e.querySelector("input[type=checkbox]")||null;return r===null?void 0:{...Xr(e),checked:r.checked}}},parseContent:({el:e,schema:t})=>uT(e,t,"checkListItem"),render(e,t){const n=document.createDocumentFragment(),r=document.createElement("input");r.type="checkbox",r.checked=e.props.checked,e.props.checked&&r.setAttribute("checked",""),r.addEventListener("change",()=>{t.updateBlock(e,{props:{checked:!e.props.checked}})});const i=document.createElement("p");return n.appendChild(r),n.appendChild(i),{dom:n,contentDOM:i}},toExternalHTML(e){const t=document.createElement("li"),n=document.createElement("input");n.type="checkbox",n.checked=e.props.checked,e.props.checked&&n.setAttribute("checked","");const r=document.createElement("p");return xc(e.props,t),t.appendChild(n),t.appendChild(r),{dom:t,contentDOM:r}},runsBefore:["bulletListItem"]},[Qi({key:"check-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>ub(e,"checkListItem"),"Mod-Shift-9":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"checkListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("\\[\\s*\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!1},content:[]}}},{find:new RegExp("\\[[Xx]\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!0}}}}]})]);function p5(e,t,n,r){let i=e.firstChild.attrs.start||1,o=!0;const s=!!e.firstChild.attrs.start,a=nl({posBeforeNode:t,node:e});if(!a.isBlockContainer)throw new Error("impossible");const c=n.doc.resolve(a.bnBlock.beforePos).nodeBefore,u=c?r.get(c):void 0;return u!==void 0?(i=u+1,o=!1):c&&nl({posBeforeNode:a.bnBlock.beforePos-c.nodeSize,node:c}).blockNoteType==="numberedListItem"&&(i=p5(c,a.bnBlock.beforePos-c.nodeSize,n,r).index+1,o=!1),r.set(e,i),{index:i,isFirst:o,hasStart:s}}function PR(e,t){const n=new Map,r=t.decorations.map(e.mapping,e.doc),i=[];e.doc.nodesBetween(0,e.doc.nodeSize-2,(s,a)=>{if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){const{index:c,isFirst:u,hasStart:f}=p5(s,a,e,n);r.find(a,a+s.nodeSize,h=>h.index===c&&h.isFirst===u&&h.hasStart===f).length===0&&i.push(It.node(a+1,a+s.nodeSize-1,{"data-index":c.toString()}))}});const o=i.flatMap(s=>r.find(s.from,s.to));return{decorations:r.remove(o).add(e.doc,i)}}const SZ=()=>new nt({key:new pt("numbered-list-indexing-decorations"),state:{init(e,t){return PR(t.tr,{decorations:ct.empty})},apply(e,t){return!e.docChanged&&!e.selectionSet&&t.decorations?t:PR(e,t)}},props:{decorations(e){var t;return((t=this.getState(e))==null?void 0:t.decorations)??ct.empty}}}),TZ=()=>({type:"numberedListItem",propSchema:{...Ot,start:{default:void 0,type:"number"}},content:"inline"}),xZ=xi(TZ,{meta:{isolating:!1},parse(e){var t;if(e.tagName!=="LI")return;const n=e.parentElement;if(n!==null&&(n.tagName==="OL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="OL")){const r=parseInt(n.getAttribute("start")||"1"),i=Xr(e);return e.previousElementSibling||r===1?i:{...i,start:r}}},parseContent:({el:e,schema:t})=>uT(e,t,"numberedListItem"),render(){const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML(e){const t=document.createElement("li"),n=document.createElement("p");return xc(e.props,t),t.appendChild(n),{dom:t,contentDOM:n}}},[Qi({key:"numbered-list-item-shortcuts",inputRules:[{find:new RegExp("^(\\d+)\\.\\s$"),replace({match:e,editor:t}){if(Fr(t.prosemirrorState).blockNoteType==="heading")return;const n=parseInt(e[1]);return{type:"numberedListItem",props:{start:n!==1?n:void 0}}}}],keyboardShortcuts:{Enter:({editor:e})=>ub(e,"numberedListItem"),"Mod-Shift-7":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"numberedListItem",props:{}}),!0)}},plugins:[SZ()]})]),kZ=()=>({type:"toggleListItem",propSchema:{...Ot},content:"inline"}),_Z=xi(kZ,{meta:{isolating:!1},render(e,t){const n=document.createElement("p");return{...u5(e,t,n),contentDOM:n}},toExternalHTML(e){const t=document.createElement("li"),n=document.createElement("p");return xc(e.props,t),t.appendChild(n),{dom:t,contentDOM:n}}},[Qi({key:"toggle-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>ub(e,"toggleListItem"),"Mod-Shift-6":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"toggleListItem",props:{}}),!0)}}})]),AZ=()=>({type:"paragraph",propSchema:Ot,content:"inline"}),m5=xi(AZ,{meta:{isolating:!1},parse:e=>{var t;if(e.tagName==="P"&&(t=e.textContent)!=null&&t.trim())return Xr(e)},render:()=>{const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const t=document.createElement("p");return xc(e.props,t),{dom:t,contentDOM:t}},runsBefore:["default"]},[Qi({key:"paragraph-shortcuts",keyboardShortcuts:{"Mod-Alt-0":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"paragraph",props:{}}),!0)}}})]),NZ=()=>({type:"quote",propSchema:{backgroundColor:Ot.backgroundColor,textColor:Ot.textColor},content:"inline"}),MZ=xi(NZ,{meta:{isolating:!1},parse(e){if(e.tagName==="BLOCKQUOTE"){const{backgroundColor:t,textColor:n}=Xr(e);return{backgroundColor:t,textColor:n}}},render(){const e=document.createElement("blockquote");return{dom:e,contentDOM:e}},toExternalHTML(e){const t=document.createElement("blockquote");return xc(e.props,t),{dom:t,contentDOM:t}}},[Qi({key:"quote-block-shortcuts",keyboardShortcuts:{"Mod-Alt-q":({editor:e})=>{const t=e.getTextCursorPosition();return e.schema.blockSchema[t.block.type].content!=="inline"?!1:(e.updateBlock(t.block,{type:"quote",props:{}}),!0)}},inputRules:[{find:new RegExp("^>\\s$"),replace(){return{type:"quote",props:{}}}}]})]),RZ=35,dT=120,OZ=31,DZ=Ht.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[dW({cellMinWidth:RZ,defaultCellMinWidth:dT,View:null}),CW()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const e=this.editor.state.selection,t=e.empty,n=e.$head.parentOffset===0,r=e.$head.node().type.name==="tableParagraph";return t&&n&&r},Tab:()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>aR(1)(e,t,n)),"Shift-Tab":()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>aR(-1)(e,t,n))}},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Kt(Ge(e,"tableRole",t))}}}),LZ={textColor:Ot.textColor},IZ=Zi.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th",getContent:(e,t)=>g5(e,t)}]},renderHTML({HTMLAttributes:e}){return["th",Ei(this.options.HTMLAttributes,e),0]}}),BZ=Zi.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td",getContent:(e,t)=>g5(e,t)}]},renderHTML({HTMLAttributes:e}){return["td",Ei(this.options.HTMLAttributes,e),0]}}),PZ=Zi.create({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){var n,r,i;const o=pX(this.name,"table",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=document.createElement("colgroup");for(const a of e.children[0].children)if(a.attrs.colwidth)for(const c of a.attrs.colwidth){const u=document.createElement("col");c&&(u.style=`width: ${c}px`),s.appendChild(u)}else s.appendChild(document.createElement("col"));return(i=o.dom.firstChild)==null||i.appendChild(s),o},addNodeView(){return({node:e,HTMLAttributes:t})=>{var n;class r extends aI{constructor(o,s,a){super(o,s),this.node=o,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const c=document.createElement("div");c.className=Sn("bn-block-content",a.class),c.setAttribute("data-content-type","table");for(const[m,g]of Object.entries(a))m!=="class"&&c.setAttribute(m,g);const u=this.dom,f=document.createElement("div");f.className="tableWrapper-inner",f.appendChild(u.firstChild),u.appendChild(f),c.appendChild(u);const h=document.createElement("div");h.className="table-widgets-container",h.style.position="relative",u.appendChild(h),this.dom=c}ignoreMutation(o){return!o.target.closest(".tableWrapper-inner")||super.ignoreMutation(o)}}return new r(e,dT,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t})}}}),HZ=Zi.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:e=>{if(typeof e=="string"||!e.textContent||!e.closest("[data-content-type]"))return!1;const t=e.parentElement;return t===null?!1:t.tagName==="TD"||t.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:e}){return["p",e,0]}}),UZ=Zi.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Ei(this.options.HTMLAttributes,e),0]}});function g5(e,t){const n=co.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),r=[];return n.content.descendants(i=>{if(i.isInline)return r.push(i),!1}),Ce.fromArray(r)}const FZ=()=>EX({node:PZ,type:"table",content:"table"},LZ,[Qi({key:"table-extensions",tiptapExtensions:[DZ,HZ,IZ,BZ,UZ]}),Qi({key:"table-keyboard-delete",keyboardShortcuts:{Backspace:({editor:e})=>{if(!(e.prosemirrorState.selection instanceof $t))return!1;const t=e.getTextCursorPosition().block,n=t.content;let r=0;for(const o of n.rows)for(const s of o.cells){if("type"in s&&s.content.length>0||!("type"in s)&&s.length>0)return!1;r++}let i=0;return e.prosemirrorState.selection.forEachCell(()=>{i++}),i<r?!1:(e.transact(()=>{(e.getPrevBlock(t)||e.getNextBlock(t))&&e.setTextCursorPosition(t),e.removeBlocks([t])}),!0)}}})]),HR=e=>{const t=e.src||void 0,n=e.width||void 0;return{url:t,previewWidth:n}},jZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',zZ=e=>({type:"video",propSchema:{textAlignment:Ot.textAlignment,backgroundColor:Ot.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),$Z=e=>t=>{if(t.tagName==="VIDEO"){if(t.closest("figure"))return;const{backgroundColor:n}=Xr(t);return{...HR(t),backgroundColor:n}}if(t.tagName==="FIGURE"){const n=ab(t,"video");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=Xr(t);return{...HR(r),backgroundColor:o,caption:i}}},VZ=xi(zZ,e=>({meta:{fileBlockAccept:["video/*"]},parse:$Z(),render(t,n){const r=document.createElement("div");r.innerHTML=e.icon??jZ;const i=document.createElement("div");i.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,i.appendChild(o),f5(t,n,{dom:i},i,r.firstElementChild)},toExternalHTML(t){if(!t.props.url){const r=document.createElement("p");return r.textContent="Add video",{dom:r}}let n;return t.props.showPreview?(n=document.createElement("video"),n.src=t.props.url,t.props.previewWidth&&(n.width=t.props.previewWidth)):(n=document.createElement("a"),n.href=t.props.url,n.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?cT(n,t.props.caption):lb(n,t.props.caption):{dom:n}},runsBefore:["file"]}));function cn(e,t,n){if(!(t in e.schema.blockSpecs))return!1;if(!n)return!0;for(const[r,i]of Object.entries(n)){if(!(r in e.schema.blockSpecs[t].config.propSchema))return!1;if(typeof i=="string"){if(e.schema.blockSpecs[t].config.propSchema[r].default&&typeof e.schema.blockSpecs[t].config.propSchema[r].default!==i||e.schema.blockSpecs[t].config.propSchema[r].type&&e.schema.blockSpecs[t].config.propSchema[r].type!==i)return!1}else{if(e.schema.blockSpecs[t].config.propSchema[r].default!==i.default||e.schema.blockSpecs[t].config.propSchema[r].default===void 0&&i.default===void 0&&e.schema.blockSpecs[t].config.propSchema[r].type!==i.type||typeof e.schema.blockSpecs[t].config.propSchema[r].values!=typeof i.values)return!1;if(typeof e.schema.blockSpecs[t].config.propSchema[r].values=="object"&&typeof i.values=="object"){if(e.schema.blockSpecs[t].config.propSchema[r].values.length!==i.values.length)return!1;for(let o=0;o<e.schema.blockSpecs[t].config.propSchema[r].values.length;o++)if(e.schema.blockSpecs[t].config.propSchema[r].values[o]!==i.values[o])return!1}}}return!0}function hi(e,t,n,r){return cn(t,n,r)&&e.type===n}function e2(e){return e instanceof $t}function qZ(e){let t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;for(;n==="none";){if(t=e.getTextCursorPosition().nextBlock,t===void 0)return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}function Ln(e,t){const n=e.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&dc(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=e.updateBlock(n,t),e.setTextCursorPosition(r)):(r=e.insertBlocks([t],n,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),qZ(e),r}function YZ(e){const t=[];return cn(e,"heading",{level:"number"})&&t.push({onItemClick:()=>{Ln(e,{type:"heading",props:{level:1}})},badge:ui("Mod-Alt-1"),key:"heading",...e.dictionary.slash_menu.heading},{onItemClick:()=>{Ln(e,{type:"heading",props:{level:2}})},badge:ui("Mod-Alt-2"),key:"heading_2",...e.dictionary.slash_menu.heading_2},{onItemClick:()=>{Ln(e,{type:"heading",props:{level:3}})},badge:ui("Mod-Alt-3"),key:"heading_3",...e.dictionary.slash_menu.heading_3}),cn(e,"quote")&&t.push({onItemClick:()=>{Ln(e,{type:"quote"})},key:"quote",...e.dictionary.slash_menu.quote}),cn(e,"toggleListItem")&&t.push({onItemClick:()=>{Ln(e,{type:"toggleListItem"})},badge:ui("Mod-Shift-6"),key:"toggle_list",...e.dictionary.slash_menu.toggle_list}),cn(e,"numberedListItem")&&t.push({onItemClick:()=>{Ln(e,{type:"numberedListItem"})},badge:ui("Mod-Shift-7"),key:"numbered_list",...e.dictionary.slash_menu.numbered_list}),cn(e,"bulletListItem")&&t.push({onItemClick:()=>{Ln(e,{type:"bulletListItem"})},badge:ui("Mod-Shift-8"),key:"bullet_list",...e.dictionary.slash_menu.bullet_list}),cn(e,"checkListItem")&&t.push({onItemClick:()=>{Ln(e,{type:"checkListItem"})},badge:ui("Mod-Shift-9"),key:"check_list",...e.dictionary.slash_menu.check_list}),cn(e,"paragraph")&&t.push({onItemClick:()=>{Ln(e,{type:"paragraph"})},badge:ui("Mod-Alt-0"),key:"paragraph",...e.dictionary.slash_menu.paragraph}),cn(e,"codeBlock")&&t.push({onItemClick:()=>{Ln(e,{type:"codeBlock"})},badge:ui("Mod-Alt-c"),key:"code_block",...e.dictionary.slash_menu.code_block}),cn(e,"divider")&&t.push({onItemClick:()=>{Ln(e,{type:"divider"})},key:"divider",...e.dictionary.slash_menu.divider}),cn(e,"table")&&t.push({onItemClick:()=>{Ln(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...e.dictionary.slash_menu.table}),cn(e,"image",{url:"string"})&&t.push({onItemClick:()=>{const n=Ln(e,{type:"image"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"image",...e.dictionary.slash_menu.image}),cn(e,"video",{url:"string"})&&t.push({onItemClick:()=>{const n=Ln(e,{type:"video"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"video",...e.dictionary.slash_menu.video}),cn(e,"audio",{url:"string"})&&t.push({onItemClick:()=>{const n=Ln(e,{type:"audio"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"audio",...e.dictionary.slash_menu.audio}),cn(e,"file",{url:"string"})&&t.push({onItemClick:()=>{const n=Ln(e,{type:"file"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"file",...e.dictionary.slash_menu.file}),cn(e,"heading",{level:"number",isToggleable:"boolean"})&&t.push({onItemClick:()=>{Ln(e,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...e.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{Ln(e,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...e.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{Ln(e,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...e.dictionary.slash_menu.toggle_heading_3}),cn(e,"heading",{level:"number"})&&(e.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n>3).forEach(n=>{t.push({onItemClick:()=>{Ln(e,{type:"heading",props:{level:n}})},key:`heading_${n}`,...e.dictionary.slash_menu[`heading_${n}`]})}),t.push({onItemClick:()=>{e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...e.dictionary.slash_menu.emoji}),t}function GZ(e,t){return e.filter(({title:n,aliases:r})=>n.toLowerCase().includes(t.toLowerCase())||r&&r.filter(i=>i.toLowerCase().includes(t.toLowerCase())).length!==0)}const WZ={audio:eZ(),bulletListItem:vZ(),checkListItem:wZ(),codeBlock:rZ(),divider:oZ(),file:lZ(),heading:dZ(),image:bZ(),numberedListItem:xZ(),paragraph:m5(),quote:MZ(),table:FZ(),toggleListItem:_Z(),video:VZ()},KZ=i5({type:"textColor",propSchema:"string"},{render:()=>{const e=document.createElement("span");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const t=document.createElement("span");return e!==Ot.textColor.default&&(t.style.color=e in qa?qa[e].text:e),{dom:t,contentDOM:t}},parse:e=>{if(e.tagName==="SPAN"&&e.style.color)return e.style.color}}),QZ=i5({type:"backgroundColor",propSchema:"string"},{render:()=>{const e=document.createElement("span");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const t=document.createElement("span");return e!==Ot.backgroundColor.default&&(t.style.backgroundColor=e in qa?qa[e].background:e),{dom:t,contentDOM:t}},parse:e=>{if(e.tagName==="SPAN"&&e.style.backgroundColor)return e.style.backgroundColor}}),fT={bold:Mf(PQ,"boolean"),italic:Mf(GQ,"boolean"),underline:Mf(JQ,"boolean"),strike:Mf(XQ,"boolean"),code:Mf(jQ,"boolean"),textColor:KZ,backgroundColor:QZ};r5(fT);const b5={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},XZ=t5(b5);let y5=class E5 extends OX{static create(t){return new E5({blockSpecs:t?.blockSpecs??WZ,inlineContentSpecs:t?.inlineContentSpecs??b5,styleSpecs:t?.styleSpecs??fT})}};var eC,UR;function ZZ(){return UR||(UR=1,eC=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),eC}var JZ=ZZ();const eJ=ld(JZ);function v5(e={}){return new nt({view(t){return new tJ(t,e)}})}class tJ{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return t.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,a=o.height/i.offsetHeight;if(n){let h=t.nodeBefore,m=t.nodeAfter;if(h||m){let g=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(g){let y=g.getBoundingClientRect(),E=h?y.bottom:y.top;h&&m&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*a;r={left:y.left,right:y.right,top:E-C,bottom:E+C}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*s;r={left:h.left-m,right:h.left+m,top:h.top,bottom:h.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,f;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,f=-pageYOffset;else{let h=c.getBoundingClientRect(),m=h.width/c.offsetWidth,g=h.height/c.offsetHeight;u=h.left-c.scrollLeft*m,f=h.top-c.scrollTop*g}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-f)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=fL(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const Tr=()=>new Map,t2=e=>{const t=Tr();return e.forEach((n,r)=>{t.set(r,n)}),t},Nr=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},nJ=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},rJ=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Ks=()=>new Set,tC=e=>e[e.length-1],iJ=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Qs=Array.from,oJ=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},n2=Array.isArray;class db{constructor(){this._observers=Tr()}on(t,n){return Nr(this._observers,t,Ks).add(n),n}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Qs((this._observers.get(t)||Tr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Tr()}}class hT{constructor(){this._observers=Tr()}on(t,n){Nr(this._observers,t,Ks).add(n)}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Qs((this._observers.get(t)||Tr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Tr()}}const yo=Math.floor,jg=Math.abs,sJ=Math.log10,uo=(e,t)=>e<t?e:t,Eo=(e,t)=>e>t?e:t,aJ=Math.pow,C5=e=>e!==0?e<0:1/e<0,FR=1,jR=2,nC=4,rC=8,Dh=32,qs=64,xr=128,lJ=1<<29,fb=31,r2=63,Jl=127,cJ=2147483647,w5=Number.MAX_SAFE_INTEGER,uJ=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&yo(e)===e),dJ=String.fromCharCode,fJ=e=>e.toLowerCase(),hJ=/^\s*/g,pJ=e=>e.replace(hJ,""),mJ=/([A-Z])/g,zR=(e,t)=>pJ(e.replace(mJ,n=>`${t}${fJ(n)}`)),gJ=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},Lh=typeof TextEncoder<"u"?new TextEncoder:null,bJ=e=>Lh.encode(e),i2=Lh?bJ:gJ;let Jf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Jf&&Jf.decode(new Uint8Array).length===1&&(Jf=null);class hp{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ut=()=>new hp,yJ=e=>{const t=Ut();return e(t),St(t)},pT=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},St=e=>{const t=new Uint8Array(pT(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},EJ=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Eo(n,t)*2),e.cpos=0)},Wn=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},Ih=Wn,Fe=(e,t)=>{for(;t>Jl;)Wn(e,xr|Jl&t),t=yo(t/128);Wn(e,Jl&t)},mT=(e,t)=>{const n=C5(t);for(n&&(t=-t),Wn(e,(t>r2?xr:0)|(n?qs:0)|r2&t),t=yo(t/64);t>0;)Wn(e,(t>Jl?xr:0)|Jl&t),t=yo(t/128)},o2=new Uint8Array(3e4),vJ=o2.length/3,CJ=(e,t)=>{if(t.length<vJ){const n=Lh.encodeInto(t,o2).written||0;Fe(e,n);for(let r=0;r<n;r++)Wn(e,o2[r])}else Qt(e,i2(t))},wJ=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;Fe(e,r);for(let i=0;i<r;i++)Wn(e,n.codePointAt(i))},Yo=Lh&&Lh.encodeInto?CJ:wJ,hb=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=uo(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Eo(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Qt=(e,t)=>{Fe(e,t.byteLength),hb(e,t)},gT=(e,t)=>{EJ(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},SJ=(e,t)=>gT(e,4).setFloat32(0,t,!1),TJ=(e,t)=>gT(e,8).setFloat64(0,t,!1),xJ=(e,t)=>gT(e,8).setBigInt64(0,t,!1),$R=new DataView(new ArrayBuffer(4)),kJ=e=>($R.setFloat32(0,e),$R.getFloat32(0)===e),pc=(e,t)=>{switch(typeof t){case"string":Wn(e,119),Yo(e,t);break;case"number":uJ(t)&&jg(t)<=cJ?(Wn(e,125),mT(e,t)):kJ(t)?(Wn(e,124),SJ(e,t)):(Wn(e,123),TJ(e,t));break;case"bigint":Wn(e,122),xJ(e,t);break;case"object":if(t===null)Wn(e,126);else if(n2(t)){Wn(e,117),Fe(e,t.length);for(let n=0;n<t.length;n++)pc(e,t[n])}else if(t instanceof Uint8Array)Wn(e,116),Qt(e,t);else{Wn(e,118);const n=Object.keys(t);Fe(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];Yo(e,i),pc(e,t[i])}}break;case"boolean":Wn(e,t?120:121);break;default:Wn(e,127)}};class VR extends hp{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&Fe(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const qR=e=>{e.count>0&&(mT(e.encoder,e.count===1?e.s:-e.s),e.count>1&&Fe(e.encoder,e.count-2))};class zg{constructor(){this.encoder=new hp,this.s=0,this.count=0}write(t){this.s===t?this.count++:(qR(this),this.count=1,this.s=t)}toUint8Array(){return qR(this),St(this.encoder)}}const YR=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);mT(e.encoder,t),e.count>1&&Fe(e.encoder,e.count-2)}};class iC{constructor(){this.encoder=new hp,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(YR(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return YR(this),St(this.encoder)}}class _J{constructor(){this.sarr=[],this.s="",this.lensE=new zg}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new hp;return this.sarr.push(this.s),this.s="",Yo(t,this.sarr.join("")),hb(t,this.lensE.toUint8Array()),St(t)}}const vo=e=>new Error(e),fo=()=>{throw vo("Method unimplemented")},Ci=()=>{throw vo("Unexpected case")},S5=vo("Unexpected end of array"),T5=vo("Integer out of Range");class pb{constructor(t){this.arr=t,this.pos=0}}const wo=e=>new pb(e),AJ=e=>e.pos!==e.arr.length,NJ=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},zn=e=>NJ(e,it(e)),mc=e=>e.arr[e.pos++],it=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const i=e.arr[e.pos++];if(t=t+(i&Jl)*n,n*=128,i<xr)return t;if(t>w5)throw T5}throw S5},bT=e=>{let t=e.arr[e.pos++],n=t&r2,r=64;const i=(t&qs)>0?-1:1;if((t&xr)===0)return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&Jl)*r,r*=128,t<xr)return i*n;if(n>w5)throw T5}throw S5},MJ=e=>{let t=it(e);if(t===0)return"";{let n=String.fromCodePoint(mc(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(mc(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},RJ=e=>Jf.decode(zn(e)),Go=Jf?RJ:MJ,yT=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},OJ=e=>yT(e,4).getFloat32(0,!1),DJ=e=>yT(e,8).getFloat64(0,!1),LJ=e=>yT(e,8).getBigInt64(0,!1),IJ=[e=>{},e=>null,bT,OJ,DJ,LJ,e=>!1,e=>!0,Go,e=>{const t=it(e),n={};for(let r=0;r<t;r++){const i=Go(e);n[i]=ed(e)}return n},e=>{const t=it(e),n=[];for(let r=0;r<t;r++)n.push(ed(e));return n},zn],ed=e=>IJ[127-mc(e)](e);class GR extends pb{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),AJ(this)?this.count=it(this)+1:this.count=-1),this.count--,this.s}}class $g extends pb{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=bT(this);const t=C5(this.s);this.count=1,t&&(this.s=-this.s,this.count=it(this)+2)}return this.count--,this.s}}class oC extends pb{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=bT(this),n=t&1;this.diff=yo(t/2),this.count=1,n&&(this.count=it(this)+2)}return this.s+=this.diff,this.count--,this.s}}class BJ{constructor(t){this.decoder=new $g(t),this.str=Go(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const PJ=crypto.getRandomValues.bind(crypto),x5=Math.random,k5=()=>PJ(new Uint32Array(1))[0],HJ=e=>e[yo(x5()*e.length)],UJ="10000000-1000-4000-8000"+-1e11,_5=()=>UJ.replace(/[018]/g,e=>(e^k5()&15>>e/4).toString(16)),wi=Date.now,td=e=>new Promise(e);Promise.all.bind(Promise);const FJ=e=>Promise.reject(e),ET=e=>Promise.resolve(e),WR=e=>e===void 0?null:e;class jJ{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let A5=new jJ,vT=!0;try{typeof localStorage<"u"&&localStorage&&(A5=localStorage,vT=!1)}catch{}const N5=A5,zJ=e=>vT||addEventListener("storage",e),$J=e=>vT||removeEventListener("storage",e),VJ=Object.assign,CT=Object.keys,qJ=(e,t)=>{for(const n in e)t(e[n],n)},YJ=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},KR=e=>CT(e).length,QR=e=>CT(e).length,GJ=e=>{for(const t in e)return!1;return!0},M5=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},R5=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),WJ=(e,t)=>e===t||QR(e)===QR(t)&&M5(e,(n,r)=>(n!==void 0||R5(t,r))&&t[r]===n),KJ=Object.freeze,O5=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&O5(e[t])}return KJ(e)},XR=Symbol("Equality"),wT=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&wT(e,t,n+1)}},QJ=()=>{},XJ=e=>e,eh=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[XR]!=null)return e[XR](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!eh(e.get(n),t.get(n)))return!1;break}case Object:if(KR(e)!==KR(t))return!1;for(const n in e)if(!R5(e,n)||!eh(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!eh(e[n],t[n]))return!1;break;default:return!1}return!0},ZJ=(e,t)=>t.includes(e);var D5={};const rl=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",ST=typeof window<"u"&&typeof document<"u"&&!rl;let Bo;const JJ=()=>{if(Bo===void 0)if(rl){Bo=Tr();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Bo.set(t,""),t=r):t!==null&&(Bo.set(t,r),t=null)}t!==null&&Bo.set(t,"")}else typeof location=="object"?(Bo=Tr(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Bo.set(`--${zR(t,"-")}`,n),Bo.set(`-${zR(t,"-")}`,n)}})):Bo=Tr();return Bo},s2=e=>JJ().has(e),Bh=e=>WR(rl?D5[e.toUpperCase().replaceAll("-","_")]:N5.getItem(e)),L5=e=>s2("--"+e)||Bh(e)!==null;L5("production");const eee=rl&&ZJ(D5.FORCE_COLOR,["true","1","2"]),tee=eee||!s2("--no-colors")&&!L5("no-color")&&(!rl||process.stdout.isTTY)&&(!rl||s2("--color")||Bh("COLORTERM")!==null||(Bh("TERM")||"").includes("color")),I5=e=>new Uint8Array(e),nee=(e,t,n)=>new Uint8Array(e,t,n),ree=e=>new Uint8Array(e),iee=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=dJ(e[n]);return btoa(t)},oee=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),see=e=>{const t=atob(e),n=I5(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},aee=e=>{const t=Buffer.from(e,"base64");return nee(t.buffer,t.byteOffset,t.byteLength)},TT=ST?iee:oee,B5=ST?see:aee,lee=e=>{const t=I5(e.byteLength);return t.set(e),t},cee=e=>yJ(t=>pc(t,e));class uee{constructor(t,n){this.left=t,this.right=n}}const Ms=(e,t)=>new uee(e,t),dee=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const fee=e=>nJ(e,(t,n)=>`${n}:${t};`).join(""),hee=JSON.stringify,pee=e=>class{constructor(n){this._=n}destroy(){e(this._)}},mee=pee(clearTimeout),xT=(e,t)=>new mee(setTimeout(t,e)),Js=Symbol,qi=Js(),gc=Js(),P5=Js(),kT=Js(),H5=Js(),U5=Js(),F5=Js(),mb=Js(),gb=Js(),gee=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},ZR=[H5,F5,mb,P5];let sC=0,JR=wi();const bee=(e,t)=>{const n=ZR[sC],r=Bh("log"),i=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return sC=(sC+1)%ZR.length,t+=": ",i?(...o)=>{o.length===1&&o[0]?.constructor===Function&&(o=o[0]());const s=wi(),a=s-JR;JR=s,e(n,t,gb,...o.map(c=>{switch(c!=null&&c.constructor===Uint8Array&&(c=Array.from(c)),typeof c){case"string":case"symbol":return c;default:return hee(c)}}),n," +"+a+"ms")}:QJ},yee={[qi]:Ms("font-weight","bold"),[gc]:Ms("font-weight","normal"),[P5]:Ms("color","blue"),[H5]:Ms("color","green"),[kT]:Ms("color","grey"),[U5]:Ms("color","red"),[F5]:Ms("color","purple"),[mb]:Ms("color","orange"),[gb]:Ms("color","black")},Eee=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=Tr();let i=[],o=0;for(;o<e.length;o++){const s=e[o],a=yee[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const c=fee(r);o>0||c.length>0?(t.push("%c"+s),n.push(c)):t.push(s)}else break}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const s=e[o];s instanceof Symbol||i.push(s)}return i},j5=tee?Eee:gee,z5=(...e)=>{console.log(...j5(e)),V5.forEach(t=>t.print(e))},$5=(...e)=>{console.warn(...j5(e)),e.unshift(mb),V5.forEach(t=>t.print(e))},V5=Ks(),vee=e=>bee(z5,e),q5=e=>({[Symbol.iterator](){return this},next:e}),Cee=(e,t)=>q5(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),aC=(e,t)=>q5(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class _T{constructor(t,n){this.clock=t,this.len=n}}class bd{constructor(){this.clients=new Map}}const il=(e,t,n)=>t.clients.forEach((r,i)=>{const o=e.doc.store.clients.get(i);if(o!=null){const s=o[o.length-1],a=s.id.clock+s.length;for(let c=0,u=r[c];c<r.length&&u.clock<a;u=r[++c])s8(e,o,u.clock,u.len,n)}}),wee=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=yo((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null},yd=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&wee(n,t.clock)!==null},AT=e=>{e.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<t.length;n++){const i=t[r-1],o=t[n];i.clock+i.len>=o.clock?i.len=Eo(i.len,o.clock+o.len-i.clock):(r<n&&(t[r]=o),r++)}t.length=r})},a2=e=>{const t=new bd;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let s=n+1;s<e.length;s++)iJ(o,e[s].clients.get(i)||[]);t.clients.set(i,o)}});return AT(t),t},Ph=(e,t,n,r)=>{Nr(e.clients,t,()=>[]).push(new _T(n,r))},Y5=()=>new bd,G5=e=>{const t=Y5();return e.clients.forEach((n,r)=>{const i=[];for(let o=0;o<n.length;o++){const s=n[o];if(s.deleted){const a=s.id.clock;let c=s.length;if(o+1<n.length)for(let u=n[o+1];o+1<n.length&&u.deleted;u=n[++o+1])c+=u.length;i.push(new _T(a,c))}}i.length>0&&t.clients.set(r,i)}),t},Ed=(e,t)=>{Fe(e.restEncoder,t.clients.size),Qs(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),Fe(e.restEncoder,n);const i=r.length;Fe(e.restEncoder,i);for(let o=0;o<i;o++){const s=r[o];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},NT=e=>{const t=new bd,n=it(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const i=it(e.restDecoder),o=it(e.restDecoder);if(o>0){const s=Nr(t.clients,i,()=>[]);for(let a=0;a<o;a++)s.push(new _T(e.readDsClock(),e.readDsLen()))}}return t},e4=(e,t,n)=>{const r=new bd,i=it(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const s=it(e.restDecoder),a=it(e.restDecoder),c=n.clients.get(s)||[],u=An(n,s);for(let f=0;f<a;f++){const h=e.readDsClock(),m=h+e.readDsLen();if(h<u){u<m&&Ph(r,s,u,m-u);let g=Xi(c,h),y=c[g];for(!y.deleted&&y.id.clock<h&&(c.splice(g+1,0,R0(t,y,h-y.id.clock)),g++);g<c.length&&(y=c[g++],y.id.clock<m);)y.deleted||(m<y.id.clock+y.length&&c.splice(g,0,R0(t,y,m-y.id.clock)),y.delete(t))}else Ph(r,s,h,m-h)}}if(r.clients.size>0){const o=new bc;return Fe(o.restEncoder,0),Ed(o,r),o.toUint8Array()}return null},W5=k5;class So extends db{constructor({guid:t=_5(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=W5(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new i8,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=td(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const c=()=>td(u=>{const f=h=>{(h===void 0||h===!0)&&(this.off("sync",f),u())};this.on("sync",f)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Gt(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Qs(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Gt(this,t,n)}get(t,n=Qn){const r=Nr(this.share,t,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Qn&&i!==n)if(i===Qn){const o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Uu)}getText(t=""){return this.get(t,ol)}getMap(t=""){return this.get(t,rd)}getXmlElement(t=""){return this.get(t,lr)}getXmlFragment(t=""){return this.get(t,sl)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,Qs(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new So({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Gt(t.parent.doc,r=>{const i=n.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class K5{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return it(this.restDecoder)}readDsLen(){return it(this.restDecoder)}}class Q5 extends K5{readLeftID(){return at(it(this.restDecoder),it(this.restDecoder))}readRightID(){return at(it(this.restDecoder),it(this.restDecoder))}readClient(){return it(this.restDecoder)}readInfo(){return mc(this.restDecoder)}readString(){return Go(this.restDecoder)}readParentInfo(){return it(this.restDecoder)===1}readTypeRef(){return it(this.restDecoder)}readLen(){return it(this.restDecoder)}readAny(){return ed(this.restDecoder)}readBuf(){return lee(zn(this.restDecoder))}readJSON(){return JSON.parse(Go(this.restDecoder))}readKey(){return Go(this.restDecoder)}}class See{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=it(this.restDecoder),this.dsCurrVal}readDsLen(){const t=it(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class nd extends See{constructor(t){super(t),this.keys=[],it(t),this.keyClockDecoder=new oC(zn(t)),this.clientDecoder=new $g(zn(t)),this.leftClockDecoder=new oC(zn(t)),this.rightClockDecoder=new oC(zn(t)),this.infoDecoder=new GR(zn(t),mc),this.stringDecoder=new BJ(zn(t)),this.parentInfoDecoder=new GR(zn(t),mc),this.typeRefDecoder=new $g(zn(t)),this.lenDecoder=new $g(zn(t))}readLeftID(){return new Pu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Pu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ed(this.restDecoder)}readBuf(){return zn(this.restDecoder)}readJSON(){return ed(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class X5{constructor(){this.restEncoder=Ut()}toUint8Array(){return St(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){Fe(this.restEncoder,t)}writeDsLen(t){Fe(this.restEncoder,t)}}class pp extends X5{writeLeftID(t){Fe(this.restEncoder,t.client),Fe(this.restEncoder,t.clock)}writeRightID(t){Fe(this.restEncoder,t.client),Fe(this.restEncoder,t.clock)}writeClient(t){Fe(this.restEncoder,t)}writeInfo(t){Ih(this.restEncoder,t)}writeString(t){Yo(this.restEncoder,t)}writeParentInfo(t){Fe(this.restEncoder,t?1:0)}writeTypeRef(t){Fe(this.restEncoder,t)}writeLen(t){Fe(this.restEncoder,t)}writeAny(t){pc(this.restEncoder,t)}writeBuf(t){Qt(this.restEncoder,t)}writeJSON(t){Yo(this.restEncoder,JSON.stringify(t))}writeKey(t){Yo(this.restEncoder,t)}}class Z5{constructor(){this.restEncoder=Ut(),this.dsCurrVal=0}toUint8Array(){return St(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,Fe(this.restEncoder,n)}writeDsLen(t){t===0&&Ci(),Fe(this.restEncoder,t-1),this.dsCurrVal+=t}}class bc extends Z5{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new iC,this.clientEncoder=new zg,this.leftClockEncoder=new iC,this.rightClockEncoder=new iC,this.infoEncoder=new VR(Ih),this.stringEncoder=new _J,this.parentInfoEncoder=new VR(Ih),this.typeRefEncoder=new zg,this.lenEncoder=new zg}toUint8Array(){const t=Ut();return Fe(t,0),Qt(t,this.keyClockEncoder.toUint8Array()),Qt(t,this.clientEncoder.toUint8Array()),Qt(t,this.leftClockEncoder.toUint8Array()),Qt(t,this.rightClockEncoder.toUint8Array()),Qt(t,St(this.infoEncoder)),Qt(t,this.stringEncoder.toUint8Array()),Qt(t,St(this.parentInfoEncoder)),Qt(t,this.typeRefEncoder.toUint8Array()),Qt(t,this.lenEncoder.toUint8Array()),hb(t,St(this.restEncoder)),St(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){pc(this.restEncoder,t)}writeBuf(t){Qt(this.restEncoder,t)}writeJSON(t){pc(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const Tee=(e,t,n,r)=>{r=Eo(r,t[0].id.clock);const i=Xi(t,r);Fe(e.restEncoder,t.length-i),e.writeClient(n),Fe(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)},MT=(e,t,n)=>{const r=new Map;n.forEach((i,o)=>{An(t,o)>i&&r.set(o,i)}),mp(t).forEach((i,o)=>{n.has(o)||r.set(o,0)}),Fe(e.restEncoder,r.size),Qs(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{Tee(e,t.clients.get(i),i,o)})},xee=(e,t)=>{const n=Tr(),r=it(e.restDecoder);for(let i=0;i<r;i++){const o=it(e.restDecoder),s=new Array(o),a=e.readClient();let c=it(e.restDecoder);n.set(a,{i:0,refs:s});for(let u=0;u<o;u++){const f=e.readInfo();switch(fb&f){case 0:{const h=e.readLen();s[u]=new $i(at(a,c),h),c+=h;break}case 10:{const h=it(e.restDecoder);s[u]=new Vi(at(a,c),h),c+=h;break}default:{const h=(f&(qs|xr))===0,m=new rn(at(a,c),null,(f&xr)===xr?e.readLeftID():null,null,(f&qs)===qs?e.readRightID():null,h?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,h&&(f&Dh)===Dh?e.readString():null,A8(e,f));s[u]=m,c+=m.length}}}}return n},kee=(e,t,n)=>{const r=[];let i=Qs(n.keys()).sort((g,y)=>g-y);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let g=n.get(i[i.length-1]);for(;g.refs.length===g.i;)if(i.pop(),i.length>0)g=n.get(i[i.length-1]);else return null;return g};let s=o();if(s===null)return null;const a=new i8,c=new Map,u=(g,y)=>{const E=c.get(g);(E==null||E>y)&&c.set(g,y)};let f=s.refs[s.i++];const h=new Map,m=()=>{for(const g of r){const y=g.id.client,E=n.get(y);E?(E.i--,a.clients.set(y,E.refs.slice(E.i)),n.delete(y),E.i=0,E.refs=[]):a.clients.set(y,[g]),i=i.filter(C=>C!==y)}r.length=0};for(;;){if(f.constructor!==Vi){const y=Nr(h,f.id.client,()=>An(t,f.id.client))-f.id.clock;if(y<0)r.push(f),u(f.id.client,f.id.clock-1),m();else{const E=f.getMissing(e,t);if(E!==null){r.push(f);const C=n.get(E)||{refs:[],i:0};if(C.refs.length===C.i)u(E,An(t,E)),m();else{f=C.refs[C.i++];continue}}else(y===0||y<f.length)&&(f.integrate(e,y),h.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(s!==null&&s.i<s.refs.length)f=s.refs[s.i++];else{if(s=o(),s===null)break;f=s.refs[s.i++]}}if(a.clients.size>0){const g=new bc;return MT(g,a,new Map),Fe(g.restEncoder,0),{missing:c,update:g.toUint8Array()}}return null},_ee=(e,t)=>MT(e,t.doc.store,t.beforeState),Aee=(e,t,n,r=new nd(e))=>Gt(t,i=>{i.local=!1;let o=!1;const s=i.doc,a=s.store,c=xee(r,s),u=kee(i,a,c),f=a.pendingStructs;if(f){for(const[m,g]of f.missing)if(g<An(a,m)){o=!0;break}if(u){for(const[m,g]of u.missing){const y=f.missing.get(m);(y==null||y>g)&&f.missing.set(m,g)}f.update=k0([f.update,u.update])}}else a.pendingStructs=u;const h=e4(r,i,a);if(a.pendingDs){const m=new nd(wo(a.pendingDs));it(m.restDecoder);const g=e4(m,i,a);h&&g?a.pendingDs=k0([h,g]):a.pendingDs=h||g}else a.pendingDs=h;if(o){const m=a.pendingStructs.update;a.pendingStructs=null,T0(i.doc,m)}},n,!1),T0=(e,t,n,r=nd)=>{const i=wo(t);Aee(i,e,n,new r(i))},x0=(e,t,n)=>T0(e,t,n,Q5),Nee=(e,t,n=new Map)=>{MT(e,t.store,n),Ed(e,G5(t.store))},Mee=(e,t=new Uint8Array([0]),n=new bc)=>{const r=J5(t);Nee(n,e,r);const i=[n.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(Wee(e.store.pendingStructs.update,t)),i.length>1){if(n.constructor===pp)return Yee(i.map((o,s)=>s===0?o:Qee(o)));if(n.constructor===bc)return k0(i)}return i[0]},Hh=(e,t)=>Mee(e,t,new pp),Ree=e=>{const t=new Map,n=it(e.restDecoder);for(let r=0;r<n;r++){const i=it(e.restDecoder),o=it(e.restDecoder);t.set(i,o)}return t},J5=e=>Ree(new K5(wo(e))),e8=(e,t)=>(Fe(e.restEncoder,t.size),Qs(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Fe(e.restEncoder,n),Fe(e.restEncoder,r)}),e),Oee=(e,t)=>e8(e,mp(t.store)),Dee=(e,t=new Z5)=>(e instanceof Map?e8(t,e):Oee(t,e),t.toUint8Array()),t8=e=>Dee(e,new X5);class Lee{constructor(){this.l=[]}}const t4=()=>new Lee,n4=(e,t)=>e.l.push(t),r4=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(i=>t!==i),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},n8=(e,t,n)=>wT(e.l,[t,n]);class Pu{constructor(t,n){this.client=t,this.clock=n}}const Ou=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,at=(e,t)=>new Pu(e,t),Uh=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Ci()},Fh=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1};class jh{constructor(t,n,r,i=0){this.type=t,this.tname=n,this.item=r,this.assoc=i}}const th=e=>new jh(e.type==null?null:at(e.type.client,e.type.clock),e.tname??null,e.item==null?null:at(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class Iee{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const Bee=(e,t,n=0)=>new Iee(e,t,n),ag=(e,t,n)=>{let r=null,i=null;return e._item===null?i=Uh(e):r=at(e._item.id.client,e._item.id.clock),new jh(r,i,t,n)},lC=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return ag(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return ag(e,at(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return ag(e,r.lastId,n);r=r.right}return ag(e,null,n)},Pee=(e,t)=>{const n=Hu(e,t),r=t.clock-n.id.clock;return{item:n,diff:r}},Hee=(e,t,n=!0)=>{const r=t.store,i=e.item,o=e.type,s=e.tname,a=e.assoc;let c=null,u=0;if(i!==null){if(An(r,i.client)<=i.clock)return null;const f=n?d2(r,i):Pee(r,i),h=f.item;if(!(h instanceof rn))return null;if(c=h.parent,c._item===null||!c._item.deleted){u=h.deleted||!h.countable?0:f.diff+(a>=0?0:1);let m=h.left;for(;m!==null;)!m.deleted&&m.countable&&(u+=m.length),m=m.left}}else{if(s!==null)c=t.get(s);else if(o!==null){if(An(r,o.client)<=o.clock)return null;const{item:f}=n?d2(r,o):{item:Hu(r,o)};if(f instanceof rn&&f.content instanceof To)c=f.content.type;else return null}else throw Ci();a>=0?u=c._length:u=0}return Bee(c,u,e.assoc)},i4=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&Ou(e.item,t.item)&&Ou(e.type,t.type)&&e.assoc===t.assoc;class RT{constructor(t,n){this.ds=t,this.sv=n}}const r8=(e,t)=>new RT(e,t),cC=e=>r8(G5(e.store),mp(e.store)),$l=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!yd(t.ds,e.id),l2=(e,t)=>{const n=Nr(e.meta,l2,Ks),r=e.doc.store;n.has(t)||(t.sv.forEach((i,o)=>{i<An(r,o)&&Vr(e,at(o,i))}),il(e,t.ds,i=>{}),n.add(t))};class i8{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const mp=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const i=n[n.length-1];t.set(r,i.id.clock+i.length)}),t},An=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},o8=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Ci()}n.push(t)},Xi=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=yo(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=yo((n+r)/2)}throw Ci()},Uee=(e,t)=>{const n=e.clients.get(t.client);return n[Xi(n,t.clock)]},Hu=Uee,c2=(e,t,n)=>{const r=Xi(t,n),i=t[r];return i.id.clock<n&&i instanceof rn?(t.splice(r+1,0,R0(e,i,n-i.id.clock)),r+1):r},Vr=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[c2(e,n,t.clock)]},o4=(e,t,n)=>{const r=t.clients.get(n.client),i=Xi(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==$i&&r.splice(i+1,0,R0(e,o,n.clock-o.id.clock+1)),o},Fee=(e,t,n)=>{const r=e.clients.get(t.id.client);r[Xi(r,t.id.clock)]=n},s8=(e,t,n,r,i)=>{if(r===0)return;const o=n+r;let s=c2(e,t,n),a;do a=t[s++],o<a.id.clock+a.length&&c2(e,t,o),i(a);while(s<t.length&&t[s].id.clock<o)};class jee{constructor(t,n,r){this.doc=t,this.deleteSet=new bd,this.beforeState=mp(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const s4=(e,t)=>t.deleteSet.clients.size===0&&!rJ(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(AT(t.deleteSet),_ee(e,t),Ed(e,t.deleteSet),!0),a4=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Nr(e.changed,t,Ks).add(n)},Vg=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0;n=r,r=e[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof rn&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=t-i;return o&&e.splice(t+1-o,o),o},zee=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){const a=i[s],c=a.clock+a.len;for(let u=Xi(o,a.clock),f=o[u];u<o.length&&f.id.clock<c;f=o[++u]){const h=o[u];if(a.clock+a.len<=h.id.clock)break;h instanceof rn&&h.deleted&&!h.keep&&n(h)&&h.gc(t,!1)}}}},$ee=(e,t)=>{e.clients.forEach((n,r)=>{const i=t.clients.get(r);for(let o=n.length-1;o>=0;o--){const s=n[o],a=uo(i.length-1,1+Xi(i,s.clock+s.len-1));for(let c=a,u=i[c];c>0&&u.id.clock>=s.clock;u=i[c])c-=1+Vg(i,c)}})},a8=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{AT(o),n.afterState=mp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((c,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(n,c)})),a.push(()=>{n.changedParentTypes.forEach((c,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(c=c.filter(f=>f.target._item===null||!f.target._item.deleted),c.forEach(f=>{f.currentTarget=u,f._path=null}),c.sort((f,h)=>f.path.length-h.path.length),n8(u._dEH,c,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),wT(a,[]),n._needFormattingCleanup&&ute(n)}finally{r.gc&&zee(o,i,r.gcFilter),$ee(o,i),n.afterState.forEach((f,h)=>{const m=n.beforeState.get(h)||0;if(m!==f){const g=i.clients.get(h),y=Eo(Xi(g,m),1);for(let E=g.length-1;E>=y;)E-=1+Vg(g,E)}});for(let f=s.length-1;f>=0;f--){const{client:h,clock:m}=s[f].id,g=i.clients.get(h),y=Xi(g,m);y+1<g.length&&Vg(g,y+1)>1||y>0&&Vg(g,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(z5(mb,qi,"[yjs] ",gc,U5,"Changed the client-id because another client seems to be using it."),r.clientID=W5()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new pp;s4(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new bc;s4(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:u}=n;(a.size>0||u.size>0||c.size>0)&&(a.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),u.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:c,added:a,removed:u},r,n]),u.forEach(f=>f.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):a8(e,t+1)}}},Gt=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,s=null;e._transaction===null&&(o=!0,e._transaction=new jee(e,n,r),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){const a=e._transaction===i[0];e._transaction=null,a&&a8(i,0)}}return s};class Vee{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const l4=(e,t,n)=>{il(e,n.deletions,r=>{r instanceof rn&&t.scope.some(i=>i===e.doc||Fh(i,r))&&UT(r,!1)})},c4=(e,t,n)=>{let r=null;const i=e.doc,o=e.scope;Gt(i,a=>{for(;t.length>0&&e.currStackItem===null;){const c=i.store,u=t.pop(),f=new Set,h=[];let m=!1;il(a,u.insertions,g=>{if(g instanceof rn){if(g.redone!==null){let{item:y,diff:E}=d2(c,g.id);E>0&&(y=Vr(a,at(y.id.client,y.id.clock+E))),g=y}!g.deleted&&o.some(y=>y===a.doc||Fh(y,g))&&h.push(g)}}),il(a,u.deletions,g=>{g instanceof rn&&o.some(y=>y===a.doc||Fh(y,g))&&!yd(u.insertions,g.id)&&f.add(g)}),f.forEach(g=>{m=_8(a,g,f,u.insertions,e.ignoreRemoteMapChanges,e)!==null||m});for(let g=h.length-1;g>=0;g--){const y=h[g];e.deleteFilter(y)&&(y.delete(a),m=!0)}e.currStackItem=m?u:null}a.changed.forEach((c,u)=>{c.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),r=a},e);const s=e.currStackItem;if(s!=null){const a=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:e},e]),e.currStackItem=null}return s};class l8 extends db{constructor(t,{captureTimeout:n=500,captureTransaction:r=c=>!0,deleteFilter:i=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=n2(t)?t[0].doc:t instanceof So?t:t.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(t),this.deleteFilter=i,o.add(this),this.trackedOrigins=o,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=c=>{if(!this.captureTransaction(c)||!this.scope.some(C=>c.changedParentTypes.has(C)||C===this.doc)||!this.trackedOrigins.has(c.origin)&&(!c.origin||!this.trackedOrigins.has(c.origin.constructor)))return;const u=this.undoing,f=this.redoing,h=u?this.redoStack:this.undoStack;u?this.stopCapturing():f||this.clear(!1,!0);const m=new bd;c.afterState.forEach((C,S)=>{const N=c.beforeState.get(S)||0,_=C-N;_>0&&Ph(m,S,N,_)});const g=wi();let y=!1;if(this.lastChange>0&&g-this.lastChange<this.captureTimeout&&h.length>0&&!u&&!f){const C=h[h.length-1];C.deletions=a2([C.deletions,c.deleteSet]),C.insertions=a2([C.insertions,m])}else h.push(new Vee(c.deleteSet,m)),y=!0;!u&&!f&&(this.lastChange=g),il(c,c.deleteSet,C=>{C instanceof rn&&this.scope.some(S=>S===c.doc||Fh(S,C))&&UT(C,!0)});const E=[{stackItem:h[h.length-1],origin:c.origin,type:u?"redo":"undo",changedParentTypes:c.changedParentTypes},this];y?this.emit("stack-item-added",E):this.emit("stack-item-updated",E)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){const n=new Set(this.scope);t=n2(t)?t:[t],t.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Qn?r.doc!==this.doc:r!==this.doc)&&$5("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(i=>l4(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>l4(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=c4(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=c4(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*qee(e){const t=it(e.restDecoder);for(let n=0;n<t;n++){const r=it(e.restDecoder),i=e.readClient();let o=it(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const c=it(e.restDecoder);yield new Vi(at(i,o),c),o+=c}else if((fb&a)!==0){const c=(a&(qs|xr))===0,u=new rn(at(i,o),null,(a&xr)===xr?e.readLeftID():null,null,(a&qs)===qs?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(a&Dh)===Dh?e.readString():null,A8(e,a));yield u,o+=u.length}else{const c=e.readLen();yield new $i(at(i,o),c),o+=c}}}}class OT{constructor(t,n){this.gen=qee(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Vi);return this.curr}}class DT{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Yee=e=>k0(e,Q5,pp),Gee=(e,t)=>{if(e.constructor===$i){const{client:n,clock:r}=e.id;return new $i(at(n,r+t),e.length-t)}else if(e.constructor===Vi){const{client:n,clock:r}=e.id;return new Vi(at(n,r+t),e.length-t)}else{const n=e,{client:r,clock:i}=n.id;return new rn(at(r,i+t),null,at(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},k0=(e,t=nd,n=bc)=>{if(e.length===1)return e[0];const r=e.map(f=>new t(wo(f)));let i=r.map(f=>new OT(f,!0)),o=null;const s=new n,a=new DT(s);for(;i=i.filter(m=>m.curr!==null),i.sort((m,g)=>{if(m.curr.id.client===g.curr.id.client){const y=m.curr.id.clock-g.curr.id.clock;return y===0?m.curr.constructor===g.curr.constructor?0:m.curr.constructor===Vi?1:-1:y}else return g.curr.id.client-m.curr.id.client}),i.length!==0;){const f=i[0],h=f.curr.id.client;if(o!==null){let m=f.curr,g=!1;for(;m!==null&&m.id.clock+m.length<=o.struct.id.clock+o.struct.length&&m.id.client>=o.struct.id.client;)m=f.next(),g=!0;if(m===null||m.id.client!==h||g&&m.id.clock>o.struct.id.clock+o.struct.length)continue;if(h!==o.struct.id.client)Ua(a,o.struct,o.offset),o={struct:m,offset:0},f.next();else if(o.struct.id.clock+o.struct.length<m.id.clock)if(o.struct.constructor===Vi)o.struct.length=m.id.clock+m.length-o.struct.id.clock;else{Ua(a,o.struct,o.offset);const y=m.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Vi(at(h,o.struct.id.clock+o.struct.length),y),offset:0}}else{const y=o.struct.id.clock+o.struct.length-m.id.clock;y>0&&(o.struct.constructor===Vi?o.struct.length-=y:m=Gee(m,y)),o.struct.mergeWith(m)||(Ua(a,o.struct,o.offset),o={struct:m,offset:0},f.next())}}else o={struct:f.curr,offset:0},f.next();for(let m=f.curr;m!==null&&m.id.client===h&&m.id.clock===o.struct.id.clock+o.struct.length&&m.constructor!==Vi;m=f.next())Ua(a,o.struct,o.offset),o={struct:m,offset:0}}o!==null&&(Ua(a,o.struct,o.offset),o=null),LT(a);const c=r.map(f=>NT(f)),u=a2(c);return Ed(s,u),s.toUint8Array()},Wee=(e,t,n=nd,r=bc)=>{const i=J5(t),o=new r,s=new DT(o),a=new n(wo(e)),c=new OT(a,!1);for(;c.curr;){const f=c.curr,h=f.id.client,m=i.get(h)||0;if(c.curr.constructor===Vi){c.next();continue}if(f.id.clock+f.length>m)for(Ua(s,f,Eo(m-f.id.clock,0)),c.next();c.curr&&c.curr.id.client===h;)Ua(s,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===h&&c.curr.id.clock+c.curr.length<=m;)c.next()}LT(s);const u=NT(a);return Ed(o,u),o.toUint8Array()},c8=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:St(e.encoder.restEncoder)}),e.encoder.restEncoder=Ut(),e.written=0)},Ua=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&c8(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Fe(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},LT=e=>{c8(e);const t=e.encoder.restEncoder;Fe(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];Fe(t,r.written),hb(t,r.restEncoder)}},Kee=(e,t,n,r)=>{const i=new n(wo(e)),o=new OT(i,!1),s=new r,a=new DT(s);for(let u=o.curr;u!==null;u=o.next())Ua(a,t(u),0);LT(a);const c=NT(i);return Ed(s,c),s.toUint8Array()},Qee=e=>Kee(e,XJ,nd,pp),u4="You must not compute changes after the event-handler fired.";class bb{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Xee(this.currentTarget,this.target))}deletes(t){return yd(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw vo(u4);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let s,a;if(this.adds(o)){let c=o.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(o))if(c!==null&&this.deletes(c))s="delete",a=tC(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",a=tC(c.content.getContent())):(s="add",a=void 0)}else if(this.deletes(o))s="delete",a=tC(o.content.getContent());else return;t.set(i,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw vo(u4);const n=this.target,r=Ks(),i=Ks(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const c=()=>{a&&o.push(a)};for(let u=n._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=u.length,i.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),r.add(u)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&c()}this._changes=t}return t}}const Xee=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}t=t._item.parent}return n},gr=()=>{$5("Invalid access: Add Yjs type to a document before reading data.")},u8=80;let IT=0;class Zee{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=IT++}}const Jee=e=>{e.timestamp=IT++},d8=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=IT++},ete=(e,t,n)=>{if(e.length>=u8){const r=e.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return d8(r,t,n),r}else{const r=new Zee(t,n);return e.push(r),r}},yb=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((o,s)=>jg(t-o.index)<jg(t-s.index)?o:s);let r=e._start,i=0;for(n!==null&&(r=n.p,i=n.index,Jee(n));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&jg(n.index-i)<r.parent.length/u8?(d8(n,r,i),n):ete(e._searchMarker,r,i)},zh=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=Eo(t,i.index+n))}},Eb=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;Nr(i,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;n8(r._eH,n,t)};class Qn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=t4(),this._dEH=t4(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw fo()}clone(){throw fo()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){n4(this._eH,t)}observeDeep(t){n4(this._dEH,t)}unobserve(t){r4(this._eH,t)}unobserveDeep(t){r4(this._dEH,t)}toJSON(){}}const f8=(e,t,n)=>{e.doc??gr(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)i.push(s[a]),r--;t=0}}o=o.right}return i},h8=e=>{e.doc??gr();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}n=n.right}return t},p8=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&$l(r,t)){const i=r.content.getContent();for(let o=0;o<i.length;o++)n.push(i[o])}r=r.right}return n},$h=(e,t)=>{let n=0,r=e._start;for(e.doc??gr();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],n++,e)}r=r.right}},m8=(e,t)=>{const n=[];return $h(e,(r,i)=>{n.push(t(r,i,e))}),n},tte=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},g8=(e,t)=>{e.doc??gr();const n=yb(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},_0=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,c=n===null?t._start:n.right;let u=[];const f=()=>{u.length>0&&(i=new rn(at(s,An(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new yc(u)),i.integrate(e,0),u=[])};r.forEach(h=>{if(h===null)u.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(h);break;default:switch(f(),h.constructor){case Uint8Array:case ArrayBuffer:i=new rn(at(s,An(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new gp(new Uint8Array(h))),i.integrate(e,0);break;case So:i=new rn(at(s,An(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new bp(h)),i.integrate(e,0);break;default:if(h instanceof Qn)i=new rn(at(s,An(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new To(h)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},b8=()=>vo("Length exceeded!"),y8=(e,t,n,r)=>{if(n>t._length)throw b8();if(n===0)return t._searchMarker&&zh(t._searchMarker,n,r.length),_0(e,t,null,r);const i=n,o=yb(t,n);let s=t._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Vr(e,at(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&zh(t._searchMarker,i,r.length),_0(e,t,s,r)},nte=(e,t,n)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return _0(e,t,i,n)},E8=(e,t,n,r)=>{if(r===0)return;const i=n,o=r,s=yb(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Vr(e,at(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Vr(e,at(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw b8();t._searchMarker&&zh(t._searchMarker,i,-o+r)},A0=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},BT=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(r==null)a=new yc([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new yc([r]);break;case Uint8Array:a=new gp(r);break;case So:a=new bp(r);break;default:if(r instanceof Qn)a=new To(r);else throw new Error("Unexpected content type")}new rn(at(s,An(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},PT=(e,t)=>{e.doc??gr();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},v8=e=>{const t={};return e.doc??gr(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},C8=(e,t)=>{e.doc??gr();const n=e._map.get(t);return n!==void 0&&!n.deleted},rte=(e,t)=>{const n={};return e._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&$l(o,t)&&(n[i]=o.content.getContent()[o.length-1])}),n},lg=e=>(e.doc??gr(),Cee(e._map.entries(),t=>!t[1].deleted));class ite extends bb{}class Uu extends Qn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Uu;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Uu}clone(){const t=new Uu;return t.insert(0,this.toArray().map(n=>n instanceof Qn?n.clone():n)),t}get length(){return this.doc??gr(),this._length}_callObserver(t,n){super._callObserver(t,n),Eb(this,t,new ite(this,t))}insert(t,n){this.doc!==null?Gt(this.doc,r=>{y8(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Gt(this.doc,n=>{nte(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Gt(this.doc,r=>{E8(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return g8(this,t)}toArray(){return h8(this)}slice(t=0,n=this.length){return f8(this,t,n)}toJSON(){return this.map(t=>t instanceof Qn?t.toJSON():t)}map(t){return m8(this,t)}forEach(t){$h(this,t)}[Symbol.iterator](){return tte(this)}_write(t){t.writeTypeRef(Nte)}}const ote=e=>new Uu;class ste extends bb{constructor(t,n,r){super(t,n),this.keysChanged=r}}class rd extends Qn{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new rd}clone(){const t=new rd;return this.forEach((n,r)=>{t.set(r,n instanceof Qn?n.clone():n)}),t}_callObserver(t,n){Eb(this,t,new ste(this,t,n))}toJSON(){this.doc??gr();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];t[r]=i instanceof Qn?i.toJSON():i}}),t}get size(){return[...lg(this)].length}keys(){return aC(lg(this),t=>t[0])}values(){return aC(lg(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return aC(lg(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??gr(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Gt(this.doc,n=>{A0(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Gt(this.doc,r=>{BT(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return PT(this,t)}has(t){return C8(this,t)}clear(){this.doc!==null?Gt(this.doc,t=>{this.forEach(function(n,r,i){A0(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Mte)}}const ate=e=>new rd,Ya=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&WJ(e,t);class u2{constructor(t,n,r,i){this.left=t,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Ci(),this.right.content.constructor){case Fn:this.right.deleted||vd(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const d4=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case Fn:t.right.deleted||vd(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Vr(e,at(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},cg=(e,t,n,r)=>{const i=new Map,o=r?yb(t,n):null;if(o){const s=new u2(o.p.left,o.p,o.index,i);return d4(e,s,n-o.index)}else{const s=new u2(null,t._start,0,i);return d4(e,s,n)}},w8=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Fn&&Ya(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((s,a)=>{const c=n.left,u=n.right,f=new rn(at(o,An(i.store,o)),c,c&&c.lastId,u,u&&u.id,t,null,new Fn(a,s));f.integrate(e,0),n.right=f,n.forward()})},vd=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},S8=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===Fn&&Ya(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},T8=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],u=n.currentAttributes.get(a)??null;if(!Ya(u,c)){s.set(a,u);const{left:f,right:h}=n;n.right=new rn(at(o,An(i.store,o)),f,f&&f.lastId,h,h&&h.id,t,null,new Fn(a,c)),n.right.integrate(e,0),n.forward()}}return s},uC=(e,t,n,r,i)=>{n.currentAttributes.forEach((m,g)=>{i[g]===void 0&&(i[g]=null)});const o=e.doc,s=o.clientID;S8(n,i);const a=T8(e,t,n,i),c=r.constructor===String?new Co(r):r instanceof Qn?new To(r):new kc(r);let{left:u,right:f,index:h}=n;t._searchMarker&&zh(t._searchMarker,n.index,c.getLength()),f=new rn(at(s,An(o.store,s)),u,u&&u.lastId,f,f&&f.id,t,null,c),f.integrate(e,0),n.right=f,n.index=h,n.forward(),w8(e,t,n,a)},f4=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;S8(n,i);const a=T8(e,t,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Fn));){if(!n.right.deleted)switch(n.right.content.constructor){case Fn:{const{key:c,value:u}=n.right.content,f=i[c];if(f!==void 0){if(Ya(f,u))a.delete(c);else{if(r===0)break e;a.set(c,u)}n.right.delete(e)}else n.currentAttributes.set(c,u);break}default:r<n.right.length&&Vr(e,at(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new rn(at(s,An(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Co(c)),n.right.integrate(e,0),n.forward()}w8(e,t,n,a)},x8=(e,t,n,r,i)=>{let o=t;const s=Tr();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===Fn){const u=o.content;s.set(u.key,u)}o=o.right}let a=0,c=!1;for(;t!==o;){if(n===t&&(c=!0),!t.deleted){const u=t.content;switch(u.constructor){case Fn:{const{key:f,value:h}=u,m=r.get(f)??null;(s.get(f)!==u||m===h)&&(t.delete(e),a++,!c&&(i.get(f)??null)===h&&m!==h&&(m===null?i.delete(f):i.set(f,m))),!c&&!t.deleted&&vd(i,u);break}}}t=t.right}return a},lte=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Fn){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},cte=e=>{let t=0;return Gt(e.doc,n=>{let r=e._start,i=e._start,o=Tr();const s=t2(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Fn:vd(s,i.content);break;default:t+=x8(n,r,i,o,s),o=t2(s),r=i;break}i=i.right}}),t},ute=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&s8(e,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===Fn&&s.constructor!==$i&&t.add(s.parent)})}Gt(n,r=>{il(e,e.deleteSet,i=>{if(i instanceof $i||!i.parent._hasFormatting||t.has(i.parent))return;const o=i.parent;i.content.constructor===Fn?t.add(o):lte(r,i)});for(const i of t)cte(i)})},h4=(e,t,n)=>{const r=n,i=t2(t.currentAttributes),o=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case To:case kc:case Co:n<t.right.length&&Vr(e,at(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&x8(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&zh(s._searchMarker,t.index,-r+n),t};class dte extends bb{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Gt(t,r=>{const i=new Map,o=new Map;let s=this.target._start,a=null;const c={};let u="",f=0,h=0;const m=()=>{if(a!==null){let g=null;switch(a){case"delete":h>0&&(g={delete:h}),h=0;break;case"insert":(typeof u=="object"||u.length>0)&&(g={insert:u},i.size>0&&(g.attributes={},i.forEach((y,E)=>{y!==null&&(g.attributes[E]=y)}))),u="";break;case"retain":f>0&&(g={retain:f},GJ(c)||(g.attributes=VJ({},c))),f=0;break}g&&n.push(g),a=null}};for(;s!==null;){switch(s.content.constructor){case To:case kc:this.adds(s)?this.deletes(s)||(m(),a="insert",u=s.content.getContent()[0],m()):this.deletes(s)?(a!=="delete"&&(m(),a="delete"),h+=1):s.deleted||(a!=="retain"&&(m(),a="retain"),f+=1);break;case Co:this.adds(s)?this.deletes(s)||(a!=="insert"&&(m(),a="insert"),u+=s.content.str):this.deletes(s)?(a!=="delete"&&(m(),a="delete"),h+=s.length):s.deleted||(a!=="retain"&&(m(),a="retain"),f+=s.length);break;case Fn:{const{key:g,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){const E=i.get(g)??null;Ya(E,y)?y!==null&&s.delete(r):(a==="retain"&&m(),Ya(y,o.get(g)??null)?delete c[g]:c[g]=y)}}else if(this.deletes(s)){o.set(g,y);const E=i.get(g)??null;Ya(E,y)||(a==="retain"&&m(),c[g]=E)}else if(!s.deleted){o.set(g,y);const E=c[g];E!==void 0&&(Ya(E,y)?E!==null&&s.delete(r):(a==="retain"&&m(),y===null?delete c[g]:c[g]=y))}s.deleted||(a==="insert"&&m(),vd(i,s.content));break}}s=s.right}for(m();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class ol extends Qn{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??gr(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new ol}clone(){const t=new ol;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new dte(this,t,n);Eb(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??gr();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Co&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Gt(this.doc,r=>{const i=new u2(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const s=t[o];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&uC(r,this,i,a,s.attributes||{})}else s.retain!==void 0?f4(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&h4(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??gr();const i=[],o=new Map,s=this.doc;let a="",c=this._start;function u(){if(a.length>0){const h={};let m=!1;o.forEach((y,E)=>{m=!0,h[E]=y});const g={insert:a};m&&(g.attributes=h),i.push(g),a=""}}const f=()=>{for(;c!==null;){if($l(c,t)||n!==void 0&&$l(c,n))switch(c.content.constructor){case Co:{const h=o.get("ychange");t!==void 0&&!$l(c,t)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(u(),o.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!$l(c,n)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(u(),o.set("ychange",r?r("added",c.id):{type:"added"})):h!==void 0&&(u(),o.delete("ychange")),a+=c.content.str;break}case To:case kc:{u();const h={insert:c.content.getContent()[0]};if(o.size>0){const m={};h.attributes=m,o.forEach((g,y)=>{m[y]=g})}i.push(h);break}case Fn:$l(c,t)&&(u(),vd(o,c.content));break}c=c.right}u()};return t||n?Gt(s,h=>{t&&l2(h,t),n&&l2(h,n),f()},"cleanup"):f(),i}insert(t,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Gt(i,o=>{const s=cg(o,this,t,!r);r||(r={},s.currentAttributes.forEach((a,c)=>{r[c]=a})),uC(o,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const i=this.doc;i!==null?Gt(i,o=>{const s=cg(o,this,t,!r);uC(o,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Gt(r,i=>{h4(i,cg(i,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const i=this.doc;i!==null?Gt(i,o=>{const s=cg(o,this,t,!1);s.right!==null&&f4(o,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Gt(this.doc,n=>{A0(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Gt(this.doc,r=>{BT(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return PT(this,t)}getAttributes(){return v8(this)}_write(t){t.writeTypeRef(Rte)}}const fte=e=>new ol;class dC{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??gr()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===lr||n.constructor===sl)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class sl extends Qn{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new sl}clone(){const t=new sl;return t.insert(0,this.toArray().map(n=>n instanceof Qn?n.clone():n)),t}get length(){return this.doc??gr(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new dC(this,t)}querySelector(t){t=t.toUpperCase();const r=new dC(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Qs(new dC(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Eb(this,t,new mte(this,n,t))}toString(){return m8(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),$h(this,o=>{i.insertBefore(o.toDOM(t,n,r),null)}),i}insert(t,n){this.doc!==null?Gt(this.doc,r=>{y8(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Gt(this.doc,r=>{const i=t&&t instanceof Qn?t._item:t;_0(r,this,i,n)});else{const r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw vo("Reference item not found");r.splice(i,0,...n)}}delete(t,n=1){this.doc!==null?Gt(this.doc,r=>{E8(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return h8(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return g8(this,t)}slice(t=0,n=this.length){return f8(this,t,n)}forEach(t){$h(this,t)}_write(t){t.writeTypeRef(Dte)}}const hte=e=>new sl;class lr extends sl{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new lr(this.nodeName)}clone(){const t=new lr(this.nodeName),n=this.getAttributes();return qJ(n,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof Qn?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const c=r[a];n.push(c+'="'+t[c]+'"')}const o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Gt(this.doc,n=>{A0(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Gt(this.doc,r=>{BT(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return PT(this,t)}hasAttribute(t){return C8(this,t)}getAttributes(t){return t?rte(this,t):v8(this)}toDOM(t=document,n={},r){const i=t.createElement(this.nodeName),o=this.getAttributes();for(const s in o){const a=o[s];typeof a=="string"&&i.setAttribute(s,a)}return $h(this,s=>{i.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(Ote),t.writeKey(this.nodeName)}}const pte=e=>new lr(e.readKey());class mte extends bb{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class N0 extends rd{constructor(t){super(),this.hookName=t}_copy(){return new N0(this.hookName)}clone(){const t=new N0(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(Lte),t.writeKey(this.hookName)}}const gte=e=>new N0(e.readKey());class mi extends ol{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new mi}clone(){const t=new mi;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const n=[];for(const i in t.attributes){const o=[];for(const s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const a=o.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Ite)}}const bte=e=>new mi;class HT{constructor(t,n){this.id=t,this.length=n}get deleted(){throw fo()}mergeWith(t){return!1}write(t,n,r){throw fo()}integrate(t,n){throw fo()}}const yte=0;class $i extends HT{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),o8(t.doc.store,this)}write(t,n){t.writeInfo(yte),t.writeLen(this.length-n)}getMissing(t,n){return null}}class gp{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new gp(this.content)}splice(t){throw fo()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const Ete=e=>new gp(e.readBuf());class Vh{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Vh(this.len)}splice(t){const n=new Vh(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Ph(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const vte=e=>new Vh(e.readLen()),k8=(e,t)=>new So({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class bp{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new bp(k8(this.doc.guid,this.opts))}splice(t){throw fo()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Cte=e=>new bp(k8(e.readString(),e.readAny()));class kc{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new kc(this.embed)}splice(t){throw fo()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const wte=e=>new kc(e.readJSON());class Fn{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Fn(this.key,this.value)}splice(t){throw fo()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Ste=e=>new Fn(e.readKey(),e.readJSON());class M0{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new M0(this.arr)}splice(t){const n=new M0(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const Tte=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const i=e.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new M0(n)},xte=Bh("node_env")==="development";class yc{constructor(t){this.arr=t,xte&&O5(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new yc(this.arr)}splice(t){const n=new yc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeAny(o)}}getRef(){return 8}}const kte=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new yc(n)};class Co{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Co(this.str)}splice(t){const n=new Co(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const _te=e=>new Co(e.readString()),Ate=[ote,ate,fte,pte,hte,gte,bte],Nte=0,Mte=1,Rte=2,Ote=3,Dte=4,Lte=5,Ite=6;class To{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new To(this.type._copy())}splice(t){throw fo()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const Bte=e=>new To(Ate[e.readTypeRef()](e)),d2=(e,t)=>{let n=t,r=0,i;do r>0&&(n=at(n.client,n.clock+r)),i=Hu(e,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof rn);return{item:i,diff:r}},UT=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},R0=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new rn(at(r,i+n),t,at(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=at(t.redone.client,t.redone.clock+n)),t.right=o,o.right!==null&&(o.right.left=o),e._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=n,o},p4=(e,t)=>oJ(e,n=>yd(n.deletions,t)),_8=(e,t,n,r,i,o)=>{const s=e.doc,a=s.store,c=s.clientID,u=t.redone;if(u!==null)return Vr(e,u);let f=t.parent._item,h=null,m;if(f!==null&&f.deleted===!0){if(f.redone===null&&(!n.has(f)||_8(e,f,n,r,i,o)===null))return null;for(;f.redone!==null;)f=Vr(e,f.redone)}const g=f===null?t.parent:f.content.type;if(t.parentSub===null){for(h=t.left,m=t;h!==null;){let S=h;for(;S!==null&&S.parent._item!==f;)S=S.redone===null?null:Vr(e,S.redone);if(S!==null&&S.parent._item===f){h=S;break}h=h.left}for(;m!==null;){let S=m;for(;S!==null&&S.parent._item!==f;)S=S.redone===null?null:Vr(e,S.redone);if(S!==null&&S.parent._item===f){m=S;break}m=m.right}}else if(m=null,t.right&&!i){for(h=t;h!==null&&h.right!==null&&(h.right.redone||yd(r,h.right.id)||p4(o.undoStack,h.right.id)||p4(o.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Vr(e,h.redone);if(h&&h.right!==null)return null}else h=g._map.get(t.parentSub)||null;const y=An(a,c),E=at(c,y),C=new rn(E,h,h&&h.lastId,m,m&&m.id,g,t.parentSub,t.content.copy());return t.redone=E,UT(C,!0),C.integrate(e,0),C};let rn=class f2 extends HT{constructor(t,n,r,i,o,s,a,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?jR:0}set marker(t){(this.info&rC)>0!==t&&(this.info^=rC)}get marker(){return(this.info&rC)>0}get keep(){return(this.info&FR)>0}set keep(t){this.keep!==t&&(this.info^=FR)}get countable(){return(this.info&jR)>0}get deleted(){return(this.info&nC)>0}set deleted(t){this.deleted!==t&&(this.info^=nC)}markDeleted(){this.info|=nC}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=An(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=An(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Pu&&this.id.client!==this.parent.client&&this.parent.clock>=An(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=o4(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Vr(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===$i||this.right&&this.right.constructor===$i)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===f2?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===f2&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Pu){const r=Hu(n,this.parent);r.constructor===$i?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=o4(t,t.doc.store,at(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),Ou(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Ou(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(Hu(t.doc.store,i.origin)))o.has(Hu(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),o8(t.doc.store,this),this.content.integrate(t,this),a4(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new $i(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:at(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Ou(t.origin,this.lastId)&&this.right===t&&Ou(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Ph(t.deleteSet,this.id.client,this.id.clock,this.length),a4(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Ci();this.content.gc(t),n?Fee(t,this,new $i(this.id,this.length)):this.content=new Vh(this.length)}write(t,n){const r=n>0?at(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&fb|(r===null?0:xr)|(i===null?0:qs)|(o===null?0:Dh);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const c=a._item;if(c===null){const u=Uh(a);t.writeParentInfo(!0),t.writeString(u)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Pu?(t.writeParentInfo(!1),t.writeLeftID(a)):Ci();o!==null&&t.writeString(o)}this.content.write(t,n)}};const A8=(e,t)=>Pte[t&fb](e),Pte=[()=>{Ci()},vte,Tte,Ete,_te,wte,Ste,Bte,kte,Cte,()=>{Ci()}],Hte=10;class Vi extends HT{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Ci()}write(t,n){t.writeInfo(Hte),Fe(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const N8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},M8="__ $YJS$ __";N8[M8]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");N8[M8]=!0;class wn extends Ze{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return wn.valid(r)?new wn(r):Ze.near(r)}content(){return De.empty}eq(t){return t instanceof wn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wn(t.resolve(n.pos))}getBookmark(){return new FT(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Ute(t)||!Fte(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&wn.valid(t))return t;let i=t.pos,o=null;for(let s=t.depth;;s--){let a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=n;let c=t.doc.resolve(i);if(wn.valid(c))return c}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!qe.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=t.doc.resolve(i);if(wn.valid(a))return a}return null}}}wn.prototype.visible=!1;wn.findFrom=wn.findGapCursorFrom;Ze.jsonID("gapcursor",wn);class FT{constructor(t){this.pos=t}map(t){return new FT(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return wn.valid(n)?new wn(n):Ze.near(n)}}function R8(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function Ute(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||R8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Fte(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||R8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function jte(){return new nt({props:{decorations:qte,createSelectionBetween(e,t,n){return t.pos==n.pos&&wn.valid(n)?new wn(n):null},handleClick:$te,handleKeyDown:zte,handleDOMEvents:{beforeinput:Vte}}})}const zte=DS({ArrowLeft:ug("horiz",-1),ArrowRight:ug("horiz",1),ArrowUp:ug("vert",-1),ArrowDown:ug("vert",1)});function ug(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){let s=r.selection,a=t>0?s.$to:s.$from,c=s.empty;if(s instanceof Ue){if(!o.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(t>0?a.after():a.before())}let u=wn.findGapCursorFrom(a,t,c);return u?(i&&i(r.tr.setSelection(new wn(u))),!0):!1}}function $te(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!wn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&qe.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new wn(r))),!0)}function Vte(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof wn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Ce.empty;for(let s=r.length-1;s>=0;s--)i=Ce.from(r[s].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new De(i,0,0));return o.setSelection(Ue.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function qte(e){if(!(e.selection instanceof wn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",ct.create(e.doc,[It.widget(e.selection.head,t,{key:"gapcursor"})])}var O0=200,Xn=function(){};Xn.prototype.append=function(t){return t.length?(t=Xn.from(t),!this.length&&t||t.length<O0&&this.leafAppend(t)||this.length<O0&&t.leafPrepend(this)||this.appendInner(t)):this};Xn.prototype.prepend=function(t){return t.length?Xn.from(t).append(this):this};Xn.prototype.appendInner=function(t){return new Yte(this,t)};Xn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Xn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Xn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Xn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Xn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(t(o,s))},n,r),i};Xn.from=function(t){return t instanceof Xn?t:t&&t.length?new O8(t):Xn.empty};var O8=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,s,a){for(var c=o;c<s;c++)if(i(this.values[c],a+c)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,s,a){for(var c=o-1;c>=s;c--)if(i(this.values[c],a+c)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=O0)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=O0)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Xn);Xn.empty=new O8([]);var Yte=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Xn);const Gte=500;class oo{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=t.tr,a,c,u=[],f=[];return this.items.forEach((h,m)=>{if(!h.step){i||(i=this.remapping(r,m+1),o=i.maps.length),o--,f.push(h);return}if(i){f.push(new Po(h.map));let g=h.step.map(i.slice(o)),y;g&&s.maybeStep(g).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],u.push(new Po(y,void 0,void 0,u.length+f.length))),o--,y&&i.appendMap(y,o)}else s.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(o)):h.selection,c=new oo(this.items.slice(0,r).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:s,selection:a}}addTransform(t,n,r,i){let o=[],s=this.eventCount,a=this.items,c=!i&&a.length?a.get(a.length-1):null;for(let f=0;f<t.steps.length;f++){let h=t.steps[f].invert(t.docs[f]),m=new Po(t.mapping.maps[f],h,n),g;(g=c&&c.merge(m))&&(m=g,f?o.pop():a=a.slice(0,a.length-1)),o.push(m),n&&(s++,n=void 0),i||(c=m)}let u=s-r.depth;return u>Kte&&(a=Wte(a,u),s-=u),new oo(a.append(o),s)}remapping(t,n){let r=new Wu;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new oo(this.items.append(t.map(n=>new Po(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},i);let c=n;this.items.forEach(m=>{let g=o.getMirror(--c);if(g==null)return;s=Math.min(s,g);let y=o.maps[g];if(m.step){let E=t.steps[g].invert(t.docs[g]),C=m.selection&&m.selection.map(o.slice(c+1,g));C&&a++,r.push(new Po(y,E,C))}else r.push(new Po(y))},i);let u=[];for(let m=n;m<s;m++)u.push(new Po(o.maps[m]));let f=this.items.slice(0,i).append(u).append(r),h=new oo(f,a);return h.emptyItemCount()>Gte&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=t)i.push(s),s.selection&&o++;else if(s.step){let c=s.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let f=s.selection&&s.selection.map(n.slice(r));f&&o++;let h=new Po(u.invert(),c,f),m,g=i.length-1;(m=i.length&&i[g].merge(h))?i[g]=m:i.push(h)}}else s.map&&r--},this.items.length,0),new oo(Xn.from(i.reverse()),o)}}oo.empty=new oo(Xn.empty,0);function Wte(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Po{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Po(n.getMap().invert(),n,this.selection)}}}class La{constructor(t,n,r,i,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const Kte=20;function Qte(e,t,n,r){let i=n.getMeta(ec),o;if(i)return i.historyState;n.getMeta(Jte)&&(e=new La(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(ec))return s.getMeta(ec).redo?new La(e.done.addTransform(n,void 0,r,qg(t)),e.undone,m4(n.mapping.maps),e.prevTime,e.prevComposition):new La(e.done,e.undone.addTransform(n,void 0,r,qg(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=e.prevTime==0||!s&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Xte(n,e.prevRanges)),u=s?fC(e.prevRanges,n.mapping):m4(n.mapping.maps);return new La(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,qg(t)),oo.empty,u,n.time,a??e.prevComposition)}else return(o=n.getMeta("rebased"))?new La(e.done.rebased(n,o),e.undone.rebased(n,o),fC(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new La(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),fC(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Xte(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(n=!0)}),n}function m4(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,o,s)=>t.push(o,s));return t}function fC(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function Zte(e,t,n){let r=qg(t),i=ec.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),c=new La(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(ec,{redo:n,historyState:c})}let hC=!1,g4=null;function qg(e){let t=e.plugins;if(g4!=t){hC=!1,g4=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){hC=!0;break}}return hC}const ec=new pt("history"),Jte=new pt("closeHistory");function ene(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new nt({key:ec,state:{init(){return new La(oo.empty,oo.empty,null,0,-1)},apply(t,n,r){return Qte(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?jT:r=="historyRedo"?zT:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function D8(e,t){return(n,r)=>{let i=ec.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let o=Zte(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const jT=D8(!1,!0),zT=D8(!0,!0);Ht.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new nt({key:new pt("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const s=o-i,a=0,c=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,c);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:t.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,c=o-r,u=a-c,f=a;return t.deleteRange(u,f),!(this.storage.characters({node:t.doc})>r)}})]}});Ht.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[v5(this.options)]}});Ht.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nt({key:new pt("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,o=[];if(!n||!r)return ct.create(e,[]);let s=0;this.options.mode==="deepest"&&e.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;s+=1});let a=0;return e.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(It.node(u,u+c.nodeSize,{class:this.options.className}))}),ct.create(e,o)}}})]}});var tne=Ht.create({name:"gapCursor",addProseMirrorPlugins(){return[jte()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Kt(Ge(e,"allowGapCursor",n)))!=null?t:null}}});Ht.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nt({key:new pt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((s,a)=>{const c=r>=a&&r<=a+s.nodeSize,u=!s.isLeaf&&tb(s);if((c||!this.options.showOnlyCurrent)&&u){const f=[this.options.emptyNodeClass];o&&f.push(this.options.emptyEditorClass);const h=It.node(a,a+s.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:c}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),ct.create(e,i)}}})]}});Ht.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new nt({key:new pt("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||w0(n.selection)||e.view.dragging?null:ct.create(n.doc,[It.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function b4({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}Ht.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new pt(this.name),n=((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new nt({key:t,appendTransaction:(i,o,s)=>{const{doc:a,tr:c,schema:u}=s,f=t.getState(s),h=a.content.size,m=u.nodes[n];if(f)return c.insert(h,m.create())},state:{init:(i,o)=>{const s=o.tr.doc.lastChild;return!b4({node:s,types:r})},apply:(i,o)=>{if(!i.docChanged)return o;const s=i.doc.lastChild;return!b4({node:s,types:r})}}})]}});var nne=Ht.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>jT(e,t),redo:()=>({state:e,dispatch:t})=>zT(e,t)}},addProseMirrorPlugins(){return[ene(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const rne="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ine="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",h2="numeric",p2="ascii",m2="alpha",nh="asciinumeric",$f="alphanumeric",g2="domain",L8="emoji",one="scheme",sne="slashscheme",pC="whitespace";function ane(e,t){return e in t||(t[e]=[]),t[e]}function Gl(e,t,n){t[h2]&&(t[nh]=!0,t[$f]=!0),t[p2]&&(t[nh]=!0,t[m2]=!0),t[nh]&&(t[$f]=!0),t[m2]&&(t[$f]=!0),t[$f]&&(t[g2]=!0),t[L8]&&(t[g2]=!0);for(const r in t){const i=ane(r,n);i.indexOf(e)<0&&i.push(e)}}function lne(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function $r(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}$r.groups={};$r.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],o=t.jr[r][1];if(o&&i.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||$r.groups;let i;return t&&t.j?i=t:(i=new $r(t),n&&r&&Gl(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const o=e.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(e[s]);return i.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||$r.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const o=t;let s,a=i.go(e);if(a?(s=new $r,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new $r,o){if(r)if(s.t&&typeof s.t=="string"){const c=Object.assign(lne(s.t,r),n);Gl(o,c,r)}else n&&Gl(o,n,r);s.t=o}return i.j[e]=s,s}};const ht=(e,t,n,r,i)=>e.ta(t,n,r,i),Cn=(e,t,n,r,i)=>e.tr(t,n,r,i),y4=(e,t,n,r,i)=>e.ts(t,n,r,i),Me=(e,t,n,r,i)=>e.tt(t,n,r,i),Ls="WORD",b2="UWORD",I8="ASCIINUMERICAL",B8="ALPHANUMERICAL",qh="LOCALHOST",y2="TLD",E2="UTLD",Yg="SCHEME",Nu="SLASH_SCHEME",$T="NUM",v2="WS",VT="NL",rh="OPENBRACE",ih="CLOSEBRACE",D0="OPENBRACKET",L0="CLOSEBRACKET",I0="OPENPAREN",B0="CLOSEPAREN",P0="OPENANGLEBRACKET",H0="CLOSEANGLEBRACKET",U0="FULLWIDTHLEFTPAREN",F0="FULLWIDTHRIGHTPAREN",j0="LEFTCORNERBRACKET",z0="RIGHTCORNERBRACKET",$0="LEFTWHITECORNERBRACKET",V0="RIGHTWHITECORNERBRACKET",q0="FULLWIDTHLESSTHAN",Y0="FULLWIDTHGREATERTHAN",G0="AMPERSAND",W0="APOSTROPHE",K0="ASTERISK",Ia="AT",Q0="BACKSLASH",X0="BACKTICK",Z0="CARET",Fa="COLON",qT="COMMA",J0="DOLLAR",Ho="DOT",e1="EQUALS",YT="EXCLAMATION",Hi="HYPHEN",oh="PERCENT",t1="PIPE",n1="PLUS",r1="POUND",sh="QUERY",GT="QUOTE",P8="FULLWIDTHMIDDLEDOT",WT="SEMI",Uo="SLASH",ah="TILDE",i1="UNDERSCORE",H8="EMOJI",o1="SYM";var U8=Object.freeze({__proto__:null,ALPHANUMERICAL:B8,AMPERSAND:G0,APOSTROPHE:W0,ASCIINUMERICAL:I8,ASTERISK:K0,AT:Ia,BACKSLASH:Q0,BACKTICK:X0,CARET:Z0,CLOSEANGLEBRACKET:H0,CLOSEBRACE:ih,CLOSEBRACKET:L0,CLOSEPAREN:B0,COLON:Fa,COMMA:qT,DOLLAR:J0,DOT:Ho,EMOJI:H8,EQUALS:e1,EXCLAMATION:YT,FULLWIDTHGREATERTHAN:Y0,FULLWIDTHLEFTPAREN:U0,FULLWIDTHLESSTHAN:q0,FULLWIDTHMIDDLEDOT:P8,FULLWIDTHRIGHTPAREN:F0,HYPHEN:Hi,LEFTCORNERBRACKET:j0,LEFTWHITECORNERBRACKET:$0,LOCALHOST:qh,NL:VT,NUM:$T,OPENANGLEBRACKET:P0,OPENBRACE:rh,OPENBRACKET:D0,OPENPAREN:I0,PERCENT:oh,PIPE:t1,PLUS:n1,POUND:r1,QUERY:sh,QUOTE:GT,RIGHTCORNERBRACKET:z0,RIGHTWHITECORNERBRACKET:V0,SCHEME:Yg,SEMI:WT,SLASH:Uo,SLASH_SCHEME:Nu,SYM:o1,TILDE:ah,TLD:y2,UNDERSCORE:i1,UTLD:E2,UWORD:b2,WORD:Ls,WS:v2});const Rs=/[a-z]/,Rf=new RegExp("\\p{L}","u"),mC=new RegExp("\\p{Emoji}","u"),Os=/\d/,gC=/\s/,E4="\r",bC=`
`,cne="",une="",yC="";let dg=null,fg=null;function dne(e=[]){const t={};$r.groups=t;const n=new $r;dg==null&&(dg=v4(rne)),fg==null&&(fg=v4(ine)),Me(n,"'",W0),Me(n,"{",rh),Me(n,"}",ih),Me(n,"[",D0),Me(n,"]",L0),Me(n,"(",I0),Me(n,")",B0),Me(n,"<",P0),Me(n,">",H0),Me(n,"",U0),Me(n,"",F0),Me(n,"",j0),Me(n,"",z0),Me(n,"",$0),Me(n,"",V0),Me(n,"",q0),Me(n,"",Y0),Me(n,"&",G0),Me(n,"*",K0),Me(n,"@",Ia),Me(n,"`",X0),Me(n,"^",Z0),Me(n,":",Fa),Me(n,",",qT),Me(n,"$",J0),Me(n,".",Ho),Me(n,"=",e1),Me(n,"!",YT),Me(n,"-",Hi),Me(n,"%",oh),Me(n,"|",t1),Me(n,"+",n1),Me(n,"#",r1),Me(n,"?",sh),Me(n,'"',GT),Me(n,"/",Uo),Me(n,";",WT),Me(n,"~",ah),Me(n,"_",i1),Me(n,"\\",Q0),Me(n,"",P8);const r=Cn(n,Os,$T,{[h2]:!0});Cn(r,Os,r);const i=Cn(r,Rs,I8,{[nh]:!0}),o=Cn(r,Rf,B8,{[$f]:!0}),s=Cn(n,Rs,Ls,{[p2]:!0});Cn(s,Os,i),Cn(s,Rs,s),Cn(i,Os,i),Cn(i,Rs,i);const a=Cn(n,Rf,b2,{[m2]:!0});Cn(a,Rs),Cn(a,Os,o),Cn(a,Rf,a),Cn(o,Os,o),Cn(o,Rs),Cn(o,Rf,o);const c=Me(n,bC,VT,{[pC]:!0}),u=Me(n,E4,v2,{[pC]:!0}),f=Cn(n,gC,v2,{[pC]:!0});Me(n,yC,f),Me(u,bC,c),Me(u,yC,f),Cn(u,gC,f),Me(f,E4),Me(f,bC),Cn(f,gC,f),Me(f,yC,f);const h=Cn(n,mC,H8,{[L8]:!0});Me(h,"#"),Cn(h,mC,h),Me(h,cne,h);const m=Me(h,une);Me(m,"#"),Cn(m,mC,h);const g=[[Rs,s],[Os,i]],y=[[Rs,null],[Rf,a],[Os,o]];for(let E=0;E<dg.length;E++)Aa(n,dg[E],y2,Ls,g);for(let E=0;E<fg.length;E++)Aa(n,fg[E],E2,b2,y);Gl(y2,{tld:!0,ascii:!0},t),Gl(E2,{utld:!0,alpha:!0},t),Aa(n,"file",Yg,Ls,g),Aa(n,"mailto",Yg,Ls,g),Aa(n,"http",Nu,Ls,g),Aa(n,"https",Nu,Ls,g),Aa(n,"ftp",Nu,Ls,g),Aa(n,"ftps",Nu,Ls,g),Gl(Yg,{scheme:!0,ascii:!0},t),Gl(Nu,{slashscheme:!0,ascii:!0},t),e=e.sort((E,C)=>E[0]>C[0]?1:-1);for(let E=0;E<e.length;E++){const C=e[E][0],N=e[E][1]?{[one]:!0}:{[sne]:!0};C.indexOf("-")>=0?N[g2]=!0:Rs.test(C)?Os.test(C)?N[nh]=!0:N[p2]=!0:N[h2]=!0,y4(n,C,C,N)}return y4(n,"localhost",qh,{ascii:!0}),n.jd=new $r(o1),{start:n,tokens:Object.assign({groups:t},U8)}}function F8(e,t){const n=fne(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let a=e,c=null,u=0,f=null,h=-1,m=-1;for(;s<r&&(c=a.go(n[s]));)a=c,a.accepts()?(h=0,m=0,f=a):h>=0&&(h+=n[s].length,m++),u+=n[s].length,o+=n[s].length,s++;o-=h,s-=m,u-=h,i.push({t:f.t,v:t.slice(o-u,o),s:o-u,e:o})}return i}function fne(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}function Aa(e,t,n,r,i){let o;const s=t.length;for(let a=0;a<s-1;a++){const c=t[a];e.j[c]?o=e.j[c]:(o=new $r(r),o.jr=i.slice(),e.j[c]=o),e=o}return o=new $r(n),o.jr=i.slice(),e.j[t[s-1]]=o,o}function v4(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let o=0;for(;i.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let s=parseInt(e.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(e[r]),r++}return t}const Yh={defaultProtocol:"http",events:null,format:C4,formatHref:C4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function KT(e,t=null){let n=Object.assign({},Yh);e&&(n=Object.assign(n,e instanceof KT?e.o:e));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}KT.prototype={o:Yh,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Yh[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function C4(e){return e}function j8(e,t){this.t="token",this.v=e,this.tk=t}j8.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Yh.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),o=this.toFormattedString(e),s={},a=e.get("className",n,t),c=e.get("target",n,t),u=e.get("rel",n,t),f=e.getObj("attributes",n,t),h=e.getObj("events",n,t);return s.href=r,a&&(s.class=a),c&&(s.target=c),u&&(s.rel=u),f&&Object.assign(s,f),{tagName:i,attributes:s,content:o,eventListeners:h}}};function vb(e,t){class n extends j8{constructor(i,o){super(i,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const w4=vb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),S4=vb("text"),hne=vb("nl"),hg=vb("url",{isLink:!0,toHref(e=Yh.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==qh&&e[1].t===Fa}}),Bi=e=>new $r(e);function pne({groups:e}){const t=e.domain.concat([G0,K0,Ia,Q0,X0,Z0,J0,e1,Hi,$T,oh,t1,n1,r1,Uo,o1,ah,i1]),n=[W0,Fa,qT,Ho,YT,oh,sh,GT,WT,P0,H0,rh,ih,L0,D0,I0,B0,U0,F0,j0,z0,$0,V0,q0,Y0],r=[G0,W0,K0,Q0,X0,Z0,J0,e1,Hi,rh,ih,oh,t1,n1,r1,sh,Uo,o1,ah,i1],i=Bi(),o=Me(i,ah);ht(o,r,o),ht(o,e.domain,o);const s=Bi(),a=Bi(),c=Bi();ht(i,e.domain,s),ht(i,e.scheme,a),ht(i,e.slashscheme,c),ht(s,r,o),ht(s,e.domain,s);const u=Me(s,Ia);Me(o,Ia,u),Me(a,Ia,u),Me(c,Ia,u);const f=Me(o,Ho);ht(f,r,o),ht(f,e.domain,o);const h=Bi();ht(u,e.domain,h),ht(h,e.domain,h);const m=Me(h,Ho);ht(m,e.domain,h);const g=Bi(w4);ht(m,e.tld,g),ht(m,e.utld,g),Me(u,qh,g);const y=Me(h,Hi);Me(y,Hi,y),ht(y,e.domain,h),ht(g,e.domain,h),Me(g,Ho,m),Me(g,Hi,y);const E=Me(g,Fa);ht(E,e.numeric,w4);const C=Me(s,Hi),S=Me(s,Ho);Me(C,Hi,C),ht(C,e.domain,s),ht(S,r,o),ht(S,e.domain,s);const N=Bi(hg);ht(S,e.tld,N),ht(S,e.utld,N),ht(N,e.domain,s),ht(N,r,o),Me(N,Ho,S),Me(N,Hi,C),Me(N,Ia,u);const _=Me(N,Fa),O=Bi(hg);ht(_,e.numeric,O);const M=Bi(hg),R=Bi();ht(M,t,M),ht(M,n,R),ht(R,t,M),ht(R,n,R),Me(N,Uo,M),Me(O,Uo,M);const L=Me(a,Fa),F=Me(c,Fa),z=Me(F,Uo),B=Me(z,Uo);ht(a,e.domain,s),Me(a,Ho,S),Me(a,Hi,C),ht(c,e.domain,s),Me(c,Ho,S),Me(c,Hi,C),ht(L,e.domain,M),Me(L,Uo,M),Me(L,sh,M),ht(B,e.domain,M),ht(B,t,M),Me(B,Uo,M);const U=[[rh,ih],[D0,L0],[I0,B0],[P0,H0],[U0,F0],[j0,z0],[$0,V0],[q0,Y0]];for(let q=0;q<U.length;q++){const[re,J]=U[q],ae=Me(M,re);Me(R,re,ae),Me(ae,J,M);const W=Bi(hg);ht(ae,t,W);const Z=Bi();ht(ae,n),ht(W,t,W),ht(W,n,Z),ht(Z,t,W),ht(Z,n,Z),Me(W,J,M),Me(Z,J,M)}return Me(i,qh,N),Me(i,VT,hne),{start:i,tokens:U8}}function mne(e,t,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let a=e,c=null,u=null,f=0,h=null,m=-1;for(;i<r&&!(c=a.go(n[i].t));)s.push(n[i++]);for(;i<r&&(u=c||a.go(n[i].t));)c=null,a=u,a.accepts()?(m=0,h=a):m>=0&&m++,i++,f++;if(m<0)i-=f,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(EC(S4,t,s)),s=[]),i-=m,f-=m;const g=h.t,y=n.slice(i-f,i);o.push(EC(g,t,y))}}return s.length>0&&o.push(EC(S4,t,s)),o}function EC(e,t,n){const r=n[0].s,i=n[n.length-1].e,o=t.slice(r,i);return new e(o,n)}const gne=typeof console<"u"&&console&&console.warn||(()=>{}),bne="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",un={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function yne(){return $r.groups={},un.scanner=null,un.parser=null,un.tokenQueue=[],un.pluginQueue=[],un.customSchemes=[],un.initialized=!1,un}function T4(e,t=!1){if(un.initialized&&gne(`linkifyjs: already initialized - will not register custom scheme "${e}" ${bne}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);un.customSchemes.push([e,t])}function Ene(){un.scanner=dne(un.customSchemes);for(let e=0;e<un.tokenQueue.length;e++)un.tokenQueue[e][1]({scanner:un.scanner});un.parser=pne(un.scanner.tokens);for(let e=0;e<un.pluginQueue.length;e++)un.pluginQueue[e][1]({scanner:un.scanner,parser:un.parser});return un.initialized=!0,un}function QT(e){return un.initialized||Ene(),mne(un.parser.start,e,F8(un.scanner.start,e))}QT.scan=F8;function z8(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new KT(n),i=QT(e),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!t||a.t===t)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var XT="[\0- -\u2029]",vne=new RegExp(XT),Cne=new RegExp(`${XT}$`),wne=new RegExp(XT,"g");function Sne(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Tne(e){return new nt({key:new pt("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),o=t.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=J1(n.doc,[...t]);if(QS(a).forEach(({newRange:u})=>{const f=AI(r.doc,u,g=>g.isTextblock);let h,m;if(f.length>1)h=f[0],m=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(f.length){const g=r.doc.textBetween(u.from,u.to," "," ");if(!Cne.test(g))return;h=f[0],m=r.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&m){const g=m.split(vne).filter(Boolean);if(g.length<=0)return!1;const y=g[g.length-1],E=h.pos+m.lastIndexOf(y);if(!y)return!1;const C=QT(y).map(S=>S.toObject(e.defaultProtocol));if(!Sne(C))return!1;C.filter(S=>S.isLink).map(S=>({...S,from:E+S.start+1,to:E+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>e.validate(S.value)).filter(S=>e.shouldAutoLink(S.value)).forEach(S=>{XS(S.from,S.to,r.doc).some(N=>N.mark.type===e.type)||s.addMark(S.from,S.to,e.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function xne(e){return new nt({key:new pt("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,o;if(r.button!==0||!t.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{let f=r.target;const h=[];for(;f.nodeName!=="DIV";)h.push(f),f=f.parentNode;s=h.find(m=>m.nodeName==="A")}if(!s)return!1;const a=LI(t.state,e.type.name),c=(i=s?.href)!=null?i:a.href,u=(o=s?.target)!=null?o:a.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),s&&c?(window.open(c,u),!0):!1}}})}function kne(e){return new nt({key:new pt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:o}=t,{selection:s}=o,{empty:a}=s;if(a)return!1;let c="";r.content.forEach(f=>{c+=f.textContent});const u=z8(c,{defaultProtocol:e.defaultProtocol}).find(f=>f.isLink&&f.value===c);return!c||!u||i!==void 0&&!i(u.href)?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function Ul(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(wne,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var _ne=Ti.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){T4(e);return}T4(e.scheme,e.optionalSlashes)})},onDestroy(){yne()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Ul(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Ul(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Ul(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ei(this.options.HTMLAttributes,e),0]:["a",Ei(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[uc({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=z8(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!Ul(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&t.push({text:o.value,data:{href:o.href},index:o.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Tne({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ul(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(xne({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(kne({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),Ane=Zi.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""});class yp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}yp.prototype.normal={};yp.prototype.property={};yp.prototype.space=void 0;function $8(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new yp(n,r,t)}function Gh(e){return e.toLowerCase()}class Zr{constructor(t,n){this.attribute=n,this.property=t}}Zr.prototype.attribute="";Zr.prototype.booleanish=!1;Zr.prototype.boolean=!1;Zr.prototype.commaOrSpaceSeparated=!1;Zr.prototype.commaSeparated=!1;Zr.prototype.defined=!1;Zr.prototype.mustUseProperty=!1;Zr.prototype.number=!1;Zr.prototype.overloadedBoolean=!1;Zr.prototype.property="";Zr.prototype.spaceSeparated=!1;Zr.prototype.space=void 0;let Nne=0;const ft=_c(),Bn=_c(),C2=_c(),Oe=_c(),en=_c(),Fu=_c(),ci=_c();function _c(){return 2**++Nne}const w2=Object.freeze(Object.defineProperty({__proto__:null,boolean:ft,booleanish:Bn,commaOrSpaceSeparated:ci,commaSeparated:Fu,number:Oe,overloadedBoolean:C2,spaceSeparated:en},Symbol.toStringTag,{value:"Module"})),vC=Object.keys(w2);class ZT extends Zr{constructor(t,n,r,i){let o=-1;if(super(t,n),x4(this,"space",i),typeof r=="number")for(;++o<vC.length;){const s=vC[o];x4(this,vC[o],(r&w2[s])===w2[s])}}}ZT.prototype.defined=!0;function x4(e,t,n){n&&(e[t]=n)}function Cd(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new ZT(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Gh(r)]=r,n[Gh(o.attribute)]=r}return new yp(t,n,e.space)}const V8=Cd({properties:{ariaActiveDescendant:null,ariaAtomic:Bn,ariaAutoComplete:null,ariaBusy:Bn,ariaChecked:Bn,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:en,ariaCurrent:null,ariaDescribedBy:en,ariaDetails:null,ariaDisabled:Bn,ariaDropEffect:en,ariaErrorMessage:null,ariaExpanded:Bn,ariaFlowTo:en,ariaGrabbed:Bn,ariaHasPopup:null,ariaHidden:Bn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:en,ariaLevel:Oe,ariaLive:null,ariaModal:Bn,ariaMultiLine:Bn,ariaMultiSelectable:Bn,ariaOrientation:null,ariaOwns:en,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Bn,ariaReadOnly:Bn,ariaRelevant:null,ariaRequired:Bn,ariaRoleDescription:en,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Bn,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function q8(e,t){return t in e?e[t]:t}function Y8(e,t){return q8(e,t.toLowerCase())}const Mne=Cd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Fu,acceptCharset:en,accessKey:en,action:null,allow:null,allowFullScreen:ft,allowPaymentRequest:ft,allowUserMedia:ft,alt:null,as:null,async:ft,autoCapitalize:null,autoComplete:en,autoFocus:ft,autoPlay:ft,blocking:en,capture:null,charSet:null,checked:ft,cite:null,className:en,cols:Oe,colSpan:null,content:null,contentEditable:Bn,controls:ft,controlsList:en,coords:Oe|Fu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ft,defer:ft,dir:null,dirName:null,disabled:ft,download:C2,draggable:Bn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ft,formTarget:null,headers:en,height:Oe,hidden:C2,high:Oe,href:null,hrefLang:null,htmlFor:en,httpEquiv:en,id:null,imageSizes:null,imageSrcSet:null,inert:ft,inputMode:null,integrity:null,is:null,isMap:ft,itemId:null,itemProp:en,itemRef:en,itemScope:ft,itemType:en,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ft,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:ft,muted:ft,name:null,nonce:null,noModule:ft,noValidate:ft,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ft,optimum:Oe,pattern:null,ping:en,placeholder:null,playsInline:ft,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ft,referrerPolicy:null,rel:en,required:ft,reversed:ft,rows:Oe,rowSpan:Oe,sandbox:en,scope:null,scoped:ft,seamless:ft,selected:ft,shadowRootClonable:ft,shadowRootDelegatesFocus:ft,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Bn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:ft,useMap:null,value:Bn,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:en,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ft,declare:ft,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:ft,noHref:ft,noShade:ft,noWrap:ft,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Bn,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ft,disableRemotePlayback:ft,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:Y8}),Rne=Cd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ci,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:en,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:ft,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Fu,g2:Fu,glyphName:Fu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:ci,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:en,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ci,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ci,rev:ci,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ci,requiredFeatures:ci,requiredFonts:ci,requiredFormats:ci,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:ci,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ci,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ci,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:q8}),G8=Cd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),W8=Cd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Y8}),K8=Cd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),One=/[A-Z]/g,k4=/-[a-z]/g,Dne=/^data[-\w.:]+$/i;function JT(e,t){const n=Gh(t);let r=t,i=Zr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Dne.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(k4,Ine);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!k4.test(o)){let s=o.replace(One,Lne);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}i=ZT}return new i(r,t)}function Lne(e){return"-"+e.toLowerCase()}function Ine(e){return e.charAt(1).toUpperCase()}const Cb=$8([V8,Mne,G8,W8,K8],"html"),Ep=$8([V8,Rne,G8,W8,K8],"svg");function _4(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const s=n.slice(i,r).trim();(s||!o)&&t.push(s),i=r+1,r=n.indexOf(",",i)}return t}function Bne(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const A4=/[#.]/g;function Pne(e,t){const n=e||"",r={};let i=0,o,s;for(;i<n.length;){A4.lastIndex=i;const a=A4.exec(n),c=n.slice(i,a?a.index:n.length);c&&(o?o==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:s=c,i+=c.length),a&&(o=a[0],i++)}return{type:"element",tagName:s||t||"div",properties:r,children:[]}}function N4(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Hne(e){return e.join(" ").trim()}function Q8(e,t,n){const r=n?zne(n):void 0;function i(o,s,...a){let c;if(o==null){c={type:"root",children:[]};const u=s;a.unshift(u)}else{c=Pne(o,t);const u=c.tagName.toLowerCase(),f=r?r.get(u):void 0;if(c.tagName=f||u,Une(s))a.unshift(s);else for(const[h,m]of Object.entries(s))Fne(e,c.properties,h,m)}for(const u of a)S2(c.children,u);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function Une(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const o=i;for(const s of o)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Fne(e,t,n,r){const i=JT(e,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=N4(r):i.commaSeparated?o=_4(r):i.commaOrSpaceSeparated?o=N4(_4(r).join(" ")):o=M4(i,i.property,r):Array.isArray(r)?o=[...r]:o=i.property==="style"?jne(r):String(r);if(Array.isArray(o)){const s=[];for(const a of o)s.push(M4(i,i.property,a));o=s}i.property==="className"&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[i.property]=o}}function S2(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)S2(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?S2(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function M4(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Gh(n)===Gh(t)))return!0}return n}function jne(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function zne(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const $ne=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],X8=Q8(Cb,"div"),Z8=Q8(Ep,"g",$ne);function Vne(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=t.length){let s=0;for(;;){let a=n[s];if(a===void 0){const c=R4(t,n[s-1]);a=c===-1?t.length+1:c+1,n[s]=a}if(a>o)return{line:s+1,column:o-(s>0?n[s-1]:0)+1,offset:o};s++}}}function i(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const a=n[n.length-1],c=R4(t,a),u=c===-1?t.length+1:c+1;if(a===u)break;n.push(u)}const s=(o.line>1?n[o.line-2]:0)+o.column-1;if(s<n[o.line-1])return s}}}function R4(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Gg={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},J8={}.hasOwnProperty,qne=Object.prototype;function Yne(e,t){const n=t||{};return ex({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ep:Cb,verbose:n.verbose||!1},e)}function ex(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Wg(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:e9(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const o=String(e.file),s=Vne(o),a=s.toPoint(0),c=s.toPoint(o.length);n.position={start:a,end:c}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Wg(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Wg(e,r,n),n}default:return n=Gne(e,t),n}}function e9(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=ex(e,t[n]);r.push(i)}return r}function Gne(e,t){const n=e.schema;e.schema=t.namespaceURI===Gg.svg?Ep:Cb;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],c=(a.prefix?a.prefix+":":"")+a.name;J8.call(qne,c)||(i[c]=a.value)}const s=(e.schema.space==="svg"?Z8:X8)(t.tagName,i,e9(e,t.childNodes));if(Wg(e,t,s),s.tagName==="template"){const a=t,c=a.sourceCodeLocation,u=c&&c.startTag&&Du(c.startTag),f=c&&c.endTag&&Du(c.endTag),h=ex(e,a.content);u&&f&&e.file&&(h.position={start:u.end,end:f.start}),s.content=h}return e.schema=n,s}function Wg(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Wne(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Wne(e,t,n){const r=Du(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const o={};let s;if(n.attrs)for(s in n.attrs)J8.call(n.attrs,s)&&(o[JT(e.schema,s).property]=Du(n.attrs[s]));n.startTag;const a=Du(n.startTag),c=n.endTag?Du(n.endTag):void 0,u={opening:a};c&&(u.closing=c),u.properties=o,t.data={position:u}}}return r}function Du(e){const t=O4({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=O4({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function O4(e){return e.line&&e.column?e:void 0}const Kne=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),pn="";var V;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(V||(V={}));const Hr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function t9(e){return e>=55296&&e<=57343}function Qne(e){return e>=56320&&e<=57343}function Xne(e,t){return(e-55296)*1024+9216+t}function n9(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function r9(e){return e>=64976&&e<=65007||Kne.has(e)}var ve;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ve||(ve={}));const Zne=65536;class Jne{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Zne,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:o}=this,s=i+n,a=o+n;return{code:t,startLine:r,endLine:r,startCol:s,endCol:s,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Qne(n))return this.pos++,this._addGap(),Xne(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,V.EOF;return this._err(ve.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,V.EOF;const r=this.html.charCodeAt(n);return r===V.CARRIAGE_RETURN?V.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,V.EOF;let t=this.html.charCodeAt(this.pos);return t===V.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,V.LINE_FEED):t===V.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,t9(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===V.LINE_FEED||t===V.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){n9(t)?this._err(ve.controlCharacterInInputStream):r9(t)&&this._err(ve.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Rt;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Rt||(Rt={}));function i9(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const ere=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),tre=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function nre(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=tre.get(e))!==null&&t!==void 0?t:e}var Kn;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Kn||(Kn={}));const rre=32;var Ga;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ga||(Ga={}));function T2(e){return e>=Kn.ZERO&&e<=Kn.NINE}function ire(e){return e>=Kn.UPPER_A&&e<=Kn.UPPER_F||e>=Kn.LOWER_A&&e<=Kn.LOWER_F}function ore(e){return e>=Kn.UPPER_A&&e<=Kn.UPPER_Z||e>=Kn.LOWER_A&&e<=Kn.LOWER_Z||T2(e)}function sre(e){return e===Kn.EQUALS||ore(e)}var Gn;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Gn||(Gn={}));var Bs;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Bs||(Bs={}));class are{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Gn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bs.Strict}startEntity(t){this.decodeMode=t,this.state=Gn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Gn.EntityStart:return t.charCodeAt(n)===Kn.NUM?(this.state=Gn.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Gn.NamedEntity,this.stateNamedEntity(t,n));case Gn.NumericStart:return this.stateNumericStart(t,n);case Gn.NumericDecimal:return this.stateNumericDecimal(t,n);case Gn.NumericHex:return this.stateNumericHex(t,n);case Gn.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|rre)===Kn.LOWER_X?(this.state=Gn.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Gn.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+Number.parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(T2(i)||ire(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(T2(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Kn.SEMI)this.consumed+=1;else if(this.decodeMode===Bs.Strict)return 0;return this.emitCodePoint(nre(this.result),this.consumed),this.errors&&(t!==Kn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Ga.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=lre(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Bs.Attribute&&(o===0||sre(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Ga.VALUE_LENGTH)>>14,o!==0){if(s===Kn.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Bs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Ga.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Ga.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Gn.NamedEntity:return this.result!==0&&(this.decodeMode!==Bs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Gn.NumericDecimal:return this.emitNumericEntity(0,2);case Gn.NumericHex:return this.emitNumericEntity(0,3);case Gn.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Gn.EntityStart:return 0}}}function lre(e,t,n,r){const i=(t&Ga.BRANCH_LENGTH)>>7,o=t&Ga.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const c=r-o;return c<0||c>=i?-1:e[n+c]-1}let s=n,a=s+i-1;for(;s<=a;){const c=s+a>>>1,u=e[c];if(u<r)s=c+1;else if(u>r)a=c-1;else return e[c+i]}return-1}var _e;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(_e||(_e={}));var tc;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(tc||(tc={}));var Fi;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Fi||(Fi={}));var de;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(de||(de={}));var x;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(x||(x={}));const cre=new Map([[de.A,x.A],[de.ADDRESS,x.ADDRESS],[de.ANNOTATION_XML,x.ANNOTATION_XML],[de.APPLET,x.APPLET],[de.AREA,x.AREA],[de.ARTICLE,x.ARTICLE],[de.ASIDE,x.ASIDE],[de.B,x.B],[de.BASE,x.BASE],[de.BASEFONT,x.BASEFONT],[de.BGSOUND,x.BGSOUND],[de.BIG,x.BIG],[de.BLOCKQUOTE,x.BLOCKQUOTE],[de.BODY,x.BODY],[de.BR,x.BR],[de.BUTTON,x.BUTTON],[de.CAPTION,x.CAPTION],[de.CENTER,x.CENTER],[de.CODE,x.CODE],[de.COL,x.COL],[de.COLGROUP,x.COLGROUP],[de.DD,x.DD],[de.DESC,x.DESC],[de.DETAILS,x.DETAILS],[de.DIALOG,x.DIALOG],[de.DIR,x.DIR],[de.DIV,x.DIV],[de.DL,x.DL],[de.DT,x.DT],[de.EM,x.EM],[de.EMBED,x.EMBED],[de.FIELDSET,x.FIELDSET],[de.FIGCAPTION,x.FIGCAPTION],[de.FIGURE,x.FIGURE],[de.FONT,x.FONT],[de.FOOTER,x.FOOTER],[de.FOREIGN_OBJECT,x.FOREIGN_OBJECT],[de.FORM,x.FORM],[de.FRAME,x.FRAME],[de.FRAMESET,x.FRAMESET],[de.H1,x.H1],[de.H2,x.H2],[de.H3,x.H3],[de.H4,x.H4],[de.H5,x.H5],[de.H6,x.H6],[de.HEAD,x.HEAD],[de.HEADER,x.HEADER],[de.HGROUP,x.HGROUP],[de.HR,x.HR],[de.HTML,x.HTML],[de.I,x.I],[de.IMG,x.IMG],[de.IMAGE,x.IMAGE],[de.INPUT,x.INPUT],[de.IFRAME,x.IFRAME],[de.KEYGEN,x.KEYGEN],[de.LABEL,x.LABEL],[de.LI,x.LI],[de.LINK,x.LINK],[de.LISTING,x.LISTING],[de.MAIN,x.MAIN],[de.MALIGNMARK,x.MALIGNMARK],[de.MARQUEE,x.MARQUEE],[de.MATH,x.MATH],[de.MENU,x.MENU],[de.META,x.META],[de.MGLYPH,x.MGLYPH],[de.MI,x.MI],[de.MO,x.MO],[de.MN,x.MN],[de.MS,x.MS],[de.MTEXT,x.MTEXT],[de.NAV,x.NAV],[de.NOBR,x.NOBR],[de.NOFRAMES,x.NOFRAMES],[de.NOEMBED,x.NOEMBED],[de.NOSCRIPT,x.NOSCRIPT],[de.OBJECT,x.OBJECT],[de.OL,x.OL],[de.OPTGROUP,x.OPTGROUP],[de.OPTION,x.OPTION],[de.P,x.P],[de.PARAM,x.PARAM],[de.PLAINTEXT,x.PLAINTEXT],[de.PRE,x.PRE],[de.RB,x.RB],[de.RP,x.RP],[de.RT,x.RT],[de.RTC,x.RTC],[de.RUBY,x.RUBY],[de.S,x.S],[de.SCRIPT,x.SCRIPT],[de.SEARCH,x.SEARCH],[de.SECTION,x.SECTION],[de.SELECT,x.SELECT],[de.SOURCE,x.SOURCE],[de.SMALL,x.SMALL],[de.SPAN,x.SPAN],[de.STRIKE,x.STRIKE],[de.STRONG,x.STRONG],[de.STYLE,x.STYLE],[de.SUB,x.SUB],[de.SUMMARY,x.SUMMARY],[de.SUP,x.SUP],[de.TABLE,x.TABLE],[de.TBODY,x.TBODY],[de.TEMPLATE,x.TEMPLATE],[de.TEXTAREA,x.TEXTAREA],[de.TFOOT,x.TFOOT],[de.TD,x.TD],[de.TH,x.TH],[de.THEAD,x.THEAD],[de.TITLE,x.TITLE],[de.TR,x.TR],[de.TRACK,x.TRACK],[de.TT,x.TT],[de.U,x.U],[de.UL,x.UL],[de.SVG,x.SVG],[de.VAR,x.VAR],[de.WBR,x.WBR],[de.XMP,x.XMP]]);function wb(e){var t;return(t=cre.get(e))!==null&&t!==void 0?t:x.UNKNOWN}const Ne=x,ure={[_e.HTML]:new Set([Ne.ADDRESS,Ne.APPLET,Ne.AREA,Ne.ARTICLE,Ne.ASIDE,Ne.BASE,Ne.BASEFONT,Ne.BGSOUND,Ne.BLOCKQUOTE,Ne.BODY,Ne.BR,Ne.BUTTON,Ne.CAPTION,Ne.CENTER,Ne.COL,Ne.COLGROUP,Ne.DD,Ne.DETAILS,Ne.DIR,Ne.DIV,Ne.DL,Ne.DT,Ne.EMBED,Ne.FIELDSET,Ne.FIGCAPTION,Ne.FIGURE,Ne.FOOTER,Ne.FORM,Ne.FRAME,Ne.FRAMESET,Ne.H1,Ne.H2,Ne.H3,Ne.H4,Ne.H5,Ne.H6,Ne.HEAD,Ne.HEADER,Ne.HGROUP,Ne.HR,Ne.HTML,Ne.IFRAME,Ne.IMG,Ne.INPUT,Ne.LI,Ne.LINK,Ne.LISTING,Ne.MAIN,Ne.MARQUEE,Ne.MENU,Ne.META,Ne.NAV,Ne.NOEMBED,Ne.NOFRAMES,Ne.NOSCRIPT,Ne.OBJECT,Ne.OL,Ne.P,Ne.PARAM,Ne.PLAINTEXT,Ne.PRE,Ne.SCRIPT,Ne.SECTION,Ne.SELECT,Ne.SOURCE,Ne.STYLE,Ne.SUMMARY,Ne.TABLE,Ne.TBODY,Ne.TD,Ne.TEMPLATE,Ne.TEXTAREA,Ne.TFOOT,Ne.TH,Ne.THEAD,Ne.TITLE,Ne.TR,Ne.TRACK,Ne.UL,Ne.WBR,Ne.XMP]),[_e.MATHML]:new Set([Ne.MI,Ne.MO,Ne.MN,Ne.MS,Ne.MTEXT,Ne.ANNOTATION_XML]),[_e.SVG]:new Set([Ne.TITLE,Ne.FOREIGN_OBJECT,Ne.DESC]),[_e.XLINK]:new Set,[_e.XML]:new Set,[_e.XMLNS]:new Set},x2=new Set([Ne.H1,Ne.H2,Ne.H3,Ne.H4,Ne.H5,Ne.H6]);de.STYLE,de.SCRIPT,de.XMP,de.IFRAME,de.NOEMBED,de.NOFRAMES,de.PLAINTEXT;var G;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(G||(G={}));const qr={DATA:G.DATA,RCDATA:G.RCDATA,RAWTEXT:G.RAWTEXT,SCRIPT_DATA:G.SCRIPT_DATA,PLAINTEXT:G.PLAINTEXT,CDATA_SECTION:G.CDATA_SECTION};function dre(e){return e>=V.DIGIT_0&&e<=V.DIGIT_9}function Vf(e){return e>=V.LATIN_CAPITAL_A&&e<=V.LATIN_CAPITAL_Z}function fre(e){return e>=V.LATIN_SMALL_A&&e<=V.LATIN_SMALL_Z}function Ra(e){return fre(e)||Vf(e)}function D4(e){return Ra(e)||dre(e)}function pg(e){return e+32}function o9(e){return e===V.SPACE||e===V.LINE_FEED||e===V.TABULATION||e===V.FORM_FEED}function L4(e){return o9(e)||e===V.SOLIDUS||e===V.GREATER_THAN_SIGN}function hre(e){return e===V.NULL?ve.nullCharacterReference:e>1114111?ve.characterReferenceOutsideUnicodeRange:t9(e)?ve.surrogateCharacterReference:r9(e)?ve.noncharacterCharacterReference:n9(e)||e===V.CARRIAGE_RETURN?ve.controlCharacterReference:null}class pre{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=G.DATA,this.returnState=G.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Jne(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new are(ere,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ve.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(ve.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=hre(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Rt.START_TAG,tagName:"",tagID:x.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Rt.END_TAG,tagName:"",tagID:x.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Rt.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Rt.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(i9(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ve.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=wb(t.tagName),t.type===Rt.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ve.endTagWithAttributes),t.selfClosing&&this._err(ve.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Rt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Rt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Rt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Rt.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=o9(t)?Rt.WHITESPACE_CHARACTER:t===V.NULL?Rt.NULL_CHARACTER:Rt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Rt.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=G.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Bs.Attribute:Bs.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===G.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===G.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===G.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case G.DATA:{this._stateData(t);break}case G.RCDATA:{this._stateRcdata(t);break}case G.RAWTEXT:{this._stateRawtext(t);break}case G.SCRIPT_DATA:{this._stateScriptData(t);break}case G.PLAINTEXT:{this._statePlaintext(t);break}case G.TAG_OPEN:{this._stateTagOpen(t);break}case G.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case G.TAG_NAME:{this._stateTagName(t);break}case G.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case G.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case G.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case G.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case G.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case G.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case G.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case G.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case G.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case G.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case G.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case G.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case G.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case G.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case G.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case G.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case G.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case G.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case G.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case G.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case G.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case G.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case G.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case G.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case G.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case G.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case G.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case G.BOGUS_COMMENT:{this._stateBogusComment(t);break}case G.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case G.COMMENT_START:{this._stateCommentStart(t);break}case G.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case G.COMMENT:{this._stateComment(t);break}case G.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case G.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case G.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case G.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case G.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case G.COMMENT_END:{this._stateCommentEnd(t);break}case G.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case G.DOCTYPE:{this._stateDoctype(t);break}case G.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case G.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case G.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case G.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case G.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case G.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case G.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case G.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case G.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case G.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case G.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case G.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case G.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case G.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case G.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case G.CDATA_SECTION:{this._stateCdataSection(t);break}case G.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case G.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case G.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case G.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case V.LESS_THAN_SIGN:{this.state=G.TAG_OPEN;break}case V.AMPERSAND:{this._startCharacterReference();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitCodePoint(t);break}case V.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case V.AMPERSAND:{this._startCharacterReference();break}case V.LESS_THAN_SIGN:{this.state=G.RCDATA_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case V.LESS_THAN_SIGN:{this.state=G.RAWTEXT_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Ra(t))this._createStartTagToken(),this.state=G.TAG_NAME,this._stateTagName(t);else switch(t){case V.EXCLAMATION_MARK:{this.state=G.MARKUP_DECLARATION_OPEN;break}case V.SOLIDUS:{this.state=G.END_TAG_OPEN;break}case V.QUESTION_MARK:{this._err(ve.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=G.BOGUS_COMMENT,this._stateBogusComment(t);break}case V.EOF:{this._err(ve.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ve.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=G.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Ra(t))this._createEndTagToken(),this.state=G.TAG_NAME,this._stateTagName(t);else switch(t){case V.GREATER_THAN_SIGN:{this._err(ve.missingEndTagName),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ve.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=G.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.BEFORE_ATTRIBUTE_NAME;break}case V.SOLIDUS:{this.state=G.SELF_CLOSING_START_TAG;break}case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentTagToken();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.tagName+=pn;break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Vf(t)?pg(t):t)}}_stateRcdataLessThanSign(t){t===V.SOLIDUS?this.state=G.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=G.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Ra(t)?(this.state=G.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=G.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=G.BEFORE_ATTRIBUTE_NAME,!1;case V.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=G.SELF_CLOSING_START_TAG,!1;case V.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=G.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=G.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===V.SOLIDUS?this.state=G.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=G.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Ra(t)?(this.state=G.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=G.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=G.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case V.SOLIDUS:{this.state=G.SCRIPT_DATA_END_TAG_OPEN;break}case V.EXCLAMATION_MARK:{this.state=G.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=G.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Ra(t)?(this.state=G.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=G.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=G.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===V.HYPHEN_MINUS?(this.state=G.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=G.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===V.HYPHEN_MINUS?(this.state=G.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=G.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case V.HYPHEN_MINUS:{this.state=G.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case V.HYPHEN_MINUS:{this.state=G.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.state=G.SCRIPT_DATA_ESCAPED,this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=G.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case V.HYPHEN_MINUS:{this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.GREATER_THAN_SIGN:{this.state=G.SCRIPT_DATA,this._emitChars(">");break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.state=G.SCRIPT_DATA_ESCAPED,this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=G.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===V.SOLIDUS?this.state=G.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ra(t)?(this._emitChars("<"),this.state=G.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=G.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Ra(t)?(this.state=G.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=G.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=G.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Hr.SCRIPT,!1)&&L4(this.preprocessor.peek(Hr.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=G.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case V.HYPHEN_MINUS:{this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case V.HYPHEN_MINUS:{this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case V.HYPHEN_MINUS:{this._emitChars("-");break}case V.LESS_THAN_SIGN:{this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.GREATER_THAN_SIGN:{this.state=G.SCRIPT_DATA,this._emitChars(">");break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pn);break}case V.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===V.SOLIDUS?(this.state=G.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Hr.SCRIPT,!1)&&L4(this.preprocessor.peek(Hr.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=G.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=G.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.SOLIDUS:case V.GREATER_THAN_SIGN:case V.EOF:{this.state=G.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case V.EQUALS_SIGN:{this._err(ve.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=G.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=G.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:case V.SOLIDUS:case V.GREATER_THAN_SIGN:case V.EOF:{this._leaveAttrName(),this.state=G.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case V.EQUALS_SIGN:{this._leaveAttrName(),this.state=G.BEFORE_ATTRIBUTE_VALUE;break}case V.QUOTATION_MARK:case V.APOSTROPHE:case V.LESS_THAN_SIGN:{this._err(ve.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.name+=pn;break}default:this.currentAttr.name+=String.fromCodePoint(Vf(t)?pg(t):t)}}_stateAfterAttributeName(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.SOLIDUS:{this.state=G.SELF_CLOSING_START_TAG;break}case V.EQUALS_SIGN:{this.state=G.BEFORE_ATTRIBUTE_VALUE;break}case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentTagToken();break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=G.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.QUOTATION_MARK:{this.state=G.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case V.APOSTROPHE:{this.state=G.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingAttributeValue),this.state=G.DATA,this.emitCurrentTagToken();break}default:this.state=G.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case V.QUOTATION_MARK:{this.state=G.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.AMPERSAND:{this._startCharacterReference();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=pn;break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case V.APOSTROPHE:{this.state=G.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.AMPERSAND:{this._startCharacterReference();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=pn;break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this._leaveAttrValue(),this.state=G.BEFORE_ATTRIBUTE_NAME;break}case V.AMPERSAND:{this._startCharacterReference();break}case V.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=G.DATA,this.emitCurrentTagToken();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=pn;break}case V.QUOTATION_MARK:case V.APOSTROPHE:case V.LESS_THAN_SIGN:case V.EQUALS_SIGN:case V.GRAVE_ACCENT:{this._err(ve.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this._leaveAttrValue(),this.state=G.BEFORE_ATTRIBUTE_NAME;break}case V.SOLIDUS:{this._leaveAttrValue(),this.state=G.SELF_CLOSING_START_TAG;break}case V.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=G.DATA,this.emitCurrentTagToken();break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._err(ve.missingWhitespaceBetweenAttributes),this.state=G.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case V.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=G.DATA,this.emitCurrentTagToken();break}case V.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._err(ve.unexpectedSolidusInTag),this.state=G.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentComment(n);break}case V.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.data+=pn;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Hr.DASH_DASH,!0)?(this._createCommentToken(Hr.DASH_DASH.length+1),this.state=G.COMMENT_START):this._consumeSequenceIfMatch(Hr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Hr.DOCTYPE.length+1),this.state=G.DOCTYPE):this._consumeSequenceIfMatch(Hr.CDATA_START,!0)?this.inForeignNode?this.state=G.CDATA_SECTION:(this._err(ve.cdataInHtmlContent),this._createCommentToken(Hr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=G.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ve.incorrectlyOpenedComment),this._createCommentToken(2),this.state=G.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case V.HYPHEN_MINUS:{this.state=G.COMMENT_START_DASH;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptClosingOfEmptyComment),this.state=G.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=G.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case V.HYPHEN_MINUS:{this.state=G.COMMENT_END;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptClosingOfEmptyComment),this.state=G.DATA,this.emitCurrentComment(n);break}case V.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=G.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case V.HYPHEN_MINUS:{this.state=G.COMMENT_END_DASH;break}case V.LESS_THAN_SIGN:{n.data+="<",this.state=G.COMMENT_LESS_THAN_SIGN;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.data+=pn;break}case V.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case V.EXCLAMATION_MARK:{n.data+="!",this.state=G.COMMENT_LESS_THAN_SIGN_BANG;break}case V.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=G.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===V.HYPHEN_MINUS?this.state=G.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=G.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===V.HYPHEN_MINUS?this.state=G.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=G.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==V.GREATER_THAN_SIGN&&t!==V.EOF&&this._err(ve.nestedComment),this.state=G.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case V.HYPHEN_MINUS:{this.state=G.COMMENT_END;break}case V.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=G.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentComment(n);break}case V.EXCLAMATION_MARK:{this.state=G.COMMENT_END_BANG;break}case V.HYPHEN_MINUS:{n.data+="-";break}case V.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=G.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case V.HYPHEN_MINUS:{n.data+="--!",this.state=G.COMMENT_END_DASH;break}case V.GREATER_THAN_SIGN:{this._err(ve.incorrectlyClosedComment),this.state=G.DATA,this.emitCurrentComment(n);break}case V.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=G.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.BEFORE_DOCTYPE_NAME;break}case V.GREATER_THAN_SIGN:{this.state=G.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case V.EOF:{this._err(ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingWhitespaceBeforeDoctypeName),this.state=G.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Vf(t))this._createDoctypeToken(String.fromCharCode(pg(t))),this.state=G.DOCTYPE_NAME;else switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.NULL:{this._err(ve.unexpectedNullCharacter),this._createDoctypeToken(pn),this.state=G.DOCTYPE_NAME;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=G.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.AFTER_DOCTYPE_NAME;break}case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.name+=pn;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Vf(t)?pg(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Hr.PUBLIC,!1)?this.state=G.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Hr.SYSTEM,!1)?this.state=G.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ve.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.QUOTATION_MARK:{this._err(ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=G.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{this._err(ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=G.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.QUOTATION_MARK:{n.publicId="",this.state=G.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{n.publicId="",this.state=G.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case V.QUOTATION_MARK:{this.state=G.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.publicId+=pn;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case V.APOSTROPHE:{this.state=G.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.publicId+=pn;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case V.GREATER_THAN_SIGN:{this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.QUOTATION_MARK:{this._err(ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{this._err(ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.QUOTATION_MARK:{n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:{this.state=G.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.QUOTATION_MARK:{this._err(ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{this._err(ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.QUOTATION_MARK:{n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.APOSTROPHE:{n.systemId="",this.state=G.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.DATA,this.emitCurrentDoctype(n);break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case V.QUOTATION_MARK:{this.state=G.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.systemId+=pn;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case V.APOSTROPHE:{this.state=G.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.NULL:{this._err(ve.unexpectedNullCharacter),n.systemId+=pn;break}case V.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case V.SPACE:case V.LINE_FEED:case V.TABULATION:case V.FORM_FEED:break;case V.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=G.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case V.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=G.DATA;break}case V.NULL:{this._err(ve.unexpectedNullCharacter);break}case V.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case V.RIGHT_SQUARE_BRACKET:{this.state=G.CDATA_SECTION_BRACKET;break}case V.EOF:{this._err(ve.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===V.RIGHT_SQUARE_BRACKET?this.state=G.CDATA_SECTION_END:(this._emitChars("]"),this.state=G.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case V.GREATER_THAN_SIGN:{this.state=G.DATA;break}case V.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=G.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(V.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&D4(this.preprocessor.peek(1))?G.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){D4(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===V.SEMICOLON&&this._err(ve.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const s9=new Set([x.DD,x.DT,x.LI,x.OPTGROUP,x.OPTION,x.P,x.RB,x.RP,x.RT,x.RTC]),I4=new Set([...s9,x.CAPTION,x.COLGROUP,x.TBODY,x.TD,x.TFOOT,x.TH,x.THEAD,x.TR]),s1=new Set([x.APPLET,x.CAPTION,x.HTML,x.MARQUEE,x.OBJECT,x.TABLE,x.TD,x.TEMPLATE,x.TH]),mre=new Set([...s1,x.OL,x.UL]),gre=new Set([...s1,x.BUTTON]),B4=new Set([x.ANNOTATION_XML,x.MI,x.MN,x.MO,x.MS,x.MTEXT]),P4=new Set([x.DESC,x.FOREIGN_OBJECT,x.TITLE]),bre=new Set([x.TR,x.TEMPLATE,x.HTML]),yre=new Set([x.TBODY,x.TFOOT,x.THEAD,x.TEMPLATE,x.HTML]),Ere=new Set([x.TABLE,x.TEMPLATE,x.HTML]),vre=new Set([x.TD,x.TH]);class Cre{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=x.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===x.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===_e.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==_e.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(x2,_e.HTML)}popUntilTableCellPopped(){this.popUntilPopped(vre,_e.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Ere,_e.HTML)}clearBackToTableBodyContext(){this.clearBackTo(yre,_e.HTML)}clearBackToTableRowContext(){this.clearBackTo(bre,_e.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===x.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===x.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case _e.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case _e.SVG:{if(P4.has(i))return!1;break}case _e.MATHML:{if(B4.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,s1)}hasInListItemScope(t){return this.hasInDynamicScope(t,mre)}hasInButtonScope(t){return this.hasInDynamicScope(t,gre)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case _e.HTML:{if(x2.has(n))return!0;if(s1.has(n))return!1;break}case _e.SVG:{if(P4.has(n))return!1;break}case _e.MATHML:{if(B4.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===_e.HTML)switch(this.tagIDs[n]){case t:return!0;case x.TABLE:case x.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===_e.HTML)switch(this.tagIDs[t]){case x.TBODY:case x.THEAD:case x.TFOOT:return!0;case x.TABLE:case x.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===_e.HTML)switch(this.tagIDs[n]){case t:return!0;case x.OPTION:case x.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&s9.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&I4.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&I4.has(this.currentTagId);)this.pop()}}const CC=3;var zo;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(zo||(zo={}));const H4={type:zo.Marker};class wre{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,o=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const c=this.entries[a];if(c.type===zo.Marker)break;const{element:u}=c;if(this.treeAdapter.getTagName(u)===o&&this.treeAdapter.getNamespaceURI(u)===s){const f=this.treeAdapter.getAttrList(u);f.length===i&&r.push({idx:a,attrs:f})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<CC)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<CC)return;const i=new Map(n.map(s=>[s.name,s.value]));let o=0;for(let s=0;s<r.length;s++){const a=r[s];a.attrs.every(c=>i.get(c.name)===c.value)&&(o+=1,o>=CC&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(H4)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:zo.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:zo.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(H4);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===zo.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===zo.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===zo.Element&&n.element===t)}}const Oa={createDocument(){return{nodeName:"#document",mode:Fi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(o=>o.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Oa.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Oa.isTextNode(n)){n.value+=t;return}}Oa.appendChild(e,Oa.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Oa.isTextNode(r)?r.value+=t:Oa.insertBefore(e,Oa.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},a9="html",Sre="about:legacy-compat",Tre="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",l9=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],xre=[...l9,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],kre=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),c9=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],_re=[...c9,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function U4(e,t){return t.some(n=>e.startsWith(n))}function Are(e){return e.name===a9&&e.publicId===null&&(e.systemId===null||e.systemId===Sre)}function Nre(e){if(e.name!==a9)return Fi.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Tre)return Fi.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),kre.has(n))return Fi.QUIRKS;let r=t===null?xre:l9;if(U4(n,r))return Fi.QUIRKS;if(r=t===null?c9:_re,U4(n,r))return Fi.LIMITED_QUIRKS}return Fi.NO_QUIRKS}const F4={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Mre="definitionurl",Rre="definitionURL",Ore=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Dre=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:_e.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:_e.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:_e.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:_e.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:_e.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:_e.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:_e.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:_e.XML}],["xml:space",{prefix:"xml",name:"space",namespace:_e.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:_e.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:_e.XMLNS}]]),Lre=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Ire=new Set([x.B,x.BIG,x.BLOCKQUOTE,x.BODY,x.BR,x.CENTER,x.CODE,x.DD,x.DIV,x.DL,x.DT,x.EM,x.EMBED,x.H1,x.H2,x.H3,x.H4,x.H5,x.H6,x.HEAD,x.HR,x.I,x.IMG,x.LI,x.LISTING,x.MENU,x.META,x.NOBR,x.OL,x.P,x.PRE,x.RUBY,x.S,x.SMALL,x.SPAN,x.STRONG,x.STRIKE,x.SUB,x.SUP,x.TABLE,x.TT,x.U,x.UL,x.VAR]);function Bre(e){const t=e.tagID;return t===x.FONT&&e.attrs.some(({name:r})=>r===tc.COLOR||r===tc.SIZE||r===tc.FACE)||Ire.has(t)}function u9(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Mre){e.attrs[t].name=Rre;break}}function d9(e){for(let t=0;t<e.attrs.length;t++){const n=Ore.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function tx(e){for(let t=0;t<e.attrs.length;t++){const n=Dre.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Pre(e){const t=Lre.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=wb(e.tagName))}function Hre(e,t){return t===_e.MATHML&&(e===x.MI||e===x.MO||e===x.MN||e===x.MS||e===x.MTEXT)}function Ure(e,t,n){if(t===_e.MATHML&&e===x.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===tc.ENCODING){const i=n[r].value.toLowerCase();return i===F4.TEXT_HTML||i===F4.APPLICATION_XML}}return t===_e.SVG&&(e===x.FOREIGN_OBJECT||e===x.DESC||e===x.TITLE)}function Fre(e,t,n,r){return(!r||r===_e.HTML)&&Ure(e,t,n)||(!r||r===_e.MATHML)&&Hre(e,t)}const jre="hidden",zre=8,$re=3;var Q;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Q||(Q={}));const Vre={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},f9=new Set([x.TABLE,x.TBODY,x.TFOOT,x.THEAD,x.TR]),j4={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Oa,onParseError:null};class h9{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Q.INITIAL,this.originalInsertionMode=Q.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...j4,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new pre(this.options,this),this.activeFormattingElements=new wre(this.treeAdapter),this.fragmentContextID=r?wb(this.treeAdapter.getTagName(r)):x.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Cre(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...j4,...n};t??(t=r.treeAdapter.createElement(de.TEMPLATE,_e.HTML,[]));const i=r.treeAdapter.createElement("documentmock",_e.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===x.TEMPLATE&&o.tmplInsertionModeStack.unshift(Q.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:Vre,s={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}onItemPush(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===_e.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,_e.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Q.TEXT}switchToPlaintextParsing(){this.insertionMode=Q.TEXT,this.originalInsertionMode=Q.IN_BODY,this.tokenizer.state=qr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===de.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==_e.HTML))switch(this.fragmentContextID){case x.TITLE:case x.TEXTAREA:{this.tokenizer.state=qr.RCDATA;break}case x.STYLE:case x.XMP:case x.IFRAME:case x.NOEMBED:case x.NOFRAMES:case x.NOSCRIPT:{this.tokenizer.state=qr.RAWTEXT;break}case x.SCRIPT:{this.tokenizer.state=qr.SCRIPT_DATA;break}case x.PLAINTEXT:{this.tokenizer.state=qr.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,_e.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,_e.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(de.HTML,_e.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,x.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,s=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:c,endCol:u,endOffset:f}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:c,endCol:u,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===Rt.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===x.SVG&&this.treeAdapter.getTagName(n)===de.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===_e.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===x.MGLYPH||t.tagID===x.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,_e.HTML)}_processToken(t){switch(t.type){case Rt.CHARACTER:{this.onCharacter(t);break}case Rt.NULL_CHARACTER:{this.onNullCharacter(t);break}case Rt.COMMENT:{this.onComment(t);break}case Rt.DOCTYPE:{this.onDoctype(t);break}case Rt.START_TAG:{this._processStartTag(t);break}case Rt.END_TAG:{this.onEndTag(t);break}case Rt.EOF:{this.onEof(t);break}case Rt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return Fre(t,i,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===zo.Marker||this.openElements.contains(i.element)),r=n===-1?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Q.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(x.P),this.openElements.popUntilTagNamePopped(x.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case x.TR:{this.insertionMode=Q.IN_ROW;return}case x.TBODY:case x.THEAD:case x.TFOOT:{this.insertionMode=Q.IN_TABLE_BODY;return}case x.CAPTION:{this.insertionMode=Q.IN_CAPTION;return}case x.COLGROUP:{this.insertionMode=Q.IN_COLUMN_GROUP;return}case x.TABLE:{this.insertionMode=Q.IN_TABLE;return}case x.BODY:{this.insertionMode=Q.IN_BODY;return}case x.FRAMESET:{this.insertionMode=Q.IN_FRAMESET;return}case x.SELECT:{this._resetInsertionModeForSelect(t);return}case x.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case x.HTML:{this.insertionMode=this.headElement?Q.AFTER_HEAD:Q.BEFORE_HEAD;return}case x.TD:case x.TH:{if(t>0){this.insertionMode=Q.IN_CELL;return}break}case x.HEAD:{if(t>0){this.insertionMode=Q.IN_HEAD;return}break}}this.insertionMode=Q.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===x.TEMPLATE)break;if(r===x.TABLE){this.insertionMode=Q.IN_SELECT_IN_TABLE;return}}this.insertionMode=Q.IN_SELECT}_isElementCausesFosterParenting(t){return f9.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case x.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===_e.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case x.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return ure[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){voe(this,t);return}switch(this.insertionMode){case Q.INITIAL:{Of(this,t);break}case Q.BEFORE_HTML:{lh(this,t);break}case Q.BEFORE_HEAD:{ch(this,t);break}case Q.IN_HEAD:{uh(this,t);break}case Q.IN_HEAD_NO_SCRIPT:{dh(this,t);break}case Q.AFTER_HEAD:{fh(this,t);break}case Q.IN_BODY:case Q.IN_CAPTION:case Q.IN_CELL:case Q.IN_TEMPLATE:{m9(this,t);break}case Q.TEXT:case Q.IN_SELECT:case Q.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Q.IN_TABLE:case Q.IN_TABLE_BODY:case Q.IN_ROW:{wC(this,t);break}case Q.IN_TABLE_TEXT:{C9(this,t);break}case Q.IN_COLUMN_GROUP:{a1(this,t);break}case Q.AFTER_BODY:{l1(this,t);break}case Q.AFTER_AFTER_BODY:{Kg(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Eoe(this,t);return}switch(this.insertionMode){case Q.INITIAL:{Of(this,t);break}case Q.BEFORE_HTML:{lh(this,t);break}case Q.BEFORE_HEAD:{ch(this,t);break}case Q.IN_HEAD:{uh(this,t);break}case Q.IN_HEAD_NO_SCRIPT:{dh(this,t);break}case Q.AFTER_HEAD:{fh(this,t);break}case Q.TEXT:{this._insertCharacters(t);break}case Q.IN_TABLE:case Q.IN_TABLE_BODY:case Q.IN_ROW:{wC(this,t);break}case Q.IN_COLUMN_GROUP:{a1(this,t);break}case Q.AFTER_BODY:{l1(this,t);break}case Q.AFTER_AFTER_BODY:{Kg(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){k2(this,t);return}switch(this.insertionMode){case Q.INITIAL:case Q.BEFORE_HTML:case Q.BEFORE_HEAD:case Q.IN_HEAD:case Q.IN_HEAD_NO_SCRIPT:case Q.AFTER_HEAD:case Q.IN_BODY:case Q.IN_TABLE:case Q.IN_CAPTION:case Q.IN_COLUMN_GROUP:case Q.IN_TABLE_BODY:case Q.IN_ROW:case Q.IN_CELL:case Q.IN_SELECT:case Q.IN_SELECT_IN_TABLE:case Q.IN_TEMPLATE:case Q.IN_FRAMESET:case Q.AFTER_FRAMESET:{k2(this,t);break}case Q.IN_TABLE_TEXT:{Df(this,t);break}case Q.AFTER_BODY:{Xre(this,t);break}case Q.AFTER_AFTER_BODY:case Q.AFTER_AFTER_FRAMESET:{Zre(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Q.INITIAL:{Jre(this,t);break}case Q.BEFORE_HEAD:case Q.IN_HEAD:case Q.IN_HEAD_NO_SCRIPT:case Q.AFTER_HEAD:{this._err(t,ve.misplacedDoctype);break}case Q.IN_TABLE_TEXT:{Df(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ve.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Coe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Q.INITIAL:{Of(this,t);break}case Q.BEFORE_HTML:{eie(this,t);break}case Q.BEFORE_HEAD:{nie(this,t);break}case Q.IN_HEAD:{xo(this,t);break}case Q.IN_HEAD_NO_SCRIPT:{oie(this,t);break}case Q.AFTER_HEAD:{aie(this,t);break}case Q.IN_BODY:{Er(this,t);break}case Q.IN_TABLE:{id(this,t);break}case Q.IN_TABLE_TEXT:{Df(this,t);break}case Q.IN_CAPTION:{roe(this,t);break}case Q.IN_COLUMN_GROUP:{ix(this,t);break}case Q.IN_TABLE_BODY:{xb(this,t);break}case Q.IN_ROW:{kb(this,t);break}case Q.IN_CELL:{soe(this,t);break}case Q.IN_SELECT:{T9(this,t);break}case Q.IN_SELECT_IN_TABLE:{loe(this,t);break}case Q.IN_TEMPLATE:{uoe(this,t);break}case Q.AFTER_BODY:{foe(this,t);break}case Q.IN_FRAMESET:{hoe(this,t);break}case Q.AFTER_FRAMESET:{moe(this,t);break}case Q.AFTER_AFTER_BODY:{boe(this,t);break}case Q.AFTER_AFTER_FRAMESET:{yoe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?woe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Q.INITIAL:{Of(this,t);break}case Q.BEFORE_HTML:{tie(this,t);break}case Q.BEFORE_HEAD:{rie(this,t);break}case Q.IN_HEAD:{iie(this,t);break}case Q.IN_HEAD_NO_SCRIPT:{sie(this,t);break}case Q.AFTER_HEAD:{lie(this,t);break}case Q.IN_BODY:{Tb(this,t);break}case Q.TEXT:{Gie(this,t);break}case Q.IN_TABLE:{Wh(this,t);break}case Q.IN_TABLE_TEXT:{Df(this,t);break}case Q.IN_CAPTION:{ioe(this,t);break}case Q.IN_COLUMN_GROUP:{ooe(this,t);break}case Q.IN_TABLE_BODY:{_2(this,t);break}case Q.IN_ROW:{S9(this,t);break}case Q.IN_CELL:{aoe(this,t);break}case Q.IN_SELECT:{x9(this,t);break}case Q.IN_SELECT_IN_TABLE:{coe(this,t);break}case Q.IN_TEMPLATE:{doe(this,t);break}case Q.AFTER_BODY:{_9(this,t);break}case Q.IN_FRAMESET:{poe(this,t);break}case Q.AFTER_FRAMESET:{goe(this,t);break}case Q.AFTER_AFTER_BODY:{Kg(this,t);break}}}onEof(t){switch(this.insertionMode){case Q.INITIAL:{Of(this,t);break}case Q.BEFORE_HTML:{lh(this,t);break}case Q.BEFORE_HEAD:{ch(this,t);break}case Q.IN_HEAD:{uh(this,t);break}case Q.IN_HEAD_NO_SCRIPT:{dh(this,t);break}case Q.AFTER_HEAD:{fh(this,t);break}case Q.IN_BODY:case Q.IN_TABLE:case Q.IN_CAPTION:case Q.IN_COLUMN_GROUP:case Q.IN_TABLE_BODY:case Q.IN_ROW:case Q.IN_CELL:case Q.IN_SELECT:case Q.IN_SELECT_IN_TABLE:{E9(this,t);break}case Q.TEXT:{Wie(this,t);break}case Q.IN_TABLE_TEXT:{Df(this,t);break}case Q.IN_TEMPLATE:{k9(this,t);break}case Q.AFTER_BODY:case Q.IN_FRAMESET:case Q.AFTER_FRAMESET:case Q.AFTER_AFTER_BODY:case Q.AFTER_AFTER_FRAMESET:{rx(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===V.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Q.IN_HEAD:case Q.IN_HEAD_NO_SCRIPT:case Q.AFTER_HEAD:case Q.TEXT:case Q.IN_COLUMN_GROUP:case Q.IN_SELECT:case Q.IN_SELECT_IN_TABLE:case Q.IN_FRAMESET:case Q.AFTER_FRAMESET:{this._insertCharacters(t);break}case Q.IN_BODY:case Q.IN_CAPTION:case Q.IN_CELL:case Q.IN_TEMPLATE:case Q.AFTER_BODY:case Q.AFTER_AFTER_BODY:case Q.AFTER_AFTER_FRAMESET:{p9(this,t);break}case Q.IN_TABLE:case Q.IN_TABLE_BODY:case Q.IN_ROW:{wC(this,t);break}case Q.IN_TABLE_TEXT:{v9(this,t);break}}}}function qre(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):y9(e,t),n}function Yre(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function Gre(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,s=i;s!==n;o++,s=i){i=e.openElements.getCommonAncestor(s);const a=e.activeFormattingElements.getElementEntry(s),c=a&&o>=$re;!a||c?(c&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(s)):(s=Wre(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(s,r),r=s)}return r}function Wre(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Kre(e,t,n){const r=e.treeAdapter.getTagName(t),i=wb(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===x.TEMPLATE&&o===_e.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Qre(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function nx(e,t){for(let n=0;n<zre;n++){const r=qre(e,t);if(!r)break;const i=Yre(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=Gre(e,i,r.element),s=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),s&&Kre(e,s,o),Qre(e,i,r)}}function k2(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Xre(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Zre(e,t){e._appendCommentNode(t,e.document)}function rx(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(o);s&&!s.endTag&&e._setEndLocation(o,t)}}}}function Jre(e,t){e._setDocumentType(t);const n=t.forceQuirks?Fi.QUIRKS:Nre(t);Are(t)||e._err(t,ve.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Q.BEFORE_HTML}function Of(e,t){e._err(t,ve.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Fi.QUIRKS),e.insertionMode=Q.BEFORE_HTML,e._processToken(t)}function eie(e,t){t.tagID===x.HTML?(e._insertElement(t,_e.HTML),e.insertionMode=Q.BEFORE_HEAD):lh(e,t)}function tie(e,t){const n=t.tagID;(n===x.HTML||n===x.HEAD||n===x.BODY||n===x.BR)&&lh(e,t)}function lh(e,t){e._insertFakeRootElement(),e.insertionMode=Q.BEFORE_HEAD,e._processToken(t)}function nie(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.HEAD:{e._insertElement(t,_e.HTML),e.headElement=e.openElements.current,e.insertionMode=Q.IN_HEAD;break}default:ch(e,t)}}function rie(e,t){const n=t.tagID;n===x.HEAD||n===x.BODY||n===x.HTML||n===x.BR?ch(e,t):e._err(t,ve.endTagWithoutMatchingOpenElement)}function ch(e,t){e._insertFakeElement(de.HEAD,x.HEAD),e.headElement=e.openElements.current,e.insertionMode=Q.IN_HEAD,e._processToken(t)}function xo(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:{e._appendElement(t,_e.HTML),t.ackSelfClosing=!0;break}case x.TITLE:{e._switchToTextParsing(t,qr.RCDATA);break}case x.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,qr.RAWTEXT):(e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_HEAD_NO_SCRIPT);break}case x.NOFRAMES:case x.STYLE:{e._switchToTextParsing(t,qr.RAWTEXT);break}case x.SCRIPT:{e._switchToTextParsing(t,qr.SCRIPT_DATA);break}case x.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Q.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Q.IN_TEMPLATE);break}case x.HEAD:{e._err(t,ve.misplacedStartTagForHeadElement);break}default:uh(e,t)}}function iie(e,t){switch(t.tagID){case x.HEAD:{e.openElements.pop(),e.insertionMode=Q.AFTER_HEAD;break}case x.BODY:case x.BR:case x.HTML:{uh(e,t);break}case x.TEMPLATE:{Ac(e,t);break}default:e._err(t,ve.endTagWithoutMatchingOpenElement)}}function Ac(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==x.TEMPLATE&&e._err(t,ve.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(x.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ve.endTagWithoutMatchingOpenElement)}function uh(e,t){e.openElements.pop(),e.insertionMode=Q.AFTER_HEAD,e._processToken(t)}function oie(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.BASEFONT:case x.BGSOUND:case x.HEAD:case x.LINK:case x.META:case x.NOFRAMES:case x.STYLE:{xo(e,t);break}case x.NOSCRIPT:{e._err(t,ve.nestedNoscriptInHead);break}default:dh(e,t)}}function sie(e,t){switch(t.tagID){case x.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Q.IN_HEAD;break}case x.BR:{dh(e,t);break}default:e._err(t,ve.endTagWithoutMatchingOpenElement)}}function dh(e,t){const n=t.type===Rt.EOF?ve.openElementsLeftAfterEof:ve.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Q.IN_HEAD,e._processToken(t)}function aie(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.BODY:{e._insertElement(t,_e.HTML),e.framesetOk=!1,e.insertionMode=Q.IN_BODY;break}case x.FRAMESET:{e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_FRAMESET;break}case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:case x.NOFRAMES:case x.SCRIPT:case x.STYLE:case x.TEMPLATE:case x.TITLE:{e._err(t,ve.abandonedHeadElementChild),e.openElements.push(e.headElement,x.HEAD),xo(e,t),e.openElements.remove(e.headElement);break}case x.HEAD:{e._err(t,ve.misplacedStartTagForHeadElement);break}default:fh(e,t)}}function lie(e,t){switch(t.tagID){case x.BODY:case x.HTML:case x.BR:{fh(e,t);break}case x.TEMPLATE:{Ac(e,t);break}default:e._err(t,ve.endTagWithoutMatchingOpenElement)}}function fh(e,t){e._insertFakeElement(de.BODY,x.BODY),e.insertionMode=Q.IN_BODY,Sb(e,t)}function Sb(e,t){switch(t.type){case Rt.CHARACTER:{m9(e,t);break}case Rt.WHITESPACE_CHARACTER:{p9(e,t);break}case Rt.COMMENT:{k2(e,t);break}case Rt.START_TAG:{Er(e,t);break}case Rt.END_TAG:{Tb(e,t);break}case Rt.EOF:{E9(e,t);break}}}function p9(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function m9(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function cie(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function uie(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function die(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_FRAMESET)}function fie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML)}function hie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&x2.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,_e.HTML)}function pie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function mie(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML),n||(e.formElement=e.openElements.current))}function gie(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===x.LI&&i===x.LI||(n===x.DD||n===x.DT)&&(i===x.DD||i===x.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==x.ADDRESS&&i!==x.DIV&&i!==x.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML)}function bie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML),e.tokenizer.state=qr.PLAINTEXT}function yie(e,t){e.openElements.hasInScope(x.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML),e.framesetOk=!1}function Eie(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(de.A);n&&(nx(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Cie(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(x.NOBR)&&(nx(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,_e.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function wie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Sie(e,t){e.treeAdapter.getDocumentMode(e.document)!==Fi.QUIRKS&&e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._insertElement(t,_e.HTML),e.framesetOk=!1,e.insertionMode=Q.IN_TABLE}function g9(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,_e.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function b9(e){const t=i9(e,tc.TYPE);return t!=null&&t.toLowerCase()===jre}function Tie(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,_e.HTML),b9(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function xie(e,t){e._appendElement(t,_e.HTML),t.ackSelfClosing=!0}function kie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._appendElement(t,_e.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function _ie(e,t){t.tagName=de.IMG,t.tagID=x.IMG,g9(e,t)}function Aie(e,t){e._insertElement(t,_e.HTML),e.skipNextNewLine=!0,e.tokenizer.state=qr.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Q.TEXT}function Nie(e,t){e.openElements.hasInButtonScope(x.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,qr.RAWTEXT)}function Mie(e,t){e.framesetOk=!1,e._switchToTextParsing(t,qr.RAWTEXT)}function z4(e,t){e._switchToTextParsing(t,qr.RAWTEXT)}function Rie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Q.IN_TABLE||e.insertionMode===Q.IN_CAPTION||e.insertionMode===Q.IN_TABLE_BODY||e.insertionMode===Q.IN_ROW||e.insertionMode===Q.IN_CELL?Q.IN_SELECT_IN_TABLE:Q.IN_SELECT}function Oie(e,t){e.openElements.currentTagId===x.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML)}function Die(e,t){e.openElements.hasInScope(x.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,_e.HTML)}function Lie(e,t){e.openElements.hasInScope(x.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(x.RTC),e._insertElement(t,_e.HTML)}function Iie(e,t){e._reconstructActiveFormattingElements(),u9(t),tx(t),t.selfClosing?e._appendElement(t,_e.MATHML):e._insertElement(t,_e.MATHML),t.ackSelfClosing=!0}function Bie(e,t){e._reconstructActiveFormattingElements(),d9(t),tx(t),t.selfClosing?e._appendElement(t,_e.SVG):e._insertElement(t,_e.SVG),t.ackSelfClosing=!0}function $4(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,_e.HTML)}function Er(e,t){switch(t.tagID){case x.I:case x.S:case x.B:case x.U:case x.EM:case x.TT:case x.BIG:case x.CODE:case x.FONT:case x.SMALL:case x.STRIKE:case x.STRONG:{vie(e,t);break}case x.A:{Eie(e,t);break}case x.H1:case x.H2:case x.H3:case x.H4:case x.H5:case x.H6:{hie(e,t);break}case x.P:case x.DL:case x.OL:case x.UL:case x.DIV:case x.DIR:case x.NAV:case x.MAIN:case x.MENU:case x.ASIDE:case x.CENTER:case x.FIGURE:case x.FOOTER:case x.HEADER:case x.HGROUP:case x.DIALOG:case x.DETAILS:case x.ADDRESS:case x.ARTICLE:case x.SEARCH:case x.SECTION:case x.SUMMARY:case x.FIELDSET:case x.BLOCKQUOTE:case x.FIGCAPTION:{fie(e,t);break}case x.LI:case x.DD:case x.DT:{gie(e,t);break}case x.BR:case x.IMG:case x.WBR:case x.AREA:case x.EMBED:case x.KEYGEN:{g9(e,t);break}case x.HR:{kie(e,t);break}case x.RB:case x.RTC:{Die(e,t);break}case x.RT:case x.RP:{Lie(e,t);break}case x.PRE:case x.LISTING:{pie(e,t);break}case x.XMP:{Nie(e,t);break}case x.SVG:{Bie(e,t);break}case x.HTML:{cie(e,t);break}case x.BASE:case x.LINK:case x.META:case x.STYLE:case x.TITLE:case x.SCRIPT:case x.BGSOUND:case x.BASEFONT:case x.TEMPLATE:{xo(e,t);break}case x.BODY:{uie(e,t);break}case x.FORM:{mie(e,t);break}case x.NOBR:{Cie(e,t);break}case x.MATH:{Iie(e,t);break}case x.TABLE:{Sie(e,t);break}case x.INPUT:{Tie(e,t);break}case x.PARAM:case x.TRACK:case x.SOURCE:{xie(e,t);break}case x.IMAGE:{_ie(e,t);break}case x.BUTTON:{yie(e,t);break}case x.APPLET:case x.OBJECT:case x.MARQUEE:{wie(e,t);break}case x.IFRAME:{Mie(e,t);break}case x.SELECT:{Rie(e,t);break}case x.OPTION:case x.OPTGROUP:{Oie(e,t);break}case x.NOEMBED:case x.NOFRAMES:{z4(e,t);break}case x.FRAMESET:{die(e,t);break}case x.TEXTAREA:{Aie(e,t);break}case x.NOSCRIPT:{e.options.scriptingEnabled?z4(e,t):$4(e,t);break}case x.PLAINTEXT:{bie(e,t);break}case x.COL:case x.TH:case x.TD:case x.TR:case x.HEAD:case x.FRAME:case x.TBODY:case x.TFOOT:case x.THEAD:case x.CAPTION:case x.COLGROUP:break;default:$4(e,t)}}function Pie(e,t){if(e.openElements.hasInScope(x.BODY)&&(e.insertionMode=Q.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Hie(e,t){e.openElements.hasInScope(x.BODY)&&(e.insertionMode=Q.AFTER_BODY,_9(e,t))}function Uie(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Fie(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(x.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(x.FORM):n&&e.openElements.remove(n))}function jie(e){e.openElements.hasInButtonScope(x.P)||e._insertFakeElement(de.P,x.P),e._closePElement()}function zie(e){e.openElements.hasInListItemScope(x.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(x.LI),e.openElements.popUntilTagNamePopped(x.LI))}function $ie(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Vie(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function qie(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Yie(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(de.BR,x.BR),e.openElements.pop(),e.framesetOk=!1}function y9(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],s=e.openElements.tagIDs[i];if(r===s&&(r!==x.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,s))break}}function Tb(e,t){switch(t.tagID){case x.A:case x.B:case x.I:case x.S:case x.U:case x.EM:case x.TT:case x.BIG:case x.CODE:case x.FONT:case x.NOBR:case x.SMALL:case x.STRIKE:case x.STRONG:{nx(e,t);break}case x.P:{jie(e);break}case x.DL:case x.UL:case x.OL:case x.DIR:case x.DIV:case x.NAV:case x.PRE:case x.MAIN:case x.MENU:case x.ASIDE:case x.BUTTON:case x.CENTER:case x.FIGURE:case x.FOOTER:case x.HEADER:case x.HGROUP:case x.DIALOG:case x.ADDRESS:case x.ARTICLE:case x.DETAILS:case x.SEARCH:case x.SECTION:case x.SUMMARY:case x.LISTING:case x.FIELDSET:case x.BLOCKQUOTE:case x.FIGCAPTION:{Uie(e,t);break}case x.LI:{zie(e);break}case x.DD:case x.DT:{$ie(e,t);break}case x.H1:case x.H2:case x.H3:case x.H4:case x.H5:case x.H6:{Vie(e);break}case x.BR:{Yie(e);break}case x.BODY:{Pie(e,t);break}case x.HTML:{Hie(e,t);break}case x.FORM:{Fie(e);break}case x.APPLET:case x.OBJECT:case x.MARQUEE:{qie(e,t);break}case x.TEMPLATE:{Ac(e,t);break}default:y9(e,t)}}function E9(e,t){e.tmplInsertionModeStack.length>0?k9(e,t):rx(e,t)}function Gie(e,t){var n;t.tagID===x.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Wie(e,t){e._err(t,ve.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function wC(e,t){if(e.openElements.currentTagId!==void 0&&f9.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Q.IN_TABLE_TEXT,t.type){case Rt.CHARACTER:{C9(e,t);break}case Rt.WHITESPACE_CHARACTER:{v9(e,t);break}}else vp(e,t)}function Kie(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_CAPTION}function Qie(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_COLUMN_GROUP}function Xie(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(de.COLGROUP,x.COLGROUP),e.insertionMode=Q.IN_COLUMN_GROUP,ix(e,t)}function Zie(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_TABLE_BODY}function Jie(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(de.TBODY,x.TBODY),e.insertionMode=Q.IN_TABLE_BODY,xb(e,t)}function eoe(e,t){e.openElements.hasInTableScope(x.TABLE)&&(e.openElements.popUntilTagNamePopped(x.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function toe(e,t){b9(t)?e._appendElement(t,_e.HTML):vp(e,t),t.ackSelfClosing=!0}function noe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,_e.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function id(e,t){switch(t.tagID){case x.TD:case x.TH:case x.TR:{Jie(e,t);break}case x.STYLE:case x.SCRIPT:case x.TEMPLATE:{xo(e,t);break}case x.COL:{Xie(e,t);break}case x.FORM:{noe(e,t);break}case x.TABLE:{eoe(e,t);break}case x.TBODY:case x.TFOOT:case x.THEAD:{Zie(e,t);break}case x.INPUT:{toe(e,t);break}case x.CAPTION:{Kie(e,t);break}case x.COLGROUP:{Qie(e,t);break}default:vp(e,t)}}function Wh(e,t){switch(t.tagID){case x.TABLE:{e.openElements.hasInTableScope(x.TABLE)&&(e.openElements.popUntilTagNamePopped(x.TABLE),e._resetInsertionMode());break}case x.TEMPLATE:{Ac(e,t);break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TBODY:case x.TD:case x.TFOOT:case x.TH:case x.THEAD:case x.TR:break;default:vp(e,t)}}function vp(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Sb(e,t),e.fosterParentingEnabled=n}function v9(e,t){e.pendingCharacterTokens.push(t)}function C9(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Df(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)vp(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const w9=new Set([x.CAPTION,x.COL,x.COLGROUP,x.TBODY,x.TD,x.TFOOT,x.TH,x.THEAD,x.TR]);function roe(e,t){const n=t.tagID;w9.has(n)?e.openElements.hasInTableScope(x.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Q.IN_TABLE,id(e,t)):Er(e,t)}function ioe(e,t){const n=t.tagID;switch(n){case x.CAPTION:case x.TABLE:{e.openElements.hasInTableScope(x.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Q.IN_TABLE,n===x.TABLE&&Wh(e,t));break}case x.BODY:case x.COL:case x.COLGROUP:case x.HTML:case x.TBODY:case x.TD:case x.TFOOT:case x.TH:case x.THEAD:case x.TR:break;default:Tb(e,t)}}function ix(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.COL:{e._appendElement(t,_e.HTML),t.ackSelfClosing=!0;break}case x.TEMPLATE:{xo(e,t);break}default:a1(e,t)}}function ooe(e,t){switch(t.tagID){case x.COLGROUP:{e.openElements.currentTagId===x.COLGROUP&&(e.openElements.pop(),e.insertionMode=Q.IN_TABLE);break}case x.TEMPLATE:{Ac(e,t);break}case x.COL:break;default:a1(e,t)}}function a1(e,t){e.openElements.currentTagId===x.COLGROUP&&(e.openElements.pop(),e.insertionMode=Q.IN_TABLE,e._processToken(t))}function xb(e,t){switch(t.tagID){case x.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_ROW;break}case x.TH:case x.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(de.TR,x.TR),e.insertionMode=Q.IN_ROW,kb(e,t);break}case x.CAPTION:case x.COL:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE,id(e,t));break}default:id(e,t)}}function _2(e,t){const n=t.tagID;switch(t.tagID){case x.TBODY:case x.TFOOT:case x.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE);break}case x.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE,Wh(e,t));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TD:case x.TH:case x.TR:break;default:Wh(e,t)}}function kb(e,t){switch(t.tagID){case x.TH:case x.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,_e.HTML),e.insertionMode=Q.IN_CELL,e.activeFormattingElements.insertMarker();break}case x.CAPTION:case x.COL:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:case x.TR:{e.openElements.hasInTableScope(x.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE_BODY,xb(e,t));break}default:id(e,t)}}function S9(e,t){switch(t.tagID){case x.TR:{e.openElements.hasInTableScope(x.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE_BODY);break}case x.TABLE:{e.openElements.hasInTableScope(x.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE_BODY,_2(e,t));break}case x.TBODY:case x.TFOOT:case x.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(x.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Q.IN_TABLE_BODY,_2(e,t));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TD:case x.TH:break;default:Wh(e,t)}}function soe(e,t){const n=t.tagID;w9.has(n)?(e.openElements.hasInTableScope(x.TD)||e.openElements.hasInTableScope(x.TH))&&(e._closeTableCell(),kb(e,t)):Er(e,t)}function aoe(e,t){const n=t.tagID;switch(n){case x.TD:case x.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Q.IN_ROW);break}case x.TABLE:case x.TBODY:case x.TFOOT:case x.THEAD:case x.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),S9(e,t));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:break;default:Tb(e,t)}}function T9(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.OPTION:{e.openElements.currentTagId===x.OPTION&&e.openElements.pop(),e._insertElement(t,_e.HTML);break}case x.OPTGROUP:{e.openElements.currentTagId===x.OPTION&&e.openElements.pop(),e.openElements.currentTagId===x.OPTGROUP&&e.openElements.pop(),e._insertElement(t,_e.HTML);break}case x.HR:{e.openElements.currentTagId===x.OPTION&&e.openElements.pop(),e.openElements.currentTagId===x.OPTGROUP&&e.openElements.pop(),e._appendElement(t,_e.HTML),t.ackSelfClosing=!0;break}case x.INPUT:case x.KEYGEN:case x.TEXTAREA:case x.SELECT:{e.openElements.hasInSelectScope(x.SELECT)&&(e.openElements.popUntilTagNamePopped(x.SELECT),e._resetInsertionMode(),t.tagID!==x.SELECT&&e._processStartTag(t));break}case x.SCRIPT:case x.TEMPLATE:{xo(e,t);break}}}function x9(e,t){switch(t.tagID){case x.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===x.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===x.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===x.OPTGROUP&&e.openElements.pop();break}case x.OPTION:{e.openElements.currentTagId===x.OPTION&&e.openElements.pop();break}case x.SELECT:{e.openElements.hasInSelectScope(x.SELECT)&&(e.openElements.popUntilTagNamePopped(x.SELECT),e._resetInsertionMode());break}case x.TEMPLATE:{Ac(e,t);break}}}function loe(e,t){const n=t.tagID;n===x.CAPTION||n===x.TABLE||n===x.TBODY||n===x.TFOOT||n===x.THEAD||n===x.TR||n===x.TD||n===x.TH?(e.openElements.popUntilTagNamePopped(x.SELECT),e._resetInsertionMode(),e._processStartTag(t)):T9(e,t)}function coe(e,t){const n=t.tagID;n===x.CAPTION||n===x.TABLE||n===x.TBODY||n===x.TFOOT||n===x.THEAD||n===x.TR||n===x.TD||n===x.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(x.SELECT),e._resetInsertionMode(),e.onEndTag(t)):x9(e,t)}function uoe(e,t){switch(t.tagID){case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:case x.NOFRAMES:case x.SCRIPT:case x.STYLE:case x.TEMPLATE:case x.TITLE:{xo(e,t);break}case x.CAPTION:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:{e.tmplInsertionModeStack[0]=Q.IN_TABLE,e.insertionMode=Q.IN_TABLE,id(e,t);break}case x.COL:{e.tmplInsertionModeStack[0]=Q.IN_COLUMN_GROUP,e.insertionMode=Q.IN_COLUMN_GROUP,ix(e,t);break}case x.TR:{e.tmplInsertionModeStack[0]=Q.IN_TABLE_BODY,e.insertionMode=Q.IN_TABLE_BODY,xb(e,t);break}case x.TD:case x.TH:{e.tmplInsertionModeStack[0]=Q.IN_ROW,e.insertionMode=Q.IN_ROW,kb(e,t);break}default:e.tmplInsertionModeStack[0]=Q.IN_BODY,e.insertionMode=Q.IN_BODY,Er(e,t)}}function doe(e,t){t.tagID===x.TEMPLATE&&Ac(e,t)}function k9(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(x.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):rx(e,t)}function foe(e,t){t.tagID===x.HTML?Er(e,t):l1(e,t)}function _9(e,t){var n;if(t.tagID===x.HTML){if(e.fragmentContext||(e.insertionMode=Q.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===x.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else l1(e,t)}function l1(e,t){e.insertionMode=Q.IN_BODY,Sb(e,t)}function hoe(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.FRAMESET:{e._insertElement(t,_e.HTML);break}case x.FRAME:{e._appendElement(t,_e.HTML),t.ackSelfClosing=!0;break}case x.NOFRAMES:{xo(e,t);break}}}function poe(e,t){t.tagID===x.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==x.FRAMESET&&(e.insertionMode=Q.AFTER_FRAMESET))}function moe(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.NOFRAMES:{xo(e,t);break}}}function goe(e,t){t.tagID===x.HTML&&(e.insertionMode=Q.AFTER_AFTER_FRAMESET)}function boe(e,t){t.tagID===x.HTML?Er(e,t):Kg(e,t)}function Kg(e,t){e.insertionMode=Q.IN_BODY,Sb(e,t)}function yoe(e,t){switch(t.tagID){case x.HTML:{Er(e,t);break}case x.NOFRAMES:{xo(e,t);break}}}function Eoe(e,t){t.chars=pn,e._insertCharacters(t)}function voe(e,t){e._insertCharacters(t),e.framesetOk=!1}function A9(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==_e.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Coe(e,t){if(Bre(t))A9(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===_e.MATHML?u9(t):r===_e.SVG&&(Pre(t),d9(t)),tx(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function woe(e,t){if(t.tagID===x.P||t.tagID===x.BR){A9(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===_e.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}de.AREA,de.BASE,de.BASEFONT,de.BGSOUND,de.BR,de.COL,de.EMBED,de.FRAME,de.HR,de.IMG,de.INPUT,de.KEYGEN,de.LINK,de.META,de.PARAM,de.SOURCE,de.TRACK,de.WBR;function Soe(e,t){return h9.parse(e,t)}function Toe(e,t,n){typeof e=="string"&&(n=t,t=e,e=null);const r=h9.getFragmentParser(e,n);return r.tokenizer.write(t,!0),r.getFragment()}function hh(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?V4(e.position):"start"in e||"end"in e?V4(e):"line"in e||"column"in e?A2(e):""}function A2(e){return q4(e&&e.line)+":"+q4(e&&e.column)}function V4(e){return A2(e&&e.start)+"-"+A2(e&&e.end)}function q4(e){return e&&typeof e=="number"?e:1}class Mr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=hh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Mr.prototype.file="";Mr.prototype.name="";Mr.prototype.reason="";Mr.prototype.message="";Mr.prototype.stack="";Mr.prototype.column=void 0;Mr.prototype.line=void 0;Mr.prototype.ancestors=void 0;Mr.prototype.cause=void 0;Mr.prototype.fatal=void 0;Mr.prototype.place=void 0;Mr.prototype.ruleId=void 0;Mr.prototype.source=void 0;const Fo={basename:xoe,dirname:koe,extname:_oe,join:Aoe,sep:"/"};function xoe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Cp(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function koe(e){if(Cp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function _oe(e){Cp(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Aoe(...e){let t=-1,n;for(;++t<e.length;)Cp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Noe(n)}function Noe(e){Cp(e);const t=e.codePointAt(0)===47;let n=Moe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Moe(e,t){let n="",r=0,i=-1,o=0,s=-1,a,c;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function Cp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Roe={cwd:Ooe};function Ooe(){return"/"}function N2(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Doe(e){if(typeof e=="string")e=new URL(e);else if(!N2(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Loe(e)}function Loe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const SC=["history","path","basename","stem","extname","dirname"];class M2{constructor(t){let n;t?N2(t)?n={path:t}:typeof t=="string"||Ioe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Roe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<SC.length;){const o=SC[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)SC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Fo.basename(this.path):void 0}set basename(t){xC(t,"basename"),TC(t,"basename"),this.path=Fo.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Fo.dirname(this.path):void 0}set dirname(t){Y4(this.basename,"dirname"),this.path=Fo.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Fo.extname(this.path):void 0}set extname(t){if(TC(t,"extname"),Y4(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fo.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){N2(t)&&(t=Doe(t)),xC(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Fo.basename(this.path,this.extname):void 0}set stem(t){xC(t,"stem"),TC(t,"stem"),this.path=Fo.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Mr(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function TC(e,t){if(e&&e.includes(Fo.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fo.sep+"`")}function xC(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Y4(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ioe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Boe={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `-->` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `-->` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `<!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `<!--`. Expected `-->`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},Poe="https://html.spec.whatwg.org/multipage/parsing.html#parse-error-",Hoe=/-[a-z]/g,Uoe=/%c(?:([-+])(\d+))?/g,Foe=/%x/g,joe={2:!0,1:!1,0:null},zoe={};function $oe(e,t){const n=t||zoe,r=n.onerror,i=e instanceof M2?e:new M2(e),o=n.fragment?Toe:Soe,s=String(i),a=o(s,{sourceCodeLocationInfo:!0,onParseError:n.onerror?c:null,scriptingEnabled:!1});return Yne(a,{file:i,space:n.space,verbose:n.verbose});function c(u){const f=u.code,h=Voe(f),m=n[h],g=m??!0,y=typeof g=="number"?g:g?1:0;if(y){const C=Boe[h],S=new Mr(E(C.reason),{place:{start:{line:u.startLine,column:u.startCol,offset:u.startOffset},end:{line:u.endLine,column:u.endCol,offset:u.endOffset}},ruleId:f,source:"hast-util-from-html"});i.path&&(S.file=i.path,S.name=i.path+":"+S.name),S.fatal=joe[y],S.note=E(C.description),S.url=C.url===!1?void 0:Poe+f,r(S)}function E(C){return C.replace(Uoe,S).replace(Foe,N);function S(_,O,M){const R=(M?Number.parseInt(M,10):0)*(O==="-"?-1:1),L=s.charAt(u.startOffset+R);return Yoe(L)}function N(){return Goe(s.charCodeAt(u.startOffset))}}}}function Voe(e){return e.replace(Hoe,qoe)}function qoe(e){return e.charAt(1).toUpperCase()}function Yoe(e){return e==="`"?"` ` `":e}function Goe(e){return"0x"+e.toString(16).toUpperCase()}function Woe(e){const t=this,{emitParseErrors:n,...r}={...t.data("settings"),...e};t.parser=i;function i(o,s){return $oe(o,{...r,onerror:n?function(a){s.path&&(a.name=s.path+":"+a.name,a.file=s.path),s.messages.push(a)}:void 0})}}const N9=-1,_b=0,ph=1,c1=2,ox=3,sx=4,ax=5,lx=6,M9=7,R9=8,G4=typeof self=="object"?self:globalThis,Koe=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case _b:case N9:return n(s,i);case ph:{const a=n([],i);for(const c of s)a.push(r(c));return a}case c1:{const a=n({},i);for(const[c,u]of s)a[r(c)]=r(u);return a}case ox:return n(new Date(s),i);case sx:{const{source:a,flags:c}=s;return n(new RegExp(a,c),i)}case ax:{const a=n(new Map,i);for(const[c,u]of s)a.set(r(c),r(u));return a}case lx:{const a=n(new Set,i);for(const c of s)a.add(r(c));return a}case M9:{const{name:a,message:c}=s;return n(new G4[a](c),i)}case R9:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new G4[o](s),i)};return r},W4=e=>Koe(new Map,e)(0),Eu="",{toString:Qoe}={},{keys:Xoe}=Object,Lf=e=>{const t=typeof e;if(t!=="object"||!e)return[_b,t];const n=Qoe.call(e).slice(8,-1);switch(n){case"Array":return[ph,Eu];case"Object":return[c1,Eu];case"Date":return[ox,Eu];case"RegExp":return[sx,Eu];case"Map":return[ax,Eu];case"Set":return[lx,Eu];case"DataView":return[ph,n]}return n.includes("Array")?[ph,n]:n.includes("Error")?[M9,n]:[c1,n]},mg=([e,t])=>e===_b&&(t==="function"||t==="symbol"),Zoe=(e,t,n,r)=>{const i=(s,a)=>{const c=r.push(s)-1;return n.set(a,c),c},o=s=>{if(n.has(s))return n.get(s);let[a,c]=Lf(s);switch(a){case _b:{let f=s;switch(c){case"bigint":a=R9,f=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([N9],s)}return i([a,f],s)}case ph:{if(c){let m=s;return c==="DataView"?m=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(s)),i([c,[...m]],s)}const f=[],h=i([a,f],s);for(const m of s)f.push(o(m));return h}case c1:{if(c)switch(c){case"BigInt":return i([c,s.toString()],s);case"Boolean":case"Number":case"String":return i([c,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const f=[],h=i([a,f],s);for(const m of Xoe(s))(e||!mg(Lf(s[m])))&&f.push([o(m),o(s[m])]);return h}case ox:return i([a,s.toISOString()],s);case sx:{const{source:f,flags:h}=s;return i([a,{source:f,flags:h}],s)}case ax:{const f=[],h=i([a,f],s);for(const[m,g]of s)(e||!(mg(Lf(m))||mg(Lf(g))))&&f.push([o(m),o(g)]);return h}case lx:{const f=[],h=i([a,f],s);for(const m of s)(e||!mg(Lf(m)))&&f.push(o(m));return h}}const{message:u}=s;return i([a,{name:c,message:u}],s)};return o},K4=(e,{json:t,lossy:n}={})=>{const r=[];return Zoe(!(t||n),!!t,new Map,r)(e),r},od=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?W4(K4(e,t)):structuredClone(e):(e,t)=>W4(K4(e,t)),cx=(function(e,t,n,r,i){const o=ko(t);return O9(e)?o.call(i,e,n,r):!1}),ko=(function(e){if(e==null)return tse;if(typeof e=="string")return ese(e);if(typeof e=="object")return Joe(e);if(typeof e=="function")return ux(e);throw new Error("Expected function, string, or array as `test`")});function Joe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ko(e[n]);return ux(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function ese(e){return ux(t);function t(n){return n.tagName===e}}function ux(e){return t;function t(n,r,i){return!!(O9(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function tse(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function O9(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const D9=ko(function(e){return e.tagName==="audio"||e.tagName==="canvas"||e.tagName==="embed"||e.tagName==="iframe"||e.tagName==="img"||e.tagName==="math"||e.tagName==="object"||e.tagName==="picture"||e.tagName==="svg"||e.tagName==="video"}),nse=/[ \t\n\f\r]/g;function wp(e){return typeof e=="object"?e.type==="text"?Q4(e.value):!1:Q4(e)}function Q4(e){return e.replace(nse,"")===""}const wd=(function(e){if(e==null)return sse;if(typeof e=="function")return Ab(e);if(typeof e=="object")return Array.isArray(e)?rse(e):ise(e);if(typeof e=="string")return ose(e);throw new Error("Expected function, string, or object as test")});function rse(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=wd(e[n]);return Ab(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function ise(e){const t=e;return Ab(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function ose(e){return Ab(t);function t(n){return n&&n.type===e}}function Ab(e){return t;function t(n,r,i){return!!(ase(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function sse(){return!0}function ase(e){return e!==null&&typeof e=="object"&&"type"in e}const lse=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],cse=["button","input","select","textarea"],use=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],dse={},dx=wd(["comment","doctype"]);function fse(e,t){L9(e,{collapse:Ese((t||dse).newlines?bse:yse),whitespace:"normal"})}function L9(e,t){if("children"in e){const n={...t};return(e.type==="root"||P9(e))&&(n.before=!0,n.after=!0),n.whitespace=vse(e,t),pse(e,n)}if(e.type==="text"){if(t.whitespace==="normal")return hse(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:dx(e),stripAtStart:!1,remove:!1}}function hse(e,t){const n=t.collapse(e.value),r={ignore:!1,stripAtStart:!1,remove:!1};let i=0,o=n.length;return t.before&&X4(n.charAt(0))&&i++,i!==o&&X4(n.charAt(o-1))&&(t.after?o--:r.stripAtStart=!0),i===o?r.remove=!0:e.value=n.slice(i,o),r}function pse(e,t){let n=t.before;const r=t.after,i=e.children;let o=i.length,s=-1;for(;++s<o;){const a=L9(i[s],{...t,after:I9(i,s,r),before:n});a.remove?(i.splice(s,1),s--,o--):a.ignore||(n=a.stripAtStart),B9(i[s])&&(n=!1)}return{ignore:!1,stripAtStart:!!(n||r),remove:!1}}function I9(e,t,n){for(;++t<e.length;){const r=e[t];let i=mse(r);if(i===void 0&&"children"in r&&!gse(r)&&(i=I9(r.children,-1)),typeof i=="boolean")return i}return n}function mse(e){if(e.type==="element"){if(B9(e))return!1;if(P9(e))return!0}else if(e.type==="text"){if(!wp(e))return!1}else if(!dx(e))return!1}function B9(e){return D9(e)||cx(e,cse)}function P9(e){return cx(e,lse)}function gse(e){return!!(e.type==="element"&&e.properties.hidden)||dx(e)||cx(e,use)}function X4(e){return e===" "||e===`
`}function bse(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function yse(){return" "}function Ese(e){return t;function t(n){return String(n).replace(/[\t\n\v\f\r ]+/g,e)}}function vse(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}function Cse(e){return function(t){fse(t,e)}}const H9=[],wse=!0,u1=!1,U9="skip";function F9(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=wd(i),s=r?-1:1;a(e,void 0,[])();function a(c,u,f){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=H9,y,E,C;if((!t||o(c,u,f[f.length-1]||void 0))&&(g=Sse(n(c,f)),g[0]===u1))return g;if("children"in c&&c.children){const S=c;if(S.children&&g[0]!==U9)for(E=(r?S.children.length:-1)+s,C=f.concat(S);E>-1&&E<S.children.length;){const N=S.children[E];if(y=a(N,E,C)(),y[0]===u1)return y;E=typeof y[1]=="number"?y[1]:E+s}}return g}}}function Sse(e){return Array.isArray(e)?e:typeof e=="number"?[wse,e]:e==null?H9:[e]}function Ec(e,t,n,r){let i,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,i=n):(o=t,s=n,i=r),F9(e,o,a,i);function a(c,u){const f=u[u.length-1],h=f?f.children.indexOf(c):void 0;return s(c,h,f)}}const j9=$9("end"),z9=$9("start");function $9(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function V9(e){const t=z9(e),n=j9(e);if(t&&n)return{start:t,end:n}}function Tse(e,t){const n=t.properties||{},r=e.all(t),i={type:"link",url:e.resolve(String(n.href||"")||null),title:n.title?String(n.title):null,children:r};return e.patch(t,i),i}function xse(e,t){e.baseFound||(e.frozenBaseUrl=String(t.properties&&t.properties.href||"")||void 0,e.baseFound=!0)}function kse(e,t){const n={type:"blockquote",children:e.toFlow(e.all(t))};return e.patch(t,n),n}function _se(e,t){const n={type:"break"};return e.patch(t,n),n}const Z4=(function(e,t,n){const r=wd(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),J4=/\n/g,eO=/[\t ]+/g,R2=ko("br"),tO=ko(Lse),Ase=ko("p"),nO=ko("tr"),Nse=ko(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Dse,Ise]),q9=ko(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Sp(e,t){const n={},r="children"in e?e.children:[],i=q9(e),o=W9(e,{whitespace:n.whitespace||"normal"}),s=[];(e.type==="text"||e.type==="comment")&&s.push(...G9(e,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<r.length;)s.push(...Y9(r[a],e,{whitespace:o,breakBefore:a?void 0:i,breakAfter:a<r.length-1?R2(r[a+1]):i}));const c=[];let u;for(a=-1;++a<s.length;){const f=s[a];typeof f=="number"?u!==void 0&&f>u&&(u=f):f&&(u!==void 0&&u>-1&&c.push(`
`.repeat(u)||" "),u=-1,c.push(f))}return c.join("")}function Y9(e,t,n){return e.type==="element"?Mse(e,t,n):e.type==="text"?n.whitespace==="normal"?G9(e,n):Rse(e):[]}function Mse(e,t,n){const r=W9(e,n),i=e.children||[];let o=-1,s=[];if(Nse(e))return s;let a,c;for(R2(e)||nO(e)&&Z4(t,e,nO)?c=`
`:Ase(e)?(a=2,c=2):q9(e)&&(a=1,c=1);++o<i.length;)s=s.concat(Y9(i[o],e,{whitespace:r,breakBefore:o?void 0:a,breakAfter:o<i.length-1?R2(i[o+1]):c}));return tO(e)&&Z4(t,e,tO)&&s.push("	"),a&&s.unshift(a),c&&s.push(c),s}function G9(e,t){const n=String(e.value),r=[],i=[];let o=0;for(;o<=n.length;){J4.lastIndex=o;const c=J4.exec(n),u=c&&"index"in c?c.index:n.length;r.push(Ose(n.slice(o,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,u===n.length?t.breakAfter:!0)),o=u+1}let s=-1,a;for(;++s<r.length;)r[s].charCodeAt(r[s].length-1)===8203||s<r.length-1&&r[s+1].charCodeAt(0)===8203?(i.push(r[s]),a=void 0):r[s]?(typeof a=="number"&&i.push(a),i.push(r[s]),a=0):(s===0||s===r.length-1)&&i.push(0);return i}function Rse(e){return[String(e.value)]}function Ose(e,t,n){const r=[];let i=0,o;for(;i<e.length;){eO.lastIndex=i;const s=eO.exec(e);o=s?s.index:e.length,!i&&!o&&s&&!t&&r.push(""),i!==o&&r.push(e.slice(i,o)),i=s?o+s[0].length:o}return i!==o&&!n&&r.push(""),r.join(" ")}function W9(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function Dse(e){return!!(e.properties||{}).hidden}function Lse(e){return e.tagName==="td"||e.tagName==="th"}function Ise(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function Bse(e){const t=String(e);let n=t.length;for(;n>0;){const r=t.codePointAt(n-1);if(r!==void 0&&(r===10||r===13))n--;else break}return t.slice(0,n)}const kC="language-";function gg(e,t){const n=t.children;let r=-1,i,o;if(t.tagName==="pre")for(;++r<n.length;){const a=n[r];if(a.type==="element"&&a.tagName==="code"&&a.properties&&a.properties.className&&Array.isArray(a.properties.className)){i=a.properties.className;break}}if(i){for(r=-1;++r<i.length;)if(String(i[r]).slice(0,kC.length)===kC){o=String(i[r]).slice(kC.length);break}}const s={type:"code",lang:o||null,meta:null,value:Bse(Sp(t))};return e.patch(t,s),s}function Pse(e,t){const n={type:"html",value:"<!--"+t.value+"-->"};return e.patch(t,n),n}function _C(e,t){const r={type:"delete",children:e.all(t)};return e.patch(t,r),r}function fx(e){let t=-1;if(e.length>1){for(;++t<e.length;)if(e[t].spread)return!0}return!1}function Hse(e,t){const n=[],r=[];let i=-1;for(;++i<t.children.length;){const a=t.children[i];a.type==="element"&&a.tagName==="div"?n.push(...a.children):n.push(a)}let o={definitions:[],titles:[]};for(i=-1;++i<n.length;){const a=n[i];if(a.type==="element"&&a.tagName==="dt"){const c=n[i-1];c&&c.type==="element"&&c.tagName==="dd"&&(r.push(o),o={definitions:[],titles:[]}),o.titles.push(a)}else o.definitions.push(a)}r.push(o),i=-1;const s=[];for(;++i<r.length;){const a=[...rO(e,r[i].titles),...rO(e,r[i].definitions)];a.length>0&&s.push({type:"listItem",spread:a.length>1,checked:null,children:a})}if(s.length>0){const a={type:"list",ordered:!1,start:null,spread:fx(s),children:s};return e.patch(t,a),a}}function rO(e,t){const n=e.all({type:"root",children:t}),r=e.toSpecificContent(n,Use);return r.length===0?[]:r.length===1?r[0].children:[{type:"list",ordered:!1,start:null,spread:fx(r),children:r}]}function Use(){return{type:"listItem",spread:!1,checked:null,children:[]}}function bg(e,t){const r={type:"emphasis",children:e.all(t)};return e.patch(t,r),r}function hx(e){let t=0,n=e.length;for(;t<n&&e[t].type==="break";)t++;for(;n>t&&e[n-1].type==="break";)n--;return t===0&&n===e.length?e:e.slice(t,n)}function vu(e,t){const n=Number(t.tagName.charAt(1))||1,r=hx(e.all(t)),i={type:"heading",depth:n,children:r};return e.patch(t,i),i}function Fse(e,t){const n={type:"thematicBreak"};return e.patch(t,n),n}function jse(e,t){const n=t.properties||{},r=String(n.src||""),i=String(n.title||"");if(r&&i){const o={type:"link",title:null,url:e.resolve(r),children:[{type:"text",value:i}]};return e.patch(t,o),o}}function iO(e,t){const n=t.properties||{},r={type:"image",url:e.resolve(String(n.src||"")||null),title:n.title?String(n.title):null,alt:n.alt?String(n.alt):""};return e.patch(t,r),r}function If(e,t){const n={type:"inlineCode",value:Sp(t)};return e.patch(t,n),n}function K9(e,t){const n=[],r=[],i=t||e.properties||{},o=Q9(e),s=Math.min(Number.parseInt(String(i.size),10),0)||(i.multiple?4:1);let a=-1;for(;++a<o.length;){const f=o[a];f&&f.properties&&f.properties.selected&&n.push(f)}const c=n.length>0?n:o,u=Math.min(c.length,s);for(a=-1;++a<u;){const f=c[a],h=f.properties||{},m=Sp(f),g=m||String(h.label||""),y=String(h.value||"")||m;r.push([y,g===y?void 0:g])}return r}function Q9(e){const t=[];let n=-1;for(;++n<e.children.length;){const r=e.children[n];"children"in r&&Array.isArray(r.children)&&t.push(...Q9(r)),r.type==="element"&&r.tagName==="option"&&(!r.properties||!r.properties.disabled)&&t.push(r)}return t}const zse="[x]",$se="[ ]";function Vse(e,t){const n=t.properties||{},r=String(n.value||n.placeholder||"");if(n.disabled||n.type==="hidden"||n.type==="file")return;if(n.type==="checkbox"||n.type==="radio"){const c={type:"text",value:n.checked?e.options.checked||zse:e.options.unchecked||$se};return e.patch(t,c),c}if(n.type==="image"){const c=n.alt||r;if(c){const u={type:"image",url:e.resolve(String(n.src||"")||null),title:String(n.title||"")||null,alt:String(c)};return e.patch(t,u),u}return}let i=[];if(r)i=[[r,void 0]];else if(n.type!=="button"&&n.type!=="file"&&n.type!=="password"&&n.type!=="reset"&&n.type!=="submit"&&n.list){const c=String(n.list),u=e.elementById.get(c);u&&u.tagName==="datalist"&&(i=K9(u,n))}if(i.length===0)return;if(n.type==="password"&&(i[0]=["".repeat(i[0][0].length),void 0]),n.type==="email"||n.type==="url"){const c=[];let u=-1;for(;++u<i.length;){const f=e.resolve(i[u][0]),h={type:"link",title:null,url:n.type==="email"?"mailto:"+f:f,children:[{type:"text",value:i[u][1]||f}]};c.push(h),u!==i.length-1&&c.push({type:"text",value:", "})}return c}const o=[];let s=-1;for(;++s<i.length;)o.push(i[s][1]?i[s][1]+" ("+i[s][0]+")":i[s][0]);const a={type:"text",value:o.join(", ")};return e.patch(t,a),a}const qse={}.hasOwnProperty;function Yse(e,t){const n=e.type==="element"&&qse.call(e.properties,t)&&e.properties[t];return n!=null&&n!==!1}const Gse=new Set(["pingback","prefetch","stylesheet"]);function Wse(e){if(e.type!=="element"||e.tagName!=="link")return!1;if(e.properties.itemProp)return!0;const t=e.properties.rel;let n=-1;if(!Array.isArray(t)||t.length===0)return!1;for(;++n<t.length;)if(!Gse.has(String(t[n])))return!1;return!0}const Kse=ko(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),Qse=ko("meta");function X9(e){return!!(e.type==="text"||Kse(e)||D9(e)||Wse(e)||Qse(e)&&Yse(e,"itemProp"))}function AC(e,t){const{rest:n,checkbox:r}=J9(t),i=r?!!r.properties.checked:null,o=Z9(n),s=e.toFlow(e.all(n)),a={type:"listItem",spread:o,checked:i,children:s};return e.patch(t,a),a}function Z9(e){let t=-1,n=!1;for(;++t<e.children.length;){const r=e.children[t];if(r.type==="element"){if(X9(r))continue;if(r.tagName==="p"||n||Z9(r))return!0;n=!0}}return!1}function J9(e){const t=e.children[0];if(t&&t.type==="element"&&t.tagName==="input"&&t.properties&&(t.properties.type==="checkbox"||t.properties.type==="radio")){const n={...e,children:e.children.slice(1)};return{checkbox:t,rest:n}}if(t&&t.type==="element"&&t.tagName==="p"){const{checkbox:n,rest:r}=J9(t);if(n){const i={...e,children:[r,...e.children.slice(1)]};return{checkbox:n,rest:i}}}return{checkbox:void 0,rest:e}}function NC(e,t){const n=t.tagName==="ol",r=e.toSpecificContent(e.all(t),Xse);let i=null;n&&(i=t.properties&&t.properties.start?Number.parseInt(String(t.properties.start),10):1);const o={type:"list",ordered:n,start:i,spread:fx(r),children:r};return e.patch(t,o),o}function Xse(){return{type:"listItem",spread:!1,checked:null,children:[]}}const Zse={};function Nb(e,t){const n=Zse,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return eB(e,r,i)}function eB(e,t,n){if(Jse(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return oO(e.children,t,n)}return Array.isArray(e)?oO(e,t,n):""}function oO(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=eB(e[i],t,n);return r.join("")}function Jse(e){return!!(e&&typeof e=="object")}const tB=wd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Mb(e){let t=-1;for(;++t<e.length;){const n=e[t];if(!iB(n)||"children"in n&&Mb(n.children))return!0}return!1}function nB(e){return rB(e,t,function(n){return n});function t(n){return n.every(function(r){return r.type==="text"?wp(r.value):!1})?[]:[{type:"paragraph",children:hx(n)}]}}function eae(e){return rB(e.children,t,n);function t(r){const i=MC(e);return i.children=r,[i]}function n(r){if("children"in r&&"children"in e){const i=MC(e),o=MC(r);return i.children=r.children,o.children.push(i),o}return{...r}}}function rB(e,t,n){const r=tae(e),i=[];let o=[],s=-1;for(;++s<r.length;){const a=r[s];iB(a)?o.push(a):(o.length>0&&(i.push(...t(o)),o=[]),i.push(n(a)))}return o.length>0&&(i.push(...t(o)),o=[]),i}function tae(e){const t=[];let n=-1;for(;++n<e.length;){const r=e[n];(r.type==="delete"||r.type==="link")&&Mb(r.children)?t.push(...eae(r)):t.push(r)}return t}function iB(e){const t=e.data&&e.data.hName;return t?X9({type:"element",tagName:t,properties:{},children:[]}):tB(e)}function MC(e){return od({...e,children:[]})}function sO(e,t){const n=t.properties||{},r=t.tagName==="video"?String(n.poster||""):"";let i=String(n.src||""),o=-1,s=!1,a=e.all(t);if(Ec({type:"root",children:a},function(h){if(h.type==="link")return s=!0,u1}),s||Mb(a))return a;for(;!i&&++o<t.children.length;){const h=t.children[o];h.type==="element"&&h.tagName==="source"&&h.properties&&(i=String(h.properties.src||""))}if(r){const h={type:"image",title:null,url:e.resolve(r),alt:Nb(a)};e.patch(t,h),a=[h]}const u=a,f={type:"link",title:n.title?String(n.title):null,url:e.resolve(i),children:u};return e.patch(t,f),f}function aO(e,t){const n=hx(e.all(t));if(n.length>0){const r={type:"paragraph",children:n};return e.patch(t,r),r}}const nae=['"'];function rae(e,t){const n=e.options.quotes||nae;e.qNesting++;const r=e.all(t);e.qNesting--;const i=n[e.qNesting%n.length],o=r[0],s=r[r.length-1],a=i.charAt(0),c=i.length>1?i.charAt(1):i;return o&&o.type==="text"?o.value=a+o.value:r.unshift({type:"text",value:a}),s&&s.type==="text"?s.value+=c:r.push({type:"text",value:c}),r}function iae(e,t){let n=e.all(t);(e.options.document||Mb(n))&&(n=nB(n));const r={type:"root",children:n};return e.patch(t,r),r}function oae(e,t){const n=K9(t);let r=-1;const i=[];for(;++r<n.length;){const o=n[r];i.push(o[1]?o[1]+" ("+o[0]+")":o[0])}if(i.length>0){const o={type:"text",value:i.join(", ")};return e.patch(t,o),o}}function lO(e,t){const r={type:"strong",children:e.all(t)};return e.patch(t,r),r}function cO(e,t){const r={type:"tableCell",children:e.all(t)};if(e.patch(t,r),t.properties){const i=t.properties.rowSpan,o=t.properties.colSpan;if(i||o){const s=r.data||(r.data={});i&&(s.hastUtilToMdastTemporaryRowSpan=i),o&&(s.hastUtilToMdastTemporaryColSpan=o)}}return r}function sae(e,t){const r={type:"tableRow",children:e.toSpecificContent(e.all(t),aae)};return e.patch(t,r),r}function aae(){return{type:"tableCell",children:[]}}function lae(e,t){if(e.inTable){const u={type:"text",value:Sp(t)};return e.patch(t,u),u}e.inTable=!0;const{align:n,headless:r}=cae(t),i=e.toSpecificContent(e.all(t),uO);r&&i.unshift(uO());let o=-1;for(;++o<i.length;){const u=i[o],f=e.toSpecificContent(u.children,uae);u.children=f}let s=1;for(o=-1;++o<i.length;){const u=i[o].children;let f=-1;for(;++f<u.length;){const h=u[f];if(h.data){const m=h.data,g=Number.parseInt(String(m.hastUtilToMdastTemporaryColSpan),10)||1,y=Number.parseInt(String(m.hastUtilToMdastTemporaryRowSpan),10)||1;if(g>1||y>1){let E=o-1;for(;++E<o+y;){let C=f-1;for(;++C<f+g&&i[E];){const S=[];(E!==o||C!==f)&&S.push({type:"tableCell",children:[]}),i[E].children.splice(C,0,...S)}}}"hastUtilToMdastTemporaryColSpan"in h.data&&delete h.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in h.data&&delete h.data.hastUtilToMdastTemporaryRowSpan,Object.keys(h.data).length===0&&delete h.data}}u.length>s&&(s=u.length)}for(o=-1;++o<i.length;){const u=i[o].children;let f=u.length-1;for(;++f<s;)u.push({type:"tableCell",children:[]})}let a=n.length-1;for(;++a<s;)n.push(null);e.inTable=!1;const c={type:"table",align:n,children:i};return e.patch(t,c),c}function cae(e){const t={align:[null],headless:!0};let n=0,r=0;return Ec(e,function(i){if(i.type==="element"){if(i.tagName==="table"&&e!==i)return U9;if((i.tagName==="th"||i.tagName==="td")&&i.properties){if(!t.align[r]){const o=String(i.properties.align||"")||null;(o==="center"||o==="left"||o==="right"||o===null)&&(t.align[r]=o)}t.headless&&n<2&&i.tagName==="th"&&(t.headless=!1),r++}else i.tagName==="thead"?t.headless=!1:i.tagName==="tr"&&(n++,r=0)}}),t}function uae(){return{type:"tableCell",children:[]}}function uO(){return{type:"tableRow",children:[]}}function dae(e,t){const n={type:"text",value:t.value};return e.patch(t,n),n}function fae(e,t){const n={type:"text",value:Sp(t)};return e.patch(t,n),n}function hae(e,t){const n={type:"text",value:""};return e.patch(t,n),n}const pae={comment:Pse,doctype:bt,root:iae,text:dae},mae={applet:bt,area:bt,basefont:bt,bgsound:bt,caption:bt,col:bt,colgroup:bt,command:bt,content:bt,datalist:bt,dialog:bt,element:bt,embed:bt,frame:bt,frameset:bt,isindex:bt,keygen:bt,link:bt,math:bt,menu:bt,menuitem:bt,meta:bt,nextid:bt,noembed:bt,noframes:bt,optgroup:bt,option:bt,param:bt,script:bt,shadow:bt,source:bt,spacer:bt,style:bt,svg:bt,template:bt,title:bt,track:bt,abbr:gt,acronym:gt,bdi:gt,bdo:gt,big:gt,blink:gt,button:gt,canvas:gt,cite:gt,data:gt,details:gt,dfn:gt,font:gt,ins:gt,label:gt,map:gt,marquee:gt,meter:gt,nobr:gt,noscript:gt,object:gt,output:gt,progress:gt,rb:gt,rbc:gt,rp:gt,rt:gt,rtc:gt,ruby:gt,slot:gt,small:gt,span:gt,sup:gt,sub:gt,tbody:gt,tfoot:gt,thead:gt,time:gt,address:In,article:In,aside:In,body:In,center:In,div:In,fieldset:In,figcaption:In,figure:In,form:In,footer:In,header:In,hgroup:In,html:In,legend:In,main:In,multicol:In,nav:In,picture:In,section:In,a:Tse,audio:sO,b:lO,base:xse,blockquote:kse,br:_se,code:If,dir:NC,dl:Hse,dt:AC,dd:AC,del:_C,em:bg,h1:vu,h2:vu,h3:vu,h4:vu,h5:vu,h6:vu,hr:Fse,i:bg,iframe:jse,img:iO,image:iO,input:Vse,kbd:If,li:AC,listing:gg,mark:bg,ol:NC,p:aO,plaintext:gg,pre:gg,q:rae,s:_C,samp:If,select:oae,strike:_C,strong:lO,summary:aO,table:lae,td:cO,textarea:fae,th:cO,tr:sae,tt:If,u:bg,ul:NC,var:If,video:sO,wbr:hae,xmp:gg};function gt(e,t){return e.all(t)}function In(e,t){return e.toFlow(e.all(t))}function bt(){}const dO={}.hasOwnProperty;function gae(e){return{all:bae,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...mae,...e.handlers},inTable:!1,nodeHandlers:{...pae,...e.nodeHandlers},one:yae,options:e,patch:Eae,qNesting:0,resolve:vae,toFlow:Cae,toSpecificContent:wae}}function bae(e){const t=e.children||[],n=[];let r=-1;for(;++r<t.length;){const i=t[r],o=this.one(i,e);Array.isArray(o)?n.push(...o):o&&n.push(o)}return n}function yae(e,t){if(e.type==="element"){if(e.properties&&e.properties.dataMdast==="ignore")return;if(dO.call(this.handlers,e.tagName))return this.handlers[e.tagName](this,e,t)||void 0}else if(dO.call(this.nodeHandlers,e.type))return this.nodeHandlers[e.type](this,e,t)||void 0;if("value"in e&&typeof e.value=="string"){const n={type:"text",value:e.value};return this.patch(e,n),n}if("children"in e)return this.all(e)}function Eae(e,t){e.position&&(t.position=V9(e))}function vae(e){const t=this.frozenBaseUrl;return e==null?"":t?String(new URL(e,t)):e}function Cae(e){return nB(e)}function wae(e,t){const n=t(),r=[];let i=[],o=-1;for(;++o<e.length;){const a=e[o];if(s(a))i.length>0&&(a.children.unshift(...i),i=[]),r.push(a);else{const c=a;i.push(c)}}if(i.length>0){let a=r[r.length-1];a||(a=t(),r.push(a)),a.children.push(...i),i=[]}return r;function s(a){return a.type===n.type}}const Sae={};function fO(e,t){const n=od(e),r=t||Sae,i=Cse({newlines:r.newlines===!0}),o=gae(r);let s;i(n),Ec(n,function(c){if(c&&c.type==="element"&&c.properties){const u=String(c.properties.id||"")||void 0;u&&!o.elementById.has(u)&&o.elementById.set(u,c)}});const a=o.one(n,void 0);return a?Array.isArray(a)?s={type:"root",children:a}:s=a:s={type:"root",children:[]},Ec(s,function(c,u,f){if(c.type==="text"&&u!==void 0&&f){const h=f.children[u-1];if(h&&h.type===c.type)return h.value+=c.value,f.children.splice(u,1),h.position&&c.position&&(h.position.end=c.position.end),u-1;if(c.value=c.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),f&&(f.type==="heading"||f.type==="paragraph"||f.type==="root")&&(u||(c.value=c.value.replace(/^[\t ]+/,"")),u===f.children.length-1&&(c.value=c.value.replace(/[\t ]+$/,""))),!c.value)return f.children.splice(u,1),u}}),s}const hO={document:!0};function Tae(e,t){return e&&"run"in e?async function(n,r){const i=fO(n,{...hO,...t});await e.run(i,r)}:function(n){return fO(n,{...hO,...e})}}function d1(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}const Sr=dl(/[A-Za-z]/),pr=dl(/[\dA-Za-z]/),xae=dl(/[#-'*+\--9=?A-Z^-~]/);function f1(e){return e!==null&&(e<32||e===127)}const O2=dl(/\d/),kae=dl(/[\dA-Fa-f]/),_ae=dl(/[!-/:-@[-`{-~]/);function Xe(e){return e!==null&&e<-2}function Zt(e){return e!==null&&(e<0||e===32)}function vt(e){return e===-2||e===-1||e===32}const Rb=dl(new RegExp("\\p{P}|\\p{S}","u")),vc=dl(/\s/);function dl(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Aae(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Nae(e,t,n){const i=wd((n||{}).ignore||[]),o=Mae(t);let s=-1;for(;++s<o.length;)F9(e,"text",a);function a(u,f){let h=-1,m;for(;++h<f.length;){const g=f[h],y=m?m.children:void 0;if(i(g,y?y.indexOf(g):void 0,m))return;m=g}if(m)return c(u,f)}function c(u,f){const h=f[f.length-1],m=o[s][0],g=o[s][1];let y=0;const C=h.children.indexOf(u);let S=!1,N=[];m.lastIndex=0;let _=m.exec(u.value);for(;_;){const O=_.index,M={index:_.index,input:_.input,stack:[...f,u]};let R=g(..._,M);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?m.lastIndex=O+1:(y!==O&&N.push({type:"text",value:u.value.slice(y,O)}),Array.isArray(R)?N.push(...R):R&&N.push(R),y=O+_[0].length,S=!0),!m.global)break;_=m.exec(u.value)}return S?(y<u.value.length&&N.push({type:"text",value:u.value.slice(y)}),h.children.splice(C,1,...N)):N=[u],C+N.length}}function Mae(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([Rae(i[0]),Oae(i[1])])}return t}function Rae(e){return typeof e=="string"?new RegExp(Aae(e),"g"):e}function Oae(e){return typeof e=="function"?e:function(){return e}}const RC="phrasing",OC=["autolink","link","image","label"];function Dae(){return{transforms:[Fae],enter:{literalAutolink:Iae,literalAutolinkEmail:DC,literalAutolinkHttp:DC,literalAutolinkWww:DC},exit:{literalAutolink:Uae,literalAutolinkEmail:Hae,literalAutolinkHttp:Bae,literalAutolinkWww:Pae}}}function Lae(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:RC,notInConstruct:OC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:RC,notInConstruct:OC},{character:":",before:"[ps]",after:"\\/",inConstruct:RC,notInConstruct:OC}]}}function Iae(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function DC(e){this.config.enter.autolinkProtocol.call(this,e)}function Bae(e){this.config.exit.autolinkProtocol.call(this,e)}function Pae(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Hae(e){this.config.exit.autolinkEmail.call(this,e)}function Uae(e){this.exit(e)}function Fae(e){Nae(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,jae],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),zae]],{ignore:["link","linkReference"]})}function jae(e,t,n,r,i){let o="";if(!oB(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!$ae(n)))return!1;const s=Vae(n+r);if(!s[0])return!1;const a={type:"link",title:null,url:o+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function zae(e,t,n,r){return!oB(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function $ae(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Vae(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=d1(e,"(");let o=d1(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function oB(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||vc(n)||Rb(n))&&(!t||n!==47)}function ho(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}sB.peek=Jae;function qae(){this.buffer()}function Yae(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Gae(){this.buffer()}function Wae(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Kae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ho(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Qae(e){this.exit(e)}function Xae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ho(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Zae(e){this.exit(e)}function Jae(){return"["}function sB(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const s=n.enter("footnoteReference"),a=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),a(),s(),o+=i.move("]"),o}function ele(){return{enter:{gfmFootnoteCallString:qae,gfmFootnoteCall:Yae,gfmFootnoteDefinitionLabelString:Gae,gfmFootnoteDefinition:Wae},exit:{gfmFootnoteCallString:Kae,gfmFootnoteCall:Qae,gfmFootnoteDefinitionLabelString:Xae,gfmFootnoteDefinition:Zae}}}function tle(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:sB},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,s){const a=o.createTracker(s);let c=a.move("[^");const u=o.enter("footnoteDefinition"),f=o.enter("label");return c+=a.move(o.safe(o.associationId(r),{before:c,after:"]"})),f(),c+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),c+=a.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,a.current()),t?aB:nle))),u(),c}}function nle(e,t,n){return t===0?e:aB(e,t,n)}function aB(e,t,n){return(n?"":"    ")+e}const rle=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];lB.peek=lle;function ile(){return{canContainEols:["delete"],enter:{strikethrough:sle},exit:{strikethrough:ale}}}function ole(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:rle}],handlers:{delete:lB}}}function sle(e){this.enter({type:"delete",children:[]},e)}function ale(e){this.exit(e)}function lB(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let s=i.move("~~");return s+=n.containerPhrasing(e,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function lle(){return"~"}function cle(e){return e.length}function ule(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||cle,o=[],s=[],a=[],c=[];let u=0,f=-1;for(;++f<e.length;){const E=[],C=[];let S=-1;for(e[f].length>u&&(u=e[f].length);++S<e[f].length;){const N=dle(e[f][S]);if(n.alignDelimiters!==!1){const _=i(N);C[S]=_,(c[S]===void 0||_>c[S])&&(c[S]=_)}E.push(N)}s[f]=E,a[f]=C}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)o[h]=pO(r[h]);else{const E=pO(r);for(;++h<u;)o[h]=E}h=-1;const m=[],g=[];for(;++h<u;){const E=o[h];let C="",S="";E===99?(C=":",S=":"):E===108?C=":":E===114&&(S=":");let N=n.alignDelimiters===!1?1:Math.max(1,c[h]-C.length-S.length);const _=C+"-".repeat(N)+S;n.alignDelimiters!==!1&&(N=C.length+N+S.length,N>c[h]&&(c[h]=N),g[h]=N),m[h]=_}s.splice(1,0,m),a.splice(1,0,g),f=-1;const y=[];for(;++f<s.length;){const E=s[f],C=a[f];h=-1;const S=[];for(;++h<u;){const N=E[h]||"";let _="",O="";if(n.alignDelimiters!==!1){const M=c[h]-(C[h]||0),R=o[h];R===114?_=" ".repeat(M):R===99?M%2?(_=" ".repeat(M/2+.5),O=" ".repeat(M/2-.5)):(_=" ".repeat(M/2),O=_):O=" ".repeat(M)}n.delimiterStart!==!1&&!h&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&N==="")&&(n.delimiterStart!==!1||h)&&S.push(" "),n.alignDelimiters!==!1&&S.push(_),S.push(N),n.alignDelimiters!==!1&&S.push(O),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&S.push("|")}y.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return y.join(`
`)}function dle(e){return e==null?"":String(e)}function pO(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const mO={}.hasOwnProperty;function cB(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&mO.call(i,e)){const c=String(i[e]);s=mO.call(a,c)?a[c]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const fle={}.hasOwnProperty;function uB(e,t){let n=-1,r;if(t.extensions)for(;++n<t.extensions.length;)uB(e,t.extensions[n]);for(r in t)if(fle.call(t,r))switch(r){case"extensions":break;case"unsafe":{gO(e[r],t[r]);break}case"join":{gO(e[r],t[r]);break}case"handlers":{hle(e[r],t[r]);break}default:e.options[r]=t[r]}return e}function gO(e,t){t&&e.push(...t)}function hle(e,t){t&&Object.assign(e,t)}function ple(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const s=n.indentLines(n.containerFlow(e,o.current()),mle);return i(),s}function mle(e,t,n){return">"+(n?"":" ")+e}function dB(e,t){return bO(e,t.inConstruct,!0)&&!bO(e,t.notInConstruct,!1)}function bO(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function yO(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&dB(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function gle(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>s&&(s=o):o=1,i=r+t.length,r=n.indexOf(t,i);return s}function D2(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ble(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function yle(e,t,n,r){const i=ble(n),o=e.value||"",s=i==="`"?"GraveAccent":"Tilde";if(D2(e,n)){const h=n.enter("codeIndented"),m=n.indentLines(o,Ele);return h(),m}const a=n.createTracker(r),c=i.repeat(Math.max(gle(o,i)+1,3)),u=n.enter("codeFenced");let f=a.move(c);if(e.lang){const h=n.enter(`codeFencedLang${s}`);f+=a.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...a.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${s}`);f+=a.move(" "),f+=a.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...a.current()})),h()}return f+=a.move(`
`),o&&(f+=a.move(o+`
`)),f+=a.move(c),u(),f}function Ele(e,t,n){return(n?"":"    ")+e}function px(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function vle(e,t,n,r){const i=px(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(a=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),a(),e.title&&(a=n.enter(`title${o}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),a()),s(),u}function Cle(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function al(e){return"&#x"+e.toString(16).toUpperCase()+";"}function sd(e){if(e===null||Zt(e)||vc(e))return 1;if(Rb(e))return 2}function h1(e,t,n){const r=sd(e),i=sd(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}fB.peek=wle;function fB(e,t,n,r){const i=Cle(n),o=n.enter("emphasis"),s=n.createTracker(r),a=s.move(i);let c=s.move(n.containerPhrasing(e,{after:i,before:a,...s.current()}));const u=c.charCodeAt(0),f=h1(r.before.charCodeAt(r.before.length-1),u,i);f.inside&&(c=al(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=h1(r.after.charCodeAt(0),h,i);m.inside&&(c=c.slice(0,-1)+al(h));const g=s.move(i);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+g}function wle(e,t,n){return n.options.emphasis||"*"}function hB(e,t){let n=!1;return Ec(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,u1}),!!((!e.depth||e.depth<3)&&Nb(e)&&(t.options.setext||n))}function Sle(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(hB(e,n)){const f=n.enter("headingSetext"),h=n.enter("phrasing"),m=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return h(),f(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const s="#".repeat(i),a=n.enter("headingAtx"),c=n.enter("phrasing");o.move(s+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=al(u.charCodeAt(0))+u.slice(1)),u=u?s+" "+u:s,n.options.closeAtx&&(u+=" "+s),c(),a(),u}pB.peek=Tle;function pB(e){return e.value||""}function Tle(){return"<"}mB.peek=xle;function mB(e,t,n,r){const i=px(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(a=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),a(),e.title&&(a=n.enter(`title${o}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),a()),u+=c.move(")"),s(),u}function xle(){return"!"}gB.peek=kle;function gB(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let s=n.enter("label");const a=n.createTracker(r);let c=a.move("![");const u=n.safe(e.alt,{before:c,after:"]",...a.current()});c+=a.move(u+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:c,after:"]",...a.current()});return s(),n.stack=f,o(),i==="full"||!u||u!==h?c+=a.move(h+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function kle(){return"!"}bB.peek=_le;function bB(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const s=n.unsafe[o],a=n.compilePattern(s);let c;if(s.atBreak)for(;c=a.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return i+r+i}function _le(){return"`"}function yB(e,t){const n=Nb(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}EB.peek=Ale;function EB(e,t,n,r){const i=px(n),o=i==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let a,c;if(yB(e,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let h=s.move("<");return h+=s.move(n.containerPhrasing(e,{before:h,after:">",...s.current()})),h+=s.move(">"),a(),n.stack=f,h}a=n.enter("link"),c=n.enter("label");let u=s.move("[");return u+=s.move(n.containerPhrasing(e,{before:u,after:"](",...s.current()})),u+=s.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=s.move("<"),u+=s.move(n.safe(e.url,{before:u,after:">",...s.current()})),u+=s.move(">")):(c=n.enter("destinationRaw"),u+=s.move(n.safe(e.url,{before:u,after:e.title?" ":")",...s.current()}))),c(),e.title&&(c=n.enter(`title${o}`),u+=s.move(" "+i),u+=s.move(n.safe(e.title,{before:u,after:i,...s.current()})),u+=s.move(i),c()),u+=s.move(")"),a(),u}function Ale(e,t,n){return yB(e,n)?"<":"["}vB.peek=Nle;function vB(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let s=n.enter("label");const a=n.createTracker(r);let c=a.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...a.current()});c+=a.move(u+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:c,after:"]",...a.current()});return s(),n.stack=f,o(),i==="full"||!u||u!==h?c+=a.move(h+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function Nle(){return"["}function mx(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Mle(e){const t=mx(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Rle(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function CB(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Ole(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let s=e.ordered?Rle(n):mx(n);const a=e.ordered?s==="."?")":".":Mle(n);let c=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),CB(n)===s&&f){let h=-1;for(;++h<e.children.length;){const m=e.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(s=a),n.bulletCurrent=s;const u=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=o,i(),u}function Dle(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Lle(e,t,n,r){const i=Dle(n);let o=n.bulletCurrent||mx(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let s=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const a=n.createTracker(r);a.move(o+" ".repeat(s-o.length)),a.shift(s);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,a.current()),f);return c(),u;function f(h,m,g){return m?(g?"":" ".repeat(s))+h:(g?o:o+" ".repeat(s-o.length))+h}}function Ile(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),s=n.containerPhrasing(e,r);return o(),i(),s}function Ble(e,t,n,r){return(e.children.some(function(s){return tB(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Ple(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}wB.peek=Hle;function wB(e,t,n,r){const i=Ple(n),o=n.enter("strong"),s=n.createTracker(r),a=s.move(i+i);let c=s.move(n.containerPhrasing(e,{after:i,before:a,...s.current()}));const u=c.charCodeAt(0),f=h1(r.before.charCodeAt(r.before.length-1),u,i);f.inside&&(c=al(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=h1(r.after.charCodeAt(0),h,i);m.inside&&(c=c.slice(0,-1)+al(h));const g=s.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+g}function Hle(e,t,n){return n.options.strong||"*"}function Ule(e,t,n,r){return n.safe(e.value,r)}function Fle(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function jle(e,t,n){const r=(CB(n)+(n.options.ruleSpaces?" ":"")).repeat(Fle(n));return n.options.ruleSpaces?r.slice(0,-1):r}const gx={blockquote:ple,break:yO,code:yle,definition:vle,emphasis:fB,hardBreak:yO,heading:Sle,html:pB,image:mB,imageReference:gB,inlineCode:bB,link:EB,linkReference:vB,list:Ole,listItem:Lle,paragraph:Ile,root:Ble,strong:wB,text:Ule,thematicBreak:jle},zle=[$le];function $le(e,t,n,r){if(t.type==="code"&&D2(t,r)&&(e.type==="list"||e.type===t.type&&D2(e,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return e.type==="paragraph"&&(e.type===t.type||t.type==="definition"||t.type==="heading"&&hB(t,r))?void 0:n.spread?1:0}const Fl=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Vle=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Fl},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Fl},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Fl},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"~"}],EO=document.createElement("i");function bx(e){const t="&"+e+";";EO.innerHTML=t;const n=EO.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function SB(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const qle=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function TB(e){return e.replace(qle,Yle)}function Yle(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return SB(n.slice(o?2:1),o?16:10)}return bx(n)||e}function Gle(e){return e.label||!e.identifier?e.label||"":TB(e.identifier)}function Wle(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function Kle(e,t,n){const r=t.indexStack,i=e.children||[],o=[];let s=-1,a=n.before,c;r.push(-1);let u=t.createTracker(n);for(;++s<i.length;){const f=i[s];let h;if(r[r.length-1]=s,s+1<i.length){let y=t.handle.handlers[i[s+1].type];y&&y.peek&&(y=y.peek),h=y?y(i[s+1],e,t,{before:"",after:"",...u.current()}).charAt(0):""}else h=n.after;o.length>0&&(a==="\r"||a===`
`)&&f.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),a=" ",u=t.createTracker(n),u.move(o.join("")));let m=t.handle(f,e,t,{...u.current(),after:h,before:a});c&&c===m.slice(0,1)&&(m=al(c.charCodeAt(0))+m.slice(1));const g=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,c=void 0,g&&(o.length>0&&g.before&&a===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+al(a.charCodeAt(0))),g.after&&(c=h)),u.move(m),o.push(m),a=m.slice(-1)}return r.pop(),o.join("")}function Qle(e,t,n){const r=t.indexStack,i=e.children||[],o=t.createTracker(n),s=[];let a=-1;for(r.push(-1);++a<i.length;){const c=i[a];r[r.length-1]=a,s.push(o.move(t.handle(c,e,t,{before:`
`,after:`
`,...o.current()}))),c.type!=="list"&&(t.bulletLastUsed=void 0),a<i.length-1&&s.push(o.move(Xle(c,i[a+1],e,t)))}return r.pop(),s.join("")}function Xle(e,t,n,r){let i=r.join.length;for(;i--;){const o=r.join[i](e,t,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const Zle=/\r?\n|\r/g;function Jle(e,t){const n=[];let r=0,i=0,o;for(;o=Zle.exec(e);)s(e.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return s(e.slice(r)),n.join("");function s(a){n.push(t(a,i,!a))}}function ece(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],s={};let a=-1;for(;++a<e.unsafe.length;){const f=e.unsafe[a];if(!dB(e.stack,f))continue;const h=e.compilePattern(f);let m;for(;m=h.exec(r);){const g="before"in f||!!f.atBreak,y="after"in f,E=m.index+(g?m[1].length:0);i.includes(E)?(s[E].before&&!g&&(s[E].before=!1),s[E].after&&!y&&(s[E].after=!1)):(i.push(E),s[E]={before:g,after:y})}}i.sort(tce);let c=n.before?n.before.length:0;const u=r.length-(n.after?n.after.length:0);for(a=-1;++a<i.length;){const f=i[a];f<c||f>=u||f+1<u&&i[a+1]===f+1&&s[f].after&&!s[f+1].before&&!s[f+1].after||i[a-1]===f-1&&s[f].before&&!s[f-1].before&&!s[f-1].after||(c!==f&&o.push(vO(r.slice(c,f),"\\")),c=f,/[!-/:-@[-`{-~]/.test(r.charAt(f))&&(!n.encode||!n.encode.includes(r.charAt(f)))?o.push("\\"):(o.push(al(r.charCodeAt(f))),c++))}return o.push(vO(r.slice(c,u),n.after)),o.join("")}function tce(e,t){return e-t}function vO(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=e+t;let s=-1,a=0,c;for(;c=n.exec(o);)r.push(c.index);for(;++s<r.length;)a!==r[s]&&i.push(e.slice(a,r[s])),i.push("\\"),a=r[s];return i.push(e.slice(a)),i.join("")}function nce(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:c,current:s,shift:a};function s(){return{now:{line:i,column:o},lineShift:r}}function a(u){r+=u}function c(u){const f=u||"",h=f.split(/\r?\n|\r/g),m=h[h.length-1];return i+=h.length-1,o=h.length===1?o+m.length:1+m.length+r,f}}function rce(e,t){const n=t||{},r={associationId:Gle,containerPhrasing:ace,containerFlow:lce,createTracker:nce,compilePattern:Wle,enter:o,handlers:{...gx},handle:void 0,indentLines:Jle,indexStack:[],join:[...zle],options:{},safe:cce,stack:[],unsafe:[...Vle]};uB(r,n),r.options.tightDefinitions&&r.join.push(sce),r.handle=cB("type",{invalid:ice,unknown:oce,handlers:r.handlers});let i=r.handle(e,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(s){return r.stack.push(s),a;function a(){r.stack.pop()}}}function ice(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function oce(e){const t=e;throw new Error("Cannot handle unknown node `"+t.type+"`")}function sce(e,t){if(e.type==="definition"&&e.type===t.type)return 0}function ace(e,t){return Kle(e,this,t)}function lce(e,t){return Qle(e,this,t)}function cce(e,t){return ece(this,e,t)}function uce(){return{enter:{table:dce,tableData:CO,tableHeader:CO,tableRow:hce},exit:{codeText:pce,table:fce,tableData:LC,tableHeader:LC,tableRow:LC}}}function dce(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function fce(e){this.exit(e),this.data.inTable=void 0}function hce(e){this.enter({type:"tableRow",children:[]},e)}function LC(e){this.exit(e)}function CO(e){this.enter({type:"tableCell",children:[]},e)}function pce(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,mce));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function mce(e,t){return t==="|"?t:e}function gce(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:s,tableCell:c,tableRow:a}};function s(g,y,E,C){return u(f(g,E,C),g.align)}function a(g,y,E,C){const S=h(g,E,C),N=u([S]);return N.slice(0,N.indexOf(`
`))}function c(g,y,E,C){const S=E.enter("tableCell"),N=E.enter("phrasing"),_=E.containerPhrasing(g,{...C,before:o,after:o});return N(),S(),_}function u(g,y){return ule(g,{align:y,alignDelimiters:r,padding:n,stringLength:i})}function f(g,y,E){const C=g.children;let S=-1;const N=[],_=y.enter("table");for(;++S<C.length;)N[S]=h(C[S],y,E);return _(),N}function h(g,y,E){const C=g.children;let S=-1;const N=[],_=y.enter("tableRow");for(;++S<C.length;)N[S]=c(C[S],g,y,E);return _(),N}function m(g,y,E){let C=gx.inlineCode(g,y,E);return E.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function bce(){return{exit:{taskListCheckValueChecked:wO,taskListCheckValueUnchecked:wO,paragraph:Ece}}}function yce(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:vce}}}function wO(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Ece(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,s;for(;++o<i.length;){const a=i[o];if(a.type==="paragraph"){s=a;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function vce(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);o&&a.move(s);let c=gx.listItem(e,t,n,{...r,...a.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+s}}function Cce(){return[Dae(),ele(),ile(),uce(),bce()]}function wce(e){return{extensions:[Lae(),tle(e),ole(),gce(e),yce()]}}function gi(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function ji(e,t){return e.length>0?(gi(e,e.length,0,t),e):t}const SO={}.hasOwnProperty;function xB(e){const t={};let n=-1;for(;++n<e.length;)Sce(t,e[n]);return t}function Sce(e,t){let n;for(n in t){const i=(SO.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){SO.call(i,s)||(i[s]=[]);const a=o[s];Tce(i[s],Array.isArray(a)?a:a?[a]:[])}}}function Tce(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);gi(e,0,0,r)}const xce={tokenize:Rce,partial:!0},kB={tokenize:Oce,partial:!0},_B={tokenize:Dce,partial:!0},AB={tokenize:Lce,partial:!0},kce={tokenize:Ice,partial:!0},NB={name:"wwwAutolink",tokenize:Nce,previous:RB},MB={name:"protocolAutolink",tokenize:Mce,previous:OB},ea={name:"emailAutolink",tokenize:Ace,previous:DB},us={};function _ce(){return{text:us}}let jl=48;for(;jl<123;)us[jl]=ea,jl++,jl===58?jl=65:jl===91&&(jl=97);us[43]=ea;us[45]=ea;us[46]=ea;us[95]=ea;us[72]=[ea,MB];us[104]=[ea,MB];us[87]=[ea,NB];us[119]=[ea,NB];function Ace(e,t,n){const r=this;let i,o;return s;function s(h){return!L2(h)||!DB.call(r,r.previous)||yx(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(h))}function a(h){return L2(h)?(e.consume(h),a):h===64?(e.consume(h),c):n(h)}function c(h){return h===46?e.check(kce,f,u)(h):h===45||h===95||pr(h)?(o=!0,e.consume(h),c):f(h)}function u(h){return e.consume(h),i=!0,c}function f(h){return o&&i&&Sr(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function Nce(e,t,n){const r=this;return i;function i(s){return s!==87&&s!==119||!RB.call(r,r.previous)||yx(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(xce,e.attempt(kB,e.attempt(_B,o),n),n)(s))}function o(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function Mce(e,t,n){const r=this;let i="",o=!1;return s;function s(h){return(h===72||h===104)&&OB.call(r,r.previous)&&!yx(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),e.consume(h),a):n(h)}function a(h){if(Sr(h)&&i.length<5)return i+=String.fromCodePoint(h),e.consume(h),a;if(h===58){const m=i.toLowerCase();if(m==="http"||m==="https")return e.consume(h),c}return n(h)}function c(h){return h===47?(e.consume(h),o?u:(o=!0,c)):n(h)}function u(h){return h===null||f1(h)||Zt(h)||vc(h)||Rb(h)?n(h):e.attempt(kB,e.attempt(_B,f),n)(h)}function f(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function Rce(e,t,n){let r=0;return i;function i(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),i):s===46&&r===3?(e.consume(s),o):n(s)}function o(s){return s===null?n(s):t(s)}}function Oce(e,t,n){let r,i,o;return s;function s(u){return u===46||u===95?e.check(AB,c,a)(u):u===null||Zt(u)||vc(u)||u!==45&&Rb(u)?c(u):(o=!0,e.consume(u),s)}function a(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),s}function c(u){return i||r||!o?n(u):t(u)}}function Dce(e,t){let n=0,r=0;return i;function i(s){return s===40?(n++,e.consume(s),i):s===41&&r<n?o(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(AB,t,o)(s):s===null||Zt(s)||vc(s)?t(s):(e.consume(s),i)}function o(s){return s===41&&r++,e.consume(s),i}}function Lce(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),o):a===93?(e.consume(a),i):a===60||a===null||Zt(a)||vc(a)?t(a):n(a)}function i(a){return a===null||a===40||a===91||Zt(a)||vc(a)?t(a):r(a)}function o(a){return Sr(a)?s(a):n(a)}function s(a){return a===59?(e.consume(a),r):Sr(a)?(e.consume(a),s):n(a)}}function Ice(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return pr(o)?n(o):t(o)}}function RB(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Zt(e)}function OB(e){return!Sr(e)}function DB(e){return!(e===47||L2(e))}function L2(e){return e===43||e===45||e===46||e===95||pr(e)}function yx(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Sd(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&pr(e.charCodeAt(n+1))&&pr(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),i=1):s=""}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ob(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const I2={name:"attention",resolveAll:Bce,tokenize:Pce};function Bce(e,t){let n=-1,r,i,o,s,a,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};TO(h,-c),TO(m,c),s={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[r][1].end={...s.start},e[n][1].start={...a.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=ji(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=ji(u,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),u=ji(u,Ob(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=ji(u,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=ji(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,gi(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Pce(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=sd(r);let o;return s;function s(c){return o=c,e.enter("attentionSequence"),a(c)}function a(c){if(c===o)return e.consume(c),a;const u=e.exit("attentionSequence"),f=sd(c),h=!f||f===2&&i||n.includes(c),m=!i||i===2&&f||n.includes(r);return u._open=!!(o===42?h:h&&(i||!m)),u._close=!!(o===42?m:m&&(f||!h)),t(c)}}function TO(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Hce={name:"autolink",tokenize:Uce};function Uce(e,t,n){let r=0;return i;function i(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(g){return Sr(g)?(e.consume(g),s):g===64?n(g):u(g)}function s(g){return g===43||g===45||g===46||pr(g)?(r=1,a(g)):u(g)}function a(g){return g===58?(e.consume(g),r=0,c):(g===43||g===45||g===46||pr(g))&&r++<32?(e.consume(g),a):(r=0,u(g))}function c(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||f1(g)?n(g):(e.consume(g),c)}function u(g){return g===64?(e.consume(g),f):xae(g)?(e.consume(g),u):n(g)}function f(g){return pr(g)?h(g):n(g)}function h(g){return g===46?(e.consume(g),r=0,f):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||pr(g))&&r++<63){const y=g===45?m:h;return e.consume(g),y}return n(g)}}function Nt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return vt(c)?(e.enter(n),a(c)):t(c)}function a(c){return vt(c)&&o++<i?(e.consume(c),a):(e.exit(n),t(c))}}const Tp={partial:!0,tokenize:Fce};function Fce(e,t,n){return r;function r(o){return vt(o)?Nt(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Xe(o)?t(o):n(o)}}const LB={continuation:{tokenize:zce},exit:$ce,name:"blockQuote",tokenize:jce};function jce(e,t,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return vt(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function zce(e,t,n){const r=this;return i;function i(s){return vt(s)?Nt(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(LB,t,n)(s)}}function $ce(e){e.exit("blockQuote")}const IB={name:"characterEscape",tokenize:Vce};function Vce(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return _ae(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const BB={name:"characterReference",tokenize:qce};function qce(e,t,n){const r=this;let i=0,o,s;return a;function a(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,s=pr,f(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=kae,f):(e.enter("characterReferenceValue"),o=7,s=O2,f(h))}function f(h){if(h===59&&i){const m=e.exit("characterReferenceValue");return s===pr&&!bx(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(h)&&i++<o?(e.consume(h),f):n(h)}}const xO={partial:!0,tokenize:Gce},kO={concrete:!0,name:"codeFenced",tokenize:Yce};function Yce(e,t,n){const r=this,i={partial:!0,tokenize:M};let o=0,s=0,a;return c;function c(R){return u(R)}function u(R){const L=r.events[r.events.length-1];return o=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,a=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(R)}function f(R){return R===a?(s++,e.consume(R),f):s<3?n(R):(e.exit("codeFencedFenceSequence"),vt(R)?Nt(e,h,"whitespace")(R):h(R))}function h(R){return R===null||Xe(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(xO,E,O)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(R))}function m(R){return R===null||Xe(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(R)):vt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nt(e,g,"whitespace")(R)):R===96&&R===a?n(R):(e.consume(R),m)}function g(R){return R===null||Xe(R)?h(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||Xe(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(R)):R===96&&R===a?n(R):(e.consume(R),y)}function E(R){return e.attempt(i,O,C)(R)}function C(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),S}function S(R){return o>0&&vt(R)?Nt(e,N,"linePrefix",o+1)(R):N(R)}function N(R){return R===null||Xe(R)?e.check(xO,E,O)(R):(e.enter("codeFlowValue"),_(R))}function _(R){return R===null||Xe(R)?(e.exit("codeFlowValue"),N(R)):(e.consume(R),_)}function O(R){return e.exit("codeFenced"),t(R)}function M(R,L,F){let z=0;return B;function B(ae){return R.enter("lineEnding"),R.consume(ae),R.exit("lineEnding"),U}function U(ae){return R.enter("codeFencedFence"),vt(ae)?Nt(R,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ae):q(ae)}function q(ae){return ae===a?(R.enter("codeFencedFenceSequence"),re(ae)):F(ae)}function re(ae){return ae===a?(z++,R.consume(ae),re):z>=s?(R.exit("codeFencedFenceSequence"),vt(ae)?Nt(R,J,"whitespace")(ae):J(ae)):F(ae)}function J(ae){return ae===null||Xe(ae)?(R.exit("codeFencedFence"),L(ae)):F(ae)}}}function Gce(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const IC={name:"codeIndented",tokenize:Kce},Wce={partial:!0,tokenize:Qce};function Kce(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Nt(e,o,"linePrefix",5)(u)}function o(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?s(u):n(u)}function s(u){return u===null?c(u):Xe(u)?e.attempt(Wce,s,c)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||Xe(u)?(e.exit("codeFlowValue"),s(u)):(e.consume(u),a)}function c(u){return e.exit("codeIndented"),t(u)}}function Qce(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):Xe(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):Nt(e,o,"linePrefix",5)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):Xe(s)?i(s):n(s)}}const Xce={name:"codeText",previous:Jce,resolve:Zce,tokenize:eue};function Zce(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Jce(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eue(e,t,n){let r=0,i,o;return s;function s(h){return e.enter("codeText"),e.enter("codeTextSequence"),a(h)}function a(h){return h===96?(e.consume(h),r++,a):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(o=e.enter("codeTextSequence"),i=0,f(h)):Xe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Xe(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function f(h){return h===96?(e.consume(h),i++,f):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",u(h))}}class tue{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Bf(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Bf(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Bf(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Bf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Bf(this.left,n.reverse())}}}function Bf(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function PB(e){const t={};let n=-1,r,i,o,s,a,c,u;const f=new tue(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,nue(f,n)),n=t[n],u=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(s=f.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},a=f.slice(i,n),a.unshift(r),f.splice(i,n-i+1,a))}}return gi(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function nue(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],u={};let f,h,m=-1,g=n,y=0,E=0;const C=[E];for(;g;){for(;e.get(++i)[1]!==g;);o.push(i),g._tokenizer||(f=r.sliceStream(g),g.next||f.push(null),h&&s.defineSkip(g.start),g._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),g._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(E=m+1,C.push(E),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(s.events=[],g?(g._tokenizer=void 0,g.previous=void 0):C.pop(),m=C.length;m--;){const S=a.slice(C[m],C[m+1]),N=o.pop();c.push([N,N+S.length-1]),e.splice(N,2,S)}for(c.reverse(),m=-1;++m<c.length;)u[y+c[m][0]]=y+c[m][1],y+=c[m][1]-c[m][0]-1;return u}const rue={resolve:oue,tokenize:sue},iue={partial:!0,tokenize:aue};function oue(e){return PB(e),e}function sue(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):Xe(a)?e.check(iue,s,o)(a):(e.consume(a),i)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function aue(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Nt(e,o,"linePrefix")}function o(s){if(s===null||Xe(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function HB(e,t,n,r,i,o,s,a,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return h;function h(S){return S===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(S),e.exit(o),m):S===null||S===32||S===41||f1(S)?n(S):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),E(S))}function m(S){return S===62?(e.enter(o),e.consume(S),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(e.exit("chunkString"),e.exit(a),m(S)):S===null||S===60||Xe(S)?n(S):(e.consume(S),S===92?y:g)}function y(S){return S===60||S===62||S===92?(e.consume(S),g):g(S)}function E(S){return!f&&(S===null||S===41||Zt(S))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(S)):f<u&&S===40?(e.consume(S),f++,E):S===41?(e.consume(S),f--,E):S===null||S===32||S===40||f1(S)?n(S):(e.consume(S),S===92?C:E)}function C(S){return S===40||S===41||S===92?(e.consume(S),E):E(S)}}function UB(e,t,n,r,i,o){const s=this;let a=0,c;return u;function u(g){return e.enter(r),e.enter(i),e.consume(g),e.exit(i),e.enter(o),f}function f(g){return a>999||g===null||g===91||g===93&&!c||g===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(g):g===93?(e.exit(o),e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):Xe(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Xe(g)||a++>999?(e.exit("chunkString"),f(g)):(e.consume(g),c||(c=!vt(g)),g===92?m:h)}function m(g){return g===91||g===92||g===93?(e.consume(g),a++,h):h(g)}}function FB(e,t,n,r,i,o){let s;return a;function a(m){return m===34||m===39||m===40?(e.enter(r),e.enter(i),e.consume(m),e.exit(i),s=m===40?41:m,c):n(m)}function c(m){return m===s?(e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):(e.enter(o),u(m))}function u(m){return m===s?(e.exit(o),c(s)):m===null?n(m):Xe(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Nt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===s||m===null||Xe(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:f)}function h(m){return m===s||m===92?(e.consume(m),f):f(m)}}function mh(e,t){let n;return r;function r(i){return Xe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):vt(i)?Nt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const lue={name:"definition",tokenize:uue},cue={partial:!0,tokenize:due};function uue(e,t,n){const r=this;let i;return o;function o(g){return e.enter("definition"),s(g)}function s(g){return UB.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=ho(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),c):n(g)}function c(g){return Zt(g)?mh(e,u)(g):u(g)}function u(g){return HB(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function f(g){return e.attempt(cue,h,h)(g)}function h(g){return vt(g)?Nt(e,m,"whitespace")(g):m(g)}function m(g){return g===null||Xe(g)?(e.exit("definition"),r.parser.defined.push(i),t(g)):n(g)}}function due(e,t,n){return r;function r(a){return Zt(a)?mh(e,i)(a):n(a)}function i(a){return FB(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return vt(a)?Nt(e,s,"whitespace")(a):s(a)}function s(a){return a===null||Xe(a)?t(a):n(a)}}const fue={name:"hardBreakEscape",tokenize:hue};function hue(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Xe(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const pue={name:"headingAtx",resolve:mue,tokenize:gue};function mue(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},gi(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function gue(e,t,n){let r=0;return i;function i(f){return e.enter("atxHeading"),o(f)}function o(f){return e.enter("atxHeadingSequence"),s(f)}function s(f){return f===35&&r++<6?(e.consume(f),s):f===null||Zt(f)?(e.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||Xe(f)?(e.exit("atxHeading"),t(f)):vt(f)?Nt(e,a,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),a(f))}function u(f){return f===null||f===35||Zt(f)?(e.exit("atxHeadingText"),a(f)):(e.consume(f),u)}}const bue=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_O=["pre","script","style","textarea"],yue={concrete:!0,name:"htmlFlow",resolveTo:Cue,tokenize:wue},Eue={partial:!0,tokenize:Tue},vue={partial:!0,tokenize:Sue};function Cue(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function wue(e,t,n){const r=this;let i,o,s,a,c;return u;function u(j){return f(j)}function f(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),h}function h(j){return j===33?(e.consume(j),m):j===47?(e.consume(j),o=!0,E):j===63?(e.consume(j),i=3,r.interrupt?t:$):Sr(j)?(e.consume(j),s=String.fromCharCode(j),C):n(j)}function m(j){return j===45?(e.consume(j),i=2,g):j===91?(e.consume(j),i=5,a=0,y):Sr(j)?(e.consume(j),i=4,r.interrupt?t:$):n(j)}function g(j){return j===45?(e.consume(j),r.interrupt?t:$):n(j)}function y(j){const Se="CDATA[";return j===Se.charCodeAt(a++)?(e.consume(j),a===Se.length?r.interrupt?t:q:y):n(j)}function E(j){return Sr(j)?(e.consume(j),s=String.fromCharCode(j),C):n(j)}function C(j){if(j===null||j===47||j===62||Zt(j)){const Se=j===47,Re=s.toLowerCase();return!Se&&!o&&_O.includes(Re)?(i=1,r.interrupt?t(j):q(j)):bue.includes(s.toLowerCase())?(i=6,Se?(e.consume(j),S):r.interrupt?t(j):q(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):o?N(j):_(j))}return j===45||pr(j)?(e.consume(j),s+=String.fromCharCode(j),C):n(j)}function S(j){return j===62?(e.consume(j),r.interrupt?t:q):n(j)}function N(j){return vt(j)?(e.consume(j),N):B(j)}function _(j){return j===47?(e.consume(j),B):j===58||j===95||Sr(j)?(e.consume(j),O):vt(j)?(e.consume(j),_):B(j)}function O(j){return j===45||j===46||j===58||j===95||pr(j)?(e.consume(j),O):M(j)}function M(j){return j===61?(e.consume(j),R):vt(j)?(e.consume(j),M):_(j)}function R(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),c=j,L):vt(j)?(e.consume(j),R):F(j)}function L(j){return j===c?(e.consume(j),c=null,z):j===null||Xe(j)?n(j):(e.consume(j),L)}function F(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Zt(j)?M(j):(e.consume(j),F)}function z(j){return j===47||j===62||vt(j)?_(j):n(j)}function B(j){return j===62?(e.consume(j),U):n(j)}function U(j){return j===null||Xe(j)?q(j):vt(j)?(e.consume(j),U):n(j)}function q(j){return j===45&&i===2?(e.consume(j),W):j===60&&i===1?(e.consume(j),Z):j===62&&i===4?(e.consume(j),K):j===63&&i===3?(e.consume(j),$):j===93&&i===5?(e.consume(j),ue):Xe(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Eue,ie,re)(j)):j===null||Xe(j)?(e.exit("htmlFlowData"),re(j)):(e.consume(j),q)}function re(j){return e.check(vue,J,ie)(j)}function J(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),ae}function ae(j){return j===null||Xe(j)?re(j):(e.enter("htmlFlowData"),q(j))}function W(j){return j===45?(e.consume(j),$):q(j)}function Z(j){return j===47?(e.consume(j),s="",te):q(j)}function te(j){if(j===62){const Se=s.toLowerCase();return _O.includes(Se)?(e.consume(j),K):q(j)}return Sr(j)&&s.length<8?(e.consume(j),s+=String.fromCharCode(j),te):q(j)}function ue(j){return j===93?(e.consume(j),$):q(j)}function $(j){return j===62?(e.consume(j),K):j===45&&i===2?(e.consume(j),$):q(j)}function K(j){return j===null||Xe(j)?(e.exit("htmlFlowData"),ie(j)):(e.consume(j),K)}function ie(j){return e.exit("htmlFlow"),t(j)}}function Sue(e,t,n){const r=this;return i;function i(s){return Xe(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function Tue(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Tp,t,n)}}const xue={name:"htmlText",tokenize:kue};function kue(e,t,n){const r=this;let i,o,s;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),c}function c($){return $===33?(e.consume($),u):$===47?(e.consume($),M):$===63?(e.consume($),_):Sr($)?(e.consume($),F):n($)}function u($){return $===45?(e.consume($),f):$===91?(e.consume($),o=0,y):Sr($)?(e.consume($),N):n($)}function f($){return $===45?(e.consume($),g):n($)}function h($){return $===null?n($):$===45?(e.consume($),m):Xe($)?(s=h,Z($)):(e.consume($),h)}function m($){return $===45?(e.consume($),g):h($)}function g($){return $===62?W($):$===45?m($):h($)}function y($){const K="CDATA[";return $===K.charCodeAt(o++)?(e.consume($),o===K.length?E:y):n($)}function E($){return $===null?n($):$===93?(e.consume($),C):Xe($)?(s=E,Z($)):(e.consume($),E)}function C($){return $===93?(e.consume($),S):E($)}function S($){return $===62?W($):$===93?(e.consume($),S):E($)}function N($){return $===null||$===62?W($):Xe($)?(s=N,Z($)):(e.consume($),N)}function _($){return $===null?n($):$===63?(e.consume($),O):Xe($)?(s=_,Z($)):(e.consume($),_)}function O($){return $===62?W($):_($)}function M($){return Sr($)?(e.consume($),R):n($)}function R($){return $===45||pr($)?(e.consume($),R):L($)}function L($){return Xe($)?(s=L,Z($)):vt($)?(e.consume($),L):W($)}function F($){return $===45||pr($)?(e.consume($),F):$===47||$===62||Zt($)?z($):n($)}function z($){return $===47?(e.consume($),W):$===58||$===95||Sr($)?(e.consume($),B):Xe($)?(s=z,Z($)):vt($)?(e.consume($),z):W($)}function B($){return $===45||$===46||$===58||$===95||pr($)?(e.consume($),B):U($)}function U($){return $===61?(e.consume($),q):Xe($)?(s=U,Z($)):vt($)?(e.consume($),U):z($)}function q($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,re):Xe($)?(s=q,Z($)):vt($)?(e.consume($),q):(e.consume($),J)}function re($){return $===i?(e.consume($),i=void 0,ae):$===null?n($):Xe($)?(s=re,Z($)):(e.consume($),re)}function J($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||Zt($)?z($):(e.consume($),J)}function ae($){return $===47||$===62||Zt($)?z($):n($)}function W($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function Z($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),te}function te($){return vt($)?Nt(e,ue,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):ue($)}function ue($){return e.enter("htmlTextData"),s($)}}const Ex={name:"labelEnd",resolveAll:Mue,resolveTo:Rue,tokenize:Oue},_ue={tokenize:Due},Aue={tokenize:Lue},Nue={tokenize:Iue};function Mue(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&gi(e,0,e.length,n),e}function Rue(e,t){let n=e.length,r=0,i,o,s,a;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[o][1].start},end:{...e[s][1].end}},f={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",c,t],["enter",u,t]],a=ji(a,e.slice(o+1,o+r+3)),a=ji(a,[["enter",f,t]]),a=ji(a,Ob(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),a=ji(a,[["exit",f,t],e[s-2],e[s-1],["exit",u,t]]),a=ji(a,e.slice(s+1)),a=ji(a,[["exit",c,t]]),gi(e,o,e.length,a),e}function Oue(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(m){return o?o._inactive?h(m):(s=r.parser.defined.includes(ho(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(_ue,f,s?f:h)(m):m===91?e.attempt(Aue,f,s?u:h)(m):s?f(m):h(m)}function u(m){return e.attempt(Nue,f,h)(m)}function f(m){return t(m)}function h(m){return o._balanced=!0,n(m)}}function Due(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return Zt(h)?mh(e,o)(h):o(h)}function o(h){return h===41?f(h):HB(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return Zt(h)?mh(e,c)(h):f(h)}function a(h){return n(h)}function c(h){return h===34||h===39||h===40?FB(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):f(h)}function u(h){return Zt(h)?mh(e,f)(h):f(h)}function f(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Lue(e,t,n){const r=this;return i;function i(a){return UB.call(r,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(ho(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function Iue(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const Bue={name:"labelStartImage",resolveAll:Ex.resolveAll,tokenize:Pue};function Pue(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Hue={name:"labelStartLink",resolveAll:Ex.resolveAll,tokenize:Uue};function Uue(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const BC={name:"lineEnding",tokenize:Fue};function Fue(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nt(e,t,"linePrefix")}}const Qg={name:"thematicBreak",tokenize:jue};function jue(e,t,n){let r=0,i;return o;function o(u){return e.enter("thematicBreak"),s(u)}function s(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||Xe(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===i?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),vt(u)?Nt(e,a,"whitespace")(u):a(u))}}const Ur={continuation:{tokenize:que},exit:Gue,name:"list",tokenize:Vue},zue={partial:!0,tokenize:Wue},$ue={partial:!0,tokenize:Yue};function Vue(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(g){const y=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:O2(g)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(Qg,n,u)(g):u(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(g)}return n(g)}function c(g){return O2(g)&&++s<10?(e.consume(g),c):(!r.interrupt||s<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),u(g)):n(g)}function u(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(Tp,r.interrupt?n:f,e.attempt(zue,m,h))}function f(g){return r.containerState.initialBlankLine=!0,o++,m(g)}function h(g){return vt(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function que(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Tp,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nt(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!vt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt($ue,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nt(e,e.attempt(Ur,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Yue(e,t,n){const r=this;return Nt(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function Gue(e){e.exit(this.containerState.type)}function Wue(e,t,n){const r=this;return Nt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!vt(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const AO={name:"setextUnderline",resolveTo:Kue,tokenize:Que};function Kue(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function Que(e,t,n){const r=this;let i;return o;function o(u){let f=r.events.length,h;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){h=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=u,s(u)):n(u)}function s(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),vt(u)?Nt(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Xe(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Xue={tokenize:ode,partial:!0};function Zue(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:nde,continuation:{tokenize:rde},exit:ide}},text:{91:{name:"gfmFootnoteCall",tokenize:tde},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Jue,resolveTo:ede}}}}function Jue(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){s=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return a;function a(c){if(!s||!s._balanced)return n(c);const u=ho(r.sliceSerialize({start:s.end,end:r.now()}));return u.codePointAt(0)!==94||!o.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function ede(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function tde(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,s;return a;function a(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),c}function c(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(h){if(o>999||h===93&&!s||h===null||h===91||Zt(h))return n(h);if(h===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return i.includes(ho(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return Zt(h)||(s=!0),o++,e.consume(h),h===92?f:u}function f(h){return h===91||h===92||h===93?(e.consume(h),o++,u):u(h)}}function nde(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s=0,a;return c;function c(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(y)}function f(y){if(s>999||y===93&&!a||y===null||y===91||Zt(y))return n(y);if(y===93){e.exit("chunkString");const E=e.exit("gfmFootnoteDefinitionLabelString");return o=ho(r.sliceSerialize(E)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Zt(y)||(a=!0),s++,e.consume(y),y===92?h:f}function h(y){return y===91||y===92||y===93?(e.consume(y),s++,f):f(y)}function m(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),i.includes(o)||i.push(o),Nt(e,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return t(y)}}function rde(e,t,n){return e.check(Tp,t,e.attempt(Xue,t,n))}function ide(e){e.exit("gfmFootnoteDefinition")}function ode(e,t,n){const r=this;return Nt(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(o):n(o)}}function sde(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(s,a){let c=-1;for(;++c<s.length;)if(s[c][0]==="enter"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._close){let u=c;for(;u--;)if(s[u][0]==="exit"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._open&&s[c][1].end.offset-s[c][1].start.offset===s[u][1].end.offset-s[u][1].start.offset){s[c][1].type="strikethroughSequence",s[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},s[u][1].start),end:Object.assign({},s[c][1].end)},h={type:"strikethroughText",start:Object.assign({},s[u][1].end),end:Object.assign({},s[c][1].start)},m=[["enter",f,a],["enter",s[u][1],a],["exit",s[u][1],a],["enter",h,a]],g=a.parser.constructs.insideSpan.null;g&&gi(m,m.length,0,Ob(g,s.slice(u+1,c),a)),gi(m,m.length,0,[["exit",h,a],["enter",s[c][1],a],["exit",s[c][1],a],["exit",f,a]]),gi(s,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<s.length;)s[c][1].type==="strikethroughSequenceTemporary"&&(s[c][1].type="data");return s}function o(s,a,c){const u=this.previous,f=this.events;let h=0;return m;function m(y){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(y):(s.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const E=sd(u);if(y===126)return h>1?c(y):(s.consume(y),h++,g);if(h<2&&!n)return c(y);const C=s.exit("strikethroughSequenceTemporary"),S=sd(y);return C._open=!S||S===2&&!!E,C._close=!E||E===2&&!!S,a(y)}}}class ade{constructor(){this.map=[]}add(t,n,r){lde(this,t,n,r)}consume(t){if(this.map.sort(function(o,s){return o[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function lde(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function cde(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function ude(){return{flow:{null:{name:"table",tokenize:dde,resolveAll:fde}}}}function dde(e,t,n){const r=this;let i=0,o=0,s;return a;function a(B){let U=r.events.length-1;for(;U>-1;){const J=r.events[U][1].type;if(J==="lineEnding"||J==="linePrefix")U--;else break}const q=U>-1?r.events[U][1].type:null,re=q==="tableHead"||q==="tableRow"?R:c;return re===R&&r.parser.lazy[r.now().line]?n(B):re(B)}function c(B){return e.enter("tableHead"),e.enter("tableRow"),u(B)}function u(B){return B===124||(s=!0,o+=1),f(B)}function f(B){return B===null?n(B):Xe(B)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),g):n(B):vt(B)?Nt(e,f,"whitespace")(B):(o+=1,s&&(s=!1,i+=1),B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),s=!0,f):(e.enter("data"),h(B)))}function h(B){return B===null||B===124||Zt(B)?(e.exit("data"),f(B)):(e.consume(B),B===92?m:h)}function m(B){return B===92||B===124?(e.consume(B),h):h(B)}function g(B){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(B):(e.enter("tableDelimiterRow"),s=!1,vt(B)?Nt(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):y(B))}function y(B){return B===45||B===58?C(B):B===124?(s=!0,e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),E):M(B)}function E(B){return vt(B)?Nt(e,C,"whitespace")(B):C(B)}function C(B){return B===58?(o+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),S):B===45?(o+=1,S(B)):B===null||Xe(B)?O(B):M(B)}function S(B){return B===45?(e.enter("tableDelimiterFiller"),N(B)):M(B)}function N(B){return B===45?(e.consume(B),N):B===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),_):(e.exit("tableDelimiterFiller"),_(B))}function _(B){return vt(B)?Nt(e,O,"whitespace")(B):O(B)}function O(B){return B===124?y(B):B===null||Xe(B)?!s||i!==o?M(B):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(B)):M(B)}function M(B){return n(B)}function R(B){return e.enter("tableRow"),L(B)}function L(B){return B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),L):B===null||Xe(B)?(e.exit("tableRow"),t(B)):vt(B)?Nt(e,L,"whitespace")(B):(e.enter("data"),F(B))}function F(B){return B===null||B===124||Zt(B)?(e.exit("data"),L(B)):(e.consume(B),B===92?z:F)}function z(B){return B===92||B===124?(e.consume(B),F):F(B)}}function fde(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],s=[0,0,0,0],a=!1,c=0,u,f,h;const m=new ade;for(;++n<e.length;){const g=e[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,c!==0&&(NO(m,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,h=void 0,o=[0,0,0,0],s=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",f,t]])),i=y.type==="tableDelimiterRow"?2:f?3:1):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(o[1]!==0&&(s[0]=s[1],h=yg(m,t,o,i,void 0,h),o=[0,0,0,0]),s[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(s[0]=s[1],h=yg(m,t,o,i,void 0,h)),o=s,s=[o[1],n,0,0])):y.type==="tableHead"?(a=!0,c=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(c=n,o[1]!==0?(s[0]=s[1],h=yg(m,t,o,i,n,h)):s[1]!==0&&(h=yg(m,t,s,i,n,h)),i=0):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(s[3]=n)}for(c!==0&&NO(m,t,c,u,f),m.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=cde(t.events,n))}return e}function yg(e,t,n,r,i,o){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(o.end=Object.assign({},Mu(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=Mu(t.events,n[1]);if(o={type:s,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const u=Mu(t.events,n[2]),f=Mu(t.events,n[3]),h={type:a,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const m=t.events[n[2]],g=t.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,E=n[3]-n[2]-1;e.add(y,E,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return i!==void 0&&(o.end=Object.assign({},Mu(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function NO(e,t,n,r,i){const o=[],s=Mu(t.events,n);i&&(i.end=Object.assign({},s),o.push(["exit",i,t])),r.end=Object.assign({},s),o.push(["exit",r,t]),e.add(n+1,0,o)}function Mu(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const hde={name:"tasklistCheck",tokenize:mde};function pde(){return{text:{91:hde}}}function mde(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return Zt(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),s):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),s):n(c)}function s(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(c)}function a(c){return Xe(c)?t(c):vt(c)?e.check({tokenize:gde},t,n)(c):n(c)}}function gde(e,t,n){return Nt(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function bde(e){return xB([_ce(),Zue(),sde(e),ude(),pde()])}const yde={};function jB(e){const t=this,n=e||yde,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(bde(n)),o.push(Cce()),s.push(wce(n))}function Ede(e){const t=this;t.compiler=n;function n(r){return rce(r,{...t.data("settings"),...e,extensions:t.data("toMarkdownExtensions")||[]})}}function MO(e){if(e)throw e}var PC,RO;function vde(){if(RO)return PC;RO=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},o=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var f=e.call(u,"constructor"),h=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!h)return!1;var m;for(m in u);return typeof m>"u"||e.call(u,m)},s=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},a=function(u,f){if(f==="__proto__")if(e.call(u,f)){if(r)return r(u,f).value}else return;return u[f]};return PC=function c(){var u,f,h,m,g,y,E=arguments[0],C=1,S=arguments.length,N=!1;for(typeof E=="boolean"&&(N=E,E=arguments[1]||{},C=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});C<S;++C)if(u=arguments[C],u!=null)for(f in u)h=a(E,f),m=a(u,f),E!==m&&(N&&m&&(o(m)||(g=i(m)))?(g?(g=!1,y=h&&i(h)?h:[]):y=h&&o(h)?h:{},s(E,{name:f,newValue:c(N,y,m)})):typeof m<"u"&&s(E,{name:f,newValue:m}));return E},PC}var Cde=vde();const HC=ld(Cde);function B2(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wde(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(c,...u){const f=e[++o];let h=-1;if(c){s(c);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,f?Sde(f,a)(...u):s(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Sde(e,t){let n;return r;function r(...s){const a=e.length>s.length;let c;a&&s.push(i);try{c=e.apply(this,s)}catch(u){const f=u;if(a&&n)throw f;return i(f)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(s,...a){n||(n=!0,t(s,...a))}function o(s){i(null,s)}}const Tde=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),xde={}.hasOwnProperty;class vx extends Tde{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wde()}copy(){const t=new vx;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(HC(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(jC("data",this.frozen),this.namespace[t]=n,this):xde.call(this.namespace,t)&&this.namespace[t]||void 0:t?(jC("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Eg(t),r=this.parser||this.Parser;return UC("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),UC("process",this.parser||this.Parser),FC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const a=Eg(t),c=r.parse(a);r.run(c,a,function(f,h,m){if(f||!h||!m)return u(f);const g=h,y=r.stringify(g,m);_de(y)?m.value=y:m.result=y,u(f,m)});function u(f,h){f||!h?s(f):o?o(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),UC("processSync",this.parser||this.Parser),FC("processSync",this.compiler||this.Compiler),this.process(t,i),DO("processSync","process",n),r;function i(o,s){n=!0,MO(o),r=s}}run(t,n,r){OO(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const c=Eg(n);i.run(t,c,u);function u(f,h,m){const g=h||t;f?a(f):s?s(g):r(void 0,g,m)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),DO("runSync","run",r),i;function o(s,a){MO(s),i=a,r=!0}}stringify(t,n){this.freeze();const r=Eg(n),i=this.compiler||this.Compiler;return FC("stringify",i),OO(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(jC("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...h]=u;c(f,h)}else s(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function s(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=HC(!0,i.settings,u.settings))}function a(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const h=u[f];o(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===u){m=h;break}if(m===-1)r.push([u,...f]);else if(f.length>0){let[g,...y]=f;const E=r[m][1];B2(E)&&B2(g)&&(g=HC(!0,E,g)),r[m]=[u,g,...y]}}}}const zB=new vx().freeze();function UC(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function FC(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function jC(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function OO(e){if(!B2(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function DO(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eg(e){return kde(e)?e:new M2(e)}function kde(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function _de(e){return typeof e=="string"||Ade(e)}function Ade(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function Nde(e,t){return $B(e,{})||{type:"root",children:[]}}function $B(e,t){const n=Mde(e,t);return n&&t.afterTransform&&t.afterTransform(e,n),n}function Mde(e,t){switch(e.nodeType){case 1:return Lde(e,t);case 3:return Ode(e);case 8:return Dde(e);case 9:return LO(e,t);case 10:return Rde();case 11:return LO(e,t);default:return}}function LO(e,t){return{type:"root",children:VB(e,t)}}function Rde(){return{type:"doctype"}}function Ode(e){return{type:"text",value:e.nodeValue||""}}function Dde(e){return{type:"comment",value:e.nodeValue||""}}function Lde(e,t){const n=e.namespaceURI,r=n===Gg.svg?Z8:X8,i=n===Gg.html?e.tagName.toLowerCase():e.tagName,o=n===Gg.html&&i==="template"?e.content:e,s=e.getAttributeNames(),a={};let c=-1;for(;++c<s.length;)a[s[c]]=e.getAttribute(s[c])||"";return r(i,a,VB(o,t))}function VB(e,t){const n=e.childNodes,r=[];let i=-1;for(;++i<n.length;){const o=$B(n[i],t);o!==void 0&&r.push(o)}return r}const zC=3e4;class qB extends hT{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=wi();this.getLocalState()!==null&&zC/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&zC<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&Kh(this,r,"timeout")},yo(zC/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:i,lastUpdated:wi()});const s=[],a=[],c=[],u=[];t===null?u.push(n):o==null?t!=null&&s.push(n):(a.push(n),eh(o,t)||c.push(n)),(s.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:s,updated:c,removed:u},"local"]),this.emit("update",[{added:s,updated:a,removed:u},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const Kh=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const s=e.meta.get(o);e.meta.set(o,{clock:s.clock+1,lastUpdated:wi()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},Ys=(e,t,n=e.states)=>{const r=t.length,i=Ut();Fe(i,r);for(let o=0;o<r;o++){const s=t[o],a=n.get(s)||null,c=e.meta.get(s).clock;Fe(i,s),Fe(i,c),Yo(i,JSON.stringify(a))}return St(i)},YB=(e,t,n)=>{const r=wo(t),i=wi(),o=[],s=[],a=[],c=[],u=it(r);for(let f=0;f<u;f++){const h=it(r);let m=it(r);const g=JSON.parse(Go(r)),y=e.meta.get(h),E=e.states.get(h),C=y===void 0?0:y.clock;(C<m||C===m&&g===null&&e.states.has(h))&&(g===null?h===e.clientID&&e.getLocalState()!=null?m++:e.states.delete(h):e.states.set(h,g),e.meta.set(h,{clock:m,lastUpdated:i}),y===void 0&&g!==null?o.push(h):y!==void 0&&g===null?c.push(h):g!==null&&(eh(g,E)||a.push(h),s.push(h)))}(o.length>0||a.length>0||c.length>0)&&e.emit("change",[{added:o,updated:a,removed:c},n]),(o.length>0||s.length>0||c.length>0)&&e.emit("update",[{added:o,updated:s,removed:c},n])},GB=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},Ide=/[\uD800-\uDBFF]/,Bde=/[\uDC00-\uDFFF]/,Pde=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&Ide.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&Bde.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},Hde=Pde,Ft=new pt("y-sync"),Yi=new pt("y-undo"),qf=new pt("yjs-cursor"),Wo=(e,t)=>e>>>t|e<<32-t,Ude=e=>Wo(e,2)^Wo(e,13)^Wo(e,22),Fde=e=>Wo(e,6)^Wo(e,11)^Wo(e,25),jde=e=>Wo(e,7)^Wo(e,18)^e>>>3,zde=e=>Wo(e,17)^Wo(e,19)^e>>>10,$de=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vde=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class qde{constructor(){const t=new ArrayBuffer(320);this._H=new Uint32Array(t,0,8),this._H.set(Vde),this._W=new Uint32Array(t,64,64)}_updateHash(){const t=this._H,n=this._W;for(let h=16;h<64;h++)n[h]=zde(n[h-2])+n[h-7]+jde(n[h-15])+n[h-16];let r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],f=t[7];for(let h=0,m,g;h<64;h++)m=f+Fde(a)+(a&c^~a&u)+$de[h]+n[h]>>>0,g=Ude(r)+(r&i^r&o^i&o)>>>0,f=u,u=c,c=a,a=s+m>>>0,s=o,o=i,i=r,r=m+g>>>0;t[0]+=r,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=f}digest(t){let n=0;for(;n+56<=t.length;){let s=0;for(;s<16&&n+3<t.length;s++)this._W[s]=t[n++]<<24|t[n++]<<16|t[n++]<<8|t[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<t.length;)this._W[s]|=t[n]<<(3-n%4)*8,n++;this._W[s]|=xr<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let i=0;for(;n<t.length;i++)for(let s=3;s>=0&&n<t.length;s--)this._W[i]|=t[n++]<<s*8;r||(this._W[i-(n%4===0?0:1)]|=xr<<(3-n%4)*8),this._W[14]=t.byteLength/lJ,this._W[15]=t.byteLength*8,this._updateHash();const o=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)o[s*4+a]=this._H[s]>>>(3-a)*8;return o}}const Yde=e=>new qde().digest(e),Gde=e=>{for(let n=6;n<e.length;n++)e[n%6]=e[n%6]^e[n];return e.slice(0,6)},Wde=e=>TT(Gde(Yde(cee(e)))),p1=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!yd(t.ds,e.id),Kde=[{light:"#ecd44433",dark:"#ecd444"}],Qde=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const r=Ks();e.forEach(i=>r.add(i)),t=t.filter(i=>!r.has(i))}e.set(n,HJ(t))}return e.get(n)},Xde=(e,{colors:t=Kde,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:o}={})=>{let s=!1;const a=new Jde(e,o),c=new nt({props:{editable:u=>{const f=Ft.getState(u);return f.snapshot==null&&f.prevSnapshot==null}},key:Ft,state:{init:(u,f)=>({type:e,doc:e.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(u,f)=>{const h=u.getMeta(Ft);if(h!==void 0){f=Object.assign({},f);for(const m in h)f[m]=h[m]}return f.addToHistory=u.getMeta("addToHistory")!==!1,f.isChangeOrigin=h!==void 0&&!!h.isChangeOrigin,f.isUndoRedoOperation=h!==void 0&&!!h.isChangeOrigin&&!!h.isUndoRedoOperation,a.prosemirrorView!==null&&h!==void 0&&(h.snapshot!=null||h.prevSnapshot!=null)&&xT(0,()=>{a.prosemirrorView!=null&&(h.restore==null?a._renderSnapshot(h.snapshot,h.prevSnapshot,f):(a._renderSnapshot(h.snapshot,h.snapshot,f),delete f.restore,delete f.snapshot,delete f.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),f}},view:u=>(a.initView(u),o==null&&a._forceRerender(),i(),{update:()=>{const f=c.getState(u.state);if(f.snapshot==null&&f.prevSnapshot==null&&(s||u.state.doc.content.findDiffStart(u.state.doc.type.createAndFill().content)!==null)){if(s=!0,f.addToHistory===!1&&!f.isChangeOrigin){const h=Yi.getState(u.state),m=h&&h.undoManager;m&&m.stopCapturing()}a.mux(()=>{f.doc.transact(h=>{h.meta.set("addToHistory",f.addToHistory),a._prosemirrorChanged(u.state.doc)},Ft)})}},destroy:()=>{a.destroy()}})});return c},Zde=(e,t,n)=>{if(t!==null&&t.anchor!==null&&t.head!==null)if(t.type==="all")e.setSelection(new Wr(e.doc));else if(t.type==="node"){const r=nc(n.doc,n.type,t.anchor,n.mapping);e.setSelection(qe.create(e.doc,r))}else{const r=nc(n.doc,n.type,t.anchor,n.mapping),i=nc(n.doc,n.type,t.head,n.mapping);if(r!==null&&i!==null){const o=Ue.between(e.doc.resolve(r),e.doc.resolve(i));e.setSelection(o)}}},m1=(e,t)=>({type:t.selection.jsonID,anchor:Xh(t.selection.anchor,e.type,e.mapping),head:Xh(t.selection.head,e.type,e.mapping)});class Jde{constructor(t,n=new Map){this.type=t,this.prosemirrorView=null,this.mux=GB(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=m1(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(ST&&this._domSelectionInView===null&&(xT(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection();if(t==null||t.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),o=dee.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||o.clientWidth||0)&&i.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(t,n){n||(n=r8(Y5(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ft,{snapshot:t,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const t=this.type.toArray().map(r=>Xg(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new De(Ce.from(t),0,0));n.setMeta(Ft,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const t=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>Xg(i,this.prosemirrorView.state.schema,this)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new De(Ce.from(n),0,0));if(t){const i=uo(Eo(t.anchor,0),r.doc.content.size),o=uo(Eo(t.head,0),r.doc.content.size);r.setSelection(Ue.create(r.doc,i,o))}this.prosemirrorView.dispatch(r.setMeta(Ft,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(t,n,r){let i=this.doc,o=this.type;if(t||(t=cC(this.doc)),t instanceof Uint8Array||n instanceof Uint8Array)if((!(t instanceof Uint8Array)||!(n instanceof Uint8Array))&&Ci(),i=new So({gc:!1}),T0(i,n),n=cC(i),T0(i,t),t=cC(i),o._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);o=i.getXmlFragment(s)}else{const s=i.store.clients.get(o._item.id.client)??[],a=Xi(s,o._item.id.clock);o=s[a].content.type}this.mapping.clear(),this.mux(()=>{i.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(h=>{il(s,h,m=>{})});const c=(h,m)=>{const g=h==="added"?a.getUserByClientId(m.client):a.getUserByDeletedId(m);return{user:g,type:h,color:Qde(r.colorMapping,r.colors,g)}},u=p8(o,new RT(n.ds,t.sv)).map(h=>!h._item.deleted||p1(h._item,t)||p1(h._item,n)?Xg(h,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},t,n,c):null).filter(h=>h!==null),f=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new De(Ce.from(u),0,0));this.prosemirrorView.dispatch(f.setMeta(Ft,{isChangeOrigin:!0}))},Ft)})}_typeChanged(t,n){if(this.prosemirrorView==null)return;const r=Ft.getState(this.prosemirrorView.state);if(t.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(a,c)=>this.mapping.delete(c);il(n,n.deleteSet,a=>{if(a.constructor===rn){const c=a.content.type;c&&this.mapping.delete(c)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const o=this.type.toArray().map(a=>WB(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new De(Ce.from(o),0,0));Zde(s,this.beforeTransactionSelection,this),s=s.setMeta(Ft,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof l8}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(t){this.doc.transact(()=>{H2(this.doc,this.type,t,this),this.beforeTransactionSelection=m1(this,this.prosemirrorView.state)},Ft)}initView(t){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=t,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const WB=(e,t,n,r,i,o)=>{const s=n.mapping.get(e);if(s===void 0){if(e instanceof lr)return Xg(e,t,n,r,i,o);throw fo()}return s},Xg=(e,t,n,r,i,o)=>{const s=[],a=c=>{if(c instanceof lr){const u=WB(c,t,n,r,i,o);u!==null&&s.push(u)}else{const u=c._item.right?.content?.type;u instanceof ol&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(c.applyDelta([{retain:c.length},...u.toDelta()]),u.doc.transact(h=>{u._item.delete(h)}));const f=efe(c,t,n,r,i,o);f!==null&&f.forEach(h=>{h!==null&&s.push(h)})}};r===void 0||i===void 0?e.toArray().forEach(a):p8(e,new RT(i.ds,r.sv)).forEach(a);try{const c=e.getAttributes(r);r!==void 0&&(p1(e._item,r)?p1(e._item,i)||(c.ychange=o?o("added",e._item.id):{type:"added"}):c.ychange=o?o("removed",e._item.id):{type:"removed"});const u=t.node(e.nodeName,c,s);return n.mapping.set(e,u),u}catch{return e.doc.transact(u=>{e._item.delete(u)},Ft),n.mapping.delete(e),null}},efe=(e,t,n,r,i,o)=>{const s=[],a=e.toDelta(r,i,o);try{for(let c=0;c<a.length;c++){const u=a[c];s.push(t.text(u.insert,sfe(u.attributes,t)))}}catch{return e.doc.transact(u=>{e._item.delete(u)},Ft),null}return s},tfe=(e,t)=>{const n=new mi,r=e.map(i=>({insert:i.text,attributes:XB(i.marks,t)}));return n.applyDelta(r),t.mapping.set(n,e),n},nfe=(e,t)=>{const n=new lr(e.type.name);for(const r in e.attrs){const i=e.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,Db(e).map(r=>P2(r,t))),t.mapping.set(n,e),n},P2=(e,t)=>e instanceof Array?tfe(e,t):nfe(e,t),IO=e=>typeof e=="object"&&e!==null,Cx=(e,t)=>{const n=Object.keys(e).filter(i=>e[i]!==null);let r=n.length===(t==null?0:Object.keys(t).filter(i=>t[i]!==null).length);for(let i=0;i<n.length&&r;i++){const o=n[i],s=e[o],a=t[o];r=o==="ychange"||s===a||IO(s)&&IO(a)&&Cx(s,a)}return r},Db=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const i=t[r];if(i.isText){const o=[];for(let s=t[r];r<t.length&&s.isText;s=t[++r])o.push(s);r--,n.push(o)}else n.push(i)}return n},KB=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((r,i)=>r.insert===t[i].text&&CT(r.attributes||{}).length===t[i].marks.length&&M5(r.attributes,(o,s)=>{const a=QB(s),c=t[i].marks;return Cx(o,c.find(u=>u.type.name===a)?.attrs)}))},Qh=(e,t)=>{if(e instanceof lr&&!(t instanceof Array)&&U2(e,t)){const n=Db(t);return e._length===n.length&&Cx(e.getAttributes(),t.attrs)&&e.toArray().every((r,i)=>Qh(r,n[i]))}return e instanceof mi&&t instanceof Array&&KB(e,t)},g1=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((n,r)=>t[r]===n),BO=(e,t,n)=>{const r=e.toArray(),i=Db(t),o=i.length,s=r.length,a=uo(s,o);let c=0,u=0,f=!1;for(;c<a;c++){const h=r[c],m=i[c];if(g1(n.mapping.get(h),m))f=!0;else if(!Qh(h,m))break}for(;c+u<a;u++){const h=r[s-u-1],m=i[o-u-1];if(g1(n.mapping.get(h),m))f=!0;else if(!Qh(h,m))break}return{equalityFactor:c+u,foundMappedChild:f}},rfe=e=>{let t="",n=e._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Co?t+=n.content.str:n.content instanceof Fn&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},ife=(e,t,n)=>{n.mapping.set(e,t);const{nAttrs:r,str:i}=rfe(e),o=t.map(u=>({insert:u.text,attributes:Object.assign({},r,XB(u.marks,n))})),{insert:s,remove:a,index:c}=Hde(i,o.map(u=>u.insert).join(""));e.delete(c,a),e.insert(c,s),e.applyDelta(o.map(u=>({retain:u.insert.length,attributes:u.attributes})))},ofe=/(.*)(--[a-zA-Z0-9+/=]{8})$/,QB=e=>ofe.exec(e)?.[1]??e,sfe=(e,t)=>{const n=[];for(const r in e)n.push(t.mark(QB(r),e[r]));return n},XB=(e,t)=>{const n={};return e.forEach(r=>{if(r.type.name!=="ychange"){const i=Nr(t.isOMark,r.type,()=>!r.type.excludes(r.type));n[i?`${r.type.name}--${Wde(r.toJSON())}`:r.type.name]=r.attrs}}),n},H2=(e,t,n,r)=>{if(t instanceof lr&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof lr){const h=t.getAttributes(),m=n.attrs;for(const g in m)m[g]!==null?h[g]!==m[g]&&g!=="ychange"&&t.setAttribute(g,m[g]):t.removeAttribute(g);for(const g in h)m[g]===void 0&&t.removeAttribute(g)}const i=Db(n),o=i.length,s=t.toArray(),a=s.length,c=uo(o,a);let u=0,f=0;for(;u<c;u++){const h=s[u],m=i[u];if(!g1(r.mapping.get(h),m))if(Qh(h,m))r.mapping.set(h,m);else break}for(;f+u<c;f++){const h=s[a-f-1],m=i[o-f-1];if(!g1(r.mapping.get(h),m))if(Qh(h,m))r.mapping.set(h,m);else break}e.transact(()=>{for(;a-u-f>0&&o-u-f>0;){const m=s[u],g=i[u],y=s[a-f-1],E=i[o-f-1];if(m instanceof mi&&g instanceof Array)KB(m,g)||ife(m,g,r),u+=1;else{let C=m instanceof lr&&U2(m,g),S=y instanceof lr&&U2(y,E);if(C&&S){const N=BO(m,g,r),_=BO(y,E,r);N.foundMappedChild&&!_.foundMappedChild?S=!1:!N.foundMappedChild&&_.foundMappedChild||N.equalityFactor<_.equalityFactor?C=!1:S=!1}C?(H2(e,m,g,r),u+=1):S?(H2(e,y,E,r),f+=1):(r.mapping.delete(t.get(u)),t.delete(u,1),t.insert(u,[P2(g,r)]),u+=1)}}const h=a-u-f;if(a===1&&o===0&&s[0]instanceof mi?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):h>0&&(t.slice(u,u+h).forEach(m=>r.mapping.delete(m)),t.delete(u,h)),u+f<o){const m=[];for(let g=u;g<o-f;g++)m.push(P2(i[g],r));t.insert(u,m)}},Ft)},U2=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let gh=null;const afe=()=>{const e=gh;gh=null,e.forEach((t,n)=>{const r=n.state.tr,i=Ft.getState(n.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach((o,s)=>{r.setMeta(s,o)}),n.dispatch(r))})},lfe=(e,t,n)=>{gh||(gh=new Map,xT(0,afe)),Nr(gh,e,Tr).set(t,n)},Xh=(e,t,n)=>{if(e===0)return lC(t,0,t.length===0?-1:0);let r=t._first===null?null:t._first.content.type;for(;r!==null&&t!==r;){if(r instanceof mi){if(r._length>=e)return lC(r,e,t.length===0?-1:0);if(e-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,e--;while(r!==t&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==t&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&e<i)r=r._first.content.type,e--;else{if(e===1&&r._length===0&&i>1)return new jh(r._item===null?null:r._item.id,r._item===null?Uh(r):null,null);if(e-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(e===0)return r=r._item===null?r:r._item.parent,new jh(r._item===null?null:r._item.id,r._item===null?Uh(r):null,null);do r=r._item.parent,e--;while(r!==t&&r._item.next===null);r!==t&&(r=r._item.next.content.type)}}}if(r===null)throw Ci();if(e===0&&r.constructor!==mi&&r!==t)return cfe(r._item.parent,r._item)}return lC(t,t._length,t.length===0?-1:0)},cfe=(e,t)=>{let n=null,r=null;return e._item===null?r=Uh(e):n=at(e._item.id.client,e._item.id.clock),new jh(n,r,t.id)},nc=(e,t,n,r)=>{const i=Hee(n,e);if(i===null||i.type!==t&&!Fh(t,i.type._item))return null;let o=i.type,s=0;if(o.constructor===mi)s=i.index;else if(o._item===null||!o._item.deleted){let a=o._first,c=0;for(;c<o._length&&c<i.index&&a!==null;){if(!a.deleted){const u=a.content.type;c++,u instanceof mi?s+=u._length:s+=r.get(u).nodeSize}a=a.right}s+=1}for(;o!==t&&o._item!==null;){const a=o._item.parent;if(a._item===null||!a._item.deleted){s+=1;let c=a._first;for(;c!==null;){const u=c.content.type;if(u===o)break;c.deleted||(u instanceof mi?s+=u._length:s+=r.get(u).nodeSize),c=c.right}}o=a}return s-1},ufe=(e,t,n)=>e!==t,dfe=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode(""),i=document.createTextNode("");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(i,null),t},ZB=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),ffe=/^#[0-9a-fA-F]{6}$/,PO=(e,t,n,r,i)=>{const o=Ft.getState(e),s=o.doc,a=[];return o.snapshot!=null||o.prevSnapshot!=null||o.binding.mapping.size===0?ct.create(e.doc,[]):(t.getStates().forEach((c,u)=>{if(n(s.clientID,u,c)&&c.cursor!=null){const f=c.user||{};f.color==null?f.color="#ffa500":ffe.test(f.color)||console.warn("A user uses an unsupported color format",f),f.name==null&&(f.name=`User: ${u}`);let h=nc(s,o.type,th(c.cursor.anchor),o.binding.mapping),m=nc(s,o.type,th(c.cursor.head),o.binding.mapping);if(h!==null&&m!==null){const g=Eo(e.doc.content.size-1,0);h=uo(h,g),m=uo(m,g),a.push(It.widget(m,()=>r(f,u),{key:u+"",side:10}));const y=uo(h,m),E=Eo(h,m);a.push(It.inline(y,E,i(f,u),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),ct.create(e.doc,a))},hfe=(e,{awarenessStateFilter:t=ufe,cursorBuilder:n=dfe,selectionBuilder:r=ZB,getSelection:i=s=>s.selection}={},o="cursor")=>new nt({key:qf,state:{init(s,a){return PO(a,e,t,n,r)},apply(s,a,c,u){const f=Ft.getState(u),h=s.getMeta(qf);return f&&f.isChangeOrigin||h&&h.awarenessUpdated?PO(u,e,t,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>qf.getState(s)},view:s=>{const a=()=>{s.docView&&lfe(s,qf,{awarenessUpdated:!0})},c=()=>{const u=Ft.getState(s.state),f=e.getLocalState()||{};if(s.hasFocus()){const h=i(s.state),m=Xh(h.anchor,u.type,u.binding.mapping),g=Xh(h.head,u.type,u.binding.mapping);(f.cursor==null||!i4(th(f.cursor.anchor),m)||!i4(th(f.cursor.head),g))&&e.setLocalStateField(o,{anchor:m,head:g})}else f.cursor!=null&&nc(u.doc,u.type,th(f.cursor.anchor),u.binding.mapping)!==null&&e.setLocalStateField(o,null)};return e.on("change",a),s.dom.addEventListener("focusin",c),s.dom.addEventListener("focusout",c),{update:c,destroy:()=>{s.dom.removeEventListener("focusin",c),s.dom.removeEventListener("focusout",c),e.off("change",a),e.setLocalStateField(o,null)}}}}),pfe=e=>Yi.getState(e)?.undoManager?.undo()!=null,mfe=e=>Yi.getState(e)?.undoManager?.redo()!=null,gfe=(e,t)=>t==null?Yi.getState(e)?.undoManager?.canUndo():pfe(e),bfe=(e,t)=>t==null?Yi.getState(e)?.undoManager?.canRedo():mfe(e),yfe=new Set(["paragraph"]),Efe=(e,t)=>!(e instanceof rn)||!(e.content instanceof To)||!(e.content.type instanceof ol||e.content.type instanceof lr&&t.has(e.content.type.nodeName))||e.content.type._length===0,vfe=({protectedNodes:e=yfe,trackedOrigins:t=[],undoManager:n=null}={})=>new nt({key:Yi,state:{init:(r,i)=>{const o=Ft.getState(i),s=n||new l8(o.type,{trackedOrigins:new Set([Ft].concat(t)),deleteFilter:a=>Efe(a,e),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,i,o,s)=>{const a=Ft.getState(s).binding,c=i.undoManager,u=c.undoStack.length>0,f=c.redoStack.length>0;return a?{undoManager:c,prevSel:m1(a,o),hasUndoOps:u,hasRedoOps:f}:u!==i.hasUndoOps||f!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:c.undoStack.length>0,hasRedoOps:c.redoStack.length>0}):i}},view:r=>{const i=Ft.getState(r.state),o=Yi.getState(r.state).undoManager;return o.on("stack-item-added",({stackItem:s})=>{const a=i.binding;a&&s.meta.set(a,Yi.getState(r.state).prevSel)}),o.on("stack-item-popped",({stackItem:s})=>{const a=i.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{o.destroy()}}}}),Cfe={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"},divider:{title:"Divider",subtext:"Visually divide blocks",aliases:["divider","hr","line","horizontal rule"],group:"Basic blocks"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{add_button_text:{image:"Add image",video:"Add video",audio:"Add audio",file:"Add file"}},toggle_blocks:{add_block_button:"Empty toggle. Click to add a block."},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:e=>`${e} more replies`}},generic:{ctrl_shortcut:"Ctrl"}},wfe={tokenize:Sfe};function Sfe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nt(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),o(a)}function o(a){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Xe(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const Tfe={tokenize:xfe},HO={tokenize:kfe};function xfe(e){const t=this,n=[];let r=0,i,o,s;return a;function a(_){if(r<n.length){const O=n[r];return t.containerState=O[1],e.attempt(O[0].continuation,c,u)(_)}return u(_)}function c(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&N();const O=t.events.length;let M=O,R;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){R=t.events[M][1].end;break}S(r);let L=O;for(;L<t.events.length;)t.events[L][1].end={...R},L++;return gi(t.events,M+1,0,t.events.slice(O)),t.events.length=L,u(_)}return a(_)}function u(_){if(r===n.length){if(!i)return m(_);if(i.currentConstruct&&i.currentConstruct.concrete)return y(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(HO,f,h)(_)}function f(_){return i&&N(),S(r),m(_)}function h(_){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,y(_)}function m(_){return t.containerState={},e.attempt(HO,g,y)(_)}function g(_){return r++,n.push([t.currentConstruct,t.containerState]),m(_)}function y(_){if(_===null){i&&N(),S(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),E(_)}function E(_){if(_===null){C(e.exit("chunkFlow"),!0),S(0),e.consume(_);return}return Xe(_)?(e.consume(_),C(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),E)}function C(_,O){const M=t.sliceStream(_);if(O&&M.push(null),_.previous=o,o&&(o.next=_),o=_,i.defineSkip(_.start),i.write(M),t.parser.lazy[_.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<s&&(!i.events[R][1].end||i.events[R][1].end.offset>s))return;const L=t.events.length;let F=L,z,B;for(;F--;)if(t.events[F][0]==="exit"&&t.events[F][1].type==="chunkFlow"){if(z){B=t.events[F][1].end;break}z=!0}for(S(r),R=L;R<t.events.length;)t.events[R][1].end={...B},R++;gi(t.events,F+1,0,t.events.slice(L)),t.events.length=R}}function S(_){let O=n.length;for(;O-- >_;){const M=n[O];t.containerState=M[1],M[0].exit.call(t,e)}n.length=_}function N(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function kfe(e,t,n){return Nt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const _fe={tokenize:Afe};function Afe(e){const t=this,n=e.attempt(Tp,r,e.attempt(this.parser.constructs.flowInitial,i,Nt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(rue,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Nfe={resolveAll:eP()},Mfe=JB("string"),Rfe=JB("text");function JB(e){return{resolveAll:eP(e==="text"?Ofe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,a);return s;function s(f){return u(f)?o(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),o(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const h=i[f];let m=-1;if(h)for(;++m<h.length;){const g=h[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function eP(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function Ofe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,c;for(;o--;){const u=i[o];if(typeof u=="string"){for(s=u.length;u.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(u===-2)c=!0,a++;else if(u!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const u={type:n===e.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:r.start._bufferIndex+s,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Dfe={42:Ur,43:Ur,45:Ur,48:Ur,49:Ur,50:Ur,51:Ur,52:Ur,53:Ur,54:Ur,55:Ur,56:Ur,57:Ur,62:LB},Lfe={91:lue},Ife={[-2]:IC,[-1]:IC,32:IC},Bfe={35:pue,42:Qg,45:[AO,Qg],60:yue,61:AO,95:Qg,96:kO,126:kO},Pfe={38:BB,92:IB},Hfe={[-5]:BC,[-4]:BC,[-3]:BC,33:Bue,38:BB,42:I2,60:[Hce,xue],91:Hue,92:[fue,IB],93:Ex,95:I2,96:Xce},Ufe={null:[I2,Nfe]},Ffe={null:[42,95]},jfe={null:[]},zfe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ffe,contentInitial:Lfe,disable:jfe,document:Dfe,flow:Bfe,flowInitial:Ife,insideSpan:Ufe,string:Pfe,text:Hfe},Symbol.toStringTag,{value:"Module"}));function $fe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let s=[],a=[];const c={attempt:L(M),check:L(R),consume:N,enter:_,exit:O,interrupt:L(R,{interrupt:!0})},u={code:null,containerState:{},defineSkip:E,events:[],now:y,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:h};let f=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function h(U){return s=ji(s,U),C(),s[s.length-1]!==null?[]:(F(t,0),u.events=Ob(o,u.events,u),u.events)}function m(U,q){return qfe(g(U),q)}function g(U){return Vfe(s,U)}function y(){const{_bufferIndex:U,_index:q,line:re,column:J,offset:ae}=r;return{_bufferIndex:U,_index:q,line:re,column:J,offset:ae}}function E(U){i[U.line]=U.column,B()}function C(){let U;for(;r._index<s.length;){const q=s[r._index];if(typeof q=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<q.length;)S(q.charCodeAt(r._bufferIndex));else S(q)}}function S(U){f=f(U)}function N(U){Xe(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,B()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=U}function _(U,q){const re=q||{};return re.type=U,re.start=y(),u.events.push(["enter",re,u]),a.push(re),re}function O(U){const q=a.pop();return q.end=y(),u.events.push(["exit",q,u]),q}function M(U,q){F(U,q.from)}function R(U,q){q.restore()}function L(U,q){return re;function re(J,ae,W){let Z,te,ue,$;return Array.isArray(J)?ie(J):"tokenize"in J?ie([J]):K(J);function K(Le){return $e;function $e(ot){const Ye=ot!==null&&Le[ot],Bt=ot!==null&&Le.null,mn=[...Array.isArray(Ye)?Ye:Ye?[Ye]:[],...Array.isArray(Bt)?Bt:Bt?[Bt]:[]];return ie(mn)(ot)}}function ie(Le){return Z=Le,te=0,Le.length===0?W:j(Le[te])}function j(Le){return $e;function $e(ot){return $=z(),ue=Le,Le.partial||(u.currentConstruct=Le),Le.name&&u.parser.constructs.disable.null.includes(Le.name)?Re():Le.tokenize.call(q?Object.assign(Object.create(u),q):u,c,Se,Re)(ot)}}function Se(Le){return U(ue,$),ae}function Re(Le){return $.restore(),++te<Z.length?j(Z[te]):W}}}function F(U,q){U.resolveAll&&!o.includes(U)&&o.push(U),U.resolve&&gi(u.events,q,u.events.length-q,U.resolve(u.events.slice(q),u)),U.resolveTo&&(u.events=U.resolveTo(u.events,u))}function z(){const U=y(),q=u.previous,re=u.currentConstruct,J=u.events.length,ae=Array.from(a);return{from:J,restore:W};function W(){r=U,u.previous=q,u.currentConstruct=re,u.events.length=J,a=ae,B()}}function B(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Vfe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}function qfe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}function Yfe(e){const r={constructs:xB([zfe,...(e||{}).extensions||[]]),content:i(wfe),defined:[],document:i(Tfe),flow:i(_fe),lazy:{},string:i(Mfe),text:i(Rfe)};return r;function i(o){return s;function s(a){return $fe(r,o,a)}}}function Gfe(e){for(;!PB(e););return e}const UO=/[\0\t\n\r]/g;function Wfe(){let e=1,t="",n=!0,r;return i;function i(o,s,a){const c=[];let u,f,h,m,g;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),h=0,t="",n&&(o.charCodeAt(0)===65279&&h++,n=void 0);h<o.length;){if(UO.lastIndex=h,u=UO.exec(o),m=u&&u.index!==void 0?u.index:o.length,g=o.charCodeAt(m),!u){t=o.slice(h);break}if(g===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(o.slice(h,m)),e+=m-h),g){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return a&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const tP={}.hasOwnProperty;function Kfe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Qfe(n)(Gfe(Yfe(n).document().write(Wfe()(e,t,!0))))}function Qfe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Y),autolinkProtocol:z,autolinkEmail:z,atxHeading:o(ce),blockQuote:o(Bt),characterEscape:z,characterReference:z,codeFenced:o(mn),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(mn,s),codeText:o(Jt,s),codeTextData:z,data:z,codeFlowValue:z,definition:o(rt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Tt),hardBreakEscape:o(ge),hardBreakTrailing:o(ge),htmlFlow:o(Ae,s),htmlFlowData:z,htmlText:o(Ae,s),htmlTextData:z,image:o(He),label:s,link:o(Y),listItem:o(I),listItemValue:m,listOrdered:o(T,h),listUnordered:o(T),paragraph:o(P),reference:j,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(ce),strong:o(ee),thematicBreak:o(Ee)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:Ye,autolinkProtocol:ot,blockQuote:c(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:Re,characterReferenceMarkerNumeric:Re,characterReferenceValue:Le,characterReference:$e,codeFenced:c(C),codeFencedFence:E,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:B,codeIndented:c(S),codeText:c(ae),codeTextData:B,data:B,definition:c(),definitionDestinationString:O,definitionLabelString:N,definitionTitleString:_,emphasis:c(),hardBreakEscape:c(q),hardBreakTrailing:c(q),htmlFlow:c(re),htmlFlowData:B,htmlText:c(J),htmlTextData:B,image:c(Z),label:ue,labelText:te,lineEnding:U,link:c(W),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Se,resourceDestinationString:$,resourceTitleString:K,resource:ie,setextHeading:c(F),setextHeadingLineSequence:L,setextHeadingText:R,strong:c(),thematicBreak:c()}};nP(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(se){let ye={type:"root",children:[]};const Be={stack:[ye],tokenStack:[],config:t,enter:a,exit:u,buffer:s,resume:f,data:n},Ie=[];let Pe=-1;for(;++Pe<se.length;)if(se[Pe][1].type==="listOrdered"||se[Pe][1].type==="listUnordered")if(se[Pe][0]==="enter")Ie.push(Pe);else{const Mt=Ie.pop();Pe=i(se,Mt,Pe)}for(Pe=-1;++Pe<se.length;){const Mt=t[se[Pe][0]];tP.call(Mt,se[Pe][1].type)&&Mt[se[Pe][1].type].call(Object.assign({sliceSerialize:se[Pe][2].sliceSerialize},Be),se[Pe][1])}if(Be.tokenStack.length>0){const Mt=Be.tokenStack[Be.tokenStack.length-1];(Mt[1]||FO).call(Be,void 0,Mt[0])}for(ye.position={start:Na(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:Na(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<t.transforms.length;)ye=t.transforms[Pe](ye)||ye;return ye}function i(se,ye,Be){let Ie=ye-1,Pe=-1,Mt=!1,on,yn,sn,xn;for(;++Ie<=Be;){const At=se[Ie];switch(At[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{At[0]==="enter"?Pe++:Pe--,xn=void 0;break}case"lineEndingBlank":{At[0]==="enter"&&(on&&!xn&&!Pe&&!sn&&(sn=Ie),xn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xn=void 0}if(!Pe&&At[0]==="enter"&&At[1].type==="listItemPrefix"||Pe===-1&&At[0]==="exit"&&(At[1].type==="listUnordered"||At[1].type==="listOrdered")){if(on){let ra=Ie;for(yn=void 0;ra--;){const eo=se[ra];if(eo[1].type==="lineEnding"||eo[1].type==="lineEndingBlank"){if(eo[0]==="exit")continue;yn&&(se[yn][1].type="lineEndingBlank",Mt=!0),eo[1].type="lineEnding",yn=ra}else if(!(eo[1].type==="linePrefix"||eo[1].type==="blockQuotePrefix"||eo[1].type==="blockQuotePrefixWhitespace"||eo[1].type==="blockQuoteMarker"||eo[1].type==="listItemIndent"))break}sn&&(!yn||sn<yn)&&(on._spread=!0),on.end=Object.assign({},yn?se[yn][1].start:At[1].end),se.splice(yn||Ie,0,["exit",on,At[2]]),Ie++,Be++}if(At[1].type==="listItemPrefix"){const ra={type:"listItem",_spread:!1,start:Object.assign({},At[1].start),end:void 0};on=ra,se.splice(Ie,0,["enter",ra,At[2]]),Ie++,Be++,sn=void 0,xn=!0}}}return se[ye][1]._spread=Mt,Be}function o(se,ye){return Be;function Be(Ie){a.call(this,se(Ie),Ie),ye&&ye.call(this,Ie)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(se,ye,Be){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([ye,Be||void 0]),se.position={start:Na(ye.start),end:void 0}}function c(se){return ye;function ye(Be){se&&se.call(this,Be),u.call(this,Be)}}function u(se,ye){const Be=this.stack.pop(),Ie=this.tokenStack.pop();if(Ie)Ie[0].type!==se.type&&(ye?ye.call(this,se,Ie[0]):(Ie[1]||FO).call(this,se,Ie[0]));else throw new Error("Cannot close `"+se.type+"` ("+hh({start:se.start,end:se.end})+"): its not open");Be.position.end=Na(se.end)}function f(){return Nb(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(se){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function g(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=se}function y(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=se}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.value=se.replace(/(\r?\n|\r)$/g,"")}function N(se){const ye=this.resume(),Be=this.stack[this.stack.length-1];Be.label=ye,Be.identifier=ho(this.sliceSerialize(se)).toLowerCase()}function _(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.title=se}function O(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.url=se}function M(se){const ye=this.stack[this.stack.length-1];if(!ye.depth){const Be=this.sliceSerialize(se).length;ye.depth=Be}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function L(se){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function z(se){const Be=this.stack[this.stack.length-1].children;let Ie=Be[Be.length-1];(!Ie||Ie.type!=="text")&&(Ie=oe(),Ie.position={start:Na(se.start),end:void 0},Be.push(Ie)),this.stack.push(Ie)}function B(se){const ye=this.stack.pop();ye.value+=this.sliceSerialize(se),ye.position.end=Na(se.end)}function U(se){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Be=ye.children[ye.children.length-1];Be.position.end=Na(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ye.type)&&(z.call(this,se),B.call(this,se))}function q(){this.data.atHardBreak=!0}function re(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.value=se}function J(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.value=se}function ae(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.value=se}function W(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ye,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function Z(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ye,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function te(se){const ye=this.sliceSerialize(se),Be=this.stack[this.stack.length-2];Be.label=TB(ye),Be.identifier=ho(ye).toLowerCase()}function ue(){const se=this.stack[this.stack.length-1],ye=this.resume(),Be=this.stack[this.stack.length-1];if(this.data.inReference=!0,Be.type==="link"){const Ie=se.children;Be.children=Ie}else Be.alt=ye}function $(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.url=se}function K(){const se=this.resume(),ye=this.stack[this.stack.length-1];ye.title=se}function ie(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function Se(se){const ye=this.resume(),Be=this.stack[this.stack.length-1];Be.label=ye,Be.identifier=ho(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function Re(se){this.data.characterReferenceType=se.type}function Le(se){const ye=this.sliceSerialize(se),Be=this.data.characterReferenceType;let Ie;Be?(Ie=SB(ye,Be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ie=bx(ye);const Pe=this.stack[this.stack.length-1];Pe.value+=Ie}function $e(se){const ye=this.stack.pop();ye.position.end=Na(se.end)}function ot(se){B.call(this,se);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(se)}function Ye(se){B.call(this,se);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(se)}function Bt(){return{type:"blockquote",children:[]}}function mn(){return{type:"code",lang:null,meta:null,value:""}}function Jt(){return{type:"inlineCode",value:""}}function rt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Tt(){return{type:"emphasis",children:[]}}function ce(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function Ae(){return{type:"html",value:""}}function He(){return{type:"image",title:null,url:"",alt:null}}function Y(){return{type:"link",title:null,url:"",children:[]}}function T(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function I(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function P(){return{type:"paragraph",children:[]}}function ee(){return{type:"strong",children:[]}}function oe(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function Na(e){return{line:e.line,column:e.column,offset:e.offset}}function nP(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?nP(e,r):Xfe(e,r)}}function Xfe(e,t){let n;for(n in t)if(tP.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function FO(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+hh({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+hh({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+hh({start:t.start,end:t.end})+") is still open")}function Zfe(e){const t=this;t.parser=n;function n(r){return Kfe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Jfe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ehe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function the(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function nhe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rhe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ihe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Sd(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function ohe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function she(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function rP(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function ahe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rP(e,t);const i={src:Sd(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function lhe(e,t){const n={src:Sd(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function che(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function uhe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rP(e,t);const i={href:Sd(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function dhe(e,t){const n={href:Sd(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fhe(e,t,n){const r=e.all(t),i=n?hhe(n):iP(t),o={},s=[];if(typeof t.checked=="boolean"){const f=r[0];let h;f&&f.type==="element"&&f.tagName==="p"?h=f:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const f=r[a];(i||a!==0||f.type!=="element"||f.tagName!=="p")&&s.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?s.push(...f.children):s.push(f)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,u),e.applyData(t,u)}function hhe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=iP(n[r])}return t}function iP(e){const t=e.spread;return t??e.children.length>1}function phe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function mhe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ghe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function bhe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yhe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=z9(t.children[1]),c=j9(t.children[t.children.length-1]);a&&c&&(s.position={start:a,end:c}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function Ehe(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let c=-1;const u=[];for(;++c<a;){const h=t.children[c],m={},g=s?s[c]:void 0;g&&(m.align=g);let y={type:"element",tagName:o,properties:m,children:[]};h&&(y.children=e.all(h),e.patch(h,y),y=e.applyData(h,y)),u.push(y)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function vhe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const jO=9,zO=32;function Che(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push($O(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push($O(t.slice(i),i>0,!1)),o.join("")}function $O(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===jO||o===zO;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===jO||o===zO;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function whe(e,t){const n={type:"text",value:Che(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function She(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const F2={blockquote:Jfe,break:ehe,code:the,delete:nhe,emphasis:rhe,footnoteReference:ihe,heading:ohe,html:she,imageReference:ahe,image:lhe,inlineCode:che,linkReference:uhe,link:dhe,listItem:fhe,list:phe,paragraph:mhe,root:ghe,strong:bhe,table:yhe,tableCell:vhe,tableRow:Ehe,text:whe,thematicBreak:She,toml:vg,yaml:vg,definition:vg,footnoteDefinition:vg};function vg(){}function The(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function xhe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function khe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||The,r=e.options.footnoteBackLabel||xhe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),h=String(u.identifier).toUpperCase(),m=Sd(h.toLowerCase());let g=0;const y=[],E=e.footnoteCounts.get(h);for(;E!==void 0&&++g<=E;){y.length>0&&y.push({type:"text",value:" "});let N=typeof n=="string"?n:n(c,g);typeof N=="string"&&(N={type:"text",value:N}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,g),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const C=f[f.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const N=C.children[C.children.length-1];N&&N.type==="text"?N.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...y)}else f.push(...y);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(f,!0)};e.patch(u,S),a.push(S)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...od(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const j2={}.hasOwnProperty,_he={};function Ahe(e,t){const n=t||_he,r=new Map,i=new Map,o=new Map,s={...F2,...n.handlers},a={all:u,applyData:Mhe,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:n,patch:Nhe,wrap:Ohe};return Ec(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const h=f.type==="definition"?r:i,m=String(f.identifier).toUpperCase();h.has(m)||h.set(m,f)}}),a;function c(f,h){const m=f.type,g=a.handlers[m];if(j2.call(a.handlers,m)&&g)return g(a,f,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in f){const{children:E,...C}=f,S=od(C);return S.children=a.all(f),S}return od(f)}return(a.options.unknownHandler||Rhe)(a,f,h)}function u(f){const h=[];if("children"in f){const m=f.children;let g=-1;for(;++g<m.length;){const y=a.one(m[g],f);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=VO(y.value)),!Array.isArray(y)&&y.type==="element")){const E=y.children[0];E&&E.type==="text"&&(E.value=VO(E.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function Nhe(e,t){e.position&&(t.position=V9(e))}function Mhe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,od(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Rhe(e,t){const n=t.data||{},r="value"in t&&!(j2.call(n,"hProperties")||j2.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ohe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function VO(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function qO(e,t){const n=Ahe(e,t),r=n.one(e,void 0),i=khe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function Dhe(e,t){return e&&"run"in e?async function(n,r){const i=qO(n,{file:r,...t});await e.run(i,r)}:function(n,r){return qO(n,{file:r,...e||t})}}const Lhe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Ihe=/["&'<>`]/g,Bhe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Phe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Hhe=/[|\\{}()[\]^$+*?.]/g,YO=new WeakMap;function Uhe(e,t){if(e=e.replace(t.subset?Fhe(t.subset):Ihe,r),t.subset||t.escapeOnly)return e;return e.replace(Bhe,n).replace(Phe,r);function n(i,o,s){return t.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,s.charCodeAt(o+2),t)}function r(i,o,s){return t.format(i.charCodeAt(0),s.charCodeAt(o+1),t)}}function Fhe(e){let t=YO.get(e);return t||(t=jhe(e),YO.set(e,t)),t}function jhe(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(Hhe,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const zhe=/[\dA-Fa-f]/;function $he(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!zhe.test(String.fromCharCode(t))?r:r+";"}const Vhe=/\d/;function qhe(e,t,n){const r="&#"+String(e);return n&&t&&!Vhe.test(String.fromCharCode(t))?r:r+";"}const Yhe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],$C={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},Ghe=["cent","copy","divide","gt","lt","not","para","times"],oP={}.hasOwnProperty,z2={};let Cg;for(Cg in $C)oP.call($C,Cg)&&(z2[$C[Cg]]=Cg);const Whe=/[^\dA-Za-z]/;function Khe(e,t,n,r){const i=String.fromCharCode(e);if(oP.call(z2,i)){const o=z2[i],s="&"+o;return n&&Yhe.includes(o)&&!Ghe.includes(o)&&(!r||t&&t!==61&&Whe.test(String.fromCharCode(t)))?s:s+";"}return""}function Qhe(e,t,n){let r=$he(e,t,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=Khe(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const o=qhe(e,t,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function ju(e,t){return Uhe(e,Object.assign({format:Qhe},t))}const Xhe=/^>|^->|<!--|-->|--!>|<!-$/g,Zhe=[">"],Jhe=["<",">"];function epe(e,t,n,r){return r.settings.bogusComments?"<?"+ju(e.value,Object.assign({},r.settings.characterReferences,{subset:Zhe}))+">":"<!--"+e.value.replace(Xhe,i)+"-->";function i(o){return ju(o,Object.assign({},r.settings.characterReferences,{subset:Jhe}))}}function tpe(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Vn=aP(1),sP=aP(-1),npe=[];function aP(e){return t;function t(n,r,i){const o=n?n.children:npe;let s=(r||0)+e,a=o[s];if(!i)for(;a&&wp(a);)s+=e,a=o[s];return a}}const rpe={}.hasOwnProperty;function lP(e){return t;function t(n,r,i){return rpe.call(e,n.tagName)&&e[n.tagName](n,r,i)}}const wx=lP({body:ope,caption:VC,colgroup:VC,dd:cpe,dt:lpe,head:VC,html:ipe,li:ape,optgroup:upe,option:dpe,p:spe,rp:GO,rt:GO,tbody:hpe,td:WO,tfoot:ppe,th:WO,thead:fpe,tr:mpe});function VC(e,t,n){const r=Vn(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&wp(r.value.charAt(0)))}function ipe(e,t,n){const r=Vn(n,t);return!r||r.type!=="comment"}function ope(e,t,n){const r=Vn(n,t);return!r||r.type!=="comment"}function spe(e,t,n){const r=Vn(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function ape(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&r.tagName==="li"}function lpe(e,t,n){const r=Vn(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function cpe(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function GO(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function upe(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function dpe(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function fpe(e,t,n){const r=Vn(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function hpe(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function ppe(e,t,n){return!Vn(n,t)}function mpe(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function WO(e,t,n){const r=Vn(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const gpe=lP({body:Epe,colgroup:vpe,head:ype,html:bpe,tbody:Cpe});function bpe(e){const t=Vn(e,-1);return!t||t.type!=="comment"}function ype(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function Epe(e){const t=Vn(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&wp(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function vpe(e,t,n){const r=sP(n,t),i=Vn(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&wx(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function Cpe(e,t,n){const r=sP(n,t),i=Vn(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&wx(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const wg={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function wpe(e,t,n,r){const i=r.schema,o=i.space==="svg"?!1:r.settings.omitOptionalTags;let s=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let c;i.space==="html"&&e.tagName==="svg"&&(r.schema=Ep);const u=Spe(r,e.properties),f=r.all(i.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=i,f&&(s=!1),(u||!o||!gpe(e,t,n))&&(a.push("<",e.tagName,u?" "+u:""),s&&(i.space==="svg"||r.settings.closeSelfClosing)&&(c=u.charAt(u.length-1),(!r.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(f),!s&&(!o||!wx(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function Spe(e,t){const n=[];let r=-1,i;if(t){for(i in t)if(t[i]!==null&&t[i]!==void 0){const o=Tpe(e,i,t[i]);o&&n.push(o)}}for(;++r<n.length;){const o=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function Tpe(e,t,n){const r=JT(e.schema,t),i=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let s=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=ju(r.attribute,Object.assign({},e.settings.characterReferences,{subset:wg.name[i][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?Bne:Hne)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?c:(e.settings.preferUnquoted&&(a=ju(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:wg.unquoted[i][o]}))),a!==n&&(e.settings.quoteSmart&&d1(n,s)>d1(n,e.alternative)&&(s=e.alternative),a=s+ju(n,Object.assign({},e.settings.characterReferences,{subset:(s==="'"?wg.single:wg.double)[i][o],attribute:!0}))+s),c+(a&&"="+a))}const xpe=["<","&"];function cP(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:ju(e.value,Object.assign({},r.settings.characterReferences,{subset:xpe}))}function kpe(e,t,n,r){return r.settings.allowDangerousHtml?e.value:cP(e,t,n,r)}function _pe(e,t,n,r){return r.all(e)}const Ape=cB("type",{invalid:Npe,unknown:Mpe,handlers:{comment:epe,doctype:tpe,element:wpe,raw:kpe,root:_pe,text:cP}});function Npe(e){throw new Error("Expected node, not `"+e+"`")}function Mpe(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const Rpe={},Ope={},Dpe=[];function Lpe(e,t){const n=t||Rpe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Ipe,all:Bpe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Lhe,characterReferences:n.characterReferences||Ope,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Ep:Cb,quote:r,alternative:i}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Ipe(e,t,n){return Ape(e,t,n,this)}function Bpe(e){const t=[],n=e&&e.children||Dpe;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function Ppe(e){const t=this,n={...t.data("settings"),...e};t.compiler=r;function r(i){return Lpe(i,n)}}var Hpe=Object.defineProperty,Upe=(e,t,n)=>t in e?Hpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fe=(e,t,n)=>Upe(e,typeof t!="symbol"?t+"":t,n);function Fpe(e,t,n,r="before"){const i=typeof n=="string"?n:n.id,o=$n(e),s=t.map(u=>Tc(u,o)),a=vi(i,e.doc);if(!a)throw new Error(`Block with ID ${i} not found`);let c=a.posBeforeNode;return r==="after"&&(c+=a.node.nodeSize),e.step(new Pn(c,c,new De(Ce.from(s),0,0))),s.map(u=>gn(u,o))}function KO(e,t,n){const r=$n(e),i=n.map(u=>Tc(u,r)),o=new Set(t.map(u=>typeof u=="string"?u:u.id)),s=[],a=typeof t[0]=="string"?t[0]:t[0].id;let c=0;if(e.doc.descendants((u,f)=>{if(o.size===0)return!1;if(!u.type.isInGroup("bnBlock")||!o.has(u.attrs.id))return!0;if(s.push(gn(u,r)),o.delete(u.attrs.id),n.length>0&&u.attrs.id===a){const y=e.doc.nodeSize;e.insert(f,i);const E=e.doc.nodeSize;c+=y-E}const h=e.doc.nodeSize,m=e.doc.resolve(f-c);m.node().type.name==="blockGroup"&&m.node(m.depth-1).type.name!=="doc"&&m.node().childCount===1?e.delete(m.before(),m.after()):e.delete(f-c,f-c+u.nodeSize);const g=e.doc.nodeSize;return c+=h-g,!1}),o.size>0){const u=[...o].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+u)}return{insertedBlocks:i.map(u=>gn(u,r)),removedBlocks:s}}function uP(e){const t=Array.from(e.classList).filter(n=>!n.startsWith("bn-"))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function dP(e,t,n,r){var i;let o;if(t)if(typeof t=="string")o=bo([t],e.pmSchema);else if(Array.isArray(t))o=bo(t,e.pmSchema);else if(t.type==="tableContent")o=ob(t,e.pmSchema);else throw new ts(t.type);else throw new Error("blockContent is required");const s=(r?.document??document).createDocumentFragment();for(const a of o)if(a.type.name!=="text"&&e.schema.inlineContentSchema[a.type.name]){const c=e.schema.inlineContentSpecs[a.type.name].implementation;if(c){const u=oT(a,e.schema.inlineContentSchema,e.schema.styleSchema),f=c.toExternalHTML?c.toExternalHTML(u,e):c.render.call({renderType:"dom",props:void 0},u,()=>{},e);if(f){if(s.appendChild(f.dom),f.contentDOM){const h=n.serializeFragment(a.content,r);f.contentDOM.dataset.editable="",f.contentDOM.appendChild(h)}continue}}}else if(a.type.name==="text"){let c=document.createTextNode(a.textContent);for(const u of a.marks.toReversed())if(u.type.name in e.schema.styleSpecs){const f=(e.schema.styleSpecs[u.type.name].implementation.toExternalHTML??e.schema.styleSpecs[u.type.name].implementation.render)(u.attrs.stringValue,e);f.contentDOM.appendChild(c),c=f.dom}else{const f=u.type.spec.toDOM(u,!0),h=yi.renderSpec(document,f);h.contentDOM.appendChild(c),c=h.dom}s.appendChild(c)}else{const c=n.serializeFragment(Ce.from([a]),r);s.appendChild(c)}return s.childNodes.length===1&&((i=s.firstChild)==null?void 0:i.nodeType)===1&&uP(s.firstChild),s}function jpe(e,t,n,r,i,o,s){var a,c,u,f,h,m,g,y,E;const C=s?.document??document,S=t.pmSchema.nodes.blockContainer,N=n.props||{};for(const[z,B]of Object.entries(t.schema.blockSchema[n.type].propSchema))!(z in N)&&B.default!==void 0&&(N[z]=B.default);const _=(c=(a=S.spec)==null?void 0:a.toDOM)==null?void 0:c.call(a,S.create({id:n.id,...N})),O=Array.from(_.dom.attributes),M=t.blockImplementations[n.type].implementation,R=((u=M.toExternalHTML)==null?void 0:u.call({},{...n,props:N},t))||M.render.call({},{...n,props:N},t),L=C.createDocumentFragment();if(R.dom.classList.contains("bn-block-content")){const z=[...O,...Array.from(R.dom.attributes)].filter(B=>B.name.startsWith("data")&&B.name!=="data-content-type"&&B.name!=="data-file-block"&&B.name!=="data-node-view-wrapper"&&B.name!=="data-node-type"&&B.name!=="data-id"&&B.name!=="data-editable");for(const B of z)R.dom.firstChild.setAttribute(B.name,B.value);uP(R.dom.firstChild),L.append(...Array.from(R.dom.childNodes))}else L.append(R.dom);if(R.contentDOM&&n.content){const z=dP(t,n.content,r,s);R.contentDOM.appendChild(z)}let F;if(i.has(n.type)?F="OL":o.has(n.type)&&(F="UL"),F){if(((f=e.lastChild)==null?void 0:f.nodeName)!==F){const z=C.createElement(F);F==="OL"&&"start"in N&&N.start&&N?.start!==1&&z.setAttribute("start",N.start+""),e.append(z)}e.lastChild.appendChild(L)}else e.append(L);if(n.children&&n.children.length>0){const z=C.createDocumentFragment();if(fP(z,t,n.children,r,i,o,s),((h=e.lastChild)==null?void 0:h.nodeName)==="UL"||((m=e.lastChild)==null?void 0:m.nodeName)==="OL")for(;((g=z.firstChild)==null?void 0:g.nodeName)==="UL"||((y=z.firstChild)==null?void 0:y.nodeName)==="OL";)e.lastChild.lastChild.appendChild(z.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(z):(E=R.contentDOM)==null||E.append(z)}}const fP=(e,t,n,r,i,o,s)=>{for(const a of n)jpe(e,t,a,r,i,o,s)},zpe=(e,t,n,r,i,o)=>{const s=(o?.document??document).createDocumentFragment();return fP(s,e,t,n,r,i,o),s},Lb=(e,t)=>{const n=yi.fromSchema(e);return{exportBlocks:(r,i)=>{const o=zpe(t,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem","toggleListItem"]),i),s=document.createElement("div");return s.append(o),s.innerHTML},exportInlineContent:(r,i)=>{const o=dP(t,r,n,i),s=document.createElement("div");return s.append(o.cloneNode(!0)),s.innerHTML}}};function $pe(e,t,n,r,i){let o;if(t)if(typeof t=="string")o=bo([t],e.pmSchema,r);else if(Array.isArray(t))o=bo(t,e.pmSchema,r);else if(t.type==="tableContent")o=ob(t,e.pmSchema);else throw new ts(t.type);else throw new Error("blockContent is required");const s=(i?.document??document).createDocumentFragment();for(const a of o)if(a.type.name!=="text"&&e.schema.inlineContentSchema[a.type.name]){const c=e.schema.inlineContentSpecs[a.type.name].implementation;if(c){const u=oT(a,e.schema.inlineContentSchema,e.schema.styleSchema),f=c.render.call({renderType:"dom",props:void 0},u,()=>{},e);if(f){if(s.appendChild(f.dom),f.contentDOM){const h=n.serializeFragment(a.content,i);f.contentDOM.dataset.editable="",f.contentDOM.appendChild(h)}continue}}}else if(a.type.name==="text"){let c=document.createTextNode(a.textContent);for(const u of a.marks.toReversed())if(u.type.name in e.schema.styleSpecs){const f=e.schema.styleSpecs[u.type.name].implementation.render(u.attrs.stringValue,e);f.contentDOM.appendChild(c),c=f.dom}else{const f=u.type.spec.toDOM(u,!0),h=yi.renderSpec(document,f);h.contentDOM.appendChild(c),c=h.dom}s.appendChild(c)}else{const c=n.serializeFragment(Ce.from([a]),i);s.appendChild(c)}return s}function Vpe(e,t,n,r){var i,o,s,a,c;const u=e.pmSchema.nodes.blockContainer,f=t.props||{};for(const[y,E]of Object.entries(e.schema.blockSchema[t.type].propSchema))!(y in f)&&E.default!==void 0&&(f[y]=E.default);const h=t.children||[],m=e.blockImplementations[t.type].implementation.render.call({renderType:"dom",props:void 0},{...t,props:f,children:h},e);if(m.contentDOM&&t.content){const y=$pe(e,t.content,n,t.type,r);m.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){const y=hP(e,t.children,n,r);(i=m.contentDOM)==null||i.append(y)}return m.dom}const g=(s=(o=u.spec)==null?void 0:o.toDOM)==null?void 0:s.call(o,u.create({id:t.id,...f}));return(a=g.contentDOM)==null||a.appendChild(m.dom),t.children&&t.children.length>0&&((c=g.contentDOM)==null||c.appendChild(pP(e,t.children,n,r))),g.dom}function hP(e,t,n,r){const i=(r?.document??document).createDocumentFragment();for(const o of t){const s=Vpe(e,o,n,r);i.appendChild(s)}return i}const pP=(e,t,n,r)=>{var i;const o=e.pmSchema.nodes.blockGroup,s=o.spec.toDOM(o.create({})),a=hP(e,t,n,r);return(i=s.contentDOM)==null||i.appendChild(a),s.dom},qpe=(e,t)=>{const n=yi.fromSchema(e);return{serializeBlocks:(r,i)=>pP(t,r,n,i).outerHTML}};function Ype(e,t){if(t===0)return;const n=e.resolve(t);for(let r=n.depth;r>0;r--){const i=n.node(r);if(aT(i))return i.attrs.id}}function Gpe(e){return e.getMeta("paste")?{type:"paste"}:e.getMeta("uiEvent")==="drop"?{type:"drop"}:e.getMeta("history$")?{type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")?e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function QO(e){const t="__root__",n={},r={},i=$n(e);return e.descendants((o,s)=>{if(!aT(o))return!0;const a=Ype(e,s),c=a??t;r[c]||(r[c]=[]);const u=gn(o,i);return n[o.attrs.id]={block:u,parentId:a},r[c].push(o.attrs.id),!0}),{byId:n,childrenByParent:r}}function Wpe(e,t){const n=new Set;if(!e||!t)return n;const r=new Set(e),i=t.filter(E=>r.has(E)),o=e.filter(E=>i.includes(E));if(o.length<=1||i.length<=1)return n;const s={};for(let E=0;E<o.length;E++)s[o[E]]=E;const a=i.map(E=>s[E]),c=a.length,u=[],f=[],h=new Array(c).fill(-1),m=(E,C)=>{let S=0,N=E.length;for(;S<N;){const _=S+N>>>1;E[_]<C?S=_+1:N=_}return S};for(let E=0;E<c;E++){const C=a[E],S=m(u,C);S>0&&(h[E]=f[S-1]),S===u.length?(u.push(C),f.push(E)):(u[S]=C,f[S]=E)}const g=new Set;let y=f[f.length-1]??-1;for(;y!==-1;)g.add(y),y=h[y];for(let E=0;E<i.length;E++)g.has(E)||n.add(i[E]);return n}function mP(e,t=[]){const n=Gpe(e),r=J1(e.before,[e,...t]),i=QO(r.before),o=QO(r.doc),s=[],a=new Set;Object.keys(o.byId).filter(g=>!(g in i.byId)).forEach(g=>{s.push({type:"insert",block:o.byId[g].block,source:n,prevBlock:void 0}),a.add(g)}),Object.keys(i.byId).filter(g=>!(g in o.byId)).forEach(g=>{s.push({type:"delete",block:i.byId[g].block,source:n,prevBlock:void 0}),a.add(g)}),Object.keys(o.byId).filter(g=>g in i.byId).forEach(g=>{var y,E;const C=i.byId[g],S=o.byId[g];C.parentId!==S.parentId?(s.push({type:"move",block:S.block,prevBlock:C.block,source:n,prevParent:C.parentId?(y=i.byId[C.parentId])==null?void 0:y.block:void 0,currentParent:S.parentId?(E=o.byId[S.parentId])==null?void 0:E.block:void 0}),a.add(g)):eJ({...C.block,children:void 0},{...S.block,children:void 0})||(s.push({type:"update",block:S.block,prevBlock:C.block,source:n}),a.add(g))});const c=i.childrenByParent,u=o.childrenByParent,f="__root__",h=new Set([...Object.keys(c),...Object.keys(u)]),m=new Set;return h.forEach(g=>{const y=Wpe(c[g],u[g]);y.size!==0&&y.forEach(E=>{var C,S;const N=i.byId[E],_=o.byId[E];!N||!_||N.parentId!==_.parentId||a.has(E)||(N.parentId??f)!==g||m.has(E)||(m.add(E),s.push({type:"move",block:_.block,prevBlock:N.block,source:n,prevParent:N.parentId?(C=i.byId[N.parentId])==null?void 0:C.block:void 0,currentParent:_.parentId?(S=o.byId[_.parentId])==null?void 0:S.block:void 0}),a.add(E))})}),s}const Sx=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function Kpe(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function Qpe(e,t){const n=e.split("/"),r=t.split("/");if(n.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function XO(e,t,n,r="after"){let i;return Array.isArray(t.content)&&t.content.length===0?i=e.updateBlock(t,n).id:i=e.insertBlocks([n],t,r)[0].id,i}async function gP(e,t){var n;if(!t.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(r===null)return;let i=null;for(const s of Sx)if(r.types.includes(s)){i=s;break}if(i!=="Files")return;const o=r.items;if(o){e.preventDefault();for(let s=0;s<o.length;s++){let a="file";for(const u of Object.values(t.schema.blockSpecs))for(const f of((n=u.implementation.meta)==null?void 0:n.fileBlockAccept)||[]){const h=f.startsWith("."),m=o[s].getAsFile();if(m&&(!h&&m.type&&Qpe(o[s].type,f)||h&&Kpe("."+m.name.split(".").pop(),f))){a=u.config.type;break}}const c=o[s].getAsFile();if(c){const u={type:a,props:{name:c.name}};let f;if(e.type==="paste"){const g=t.getTextCursorPosition().block;f=XO(t,g,u)}else if(e.type==="drop"){const g={left:e.clientX,top:e.clientY},y=t.prosemirrorView.posAtCoords(g);if(!y)return;f=t.transact(E=>{const C=tl(E.doc,y.pos),S=t.prosemirrorView.dom.querySelector(`[data-id="${C.node.attrs.id}"]`),N=S?.getBoundingClientRect();return XO(t,t.getBlock(C.node.attrs.id),u,N&&(N.top+N.bottom)/2>g.top?"before":"after")})}else return;const h=await t.uploadFile(c,f),m=typeof h=="string"?{props:{url:h}}:{...h};t.updateBlock(f,m)}}}}const Xpe=e=>Ht.create({name:"dropFile",addProseMirrorPlugins(){return[new nt({props:{handleDOMEvents:{drop(t,n){if(!e.isEditable)return;let r=null;for(const i of Sx)if(n.dataTransfer.types.includes(i)){r=i;break}return r===null?!0:r==="Files"?(gP(n,e),!0):!1}}}})]}}),Zpe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,Jpe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,eme=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,tme=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,nme=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,rme=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,ime=/\n{2} {0,3}-{2,48}\n{2}/,ome=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,sme=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,ame=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,lme=/^\s*\|(.+\|)+\s*$/m,cme=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,ume=/^\s*\|(.+\|)+\s*$/m,dme=e=>Zpe.test(e)||Jpe.test(e)||eme.test(e)||tme.test(e)||nme.test(e)||rme.test(e)||ime.test(e)||ome.test(e)||sme.test(e)||ame.test(e)||lme.test(e)||cme.test(e)||ume.test(e);async function fme(e,t){const{schema:n}=t.state;if(!e.clipboardData)return!1;const r=e.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return t.pasteText(r),!0;const i=e.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,s=o?.mode;return s?(t.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function hme({event:e,editor:t,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var i;if(t.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(i=e.clipboardData)==null?void 0:i.getData("text/plain");if(a)return t.pasteText(a),!0}let o;for(const a of Sx)if(e.clipboardData.types.includes(a)){o=a;break}if(!o)return!0;if(o==="vscode-editor-data")return fme(e,t.prosemirrorView),!0;if(o==="Files")return gP(e,t),!0;const s=e.clipboardData.getData(o);if(o==="blocknote/html")return t.pasteHTML(s,!0),!0;if(o==="text/markdown")return t.pasteMarkdown(s),!0;if(n){const a=e.clipboardData.getData("text/plain");if(dme(a))return t.pasteMarkdown(a),!0}return o==="text/html"?(t.pasteHTML(s),!0):r?(t.pasteMarkdown(s),!0):(t.pasteText(s),!0)}const pme=(e,t)=>Ht.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new nt({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!e.isEditable)return t({event:r,editor:e,defaultPasteHandler:({prioritizeMarkdownOverHTML:i=!0,plainTextAsMarkdown:o=!0}={})=>hme({event:r,editor:e,prioritizeMarkdownOverHTML:i,plainTextAsMarkdown:o})})}}}})]}});function mme(){const e=t=>{let n=t.children.length;for(let r=0;r<n;r++){const i=t.children[r];if(i.type==="element"&&(e(i),i.tagName==="u"))if(i.children.length>0){t.children.splice(r,1,...i.children);const o=i.children.length-1;n+=o,r+=o}else t.children.splice(r,1),n--,r--}};return e}function gme(){const e=t=>{var n;if(t.children&&"length"in t.children&&t.children.length)for(let r=t.children.length-1;r>=0;r--){const i=t.children[r],o=r+1<t.children.length?t.children[r+1]:void 0;i.type==="element"&&i.tagName==="input"&&((n=i.properties)==null?void 0:n.type)==="checkbox"&&o?.type==="element"&&o.tagName==="p"?(o.tagName="span",o.children.splice(0,0,Nde(document.createTextNode(" ")))):e(i)}};return e}function bme(){return e=>{Ec(e,"element",(t,n,r)=>{var i,o,s,a;if(r&&t.tagName==="video"){const c=((i=t.properties)==null?void 0:i.src)||((o=t.properties)==null?void 0:o["data-url"])||"",u=((s=t.properties)==null?void 0:s.title)||((a=t.properties)==null?void 0:a["data-name"])||"";r.children[n]={type:"text",value:`![${u}](${c})`}}})}}function Tx(e){return zB().use(Woe,{fragment:!0}).use(bme).use(mme).use(gme).use(Tae).use(jB).use(Ede,{handlers:{text:t=>t.value}}).processSync(e).value}function yme(e,t,n,r){const i=Lb(t,n).exportBlocks(e,r);return Tx(i)}function bP(e){const t=[];return e.descendants(n=>{var r,i;const o=$n(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((i=n.firstChild)==null||i.forEach(s=>{t.push(gn(s,o))}),!1):n.type.isInGroup("bnBlock")?(t.push(gn(n,o)),!1):!0}),t}function Eme(e,t,n){var r;let i=!1;const o=e.state.selection instanceof $t;if(!o){const c=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,u=[];for(let f=0;f<c.childCount;f++)u.push(c.child(f));i=u.find(f=>f.type.isInGroup("bnBlock")||f.type.name==="blockGroup"||f.type.spec.group==="blockContent")===void 0,i&&(t=c)}let s;const a=Lb(e.state.schema,n);if(o){((r=t.firstChild)==null?void 0:r.type.name)==="table"&&(t=t.firstChild.content);const c=e5(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(c,{})}</table>`}else if(i){const c=ib(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(c,{})}else{const c=bP(t);s=a.exportBlocks(c,{})}return s}function yP(e,t){"node"in e.state.selection&&e.state.selection.node.type.spec.group==="blockContent"&&t.transact(s=>s.setSelection(new qe(s.doc.resolve(e.state.selection.from-1))));const n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,i=Eme(e,r,t),o=Tx(i);return{clipboardHTML:n,externalHTML:i,markdown:o}}const ZO=()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!0;let t=e.focusNode;for(;t;){if(t instanceof HTMLElement&&t.getAttribute("contenteditable")==="false")return!0;t=t.parentElement}return!1},JO=(e,t,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:i,markdown:o}=yP(t,e);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",i),n.clipboardData.setData("text/plain",o)},vme=e=>Ht.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new nt({props:{handleDOMEvents:{copy(t,n){return ZO()||JO(e,t,n),!0},cut(t,n){return ZO()||(JO(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart(t,n){if(!("node"in t.state.selection)||t.state.selection.node.type.spec.group!=="blockContent")return;e.transact(s=>s.setSelection(new qe(s.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:i,markdown:o}=yP(t,e);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",i),n.dataTransfer.setData("text/plain",o),!0}}}})]}}),Cme=Ht.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{backgroundColor:VX()}}]}});let wme=class extends Un{constructor(){super(),fe(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new nt({key:new pt("blockChange"),filterTransaction:t=>{let n;return this.beforeChangeCallbacks.reduce((r,i)=>r===!1?r:i({getChanges(){return n||(n=mP(t),n)},tr:t})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(t){return this.beforeChangeCallbacks.push(t),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==t)}}};const Zg=class EP extends Un{constructor(t){super(),fe(this,"provider"),fe(this,"recentlyUpdatedCursors"),fe(this,"renderCursor",(n,r)=>{let i=this.recentlyUpdatedCursors.get(r);if(!i){const o=(this.collaboration.renderCursor??EP.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(o.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),o.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),i={element:o,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,i)}return i.element}),fe(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=t,this.provider=t.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",t.user),t.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const i=this.recentlyUpdatedCursors.get(r);i&&(i.element.setAttribute("data-active",""),i.hideTimeout&&clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(hfe(this.provider.awareness,{selectionBuilder:ZB,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(t){const n=t.charAt(0)==="#"?t.substring(1,7):t,r=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),o=parseInt(n.substring(4,6),16),s=[r/255,i/255,o/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};fe(Zg,"defaultCursorRender",e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${e.color}; color: ${Zg.isDarkColor(e.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${e.color}; color: ${Zg.isDarkColor(e.color)?"white":"black"}`),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode(""),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode(""),null),t});let xx=Zg,b1=class extends Un{static key(){return"ySyncPlugin"}constructor(t){super(),this.addProsemirrorPlugin(Xde(t))}get priority(){return 1001}};class y1 extends Un{static key(){return"yUndoPlugin"}constructor({editor:t}){super(),this.addProsemirrorPlugin(vfe({trackedOrigins:[t]}))}get priority(){return 1e3}}let vP=class extends Un{constructor({editor:t,collaboration:n}){super(t),fe(this,"editor"),fe(this,"collaboration"),fe(this,"forkedState"),this.editor=t,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(t,n){const r=t.doc;if(t._item===null){const i=Array.from(r.share.keys()).find(o=>r.share.get(o)===t);if(i==null)throw new Error("type does not exist in other ydoc");return n.get(i,t.constructor)}else{const i=t._item,o=n.store.clients.get(i.id.client)??[],s=Xi(o,i.id.clock);return o[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){var t;if(this.isForkedFromRemote)return;const n=(t=this.collaboration)==null?void 0:t.fragment;if(!n)throw new Error("No fragment to fork from");const r=new So;x0(r,Hh(n.doc));const i=this.findTypeInOtherYdoc(n,r);this.forkedState={undoStack:Yi.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:n,forkedFragment:i},this.editor._tiptapEditor.unregisterPlugin([qf,Yi,Ft]),this.editor._tiptapEditor.registerPlugin(new b1(i).plugins[0]),this.editor._tiptapEditor.registerPlugin(new y1({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:t}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Ft),this.editor._tiptapEditor.unregisterPlugin(Yi);const{originalFragment:n,forkedFragment:r,undoStack:i}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new b1(n),this.editor.extensions.yCursorPlugin=new xx(this.collaboration),this.editor.extensions.yUndoPlugin=new y1({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),Yi.getState(this.editor.prosemirrorState).undoManager.undoStack=i,t){const o=Hh(r.doc,t8(n.doc));x0(n.doc,o,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}};const CP=(e,t)=>{t(e),e.forEach(n=>{n instanceof lr&&CP(n,t)})},Sme=(e,t)=>{const n={};e.forEach(r=>{r instanceof lr&&CP(r,i=>{if(i.nodeName==="blockContainer"&&i.hasAttribute("id")){const o={textColor:i.getAttribute("textColor"),backgroundColor:i.getAttribute("backgroundColor")};o.textColor===Ot.textColor.default&&(o.textColor=void 0),o.backgroundColor===Ot.backgroundColor.default&&(o.backgroundColor=void 0),(o.textColor||o.backgroundColor)&&(n[i.getAttribute("id")]=o)}})}),t.doc.descendants((r,i)=>{r.type.name==="blockContainer"&&n[r.attrs.id]&&(t=t.setNodeMarkup(i+1,void 0,n[r.attrs.id]))})},Tme=[Sme];class kx extends Un{constructor(t){const n=new pt(kx.key());super(),fe(this,"migrationDone",!1),this.addProsemirrorPlugin(new nt({key:n,appendTransaction:(r,i,o)=>{if(this.migrationDone||r.length!==1||!r[0].getMeta(Ft))return;const s=o.tr;for(const a of Tme)a(t,s);return this.migrationDone=!0,s}}))}static key(){return"schemaMigrationPlugin"}}const E1=Ti.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:e=>!!e.getAttribute("data-orphan"),renderHTML:e=>e.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:e=>e.getAttribute("data-bn-thread-id"),renderHTML:e=>({"data-bn-thread-id":e.threadId}),default:""}}},renderHTML({HTMLAttributes:e}){return["span",Ei(e,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(e){return e.name==="comment"?{blocknoteIgnore:!0}:{}}});let xme=class extends cb{constructor(t){super(),fe(this,"userCache",new Map),fe(this,"loadingUsers",new Set),this.resolveUsers=t}async loadUsers(t){const n=t.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const i of r)this.userCache.set(i.id,i);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(t){return this.userCache.get(t)}subscribe(t){return this.on("update",t)}};const Sg=new pt("blocknote-comments"),kme="SET_SELECTED_THREAD_ID";function _me(e,t){const n=new Map;return e.descendants((r,i)=>{r.marks.forEach(o=>{if(o.type.name===t){const s=o.attrs.threadId;if(!s)return;const a=i,c=a+r.nodeSize,u=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,u.from),to:Math.max(c,u.to)})}})}),n}let wP=class extends Un{constructor(t,n,r,i,o){if(super(),fe(this,"userStore"),fe(this,"pendingComment",!1),fe(this,"selectedThreadId"),fe(this,"threadPositions",new Map),fe(this,"updateMarksFromThreads",a=>{this.editor.transact(c=>{c.doc.descendants((u,f)=>{u.marks.forEach(h=>{if(h.type.name===this.markType){const m=h.type,g=h.attrs.threadId,y=a.get(g),E=!!(!y||y.resolved||y.deletedAt);if(E!==h.attrs.orphan){const C=Math.max(f,0),S=Math.min(f+u.nodeSize,c.doc.content.size-1,c.doc.content.size-1);c.removeMark(C,S,h),c.addMark(C,S,m.create({...h.attrs,orphan:E})),E&&this.selectedThreadId===g&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=t,this.threadStore=n,this.markType=r,this.resolveUsers=i,this.commentEditorSchema=o,!i)throw new Error("resolveUsers is required for comments");this.userStore=new xme(i),this.threadStore.subscribe(this.updateMarksFromThreads),t.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),t.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const s=this;this.addProsemirrorPlugin(new nt({key:Sg,state:{init(){return{decorations:ct.empty}},apply(a,c){const u=a.getMeta(Sg);if(!a.docChanged&&!u)return c;const f=a.docChanged?_me(a.doc,s.markType):s.threadPositions;(f.size>0||s.threadPositions.size>0)&&(s.threadPositions=f,s.emitStateUpdate());const h=[];if(s.selectedThreadId){const m=f.get(s.selectedThreadId);m&&h.push(It.inline(m.from,m.to,{class:"bn-thread-mark-selected"}))}return{decorations:ct.create(a.doc,h)}}},props:{decorations(a){var c;return((c=Sg.getState(a))==null?void 0:c.decorations)??ct.empty},handleClick:(a,c,u)=>{if(u.button!==0)return;const f=a.state.doc.nodeAt(c);if(!f){s.selectThread(void 0);return}const h=f.marks.find(g=>g.type.name===r&&g.attrs.orphan!==!0),m=h?.attrs.threadId;s.selectThread(m,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(t){return this.on("update",t)}selectThread(t,n=!0){var r,i;if(this.selectedThreadId!==t&&(this.selectedThreadId=t,this.emitStateUpdate(),this.editor.transact(o=>o.setMeta(Sg,{name:kme})),t&&n)){const o=this.threadPositions.get(t);if(!o)return;(i=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(o.from).node)==null||i.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(t){const n=await this.threadStore.createThread(t);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,i=r.state.selection,o=Ft.getState(r.state),s={prosemirror:{head:i.head,anchor:i.anchor},yjs:o?m1(o.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}},Ame=class{constructor(t,n,r,i){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"mouseDownHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),fe(this,"dragstartHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),fe(this,"scrollHandler",()=>{var o;if((o=this.state)!=null&&o.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),fe(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");i(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,i;const o=this.pluginKey.getState(t.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&o!=null&&o.block&&this.editor.isEditable){const u=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${o.block.id}"]`);if(!u)return;this.state={show:!0,referencePos:u.getBoundingClientRect(),block:o.block},this.emitUpdate();return}const a=o?.block&&!(s!=null&&s.block),c=!(o!=null&&o.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),c&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}};const qC=new pt("FilePanelPlugin");let Nme=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new nt({key:qC,view:n=>(this.view=new Ame(t,qC,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var i;return r.key==="Escape"&&this.shown?((i=this.view)==null||i.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(qC)||(!n.getMeta(Ft)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}},Mme=class{constructor(t,n,r){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"preventHide",!1),fe(this,"preventShow",!1),fe(this,"shouldShow",({view:i,state:o,from:s,to:a})=>{const{doc:c,selection:u}=o,{empty:f}=u,h=!c.textBetween(s,a).length&&VS(o.selection);if(u.$from.parent.type.spec.code||w0(u)&&u.node.type.spec.code||f||h)return!1;const m=document.activeElement;return!(!this.isElementWithinEditorWrapper(m)&&i.editable)}),fe(this,"blurHandler",i=>{var o;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;i&&i.relatedTarget&&(s===i.relatedTarget||s.contains(i.relatedTarget)||i.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),fe(this,"isElementWithinEditorWrapper",i=>{if(!i)return!1;const o=this.pmView.dom.parentElement;return o?o.contains(i):!1}),fe(this,"viewMousedownHandler",i=>{(!this.isElementWithinEditorWrapper(i.target)||i.button===0)&&(this.preventShow=!0)}),fe(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),fe(this,"dragHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),fe(this,"scrollHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),fe(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,i,o;const{state:s,composing:a}=t,{doc:c,selection:u}=s,f=n&&n.doc.eq(c)&&n.selection.eq(u);if(a||f)return;const{ranges:h}=u,m=Math.min(...h.map(C=>C.$from.pos)),g=Math.max(...h.map(C=>C.$to.pos)),y=this.shouldShow({view:t,state:s,from:m,to:g}),E=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(y||this.preventHide)&&!E){const C=this.getSelectionBoundingBox();if(C.height===0&&C.width===0){queueMicrotask(()=>{const N={show:!0,referencePos:this.getSelectionBoundingBox()};this.state=N,this.emitUpdate(),t.dispatch(t.state.tr.setSelection(Ue.create(t.state.doc,t.state.selection.from+1,t.state.selection.to))),t.dispatch(t.state.tr.setSelection(Ue.create(t.state.doc,t.state.selection.from-1,t.state.selection.to)))});return}const S={show:!0,referencePos:this.getSelectionBoundingBox()};(S.show!==((r=this.state)==null?void 0:r.show)||S.referencePos.toJSON()!==((i=this.state)==null?void 0:i.referencePos.toJSON()))&&(this.state=S,this.emitUpdate());return}if((o=this.state)!=null&&o.show&&!this.preventHide&&(!y||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:t}=this.pmView,{selection:n}=t,{ranges:r}=n,i=Math.min(...r.map(s=>s.$from.pos)),o=Math.max(...r.map(s=>s.$to.pos));if(w0(n)){const s=this.pmView.nodeDOM(i);if(s)return s.getBoundingClientRect()}return S0(this.pmView,i,o)}};const Rme=new pt("FormattingToolbarPlugin");let Ome=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new nt({key:Rme,view:n=>(this.view=new Mme(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}};const Dme=Zi.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ei(this.options.HTMLAttributes,e)]},renderText(){return`
`}}),e6=(e,t)=>{const n=e.resolve(t);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return up(e.resolve(r))},Jg=(e,t)=>{const n=e.resolve(t),r=n.index();if(r===0)return;const i=n.posAtIndex(r-1);return up(e.resolve(i))},SP=(e,t)=>{for(;t.childContainer;){const n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=up(e.resolve(r))}return t},Lme=(e,t)=>e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*"&&e.blockContent.node.childCount>0&&t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*",Ime=(e,t,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const i=e.doc.resolve(r.childContainer.beforePos+1),o=e.doc.resolve(r.childContainer.afterPos-1),s=i.blockRange(o);if(t){const a=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(s,a.depth)}}if(t){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},t6=e=>({state:t,dispatch:n})=>{const r=t.doc.resolve(e),i=up(r),o=Jg(t.doc,i.bnBlock.beforePos);if(!o)return!1;const s=SP(t.doc,o);return Lme(s,i)?Ime(t,n,s,i):!1};function Bme(e,t,n){const{$from:r,$to:i}=e.selection,o=r.blockRange(i,g=>g.childCount>0&&(g.type.name==="blockGroup"||g.type.name==="column"));if(!o)return!1;const s=o.startIndex;if(s===0)return!1;const a=o.parent.child(s-1);if(a.type!==t)return!1;const c=a.lastChild&&a.lastChild.type===n,u=Ce.from(c?t.create():null),f=new De(Ce.from(t.create(null,Ce.from(n.create(null,u)))),c?3:1,0),h=o.start,m=o.end;return e.step(new Nn(h-(c?3:1),m,h,m,f,1,!0)).scrollIntoView(),!0}function TP(e){return e.transact(t=>Bme(t,e.pmSchema.nodes.blockContainer,e.pmSchema.nodes.blockGroup))}function Pme(e){e._tiptapEditor.commands.liftListItem("blockContainer")}function Hme(e){return e.transact(t=>{const{bnBlock:n}=dp(t);return t.doc.resolve(n.beforePos).nodeBefore!==null})}function Ume(e){return e.transact(t=>{const{bnBlock:n}=dp(t);return t.doc.resolve(n.beforePos).depth>1})}const Fme=Ht.create({priority:50,addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({chain:r,commands:i})=>[()=>i.deleteSelection(),()=>i.undoInputRule(),()=>i.command(({state:o})=>{const s=Fr(o);if(!s.isBlockContainer)return!1;const a=o.selection.from===s.blockContent.beforePos+1,c=s.blockContent.node.type.name==="paragraph";return a&&!c?i.command(UX(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>i.command(({state:o})=>{const s=Fr(o);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return o.selection.from===a.beforePos+1?i.liftListItem("blockContainer"):!1}),()=>i.command(({state:o})=>{const s=Fr(o);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:c}=s,u=o.selection.from===c.beforePos+1,f=o.selection.empty,h=a.beforePos;return u&&f?r().command(t6(h)).scrollIntoView().run():!1}),()=>i.command(({state:o,dispatch:s})=>{const a=Fr(o);if(!a.isBlockContainer||o.selection.from!==a.blockContent.beforePos+1||Jg(o.doc,a.bnBlock.beforePos))return!1;const c=e6(o.doc,a.bnBlock.beforePos);if(c?.blockNoteType!=="column")return!1;const u=c,f=e6(o.doc,u.bnBlock.beforePos);if(f?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const h=u.childContainer.node.childCount===1,m=h&&f.childContainer.node.childCount===2,g=f.childContainer.node.firstChild===u.bnBlock.node;if(s){const y=o.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(m)if(g){o.tr.step(new Nn(f.bnBlock.beforePos,f.bnBlock.afterPos,u.bnBlock.afterPos+1,f.bnBlock.afterPos-2,y,y.size,!1));const E=o.tr.doc.resolve(u.bnBlock.beforePos);o.tr.setSelection(Ue.between(E,E))}else{o.tr.step(new Nn(f.bnBlock.beforePos,f.bnBlock.afterPos,f.bnBlock.beforePos+2,u.bnBlock.beforePos-1,y,0,!1));const E=o.tr.doc.resolve(o.tr.mapping.map(u.bnBlock.beforePos-1));o.tr.setSelection(Ue.between(E,E))}else if(h)if(g){o.tr.delete(u.bnBlock.beforePos,u.bnBlock.afterPos),o.tr.insert(f.bnBlock.beforePos,y.content);const E=o.tr.doc.resolve(f.bnBlock.beforePos);o.tr.setSelection(Ue.between(E,E))}else o.tr.delete(u.bnBlock.beforePos-1,u.bnBlock.beforePos+1);else{o.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),g?o.tr.insert(f.bnBlock.beforePos-1,y.content):o.tr.insert(u.bnBlock.beforePos-1,y.content);const E=o.tr.doc.resolve(u.bnBlock.beforePos-1);o.tr.setSelection(Ue.between(E,E))}}return!0}),()=>i.command(({state:o})=>{const s=Fr(o);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=Jg(o.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let c=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const u=s.bnBlock.beforePos-1-1-1-1-1;c=c.setTextSelection(u)}else if(a.blockContent.node.type.spec.content===""){const u=a.blockContent.afterPos-a.blockContent.node.nodeSize;c=c.setNodeSelection(u)}else{const u=a.blockContent.afterPos-a.blockContent.node.nodeSize;c=c.setTextSelection(u)}return c.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>i.command(({state:o})=>{const s=Fr(o);if(!s.isBlockContainer)throw new Error("todo");const a=o.selection.from===s.blockContent.beforePos+1,c=o.selection.empty,u=Jg(o.doc,s.bnBlock.beforePos);if(u&&a&&c){const f=SP(o.doc,u);if(!f.isBlockContainer)throw new Error("todo");if(f.blockContent.node.type.spec.content===""||f.blockContent.node.type.spec.content==="inline*"&&f.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},f.bnBlock.afterPos).deleteRange({from:f.bnBlock.beforePos,to:f.bnBlock.afterPos}).run()}return!1})]),t=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:i})=>{const o=Fr(i);if(!o.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:c}=o,{depth:u}=i.doc.resolve(s.beforePos),f=s.afterPos===i.doc.nodeSize-3,h=i.selection.from===a.afterPos-1,m=i.selection.empty;if(!f&&h&&m&&c===void 0){let g=u,y=s.afterPos+1,E=i.doc.resolve(y).depth;for(;E<g;)g=E,y+=2,E=i.doc.resolve(y).depth;return r.command(t6(y-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:i,tr:o})=>[()=>i.command(({state:s})=>{const a=Fr(s);if(!a.isBlockContainer)return!1;const{bnBlock:c,blockContent:u}=a,{depth:f}=s.doc.resolve(c.beforePos),h=s.selection.$anchor.parentOffset===0,m=s.selection.anchor===s.selection.head,g=u.node.childCount===0,y=f>1;return h&&m&&g&&y?i.liftListItem("blockContainer"):!1}),()=>i.command(({state:s})=>{var a;const c=Fr(s),u=((a=this.options.editor.schema.blockSchema[c.blockNoteType].meta)==null?void 0:a.hardBreakShortcut)??"shift+enter";if(u==="none")return!1;if(u==="shift+enter"&&r||u==="enter"){const f=o.storedMarks||o.selection.$head.marks().filter(h=>this.editor.extensionManager.splittableMarks.includes(h.type.name));return o.insert(o.selection.head,o.doc.type.schema.nodes.hardBreak.create()).ensureMarks(f),!0}return!1}),()=>i.command(({state:s,dispatch:a})=>{const c=Fr(s);if(!c.isBlockContainer)return!1;const{bnBlock:u,blockContent:f}=c,h=s.selection.$anchor.parentOffset===0,m=s.selection.anchor===s.selection.head,g=f.node.childCount===0;if(h&&m&&g){const y=u.afterPos,E=y+2;if(a){const C=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(y,C).scrollIntoView(),s.tr.setSelection(new Ue(s.doc.resolve(E)))}return!0}return!1}),()=>i.command(({state:s,chain:a})=>{const c=Fr(s);if(!c.isBlockContainer)return!1;const{blockContent:u}=c,f=s.selection.$anchor.parentOffset===0;return u.node.childCount===0?!1:(a().deleteSelection().command(yZ(s.selection.from,f,f)).run(),!0)})]);return{Backspace:e,Delete:t,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,i,o;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(i=this.options.editor.linkToolbar)!=null&&i.shown||(o=this.options.editor.filePanel)!=null&&o.shown)?!1:TP(this.options.editor)},"Shift-Tab":()=>{var r,i,o;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(i=this.options.editor.linkToolbar)!=null&&i.shown||(o=this.options.editor.filePanel)!=null&&o.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});let jme=class{constructor(t,n,r){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"menuUpdateTimer"),fe(this,"startMenuUpdateTimer"),fe(this,"stopMenuUpdateTimer"),fe(this,"mouseHoveredLinkMark"),fe(this,"mouseHoveredLinkMarkRange"),fe(this,"keyboardHoveredLinkMark"),fe(this,"keyboardHoveredLinkMarkRange"),fe(this,"linkMark"),fe(this,"linkMarkRange"),fe(this,"mouseOverHandler",i=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),i.target instanceof HTMLAnchorElement&&i.target.nodeName==="A"){const o=i.target,s=this.pmView.posAtDOM(o,0)+1,a=this.pmView.state.doc.resolve(s),c=a.marks();for(const u of c)if(u.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=u,this.mouseHoveredLinkMarkRange=kh(a,u.type,u.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),fe(this,"clickHandler",i=>{var o;const s=this.pmView.dom.parentElement;this.linkMark&&i&&i.target&&!(s===i.target||s.contains(i.target))&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),fe(this,"scrollHandler",()=>{var i;this.linkMark!==void 0&&(i=this.state)!=null&&i.show&&(this.state.referencePos=S0(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),fe(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(t,n){var r;this.editor.transact(i=>{const o=$n(i);i.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),i.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,o.mark("link",{href:t}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var t;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate())}update(t,n,r=!1){var i;const{state:o}=t;if(n&&n.selection.from===o.selection.from&&n.selection.to===o.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const c of a)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=c,this.keyboardHoveredLinkMarkRange=kh(this.pmView.state.selection.$from,c.type,c.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:S0(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((i=this.state)!=null&&i.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}};const zme=new pt("LinkToolbarPlugin");let $me=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),fe(this,"deleteLink",()=>{this.view.deleteLink()}),fe(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),fe(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),fe(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new nt({key:zme,view:n=>(this.view=new jme(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(t){return this.on("update",t)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}};const xP=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],kP="https",Vme=new pt("node-selection-keyboard");let qme=class extends Un{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new nt({key:Vme,props:{handleKeyDown:(t,n)=>{if("node"in t.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=t.state.tr;return t.dispatch(r.insert(t.state.tr.selection.$to.after(),t.state.schema.nodes.paragraph.createChecked()).setSelection(new Ue(r.doc.resolve(t.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}};const Yme=new pt("blocknote-placeholder");let Gme=class extends Un{static key(){return"placeholder"}constructor(t,n){super(),this.addProsemirrorPlugin(new nt({key:Yme,view:r=>{const i=`placeholder-selector-${QI()}`;r.dom.classList.add(i);const o=document.createElement("style"),s=t._tiptapEditor.options.injectNonce;s&&o.setAttribute("nonce",s),r.root instanceof window.ShadowRoot?r.root.append(o):r.root.head.appendChild(o);const a=o.sheet,c=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:f,...h}=n;for(const[y,E]of Object.entries(h)){const C=`[data-content-type="${y}"]`;a.insertRule(`${c(C)} { content: ${JSON.stringify(E)}; }`)}a.insertRule(`${c("[data-is-only-empty-block]")} { content: ${JSON.stringify(f)}; }`),a.insertRule(`${c("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{r.root instanceof window.ShadowRoot?r.root.removeChild(o):r.root.head.removeChild(o)}}},props:{decorations:r=>{const{doc:i,selection:o}=r;if(!t.isEditable||!o.empty||o.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(It.node(2,4,{"data-is-only-empty-block":"true"}));const a=o.$anchor,c=a.parent;if(c.content.size===0){const u=a.before();s.push(It.node(u,u+c.nodeSize,{"data-is-empty-and-focused":"true"}))}return ct.create(i,s)}}}))}};const n6=new pt("previous-blocks"),Wme={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};let Kme=class extends Un{static key(){return"previousBlockType"}constructor(){super();let t;this.addProsemirrorPlugin(new nt({key:n6,view(n){return{update:async(r,i)=>{var o;((o=this.key)==null?void 0:o.getState(r.state).updatedBlocks.size)>0&&(t=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(n6,{clearUpdate:!0}))},0))},destroy:()=>{t&&clearTimeout(t)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,i,o){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||i.doc.eq(o.doc))return r;const s={},a=yR(i.doc,f=>f.attrs.id),c=new Map(a.map(f=>[f.node.attrs.id,f])),u=yR(o.doc,f=>f.attrs.id);for(const f of u){const h=c.get(f.node.attrs.id),m=h?.node.firstChild,g=f.node.firstChild;if(h&&m&&g){const y={index:g.attrs.index,level:g.attrs.level,type:g.type.name,depth:o.doc.resolve(f.pos).depth},E={index:m.attrs.index,level:m.attrs.level,type:m.type.name,depth:i.doc.resolve(h.pos).depth};s[f.node.attrs.id]=E,r.currentTransactionOldBlockAttrs[f.node.attrs.id]=E,JSON.stringify(E)!==JSON.stringify(y)&&(E["depth-change"]=E.depth-y.depth,r.updatedBlocks.add(f.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const i=[];return n.doc.descendants((o,s)=>{if(!o.attrs.id||!r.updatedBlocks.has(o.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[o.attrs.id],c={};for(const[f,h]of Object.entries(a))c["data-prev-"+Wme[f]]=h||"none";const u=It.node(s,s+o.nodeSize,{...c});i.push(u)}),ct.create(n.doc,i)}}}))}};const r6=new pt("blocknote-show-selection");let Qme=class extends Un{constructor(t){super(),fe(this,"enabled",!1),this.editor=t,this.addProsemirrorPlugin(new nt({key:r6,props:{decorations:n=>{const{doc:r,selection:i}=n;if(!this.enabled)return ct.empty;const o=It.inline(i.from,i.to,{"data-show-selection":"true"});return ct.create(r,[o])}}}))}static key(){return"showSelection"}setEnabled(t){this.enabled!==t&&(this.enabled=t,this.editor.transact(n=>n.setMeta(r6,{})))}getEnabled(){return this.enabled}};function _P(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&((n=e.getAttribute)==null?void 0:n.call(e,"data-node-type"))!=="blockContainer";)e=e.parentElement;if(((r=e.getAttribute)==null?void 0:r.call(e,"data-node-type"))==="blockContainer")return{node:e,id:e.getAttribute("data-id")}}let $2=class e0 extends Ze{constructor(t,n){super(t,n),fe(this,"nodes");const r=t.node();this.nodes=[],t.doc.nodesBetween(t.pos,n.pos,(i,o,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(i),!1})}static create(t,n,r=n){return new e0(t.resolve(n),t.resolve(r))}content(){return new De(Ce.from(this.nodes),0,0)}eq(t){if(!(t instanceof e0)||this.nodes.length!==t.nodes.length||this.from!==t.from||this.to!==t.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(t.nodes[n]))return!1;return!0}map(t,n){const r=n.mapResult(this.from),i=n.mapResult(this.to);return i.deleted?Ze.near(t.resolve(r.pos)):r.deleted?Ze.near(t.resolve(i.pos)):new e0(t.resolve(r.pos),t.resolve(i.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};Ze.jsonID("multiple-node",$2);let io;function Xme(e,t){let n,r;const i=t.resolve(e.from).node().type.spec.group==="blockContent",o=t.resolve(e.to).node().type.spec.group==="blockContent",s=Math.min(e.$anchor.depth,e.$head.depth);if(i&&o){const a=e.$from.start(s-1),c=e.$to.end(s-1);n=t.resolve(a-1).pos,r=t.resolve(c+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}function i6(e,t,n=t){t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);const r=e.domAtPos(t).node.cloneNode(!0),i=e.domAtPos(t).node,o=(f,h)=>Array.prototype.indexOf.call(f.children,h),s=o(i,e.domAtPos(t+1).node.parentElement),a=o(i,e.domAtPos(n-1).node.parentElement);for(let f=i.childElementCount-1;f>=0;f--)(f>a||f<s)&&r.removeChild(r.children[f]);AP(e.root),io=r;const c=io.getElementsByTagName("iframe");for(let f=0;f<c.length;f++){const h=c[f],m=h.parentElement;m&&m.removeChild(h)}const u=e.dom.className.split(" ").filter(f=>f!=="ProseMirror"&&f!=="bn-root"&&f!=="bn-editor").join(" ");io.className=io.className+" bn-drag-preview "+u,e.root instanceof ShadowRoot?e.root.appendChild(io):e.root.body.appendChild(io)}function AP(e){io!==void 0&&(e instanceof ShadowRoot?e.removeChild(io):e.body.removeChild(io),io=void 0)}function Zme(e,t,n){if(!e.dataTransfer||n.headless)return;const r=n.prosemirrorView,i=vi(t.id,r.state.doc);if(!i)throw new Error(`Block with ID ${t.id} not found`);const o=i.posBeforeNode;if(o!=null){const s=r.state.selection,a=r.state.doc,{from:c,to:u}=Xme(s,a),f=c<=o&&o<u,h=s.$anchor.node()!==s.$head.node()||s instanceof $2;f&&h?(r.dispatch(r.state.tr.setSelection($2.create(a,c,u))),i6(r,c,u)):(r.dispatch(r.state.tr.setSelection(qe.create(r.state.doc,o))),i6(r,o));const m=r.state.selection.content(),g=n.pmSchema,y=r.serializeForClipboard(m).dom.innerHTML,E=Lb(g,n),C=bP(m.content),S=E.exportBlocks(C,{}),N=Tx(S);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",y),e.dataTransfer.setData("text/html",S),e.dataTransfer.setData("text/plain",N),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(io,0,0)}}const o6=250;function V2(e,t,n=!0){const r=e.root.elementsFromPoint(t.left,t.top);for(const i of r)if(e.dom.contains(i))return n&&i.closest("[data-node-type=columnList]")?V2(e,{left:t.left+50,top:t.top},!1):_P(i,e)}function Jme(e,t){if(!t.dom.firstChild)return;const n=t.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,e.x),n.right-10),top:e.y},i=V2(t,r);if(!i)return;const o=i.node.getBoundingClientRect();return V2(t,{left:o.right-10,top:e.y},!1)}let ege=class{constructor(t,n,r){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"mousePos"),fe(this,"hoveredBlock"),fe(this,"menuFrozen",!1),fe(this,"isDragOrigin",!1),fe(this,"updateState",i=>{this.state=i,this.emitUpdate(this.state)}),fe(this,"updateStateFromMousePos",()=>{var i,o,s,a,c;if(this.menuFrozen||!this.mousePos)return;const u=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(u?.element!==this.pmView.dom||u.distance>o6){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}const f=Jme(this.mousePos,this.pmView);if(!f||!this.editor.isEditable){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}if(!((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((c=this.hoveredBlock)==null?void 0:c.getAttribute("data-id"))===f.id)&&(this.hoveredBlock=f.node,this.editor.isEditable)){const h=f.node.getBoundingClientRect(),m=f.node.closest("[data-node-type=column]");this.state={show:!0,referencePos:new DOMRect(m?m.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,h.y,h.width,h.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))},this.updateState(this.state)}}),fe(this,"onDragStart",i=>{var o;const s=(o=i.dataTransfer)==null?void 0:o.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const c=co.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new De(c.content,0,0),move:!0}}),fe(this,"findClosestEditorElement",i=>{const o=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(o.length===0)return null;let s=o[0],a=Number.MAX_VALUE;return o.forEach(c=>{const u=c.querySelector(".bn-block-group").getBoundingClientRect(),f=i.clientX<u.left?u.left-i.clientX:i.clientX>u.right?i.clientX-u.right:0,h=i.clientY<u.top?u.top-i.clientY:i.clientY>u.bottom?i.clientY-u.bottom:0,m=Math.sqrt(Math.pow(f,2)+Math.pow(h,2));m<a&&(a=m,s=c)}),{element:s,distance:a}}),fe(this,"onDragOver",i=>{if(i.synthetic)return;const o=this.getDragEventContext(i);if(!o||!o.isDropPoint){this.closeDropCursor();return}o.isDropPoint&&!o.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(i)}),fe(this,"closeDropCursor",()=>{const i=new Event("dragleave",{bubbles:!1});i.synthetic=!0,this.pmView.dom.dispatchEvent(i)}),fe(this,"getDragEventContext",i=>{var o;const s=!((o=i.dataTransfer)!=null&&o.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,c=s||a,u=this.findClosestEditorElement(i);if(!u||u.distance>o6)return;const f=u.element===this.pmView.dom,h=f&&u.distance===0;if(!(!f&&!c))return{isDropPoint:f,isDropWithinEditorBounds:h,isDragOrigin:c}}),fe(this,"onDrop",i=>{if(i.synthetic)return;const o=this.getDragEventContext(i);if(!o){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:c}=o;if(!a&&s&&this.dispatchSyntheticEvent(i),s){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(Ue.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(c){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),fe(this,"onDragEnd",i=>{i.synthetic||(this.pmView.dragging=null)}),fe(this,"onKeyDown",i=>{var o;(o=this.state)!=null&&o.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),fe(this,"onMouseMove",i=>{var o;if(this.menuFrozen)return;this.mousePos={x:i.clientX,y:i.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,c=this.pmView.dom.parentElement;if(a&&i&&i.target&&!(c===i.target||c.contains(i.target))){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),fe(this,"onScroll",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(t){const n=new Event(t.type,t),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=t.clientX,n.clientY=t.clientY,n.clientX=Math.min(Math.max(t.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(t.clientY,r.top),r.top+r.height),n.dataTransfer=t.dataTransfer,n.preventDefault=()=>t.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(t,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var t;(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}};const tge=new pt("SideMenuPlugin");let nge=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),Zme(n,r,this.editor)}),fe(this,"blockDragEnd",()=>{AP(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),fe(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),fe(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=t,this.addProsemirrorPlugin(new nt({key:tge,view:n=>(this.view=new ege(t,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(t){return this.on("update",t)}};const Tg=new Map;function rge(e){if(Tg.has(e))return Tg.get(e);const t=new Wu;return e._tiptapEditor.on("transaction",({transaction:n})=>{t.appendMapping(n.mapping)}),e._tiptapEditor.on("destroy",()=>{Tg.delete(e)}),Tg.set(e,t),t}function ige(e,t,n="left"){const r=Ft.getState(e.prosemirrorState);if(!r){const o=rge(e),s=o.maps.length;return()=>o.slice(s).map(t,n==="left"?-1:1)}const i=Xh(t+(n==="right"?1:-1),r.binding.type,r.binding.mapping);return()=>{const o=Ft.getState(e.prosemirrorState),s=nc(o.doc,o.binding.type,i,o.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:1)}}const oge=eb(e=>e.type.name==="blockContainer");let sge=class{constructor(t,n,r){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"rootEl"),fe(this,"pluginState"),fe(this,"handleScroll",()=>{var o,s;if((o=this.state)!=null&&o.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),fe(this,"closeMenu",()=>{this.editor.transact(o=>o.setMeta(zu,null))}),fe(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(o=>o.selection.from)}).run()});var i;this.editor=t,this.pluginState=void 0,this.emitUpdate=o=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(o,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=r.root,(i=this.rootEl)==null||i.addEventListener("scroll",this.handleScroll,!0)}update(t,n){var r;const i=zu.getState(n),o=zu.getState(t.state),s=i===void 0&&o!==void 0,a=i!==void 0&&o===void 0;if(!s&&!(i!==void 0&&o!==void 0)&&!a)return;if(this.pluginState=a?i:o,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const c=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&c&&(this.state={show:!0,referencePos:c.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var t;(t=this.rootEl)==null||t.removeEventListener("scroll",this.handleScroll,!0)}};const zu=new pt("SuggestionMenuPlugin");let age=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"triggerCharacters",[]),fe(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),fe(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(i=>i!==r)}),fe(this,"closeMenu",()=>this.view.closeMenu()),fe(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new nt({key:zu,view:r=>(this.view=new sge(t,(i,o)=>{this.emit(`update ${i}`,o)},r),this.view),state:{init(){},apply:(r,i,o,s)=>{if(r.selection.$from.parent.type.spec.code)return i;const a=r.getMeta(zu);if(typeof a=="object"&&a!==null){i&&this.closeMenu();const u=ige(t,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>u()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(i===void 0)return i;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||i.triggerCharacter!==void 0&&s.selection.from<i.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(i.queryStartPos())))return;const c={...i};return c.query=s.doc.textBetween(i.queryStartPos(),s.selection.from),c}},props:{handleTextInput(r,i,o,s){if(i===o){const a=r.state.doc;for(const c of n){const u=c.length>1?a.textBetween(i-c.length,i)+s:s;if(c===u)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta(zu,{triggerCharacter:u}).scrollIntoView()),!0}}return!1},decorations(r){const i=this.getState(r);if(i===void 0)return null;if(!i.deleteTriggerCharacter){const o=oge(r.selection);if(o)return ct.create(r.doc,[It.node(o.pos,o.pos+o.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":i.decorationId})])}return ct.create(r.doc,[It.inline(i.queryStartPos()-i.triggerCharacter.length,i.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":i.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(t,n){return this.triggerCharacters.includes(t)||this.addTriggerCharacter(t),this.on(`update ${t}`,n)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}};const lge=Ti.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["ins",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),cge=Ti.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["del",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),uge=Ti.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(e){return e.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return[n?"span":"div",{"data-type":"modification","data-id":String(t.attrs.id),"data-mod-type":t.attrs.type,"data-mod-prev-val":JSON.stringify(t.attrs.previousValue),"data-mod-new-val":JSON.stringify(t.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal,newValue:t.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal}:!1}}]}}});let zr;function s6(e){zr||(zr=document.createElement("div"),zr.innerHTML="_",zr.style.opacity="0",zr.style.height="1px",zr.style.width="1px",e instanceof Document?e.body.appendChild(zr):e.appendChild(zr))}function dge(e){zr&&(e instanceof Document?e.body.removeChild(zr):e.removeChild(zr),zr=void 0)}function xg(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function fge(e){let t=e;for(;t&&t.nodeName!=="TD"&&t.nodeName!=="TH"&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;const n=t.parentNode;if(!n||!(n instanceof Element))return;t=n}return t.nodeName==="TD"||t.nodeName==="TH"?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}function hge(e,t){const n=t.querySelectorAll(e);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}let pge=class{constructor(t,n,r){fe(this,"state"),fe(this,"emitUpdate"),fe(this,"tableId"),fe(this,"tablePos"),fe(this,"tableElement"),fe(this,"menuFrozen",!1),fe(this,"mouseState","up"),fe(this,"prevWasEditable",null),fe(this,"viewMousedownHandler",()=>{this.mouseState="down"}),fe(this,"mouseUpHandler",i=>{this.mouseState="up",this.mouseMoveHandler(i)}),fe(this,"mouseMoveHandler",i=>{var o,s,a,c,u,f,h;if(this.menuFrozen||this.mouseState==="selecting"||!(i.target instanceof Element)||!this.pmView.dom.contains(i.target))return;const m=fge(i.target);if(m?.type==="cell"&&this.mouseState==="down"&&!((o=this.state)!=null&&o.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!m||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!m.tbodyNode)return;const g=m.tbodyNode.getBoundingClientRect(),y=_P(m.domNode,this.pmView);if(!y)return;this.tableElement=y.node;let E;const C=this.editor.transact(_=>vi(y.id,_.doc));if(!C)throw new Error(`Block with ID ${y.id} not found`);const S=gn(C.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(cn(this.editor,"table")&&(this.tablePos=C.posBeforeNode+1,E=S),!E)return;this.tableId=y.id;const N=(c=m.domNode.closest(".tableWrapper"))==null?void 0:c.querySelector(".table-widgets-container");if(m?.type==="wrapper"){const _=i.clientY>=g.bottom-1&&i.clientY<g.bottom+20,O=i.clientX>=g.right-1&&i.clientX<g.right+20,M=i.clientX>g.right||i.clientY>g.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:_,showAddOrRemoveColumnsButton:O,referencePosTable:g,block:E,widgetContainer:N,colIndex:M||(u=this.state)==null?void 0:u.colIndex,rowIndex:M||(f=this.state)==null?void 0:f.rowIndex,referencePosCell:M||(h=this.state)==null?void 0:h.referencePosCell}}else{const _=xg(m.domNode),O=xg(m.domNode.parentElement),M=m.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===y.id&&this.state.rowIndex===O&&this.state.colIndex===_)return;this.state={show:!0,showAddOrRemoveColumnsButton:_===E.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:O===E.content.rows.length-1,referencePosTable:g,block:E,draggingState:void 0,referencePosCell:M,colIndex:_,rowIndex:O,widgetContainer:N}}return this.emitUpdate(),!1}),fe(this,"dragOverHandler",i=>{var o;if(((o=this.state)==null?void 0:o.draggingState)===void 0)return;i.preventDefault(),i.dataTransfer.dropEffect="move",hge(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(i.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(i.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(E=>E.tagName==="TD"||E.tagName==="TH");if(a.length===0)return;const c=a[0];let u=!1;const f=xg(c.parentElement),h=xg(c),m=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,g=(this.state.draggingState.draggedCellOrientation==="row"?f:h)!==m;(this.state.rowIndex!==f||this.state.colIndex!==h)&&(this.state.rowIndex=f,this.state.colIndex=h,this.state.referencePosCell=c.getBoundingClientRect(),u=!0);const y=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==y&&(this.state.draggingState.mousePos=y,u=!0),u&&this.emitUpdate(),g&&this.editor.transact(E=>E.setMeta(Yf,!0))}),fe(this,"dropHandler",i=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");i.preventDefault();const{draggingState:o,colIndex:s,rowIndex:a}=this.state,c=this.state.block.content.columnWidths;if(o.draggedCellOrientation==="row"){if(!s5(this.state.block,o.originalIndex,a))return!1;const u=LX(this.state.block,o.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:u}})}else{if(!a5(this.state.block,o.originalIndex,s))return!1;const u=DX(this.state.block,o.originalIndex,s),[f]=c.splice(o.originalIndex,1);c.splice(s,0,f),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:c,rows:u}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var t;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((t=this.tableElement)!=null&&t.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=sT(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const i=this.tableElement.querySelector("tbody");if(!i)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const o=i.children[this.state.rowIndex].children[this.state.colIndex];o?this.state.referencePosCell=o.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=i.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}};const Yf=new pt("TableHandlesPlugin");let mge=class extends Un{constructor(t){super(),fe(this,"view"),fe(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Yf,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.headless&&(s6(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(zr,0,0),n.dataTransfer.effectAllowed="move")}),fe(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Yf,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.headless&&(s6(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(zr,0,0),n.dataTransfer.effectAllowed="copyMove")}),fe(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(Yf,null)),!this.editor.headless&&dge(this.editor.prosemirrorView.root)}),fe(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),fe(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),fe(this,"getCellsAtRowHandle",(n,r)=>Qw(n,r)),fe(this,"getCellsAtColumnHandle",(n,r)=>Xw(n,r)),fe(this,"setCellSelection",(n,r,i=r)=>{const o=this.view;if(!o)throw new Error("Table handles view not initialized");const s=n.doc.resolve(o.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),c=n.doc.resolve(a.posAtIndex(r.col)),u=n.doc.resolve(s.posAtIndex(i.row)+1),f=n.doc.resolve(u.posAtIndex(i.col)),h=n.tr;return h.setSelection(new $t(c,f)),n.apply(h)}),fe(this,"addRowOrColumn",(n,r)=>{this.editor.exec((i,o)=>{const s=this.setCellSelection(i,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?GG(s,o):WG(s,o):r.side==="left"?zG(s,o):$G(s,o)})}),fe(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((i,o)=>{const s=this.setCellSelection(i,{row:n,col:0});return QG(s,o)}):this.editor.exec((i,o)=>{const s=this.setCellSelection(i,{row:0,col:n});return qG(s,o)})),fe(this,"mergeCells",n=>this.editor.exec((r,i)=>{const o=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return ZG(o,i)})),fe(this,"splitCell",n=>this.editor.exec((r,i)=>{const o=n?this.setCellSelection(r,n):r;return JG(o,i)})),fe(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let i=r.$from,o=r.$to;if(e2(r)){const{ranges:y}=r;y.forEach(E=>{i=E.$from.min(i??E.$from),o=E.$to.max(o??E.$to)})}else if(i=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),o=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),i.pos===0||o.pos===0)return;const s=n.doc.resolve(i.pos-i.parentOffset-1),a=n.doc.resolve(o.pos-o.parentOffset-1),c=n.doc.resolve(s.pos-s.parentOffset-1),u=i.index(s.depth),f=s.index(c.depth),h=o.index(a.depth),m=a.index(c.depth),g=[];for(let y=f;y<=m;y++)for(let E=u;E<=h;E++)g.push({row:y,col:E});return{from:{row:f,col:u},to:{row:m,col:h},cells:g}})),fe(this,"getMergeDirection",n=>this.editor.transact(r=>{const i=e2(r.selection)?r.selection:void 0;if(!i||!n||i.ranges.length<=1)return;const o=this.getCellSelection();if(o)return PX(o.from,o.to,n)?"vertical":"horizontal"})),fe(this,"cropEmptyRowsOrColumns",(n,r)=>IX(n,r)),fe(this,"addRowsOrColumns",(n,r,i)=>BX(n,r,i)),this.editor=t,this.addProsemirrorPlugin(new nt({key:Yf,view:n=>(this.view=new pge(t,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const i=[],{block:o,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:c}=s;if(r===a||!o||c==="row"&&!s5(o,a,r)||c==="col"&&!a5(o,a,r))return ct.create(n.doc,i);const u=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?Qw(this.view.state.block,r).forEach(({row:f,col:h})=>{const m=n.doc.resolve(u.posAtIndex(f)+1),g=n.doc.resolve(m.posAtIndex(h)+1),y=g.node(),E=g.pos+(r>a?y.nodeSize-2:0);i.push(It.widget(E,()=>{const C=document.createElement("div");return C.className="bn-table-drop-cursor",C.style.left="0",C.style.right="0",r>a?C.style.bottom="-2px":C.style.top="-3px",C.style.height="4px",C}))}):Xw(this.view.state.block,r).forEach(({row:f,col:h})=>{const m=n.doc.resolve(u.posAtIndex(f)+1),g=n.doc.resolve(m.posAtIndex(h)+1),y=g.node(),E=g.pos+(r>a?y.nodeSize-2:0);i.push(It.widget(E,()=>{const C=document.createElement("div");return C.className="bn-table-drop-cursor",C.style.top="0",C.style.bottom="0",r>a?C.style.right="-2px":C.style.left="-3px",C.style.width="4px",C}))}),ct.create(n.doc,i)}}}))}static key(){return"tableHandles"}onUpdate(t){return this.on("update",t)}};const gge=Ht.create({name:"textAlignment",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>e.textAlignment==="left"?{}:{"data-text-alignment":e.textAlignment}}}}]}}),bge=Ht.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["table","tableCell","tableHeader"],attributes:{textColor:qX()}}]}}),yge=Ht.create({name:"trailingNode",addProseMirrorPlugins(){const e=new pt(this.name);return[new nt({key:e,appendTransaction:(t,n,r)=>{const{doc:i,tr:o,schema:s}=r,a=e.getState(r),c=i.content.size-2,u=s.nodes.blockContainer,f=s.nodes.paragraph;if(a)return o.insert(c,u.create(void 0,f.create()))},state:{init:(t,n)=>{},apply:(t,n)=>{if(!t.docChanged)return n;let r=t.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const i=r.firstChild;if(!i)throw new Error("Expected blockContent");return r.nodeSize>4||i.type.spec.content!=="inline*"}}})]}}),Ege={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},vge=Zi.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:e=>{if(typeof e=="string")return!1;const t={};for(const[n,r]of Object.entries(Ege))e.getAttribute(r)&&(t[n]=e.getAttribute(r));return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:e}){var t;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[o,s]of Object.entries(e))o!=="class"&&n.setAttribute(o,s);const r={...((t=this.options.domAttributes)==null?void 0:t.block)||{},...e},i=document.createElement("div");i.className=Sn("bn-block",r.class),i.setAttribute("data-node-type",this.name);for(const[o,s]of Object.entries(r))o!=="class"&&i.setAttribute(o,s);return n.appendChild(i),{dom:n,contentDOM:i}}}),Cge=Zi.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:e=>typeof e=="string"?!1:e.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:e}){var t;const n={...((t=this.options.domAttributes)==null?void 0:t.blockGroup)||{},...e},r=document.createElement("div");r.className=Sn("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[i,o]of Object.entries(n))i!=="class"&&r.setAttribute(i,o);return{dom:r,contentDOM:r}}}),wge=Zi.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),Sge=e=>{var t;const n={},r=Tge(e);for(const o of r)n[o.name]=o;e.collaboration&&(n.ySyncPlugin=new b1(e.collaboration.fragment),n.yUndoPlugin=new y1({editor:e.editor}),(t=e.collaboration.provider)!=null&&t.awareness&&(n.yCursorPlugin=new xx(e.collaboration)),n.forkYDocPlugin=new vP({editor:e.editor,collaboration:e.collaboration}),n.schemaMigrationPlugin=new kx(e.collaboration.fragment)),n.formattingToolbar=new Ome(e.editor),n.linkToolbar=new $me(e.editor),n.sideMenu=new nge(e.editor),n.suggestionMenus=new age(e.editor),n.filePanel=new Nme(e.editor),n.placeholder=new Gme(e.editor,e.placeholders),(e.animations??!0)&&(n.animations=new Kme),e.tableHandles&&(n.tableHandles=new mge(e.editor)),n.nodeSelectionKeyboard=new qme,n.blockChange=new wme,n.showSelection=new Qme(e.editor),e.comments&&(n.comments=new wP(e.editor,e.comments.threadStore,E1.name,e.comments.resolveUsers,e.comments.schema));const i=e.disableExtensions||[];for(const o of i)delete n[o];return n};let a6=!1;const Tge=e=>{const t=[_u.ClipboardTextSerializer,_u.Commands,_u.Editable,_u.FocusEvents,_u.Tabindex,tne,Ht.create({name:"dropCursor",addProseMirrorPlugins:()=>[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}),rb.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),Dme,Ane,lge,cge,uge,_ne.extend({inclusive:!1}).configure({defaultProtocol:kP,protocols:a6?[]:xP}),...Object.values(e.styleSpecs).map(n=>n.implementation.mark.configure({editor:e.editor})),bge,Cme,gge,Ht.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>e.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),wge,vge.configure({editor:e.editor,domAttributes:e.domAttributes}),Fme.configure({editor:e.editor,tabBehavior:e.tabBehavior}),Cge.configure({domAttributes:e.domAttributes}),...Object.values(e.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:e.editor})),...Object.values(e.blockSpecs).flatMap(n=>[..."node"in n.implementation?[n.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})]:[]]),vme(e.editor),pme(e.editor,e.pasteHandler||(n=>n.defaultPasteHandler())),Xpe(e.editor),...e.trailingBlock===void 0||e.trailingBlock?[yge]:[],...e.comments?[E1]:[]];return a6=!0,e.collaboration||t.push(nne),t};function xge(e){return e.transact(t=>{const n=tl(t.doc,t.selection.anchor);if(t.selection instanceof $t)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:t.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:t.selection.$headCell.pos-n.posBeforeNode};if(t.selection instanceof qe)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=tl(t.doc,t.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:t.selection.anchor-n.posBeforeNode,headOffset:t.selection.head-r.posBeforeNode}}})}function kge(e,t){var n,r;const i=(n=vi(t.anchorBlockId,e.doc))==null?void 0:n.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${t.anchorBlockId} to update selection`);let o;if(t.type==="cell")o=$t.create(e.doc,i+t.anchorCellOffset,i+t.headCellOffset);else if(t.type==="node")o=qe.create(e.doc,i+1);else{const s=(r=vi(t.headBlockId,e.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${t.headBlockId} to update selection`);o=Ue.create(e.doc,i+t.anchorOffset,s+t.headOffset)}e.setSelection(o)}function q2(e){return e.map(t=>t.type==="columnList"?t.children.map(n=>q2(n.children)).flat():{...t,children:q2(t.children)}).flat()}function NP(e,t,n){e.transact(r=>{var i;const o=((i=e.getSelection())==null?void 0:i.blocks)||[e.getTextCursorPosition().block],s=xge(e);e.removeBlocks(o),e.insertBlocks(q2(o),t,n),kge(r,s)})}function MP(e){return!e||e.type!=="columnList"}function RP(e,t,n){let r,i;if(t?t.children.length>0?(r=t.children[t.children.length-1],i="after"):(r=t,i="before"):n&&(r=n,i="before"),!r||!i)return;const o=e.getParentBlock(r);return MP(o)?{referenceBlock:r,placement:i}:RP(e,i==="after"?r:e.getPrevBlock(r),o)}function OP(e,t,n){let r,i;if(t?t.children.length>0?(r=t.children[0],i="before"):(r=t,i="after"):n&&(r=n,i="after"),!r||!i)return;const o=e.getParentBlock(r);return MP(o)?{referenceBlock:r,placement:i}:OP(e,i==="before"?r:e.getNextBlock(r),o)}function _ge(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[0]||e.getTextCursorPosition().block,r=RP(e,e.getPrevBlock(n),e.getParentBlock(n));r&&NP(e,r.referenceBlock,r.placement)})}function Age(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[t?.blocks.length-1]||e.getTextCursorPosition().block,r=OP(e,e.getNextBlock(n),e.getParentBlock(n));r&&NP(e,r.referenceBlock,r.placement)})}function Nge(e,t){const n=typeof t=="string"?t:t.id,r=$n(e),i=vi(n,e);if(i)return gn(i.node,r)}function Mge(e,t){const n=typeof t=="string"?t:t.id,r=vi(n,e),i=$n(e);if(!r)return;const o=e.resolve(r.posBeforeNode).nodeBefore;if(o)return gn(o,i)}function Rge(e,t){const n=typeof t=="string"?t:t.id,r=vi(n,e),i=$n(e);if(!r)return;const o=e.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(o)return gn(o,i)}function Oge(e,t){const n=typeof t=="string"?t:t.id,r=$n(e),i=vi(n,e);if(!i)return;const o=e.resolve(i.posBeforeNode),s=o.node(),a=o.node(-1),c=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(c)return gn(c,r)}class Dge{constructor(t){this.editor=t}get document(){return this.editor.transact(t=>SX(t.doc,this.editor.pmSchema))}getBlock(t){return this.editor.transact(n=>Nge(n.doc,t))}getPrevBlock(t){return this.editor.transact(n=>Mge(n.doc,t))}getNextBlock(t){return this.editor.transact(n=>Rge(n.doc,t))}getParentBlock(t){return this.editor.transact(n=>Oge(n.doc,t))}forEachBlock(t,n=!1){const r=this.document.slice();n&&r.reverse();function i(o){for(const s of o){if(t(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!i(a))return!1}return!0}i(r)}insertBlocks(t,n,r="before"){return this.editor.transact(i=>Fpe(i,t,n,r))}updateBlock(t,n){return this.editor.transact(r=>jX(r,t,n))}removeBlocks(t){return this.editor.transact(n=>KO(n,t,[]).removedBlocks)}replaceBlocks(t,n){return this.editor.transact(r=>KO(r,t,n))}canNestBlock(){return Hme(this.editor)}nestBlock(){TP(this.editor)}canUnnestBlock(){return Ume(this.editor)}unnestBlock(){Pme(this.editor)}moveBlocksUp(){return _ge(this.editor)}moveBlocksDown(){return Age(this.editor)}}class Lge{constructor(t,n){fe(this,"editor"),fe(this,"options"),fe(this,"_commentsPlugin"),fe(this,"_forkYDocPlugin"),fe(this,"_syncPlugin"),fe(this,"_undoPlugin"),fe(this,"_cursorPlugin"),this.editor=t,this.options=n}get syncPlugin(){return this._syncPlugin}get undoPlugin(){return this._undoPlugin}get cursorPlugin(){return this._cursorPlugin}get forkYDocPlugin(){return this._forkYDocPlugin}initExtensions(){var t;const n={};if(this._syncPlugin=new b1(this.options.fragment),n.ySyncPlugin=this._syncPlugin,this._undoPlugin=new y1({editor:this.editor}),n.yUndoPlugin=this._undoPlugin,(t=this.options.provider)!=null&&t.awareness&&(this._cursorPlugin=new xx(this.options),n.yCursorPlugin=this._cursorPlugin),this._forkYDocPlugin=new vP({editor:this.editor,collaboration:this.options}),n.forkYDocPlugin=this._forkYDocPlugin,this.options.comments){if(!this.options.resolveUsers)throw new Error("resolveUsers is required when using comments");this._commentsPlugin=new wP(this.editor,this.options.comments.threadStore,E1.name,this.options.resolveUsers,this.options.comments.schema),n.comments=this._commentsPlugin,n.commentMark=E1}return n}updateUserInfo(t){const n=this.cursorPlugin;if(!n)throw new Error("Cannot update collaboration user info when collaboration is disabled.");n.updateUser(t)}getUndoCommand(){return gfe}getRedoCommand(){return bfe}shouldAvoidInitialContent(){return!!this.options.provider}getOptions(){return this.options}get comments(){return this._commentsPlugin}get hasComments(){return!!this.options.comments}get resolveUsers(){return this.options.resolveUsers}}class Ige extends cb{constructor(t){super(),this.editor=t,t.onCreate(()=>{t._tiptapEditor.on("update",({transaction:n,appendedTransactions:r})=>{this.emit("onChange",t,{getChanges(){return mP(n,r)}})}),t._tiptapEditor.on("selectionUpdate",({transaction:n})=>{this.emit("onSelectionChange",{editor:t,transaction:n})}),t._tiptapEditor.on("mount",()=>{this.emit("onMount",{editor:t})}),t._tiptapEditor.on("unmount",()=>{this.emit("onUnmount",{editor:t})})})}onChange(t){return this.on("onChange",t),()=>{this.off("onChange",t)}}onSelectionChange(t,n=!1){const r=i=>{i.transaction.getMeta("$y-sync")&&!n||t(this.editor)};return this.on("onSelectionChange",r),()=>{this.off("onSelectionChange",r)}}onMount(t){return this.on("onMount",t),()=>{this.off("onMount",t)}}onUnmount(t){return this.on("onUnmount",t),()=>{this.off("onUnmount",t)}}}function Bge(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function Pge(e){return e.nodeType===3&&!/\S/.test(e.nodeValue||"")}function Hge(e){e.querySelectorAll("li > ul, li > ol").forEach(t=>{const n=Bge(t),r=t.parentElement,i=Array.from(r.childNodes).slice(n+1);t.remove(),i.forEach(o=>{o.remove()}),r.insertAdjacentElement("afterend",t),i.reverse().forEach(o=>{if(Pge(o))return;const s=document.createElement("li");s.append(o),t.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function Uge(e){e.querySelectorAll("li + ul, li + ol").forEach(t=>{var n,r;const i=t.previousElementSibling,o=document.createElement("div");i.insertAdjacentElement("afterend",o),o.append(i);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),o.append(s);((n=o.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=o.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(o.nextElementSibling)})}let l6=null;function Fge(){return l6||(l6=document.implementation.createHTMLDocument("title"))}function jge(e){if(typeof e=="string"){const t=Fge().createElement("div");t.innerHTML=e,e=t}return Hge(e),Uge(e),e}function DP(e,t){const n=jge(e),r=co.fromSchema(t).parse(n,{topNode:t.nodes.blockGroup.create()}),i=[];for(let o=0;o<r.childCount;o++)i.push(gn(r.child(o),t));return i}function zge(e,t){const n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function $ge(e,t){var n;const r=String(t?.url||""),i=t!=null&&t.title?String(t.title):void 0;let o={type:"element",tagName:"video",properties:{src:r,"data-name":i,"data-url":r,controls:!0},children:[]};return(n=e.patch)==null||n.call(e,t,o),o=e.applyData?e.applyData(t,o):o,o}function LP(e){return zB().use(Zfe).use(jB).use(Dhe,{handlers:{...F2,image:(t,n)=>{const r=String(n?.url||"");return gX(r)?$ge(t,n):F2.image(t,n)},code:zge}}).use(Ppe).processSync(e).value}function Vge(e,t){const n=LP(e);return DP(n,t)}class qge{constructor(t){this.editor=t}blocksToHTMLLossy(t=this.editor.document){return Lb(this.editor.pmSchema,this.editor).exportBlocks(t,{})}blocksToFullHTML(t){return qpe(this.editor.pmSchema,this.editor).serializeBlocks(t,{})}tryParseHTMLToBlocks(t){return DP(t,this.editor.pmSchema)}blocksToMarkdownLossy(t=this.editor.document){return yme(t,this.editor.pmSchema,this.editor,{})}tryParseMarkdownToBlocks(t){return Vge(t,this.editor.pmSchema)}pasteHTML(t,n=!1){var r;let i=t;if(!n){const o=this.tryParseHTMLToBlocks(t);i=this.blocksToFullHTML(o)}i&&((r=this.editor.prosemirrorView)==null||r.pasteHTML(i))}pasteText(t){var n;return(n=this.editor.prosemirrorView)==null?void 0:n.pasteText(t)}pasteMarkdown(t){const n=LP(t);return this.pasteHTML(n)}}class Yge{constructor(t){this.editor=t}extension(t,n=t.key()){const r=this.editor.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}getExtensions(){return this.editor.extensions}getExtension(t){return this.editor.extensions[t]}hasExtension(t){return t in this.editor.extensions}get formattingToolbar(){return this.editor.extensions.formattingToolbar}get linkToolbar(){return this.editor.extensions.linkToolbar}get sideMenu(){return this.editor.extensions.sideMenu}get suggestionMenus(){return this.editor.extensions.suggestionMenus}get filePanel(){return this.editor.extensions.filePanel}get tableHandles(){return this.editor.extensions.tableHandles}get showSelectionPlugin(){return this.editor.extensions.showSelection}get isCollaborationEnabled(){return this.hasExtension("ySyncPlugin")||this.hasExtension("liveblocksExtension")}}function Gge(e){const t=$n(e);if(e.selection.empty||"node"in e.selection)return;const n=e.doc.resolve(tl(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(tl(e.doc,e.selection.to).posBeforeNode),i=(u,f)=>{const h=n.posAtIndex(u,f),m=e.doc.resolve(h).nodeAfter;if(!m)throw new Error(`Error getting selection - node not found at position ${h}`);return gn(m,t)},o=[],s=n.sharedDepth(r.pos),a=n.index(s),c=r.index(s);if(n.depth>s){o.push(gn(n.nodeAfter,t));for(let u=n.depth;u>s;u--)if(n.node(u).type.isInGroup("childContainer")){const f=n.index(u)+1,h=n.node(u).childCount;for(let m=f;m<h;m++)o.push(i(m,u))}}else o.push(i(a,s));for(let u=a+1;u<=c;u++)o.push(i(u,s));if(o.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${e.selection})`);return{blocks:o}}function Wge(e,t,n){const r=typeof t=="string"?t:t.id,i=typeof n=="string"?n:n.id,o=$n(e),s=fp(o);if(r===i)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=vi(r,e.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const c=vi(i,e.doc);if(!c)throw new Error(`Block with ID ${i} not found`);const u=nl(a),f=nl(c),h=s.blockSchema[u.blockNoteType],m=s.blockSchema[f.blockNoteType];if(!u.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!f.isBlockContainer||m.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${i})`);let g,y;if(h.content==="table"){const E=tn.get(u.blockContent.node);g=u.blockContent.beforePos+E.positionAt(0,0,u.blockContent.node)+1+2}else g=u.blockContent.beforePos+1;if(m.content==="table"){const E=tn.get(f.blockContent.node),C=f.blockContent.beforePos+E.positionAt(E.height-1,E.width-1,f.blockContent.node)+1,S=e.doc.resolve(C).nodeAfter.nodeSize;y=C+S-2}else y=f.blockContent.afterPos-1;e.setSelection(Ue.create(e.doc,g,y))}function Kge(e){const t=$n(e);let n=e.selection.$from,r=e.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=e.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=e.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);const i=TX(e.doc.slice(n.pos,r.pos,!0),t);return{_meta:{startPos:n.pos,endPos:r.pos},...i}}function Qge(e){const{bnBlock:t}=dp(e),n=$n(e.doc),r=e.doc.resolve(t.beforePos),i=r.nodeBefore,o=e.doc.resolve(t.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:gn(t.node,n),prevBlock:i===null?void 0:gn(i,n),nextBlock:o===null?void 0:gn(o,n),parentBlock:s===void 0?void 0:gn(s,n)}}function IP(e,t,n="start"){const r=typeof t=="string"?t:t.id,i=$n(e.doc),o=fp(i),s=vi(r,e.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=nl(s),c=o.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const u=a.blockContent;if(c==="none"){e.setSelection(qe.create(e.doc,u.beforePos));return}if(c==="inline")n==="start"?e.setSelection(Ue.create(e.doc,u.beforePos+1)):e.setSelection(Ue.create(e.doc,u.afterPos-1));else if(c==="table")n==="start"?e.setSelection(Ue.create(e.doc,u.beforePos+4)):e.setSelection(Ue.create(e.doc,u.afterPos-4));else throw new ts(c)}else{const u=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;IP(e,u.attrs.id,n)}}class Xge{constructor(t){this.editor=t}getSelection(){return this.editor.transact(t=>Gge(t))}getSelectionCutBlocks(){return this.editor.transact(t=>Kge(t))}setSelection(t,n){return this.editor.transact(r=>Wge(r,t,n))}getTextCursorPosition(){return this.editor.transact(t=>Qge(t))}setTextCursorPosition(t,n="start"){return this.editor.transact(r=>IP(r,t,n))}getSelectionBoundingBox(){if(!this.editor.prosemirrorView)return;const{selection:t}=this.editor.prosemirrorState,{ranges:n}=t,r=Math.min(...n.map(o=>o.$from.pos)),i=Math.max(...n.map(o=>o.$to.pos));if(w0(t)){const o=this.editor.prosemirrorView.nodeDOM(r);if(o)return o.getBoundingClientRect()}return S0(this.editor.prosemirrorView,r,i)}}class Zge{constructor(t,n){fe(this,"activeTransaction",null),fe(this,"isInCan",!1),this.editor=t,this.options=n}can(t){try{return this.isInCan=!0,t()}finally{this.isInCan=!1}}exec(t){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");if(this.isInCan)return this.canExec(t);const n=this.prosemirrorState,r=this.prosemirrorView;return t(n,i=>this.prosemirrorView.dispatch(i),r)}canExec(t){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this.prosemirrorState,r=this.prosemirrorView;return t(n,void 0,r)}transact(t){if(this.activeTransaction)return t(this.activeTransaction);try{this.activeTransaction=this.editor._tiptapEditor.state.tr;const n=t(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this.prosemirrorView.dispatch(r),n}finally{this.activeTransaction=null}}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this.editor._tiptapEditor.state}get prosemirrorView(){return this.editor._tiptapEditor.view}isFocused(){var t;return((t=this.prosemirrorView)==null?void 0:t.hasFocus())||!1}focus(){var t;(t=this.prosemirrorView)==null||t.focus()}get isEditable(){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return!1}return this.editor._tiptapEditor.isEditable===void 0?!0:this.editor._tiptapEditor.isEditable}set isEditable(t){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return}this.editor._tiptapEditor.options.editable!==t&&this.editor._tiptapEditor.setEditable(t)}undo(){var t;return this.exec(((t=this.options)==null?void 0:t.undo)??jT)}redo(){var t;return this.exec(((t=this.options)==null?void 0:t.redo)??zT)}}function Jge(e,t,n,r={updateSelection:!0}){let{from:i,to:o}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},s=!0,a=!0,c="";if(n.forEach(u=>{u.check(),s&&u.isText&&u.marks.length===0?c+=u.text:s=!1,a=a?u.isBlock:!1}),i===o&&a){const{parent:u}=e.doc.resolve(i);u.isTextblock&&!u.type.spec.code&&!u.childCount&&(i-=1,o+=1)}return s?e.insertText(c,i,o):e.replaceWith(i,o,n),r.updateSelection&&xI(e,e.steps.length-1,-1),!0}class e0e{constructor(t){this.editor=t}insertInlineContent(t,{updateSelection:n=!1}={}){const r=bo(t,this.editor.pmSchema);this.editor.transact(i=>{Jge(i,{from:i.selection.from,to:i.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.editor.transact(t=>{const n={},r=t.selection.$to.marks();for(const i of r){const o=this.editor.schema.styleSchema[i.type.name];if(!o){i.type.name!=="link"&&!i.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",i.type.name);continue}o.propSchema==="boolean"?n[o.type]=!0:n[o.type]=i.attrs.stringValue}return n})}addStyles(t){for(const[n,r]of Object.entries(t)){const i=this.editor.schema.styleSchema[n];if(!i)throw new Error(`style ${n} not found in styleSchema`);if(i.propSchema==="boolean")this.editor._tiptapEditor.commands.setMark(n);else if(i.propSchema==="string")this.editor._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new ts(i.propSchema)}}removeStyles(t){for(const n of Object.keys(t))this.editor._tiptapEditor.commands.unsetMark(n)}toggleStyles(t){for(const[n,r]of Object.entries(t)){const i=this.editor.schema.styleSchema[n];if(!i)throw new Error(`style ${n} not found in styleSchema`);if(i.propSchema==="boolean")this.editor._tiptapEditor.commands.toggleMark(n);else if(i.propSchema==="string")this.editor._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new ts(i.propSchema)}}getSelectedText(){return this.editor.transact(t=>t.doc.textBetween(t.selection.from,t.selection.to))}getSelectedLinkUrl(){return this.editor._tiptapEditor.getAttributes("link").href}createLink(t,n){if(t==="")return;const r=this.editor.pmSchema.mark("link",{href:t});this.editor.transact(i=>{const{from:o,to:s}=i.selection;n?i.insertText(n,o,s).addMark(o,o+n.length,r):i.setSelection(Ue.create(i.doc,s)).addMark(o,s,r)})}}function t0e(e,t){const n=[];return e.forEach((r,i,o)=>{o!==t&&n.push(r)}),Ce.from(n)}function n0e(e,t){const n=[];for(let r=0;r<e.childCount;r++)if(e.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const i=n[n.length-1],o=i.copy(i.content.addToEnd(e.child(r)));n[n.length-1]=o}else{const i=t.nodes.table.createChecked(void 0,e.child(r));n.push(i)}else n.push(e.child(r));return e=Ce.from(n),e}function r0e(e,t){let n=Ce.from(e.content);if(n=n0e(n,t.state.schema),!i0e(n,t))return new De(n,e.openStart,e.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const i=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(i.push(n.child(r+1)),n=t0e(n,r+1))}const o=t.state.schema.nodes.blockContainer.createChecked(void 0,i);n=n.replaceChild(r,o)}return new De(n,e.openStart,e.openEnd)}function i0e(e,t){var n,r;const i=e.childCount===1,o=((n=e.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=e.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(i){if(o)return!1;if(s){const a=Fr(t.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const o0e={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};class _x extends cb{constructor(t){var n,r,i,o,s,a,c,u,f,h,m,g,y,E,C,S,N,_,O;super(),fe(this,"pmSchema"),fe(this,"extensions",{}),fe(this,"_tiptapEditor"),fe(this,"elementRenderer",null),fe(this,"blockCache",new WeakMap),fe(this,"dictionary"),fe(this,"schema"),fe(this,"blockImplementations"),fe(this,"inlineContentImplementations"),fe(this,"styleImplementations"),fe(this,"uploadFile"),fe(this,"onUploadStartCallbacks",[]),fe(this,"onUploadEndCallbacks",[]),fe(this,"resolveFileUrl"),fe(this,"resolveUsers"),fe(this,"settings"),fe(this,"_blockManager"),fe(this,"_collaborationManager"),fe(this,"_eventManager"),fe(this,"_exportManager"),fe(this,"_extensionManager"),fe(this,"_selectionManager"),fe(this,"_stateManager"),fe(this,"_styleManager"),fe(this,"mount",U=>{this._tiptapEditor.mount({mount:U})}),fe(this,"unmount",()=>{this._tiptapEditor.unmount()}),this.options=t;const M=t;if(M.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(M.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(M.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(M.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=t.dictionary||Cfe,this.settings={tables:{splitCells:((n=t?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=t?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((i=t?.tables)==null?void 0:i.cellTextColor)??!1,headers:((o=t?.tables)==null?void 0:o.headers)??!1}};const R={defaultStyles:!0,schema:t.schema||y5.create(),...t,placeholders:{...this.dictionary.placeholders,...t.placeholders}};if(R.collaboration||R.comments){const U={fragment:((s=R.collaboration)==null?void 0:s.fragment)||new sl,user:((a=R.collaboration)==null?void 0:a.user)||{name:"User",color:"#FF0000"},provider:((c=R.collaboration)==null?void 0:c.provider)||null,renderCursor:(u=R.collaboration)==null?void 0:u.renderCursor,showCursorLabels:(f=R.collaboration)==null?void 0:f.showCursorLabels,comments:R.comments,resolveUsers:R.resolveUsers};this._collaborationManager=new Lge(this,U)}else this._collaborationManager=void 0;if(R.comments&&!R.resolveUsers)throw new Error("resolveUsers is required when using comments");this.schema=R.schema,this.blockImplementations=R.schema.blockSpecs,this.inlineContentImplementations=R.schema.inlineContentSpecs,this.styleImplementations=R.schema.styleSpecs,this.extensions={...Sge({editor:this,domAttributes:R.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:R.collaboration,trailingBlock:R.trailingBlock,disableExtensions:R.disableExtensions,setIdAttribute:R.setIdAttribute,animations:R.animations??!0,tableHandles:cn(this,"table"),dropCursor:this.options.dropCursor??v5,placeholders:R.placeholders,tabBehavior:R.tabBehavior,pasteHandler:R.pasteHandler}),...(h=this._collaborationManager)==null?void 0:h.initExtensions()},(((m=R._tiptapOptions)==null?void 0:m.extensions)||[]).forEach(U=>{this.extensions[U.name]=U});for(let U of R.extensions||[]){typeof U=="function"&&(U=U(this));const q=U.key??U.constructor.key();if(!q)throw new Error(`Extension ${U.constructor.name} does not have a key method`);if(this.extensions[q])throw new Error(`Extension ${U.constructor.name} already exists with key ${q}`);this.extensions[q]=U}if(Object.entries(R._extensions||{}).forEach(([U,q])=>{const re=typeof q=="function"?q(this):q;if(!("plugin"in re)){this.extensions[U]=re;return}this.extensions[U]=new class extends Un{static key(){return U}constructor(){super(),this.addProsemirrorPlugin(re.plugin)}get priority(){return re.priority}}}),R.uploadFile){const U=R.uploadFile;this.uploadFile=async(q,re)=>{this.onUploadStartCallbacks.forEach(J=>J.apply(this,[re]));try{return await U(q,re)}finally{this.onUploadEndCallbacks.forEach(J=>J.apply(this,[re]))}}}this.resolveFileUrl=R.resolveFileUrl;const L="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;L&&R.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const F=Object.fromEntries(Object.values(this.schema.blockSpecs).map(U=>U.extensions).filter(U=>U!==void 0).flat().map(U=>[U.key??U.constructor.key(),U])),z=[...Object.entries({...this.extensions,...F}).map(([U,q])=>{if(q instanceof Ht||q instanceof Zi||q instanceof Ti)return q;if(q instanceof Un)return!q.plugins.length&&!q.keyboardShortcuts&&!q.inputRules&&!q.tiptapExtensions?void 0:Ht.create({name:U,priority:q.priority,addProseMirrorPlugins:()=>q.plugins,addExtensions:()=>q.tiptapExtensions||[],addInputRules:q.inputRules?()=>q.inputRules.map(re=>new II({find:re.find,handler:({range:J,match:ae,state:W})=>{const Z=re.replace({match:ae,range:J,editor:this});if(Z){const te=this.getTextCursorPosition();if(this.schema.blockSchema[te.block.type].content!=="inline")return;const ue=dp(W.tr),$=W.tr.deleteRange(J.from,J.to);sb($,ue.bnBlock.beforePos,Z);return}return null}})):void 0,addKeyboardShortcuts:q.keyboardShortcuts?()=>Object.fromEntries(Object.entries(q.keyboardShortcuts).map(([re,J])=>[re,()=>J({editor:this})])):void 0})})].filter(U=>U!==void 0),B={...o0e,...R._tiptapOptions,element:null,autofocus:R.autofocus??!1,extensions:z,editorProps:{...(g=R._tiptapOptions)==null?void 0:g.editorProps,attributes:{tabIndex:"0",...(E=(y=R._tiptapOptions)==null?void 0:y.editorProps)==null?void 0:E.attributes,...(C=R.domAttributes)==null?void 0:C.editor,class:Sn("bn-editor",R.defaultStyles?"bn-default-styles":"",((N=(S=R.domAttributes)==null?void 0:S.editor)==null?void 0:N.class)||"")},transformPasted:r0e}};try{const U=R.initialContent||(L?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:rb.options.generateID()}]);if(!Array.isArray(U)||U.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+U);const q=PK(B.extensions),re=U.map(ae=>Tc(ae,q,this.schema.styleSchema).toJSON()),J=v0({type:"doc",content:[{type:"blockGroup",content:re}]},q,B.parseOptions);this._tiptapEditor=new wQ({...B,content:J.toJSON()}),this.pmSchema=this._tiptapEditor.schema}catch(U){throw new Error("Error creating document from blocks passed as `initialContent`",{cause:U})}this.pmSchema.cached.blockNoteEditor=this,this._blockManager=new Dge(this),this._eventManager=new Ige(this),this._exportManager=new qge(this),this._extensionManager=new Yge(this),this._selectionManager=new Xge(this),this._stateManager=new Zge(this,L?{undo:(_=this._collaborationManager)==null?void 0:_.getUndoCommand(),redo:(O=this._collaborationManager)==null?void 0:O.getRedoCommand()}:void 0),this._styleManager=new e0e(this),this.emit("create")}get formattingToolbar(){return this._extensionManager.formattingToolbar}get linkToolbar(){return this._extensionManager.linkToolbar}get sideMenu(){return this._extensionManager.sideMenu}get suggestionMenus(){return this._extensionManager.suggestionMenus}get filePanel(){return this._extensionManager.filePanel}get tableHandles(){return this._extensionManager.tableHandles}get comments(){var t;return(t=this._collaborationManager)==null?void 0:t.comments}get showSelectionPlugin(){return this._extensionManager.showSelectionPlugin}get forkYDocPlugin(){var t;return(t=this._collaborationManager)==null?void 0:t.forkYDocPlugin}static create(t){return new _x(t??{})}exec(t){return this._stateManager.exec(t)}canExec(t){return this._stateManager.canExec(t)}transact(t){return this._stateManager.transact(t)}extension(t,n=t.key()){return this._extensionManager.extension(t,n)}get prosemirrorState(){return this._stateManager.prosemirrorState}get prosemirrorView(){return this._stateManager.prosemirrorView}get domElement(){var t;return(t=this.prosemirrorView)==null?void 0:t.dom}isFocused(){var t;return((t=this.prosemirrorView)==null?void 0:t.hasFocus())||!1}get headless(){return!this._tiptapEditor.isInitialized}focus(){this.headless||this.prosemirrorView.focus()}onUploadStart(t){return this.onUploadStartCallbacks.push(t),()=>{const n=this.onUploadStartCallbacks.indexOf(t);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(t){return this.onUploadEndCallbacks.push(t),()=>{const n=this.onUploadEndCallbacks.indexOf(t);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this._blockManager.document}getBlock(t){return this._blockManager.getBlock(t)}getPrevBlock(t){return this._blockManager.getPrevBlock(t)}getNextBlock(t){return this._blockManager.getNextBlock(t)}getParentBlock(t){return this._blockManager.getParentBlock(t)}forEachBlock(t,n=!1){this._blockManager.forEachBlock(t,n)}onEditorContentChange(t){this._tiptapEditor.on("update",t)}onEditorSelectionChange(t){this._tiptapEditor.on("selectionUpdate",t)}getTextCursorPosition(){return this._selectionManager.getTextCursorPosition()}setTextCursorPosition(t,n="start"){return this._selectionManager.setTextCursorPosition(t,n)}getSelection(){return this._selectionManager.getSelection()}getSelectionCutBlocks(){return this._selectionManager.getSelectionCutBlocks()}setSelection(t,n){return this._selectionManager.setSelection(t,n)}get isEditable(){return this._stateManager.isEditable}set isEditable(t){this._stateManager.isEditable=t}insertBlocks(t,n,r="before"){return this._blockManager.insertBlocks(t,n,r)}updateBlock(t,n){return this._blockManager.updateBlock(t,n)}removeBlocks(t){return this._blockManager.removeBlocks(t)}replaceBlocks(t,n){return this._blockManager.replaceBlocks(t,n)}undo(){return this._stateManager.undo()}redo(){return this._stateManager.redo()}insertInlineContent(t,{updateSelection:n=!1}={}){this._styleManager.insertInlineContent(t,{updateSelection:n})}getActiveStyles(){return this._styleManager.getActiveStyles()}addStyles(t){this._styleManager.addStyles(t)}removeStyles(t){this._styleManager.removeStyles(t)}toggleStyles(t){this._styleManager.toggleStyles(t)}getSelectedText(){return this._styleManager.getSelectedText()}getSelectedLinkUrl(){return this._styleManager.getSelectedLinkUrl()}createLink(t,n){this._styleManager.createLink(t,n)}canNestBlock(){return this._blockManager.canNestBlock()}nestBlock(){this._blockManager.nestBlock()}canUnnestBlock(){return this._blockManager.canUnnestBlock()}unnestBlock(){this._blockManager.unnestBlock()}moveBlocksUp(){return this._blockManager.moveBlocksUp()}moveBlocksDown(){return this._blockManager.moveBlocksDown()}blocksToHTMLLossy(t=this.document){return this._exportManager.blocksToHTMLLossy(t)}blocksToFullHTML(t){return this._exportManager.blocksToFullHTML(t)}tryParseHTMLToBlocks(t){return this._exportManager.tryParseHTMLToBlocks(t)}blocksToMarkdownLossy(t=this.document){return this._exportManager.blocksToMarkdownLossy(t)}tryParseMarkdownToBlocks(t){return this._exportManager.tryParseMarkdownToBlocks(t)}updateCollaborationUserInfo(t){if(!this._collaborationManager)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this._collaborationManager.updateUserInfo(t)}onChange(t){return this._eventManager.onChange(t)}onSelectionChange(t,n){return this._eventManager.onSelectionChange(t,n)}onCreate(t){return this.on("create",t),()=>{this.off("create",t)}}onMount(t){this._eventManager.onMount(t)}onUnmount(t){this._eventManager.onUnmount(t)}getSelectionBoundingBox(){return this._selectionManager.getSelectionBoundingBox()}get isEmpty(){const t=this.document;return t.length===0||t.length===1&&t[0].type==="paragraph"&&t[0].content.length===0}openSuggestionMenu(t,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(t),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:t,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(t){this.showSelectionPlugin.setEnabled(t)}pasteHTML(t,n=!1){this._exportManager.pasteHTML(t,n)}pasteText(t){return this._exportManager.pasteText(t)}pasteMarkdown(t){return this._exportManager.pasteMarkdown(t)}}let YC;async function s0e(){return YC||(YC=(async()=>{const[e,t]=await Promise.all([n0(()=>import("./module-RjUF93sV.js"),[]),n0(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),YC)}async function a0e(e,t){if(!("text"in e.schema.inlineContentSchema)||e.schema.inlineContentSchema.text!==XZ.text)return[];const{emojiData:n,emojiMart:r}=await s0e();return(t.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(t)).map(i=>({id:i.skins[0].native,onItemClick:()=>e.insertInlineContent(i.skins[0].native+" ")}))}const BP=A.createContext(void 0);function _o(e){return A.useContext(BP)}function et(e){const t=_o();if(!(t!=null&&t.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function Ax(e,t,n){const r=_o();t||(t=r?.editor),A.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)},[e,t,n])}function l0e(e,t){const n=et();t=t||n;const[r,i]=A.useState(()=>{if(e)return t.getSelectionBoundingBox()}),o=A.useCallback(()=>{if(!e)return;const s=t.getSelectionBoundingBox();i(s)},[t,e]);return Ax(o,t,!0),A.useEffect(()=>{i(e?t.getSelectionBoundingBox():void 0)},[e,t]),r}function c0e(e){return e.getBoundingClientRect!==void 0}function fl(e,t,n,r){const{refs:i,update:o,context:s,floatingStyles:a,isPositioned:c}=hd({open:e,...r}),{isMounted:u,styles:f}=ES(s),h=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},m=PD(s,h),{getReferenceProps:g,getFloatingProps:y}=HD([m]);return A.useEffect(()=>{t!==null&&(t instanceof HTMLElement||c0e(t)?i.setReference(t):i.setReference({getBoundingClientRect:()=>t}),o())},[t,i,o]),A.useMemo(()=>({isMounted:u,ref:i.setFloating,setReference:i.setReference,style:{display:"flex",...f,...a,zIndex:n},getFloatingProps:y,getReferenceProps:g,isPositioned:c}),[c,a,u,i.setFloating,i.setReference,f,n,y,g])}function ta(e){const[t,n]=A.useState();return A.useEffect(()=>e(r=>{n({...r})}),[e]),t}const PP=A.createContext(void 0);function Ke(){return A.useContext(PP)}const Td=(e={},t=[])=>A.useMemo(()=>{const n=_x.create(e);return window&&(window.ProseMirror=n._tiptapEditor),n},t);function ut(){return _o().editor.dictionary}function Nx(e,t){const n=_o();t||(t=n?.editor),A.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)},[e,t])}const Mx=e=>{const[t,n]=A.useState(!1),[r,i]=A.useState(e.editor.isEmpty),o=Ke();Nx(()=>{i(e.editor.isEmpty)},e.editor);const s=A.useCallback(()=>{n(!0)},[]),a=A.useCallback(()=>{n(!1)},[]);return A.useEffect(()=>{e.editable&&e.autoFocus&&e.editor.focus()},[e.autoFocus,e.editable,e.editor]),k.jsxs(k.Fragment,{children:[k.jsx(o.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:s,onBlur:a,editable:e.editable}),e.actions&&k.jsx("div",{className:"bn-comment-actions-wrapper",children:k.jsx(e.actions,{isFocused:t,isEmpty:r})})]})},{textColor:T2e,backgroundColor:x2e,...u0e}=fT,Rx=y5.create({blockSpecs:{paragraph:m5()},styleSpecs:u0e});function d0e(){const e=et();if(!e.comments)throw new Error("Comments plugin not found");const t=e.comments,n=Ke(),r=ut(),i=Td({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:e.comments.commentEditorSchema||Rx});return k.jsx(n.Comments.Card,{className:"bn-thread",children:k.jsx(Mx,{autoFocus:!0,editable:!0,editor:i,actions:({isEmpty:o})=>k.jsx(n.Generic.Toolbar.Root,{className:Sn("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:k.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:o,onClick:async()=>{await t.createThread({initialComment:{body:i.document}}),t.stopPendingComment()},children:"Save"})})})})}const f0e=e=>{const t=et();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=t.comments;A.useEffect(()=>{const f=n.onUpdate(h=>t.setForceSelectionVisible(h.pendingComment));return()=>f()},[n,t]);const r=ta(n.onUpdate.bind(n)),i=l0e(r?.pendingComment),{isMounted:o,ref:s,style:a,getFloatingProps:c}=fl(r?.pendingComment||!1,i||null,5e3,{placement:"bottom",middleware:[as(10),wc(),go()],onOpenChange:f=>{f||(n.stopPendingComment(),t.focus())},...e.floatingOptions});if(!o||!r)return null;const u=e.floatingComposer||d0e;return k.jsx("div",{ref:s,style:a,...c(),children:k.jsx(u,{})})};var HP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c6=Tn.createContext&&Tn.createContext(HP),h0e=["attr","size","title"];function p0e(e,t){if(e==null)return{};var n=m0e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function v1(){return v1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v1.apply(this,arguments)}function u6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function C1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(n),!0).forEach(function(r){g0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g0e(e,t,n){return t=b0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b0e(e){var t=y0e(e,"string");return typeof t=="symbol"?t:t+""}function y0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UP(e){return e&&e.map((t,n)=>Tn.createElement(t.tag,C1({key:n},t.attr),UP(t.child)))}function Qe(e){return t=>Tn.createElement(E0e,v1({attr:C1({},e.attr)},t),UP(e.child))}function E0e(e){var t=n=>{var{attr:r,size:i,title:o}=e,s=p0e(e,h0e),a=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Tn.createElement("svg",v1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:C1(C1({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Tn.createElement("title",null,o),e.children)};return c6!==void 0?Tn.createElement(c6.Consumer,null,n=>t(n)):t(HP)}function v0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function FP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function C0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function w0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}function S0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function T0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)}function x0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}function k0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)}function _0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)}function A0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)}function N0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}function d6(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function w1(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function S1(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function T1(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function jP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(e)}function zP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function $P(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(e)}function M0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function R0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function f6(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function O0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)}function D0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function VP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function qP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function YP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function GP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function L0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function I0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function WP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function B0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)}function P0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)}function Ox(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function H0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)}function U0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)}function F0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function j0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function z0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function KP(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(e)}function $0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function V0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function q0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function Y0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function G0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function W0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function K0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function Q0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function X0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11V13H19V11H5Z"},child:[]}]})(e)}function Z0e(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)}function h6(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}let GC;async function J0e(){return GC||(GC=(async()=>{const[e,t]=await Promise.all([n0(()=>import("./module-RjUF93sV.js"),[]),n0(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),GC)}function e1e(e){const t=A.useRef(null),n=A.useRef(null);return n.current&&n.current.update(e),A.useEffect(()=>((async()=>{const{emojiMart:r}=await J0e();n.current=new r.Picker({...e,ref:t})})(),()=>{n.current=null}),[]),Tn.createElement("div",{ref:t})}const p6=e=>{const[t,n]=A.useState(!1),r=Ke(),i=_o();return k.jsxs(r.Generic.Popover.Root,{opened:t,children:[k.jsx(r.Generic.Popover.Trigger,{children:k.jsx("div",{onClick:o=>{o.preventDefault(),o.stopPropagation(),n(!t)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),k.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:k.jsx(e1e,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:o=>{e.onEmojiSelect(o),n(!1)},theme:i?.colorSchemePreference})})]})};function t1e(e,t){return Dx(e,[t]).get(t)}function Dx(e,t){const n=e.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,i=A.useCallback(()=>{const a=new Map;for(const c of t){const u=r.getUser(c);u&&a.set(c,u)}return a},[r,t]),o=A.useMemo(()=>({current:i()}),[i]),s=A.useCallback(a=>{const c=r.subscribe(u=>{o.current=i(),a()});return r.loadUsers(t),c},[r,i,t,o]);return A.useSyncExternalStore(s,()=>o.current)}const n1e=e=>{const t=Ke(),n=ut(),r=et();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const i=e.comment.reactions.find(c=>c.emoji===e.emoji);if(!i)throw new Error("Trying to render reaction badge for non-existing reaction");const[o,s]=A.useState([]),a=Dx(r,o);return k.jsx(t.Generic.Badge.Root,{className:Sn("bn-badge","bn-comment-reaction"),text:i.userIds.length.toString(),icon:i.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,i.emoji),onClick:()=>e.onReactionSelect(i.emoji),onMouseEnter:()=>s(i.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(c=>c.username).join(`
`)}`},i.emoji)},r1e=({comment:e,thread:t,showResolveButton:n})=>{const r=et();if(!r.comments)throw new Error("Comments plugin not found");const i=ut(),o=Td({initialContent:e.body,trailingBlock:!1,dictionary:{...i,placeholders:{emptyDocument:i.placeholders.edit_comment}},schema:r.comments.commentEditorSchema||Rx},[e.body]),s=Ke(),[a,c]=A.useState(!1);if(!r.comments)throw new Error("Comments plugin not found");const u=r.comments.threadStore,f=A.useCallback(()=>{c(!0)},[]),h=A.useCallback(()=>{o.replaceBlocks(o.document,e.body),c(!1)},[o,e.body]),m=A.useCallback(async F=>{await u.updateComment({commentId:e.id,comment:{body:o.document},threadId:t.id}),c(!1)},[e,t.id,o,u]),g=A.useCallback(async()=>{await u.deleteComment({commentId:e.id,threadId:t.id})},[e,t.id,u]),y=A.useCallback(async F=>{u.auth.canAddReaction(e,F)?await u.addReaction({threadId:t.id,commentId:e.id,emoji:F}):u.auth.canDeleteReaction(e,F)&&await u.deleteReaction({threadId:t.id,commentId:e.id,emoji:F})},[u,e,t.id]),E=A.useCallback(async()=>{await u.resolveThread({threadId:t.id})},[t.id,u]),C=A.useCallback(async()=>{await u.unresolveThread({threadId:t.id})},[t.id,u]),S=t1e(r,e.userId);if(!e.body)return null;let N;const _=u.auth.canAddReaction(e),O=u.auth.canDeleteComment(e),M=u.auth.canUpdateComment(e),R=n&&(t.resolved?u.auth.canUnresolveThread(t):u.auth.canResolveThread(t));a||(N=k.jsxs(s.Generic.Toolbar.Root,{className:Sn("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[_&&k.jsx(p6,{onEmojiSelect:F=>y(F.native),children:k.jsx(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.add_reaction,variant:"compact",children:k.jsx(h6,{size:16})},"add-reaction")}),R&&(t.resolved?k.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:C,children:k.jsx(v0e,{size:16})},"reopen"):k.jsx(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.resolve,variant:"compact",onClick:E,children:k.jsx(q0e,{size:16})},"resolve")),(O||M)&&k.jsxs(s.Generic.Menu.Root,{position:"bottom-start",children:[k.jsx(s.Generic.Menu.Trigger,{children:k.jsx(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.more_actions,variant:"compact",children:k.jsx(Q0e,{size:16})},"more-actions")}),k.jsxs(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[M&&k.jsx(s.Generic.Menu.Item,{icon:k.jsx(C0e,{}),onClick:f,children:i.comments.actions.edit_comment},"edit-comment"),O&&k.jsx(s.Generic.Menu.Item,{icon:k.jsx(G0e,{}),onClick:g,children:i.comments.actions.delete_comment},"delete-comment")]})]})]}));const L=e.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!e.body)throw new Error("soft deletes are not yet supported");return k.jsx(s.Comments.Comment,{authorInfo:S??"loading",timeString:L,edited:e.updatedAt.getTime()!==e.createdAt.getTime(),showActions:"hover",actions:N,className:"bn-thread-comment",children:k.jsx(Mx,{autoFocus:a,editor:o,editable:a,actions:e.reactions.length>0||a?({isEmpty:F})=>k.jsxs(k.Fragment,{children:[e.reactions.length>0&&!a&&k.jsxs(s.Generic.Badge.Group,{className:Sn("bn-badge-group","bn-comment-reactions"),children:[e.reactions.map(z=>k.jsx(n1e,{comment:e,emoji:z.emoji,onReactionSelect:y},z.emoji)),_&&k.jsx(p6,{onEmojiSelect:z=>y(z.native),children:k.jsx(s.Generic.Badge.Root,{className:Sn("bn-badge","bn-comment-add-reaction"),text:"+",icon:k.jsx(h6,{size:16}),mainTooltip:i.comments.actions.add_reaction})})]}),a&&k.jsxs(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:Sn("bn-action-toolbar","bn-comment-actions"),children:[k.jsx(s.Generic.Toolbar.Button,{mainTooltip:i.comments.save_button_text,variant:"compact",onClick:m,isDisabled:F,children:i.comments.save_button_text}),k.jsx(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:i.comments.cancel_button_text,variant:"compact",onClick:h,children:i.comments.cancel_button_text})]})]}):void 0})})},i1e=({thread:e,maxCommentsBeforeCollapse:t})=>{const n=Ke(),r=ut(),i=et(),o=Dx(i,e.resolvedBy?[e.resolvedBy]:[]),s=e.comments.map((a,c)=>k.jsx(r1e,{thread:e,comment:a,showResolveButton:c===0},a.id));if(e.resolved&&e.resolvedUpdatedAt&&e.resolvedBy){if(!o.get(e.resolvedBy))throw new Error(`User ${e.resolvedBy} resolved thread ${e.id}, but their data could not be found.`);const a=e.comments.findLastIndex(c=>e.resolvedUpdatedAt.getTime()>c.createdAt.getTime())+1;s.splice(a,0,k.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:e.resolvedBy&&o.get(e.resolvedBy)||"loading",timeString:e.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:k.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return t&&s.length>t&&s.splice(1,s.length-2,k.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(e.comments.length-2)},"expand-prompt")),s},QP=({thread:e,selected:t,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:o,tabIndex:s})=>{const a=Ke(),c=ut(),u=et(),f=u.comments;if(!f)throw new Error("Comments plugin not found");const h=Td({trailingBlock:!1,dictionary:{...c,placeholders:{emptyDocument:c.placeholders.comment_reply}},schema:u.comments.commentEditorSchema||Rx}),m=A.useCallback(async()=>{await f.threadStore.addComment({comment:{body:h.document},threadId:e.id}),h.removeBlocks(h.document)},[f,h,e.id]);return k.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:i,onBlur:o,selected:t,tabIndex:s,children:[k.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:k.jsx(i1e,{thread:e,maxCommentsBeforeCollapse:t?void 0:r||5})}),t&&k.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:k.jsx(Mx,{autoFocus:!1,editable:!0,editor:h,actions:({isEmpty:g})=>g?null:k.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Sn("bn-action-toolbar","bn-comment-actions"),children:k.jsx(a.Generic.Toolbar.Button,{mainTooltip:c.comments.save_button_text,variant:"compact",isDisabled:g,onClick:m,children:c.comments.save_button_text})})})})]})};function o1e(e){const t=e.comments;if(!t)throw new Error("Comments plugin not found");const n=t.threadStore,r=A.useRef(void 0);r.current||(r.current=n.getThreads());const i=A.useCallback(o=>n.subscribe(s=>{r.current=s,o()}),[n]);return A.useSyncExternalStore(i,()=>r.current)}const s1e=e=>{const t=et();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=ta(t.comments.onUpdate.bind(t.comments)),{isMounted:r,ref:i,style:o,getFloatingProps:s,setReference:a}=fl(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[as(10),wc(),go()],onOpenChange:h=>{var m;h||((m=t.comments)==null||m.selectThread(void 0),t.focus())},...e.floatingOptions}),c=A.useCallback(()=>{var h;if(!(n!=null&&n.selectedThreadId))return;const m=(h=t.domElement)==null?void 0:h.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);m&&a(m)},[a,t,n?.selectedThreadId]);A.useEffect(()=>{if(n!=null&&n.selectedThreadId)return t.onChange(()=>{c()})},[t,c,n?.selectedThreadId]),A.useLayoutEffect(c,[c]);const u=o1e(t);if(!r||!n||!n.selectedThreadId)return null;const f=e.floatingThread||QP;return k.jsx("div",{ref:i,style:o,...s(),children:k.jsx(f,{thread:u.get(n.selectedThreadId),selected:!0})})},a1e=e=>{const t=Ke(),n=ut(),{block:r}=e,i=et(),[o,s]=A.useState(""),a=A.useCallback(f=>{s(f.currentTarget.value)},[]),c=A.useCallback(f=>{f.key==="Enter"&&(f.preventDefault(),i.updateBlock(r,{props:{name:AR(o),url:o}}))},[i,r,o]),u=A.useCallback(()=>{i.updateBlock(r,{props:{name:AR(o),url:o}})},[i,r,o]);return k.jsxs(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[k.jsx(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:o,onChange:a,onKeyDown:c,"data-test":"embed-input"}),k.jsx(t.FilePanel.Button,{className:"bn-button",onClick:u,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},l1e=e=>{var t,n;const r=Ke(),i=ut(),{block:o,setLoading:s}=e,a=et(),[c,u]=A.useState(!1);A.useEffect(()=>{c&&setTimeout(()=>{u(!1)},3e3)},[c]);const f=A.useCallback(g=>{if(g===null)return;async function y(E){if(s(!0),a.uploadFile!==void 0)try{let C=await a.uploadFile(E,o.id);typeof C=="string"&&(C={props:{name:E.name,url:C}}),a.updateBlock(o,C)}catch{u(!0)}finally{s(!1)}}y(g)},[o,a,s]),h=a.schema.blockSpecs[o.type],m=(n=(t=h.implementation.meta)==null?void 0:t.fileBlockAccept)!=null&&n.length?h.implementation.meta.fileBlockAccept.join(","):"*/*";return k.jsxs(r.FilePanel.TabPanel,{className:"bn-tab-panel",children:[k.jsx(r.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:m,placeholder:i.file_panel.upload.file_placeholder[o.type]||i.file_panel.upload.file_placeholder.file,value:null,onChange:f}),c&&k.jsx("div",{className:"bn-error-text",children:i.file_panel.upload.upload_error})]})},XP=e=>{const t=Ke(),n=ut(),r=et(),[i,o]=A.useState(!1),s=e.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:k.jsx(l1e,{block:e.block,setLoading:o})}]:[],{name:n.file_panel.embed.title,tabPanel:k.jsx(a1e,{block:e.block})}],[a,c]=A.useState(e.defaultOpenTab||s[0].name);return k.jsx(t.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:c,tabs:s,loading:i})},c1e=e=>{const t=et();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=ta(t.filePanel.onUpdate.bind(t.filePanel)),{isMounted:r,ref:i,style:o,getFloatingProps:s}=fl(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[as(10),go()],onOpenChange:h=>{h||(t.filePanel.closeMenu(),t.focus())},...e.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:c,...u}=n,f=e.filePanel||XP;return k.jsx("div",{ref:i,style:o,...s(),children:k.jsx(f,{...u})})};function u1e(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function hl(e,t){Nx(e,t),Ax(e,t)}function Lx(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Jr(e){const t=_o();if(e||(e=t?.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=e,[r,i]=A.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),o=A.useCallback(()=>{var s;return i(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return hl(o,n),r}const d1e={bold:A0e,italic:O0e,underline:H0e,strike:B0e,code:w0e};function f1e(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&t.schema.styleSchema[e].propSchema==="boolean"}const kg=e=>{const t=ut(),n=Ke(),r=et(),i=f1e(e.basicTextStyle,r),o=Jr(r),[s,a]=A.useState(e.basicTextStyle in r.getActiveStyles());hl(()=>{i&&a(e.basicTextStyle in r.getActiveStyles())},r);const c=f=>{if(r.focus(),!!i){if(r.schema.styleSchema[f].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[f]:!0})}};if(!A.useMemo(()=>i?!!o.find(f=>f.content!==void 0):!1,[i,o])||!r.isEditable)return null;const u=d1e[e.basicTextStyle];return k.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>c(e.basicTextStyle),isSelected:s,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:ui(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:k.jsx(u,{})})},Y2=e=>{const t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,i=A.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return k.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:i,children:"A"})},m6=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Ib=e=>{const t=Ke(),n=ut();return k.jsxs(k.Fragment,{children:[k.jsx(()=>e.text?k.jsxs(k.Fragment,{children:[k.jsx(t.Generic.Menu.Label,{children:n.color_picker.text_title}),m6.map(r=>k.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:k.jsx(Y2,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),k.jsx(()=>e.background?k.jsxs(k.Fragment,{children:[k.jsx(t.Generic.Menu.Label,{children:n.color_picker.background_title}),m6.map(r=>k.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:k.jsx(Y2,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function g6(e,t){return`${e}Color`in t.schema.styleSchema&&t.schema.styleSchema[`${e}Color`].type===`${e}Color`&&t.schema.styleSchema[`${e}Color`].propSchema==="string"}const h1e=()=>{const e=Ke(),t=ut(),n=et(),r=g6("text",n),i=g6("background",n),o=Jr(n),[s,a]=A.useState(r&&n.getActiveStyles().textColor||"default"),[c,u]=A.useState(i&&n.getActiveStyles().backgroundColor||"default");hl(()=>{r&&a(n.getActiveStyles().textColor||"default"),i&&u(n.getActiveStyles().backgroundColor||"default")},n);const f=A.useCallback(m=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");m==="default"?n.removeStyles({textColor:m}):n.addStyles({textColor:m}),setTimeout(()=>{n.focus()})},[n,r]),h=A.useCallback(m=>{if(!i)throw Error("Tried to set background color, but style does not exist in editor schema.");m==="default"?n.removeStyles({backgroundColor:m}):n.addStyles({backgroundColor:m}),setTimeout(()=>{n.focus()})},[i,n]);return!A.useMemo(()=>{if(!r&&!i)return!1;for(const m of o)if(m.content!==void 0)return!0;return!1},[i,o,r])||!n.isEditable?null:k.jsxs(e.Generic.Menu.Root,{children:[k.jsx(e.Generic.Menu.Trigger,{children:k.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:k.jsx(Y2,{textColor:s,backgroundColor:c,size:20})})}),k.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:k.jsx(Ib,{text:r?{color:s,setColor:f}:void 0,background:i?{color:c,setColor:h}:void 0})})]})},b6=e=>{for(const t of xP)if(e.startsWith(t))return e;return`${kP}://${e}`},ZP=e=>{const t=Ke(),n=ut(),{url:r,text:i,editLink:o,showTextField:s}=e,[a,c]=A.useState(r),[u,f]=A.useState(i);A.useEffect(()=>{c(r),f(i)},[i,r]);const h=A.useCallback(E=>{E.key==="Enter"&&(E.preventDefault(),o(b6(a),u))},[o,a,u]),m=A.useCallback(E=>c(E.currentTarget.value),[]),g=A.useCallback(E=>f(E.currentTarget.value),[]),y=A.useCallback(()=>o(b6(a),u),[o,a,u]);return k.jsxs(t.Generic.Form.Root,{children:[k.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:k.jsx(VP,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:h,onChange:m,onSubmit:y}),s!==!1&&k.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:k.jsx(Ox,{}),placeholder:n.link_toolbar.form.title_placeholder,value:u,onKeyDown:h,onChange:g,onSubmit:y})]})};function p1e(e){return"link"in e.schema.inlineContentSchema&&e.schema.inlineContentSchema.link==="link"}const m1e=()=>{const e=et(),t=Ke(),n=ut(),r=p1e(e),i=Jr(e),[o,s]=A.useState(!1),[a,c]=A.useState(e.getSelectedLinkUrl()||""),[u,f]=A.useState(e.getSelectedText());hl(()=>{f(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),A.useEffect(()=>{const g=y=>{(y.ctrlKey||y.metaKey)&&y.key==="k"&&(s(!0),y.preventDefault())};if(!e.headless)return e.prosemirrorView.dom.addEventListener("keydown",g),()=>{e.prosemirrorView.dom.removeEventListener("keydown",g)}},[e.prosemirrorView,e.headless]);const h=A.useCallback(g=>{e.createLink(g),s(!1),e.focus()},[e]),m=e.transact(g=>e2(g.selection));return!A.useMemo(()=>{if(!r)return!1;for(const g of i)if(g.content===void 0)return!1;return!m},[r,i,m])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:k.jsxs(t.Generic.Popover.Root,{opened:o,children:[k.jsx(t.Generic.Popover.Trigger,{children:k.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:n.formatting_toolbar.link.tooltip,mainTooltip:n.formatting_toolbar.link.tooltip,secondaryTooltip:ui(n.formatting_toolbar.link.secondary_tooltip,n.generic.ctrl_shortcut),icon:k.jsx(VP,{}),onClick:()=>s(!0)})}),k.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:k.jsx(ZP,{url:a,text:u,editLink:h,showTextField:!1})})]})},g1e=()=>{const e=ut(),t=Ke(),n=et(),[r,i]=A.useState(),o=Jr(n),s=A.useMemo(()=>{if(o.length!==1)return;const u=o[0];if(hi(u,n,u.type,{url:"string",caption:"string"}))return i(u.props.caption),u},[n,o]),a=A.useCallback(u=>{s&&cn(n,s.type,{caption:"string"})&&u.key==="Enter"&&(u.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),c=A.useCallback(u=>i(u.currentTarget.value),[]);return!s||s.props.url===""||!n.isEditable?null:k.jsxs(t.Generic.Popover.Root,{children:[k.jsx(t.Generic.Popover.Trigger,{children:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:k.jsx(f6,{}),isSelected:s.props.caption!==""})}),k.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:k.jsx(t.Generic.Form.Root,{children:k.jsx(t.Generic.Form.TextInput,{name:"file-caption",icon:k.jsx(f6,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:c})})})]})},b1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),i=A.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(hi(s,n,s.type,{url:"string"}))return s},[n,r]),o=A.useCallback(()=>{n.focus(),n.removeBlocks([i])},[n,i]);return!i||i.props.url===""||!n.isEditable?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:k.jsx(Y0e,{}),onClick:o})},y1e=()=>{const e=ut(),t=Ke(),n=et(),[r,i]=A.useState(),o=Jr(n),s=A.useMemo(()=>{if(o.length!==1)return;const u=o[0];if(hi(u,n,u.type,{url:"string",name:"string"}))return i(u.props.name),u},[n,o]),a=A.useCallback(u=>{s&&cn(n,s.type,{name:"string"})&&u.key==="Enter"&&(u.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),c=A.useCallback(u=>i(u.currentTarget.value),[]);return!s||s.props.name===""||!n.isEditable?null:k.jsxs(t.Generic.Popover.Root,{children:[k.jsx(t.Generic.Popover.Trigger,{children:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:k.jsx(d6,{})})}),k.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:k.jsx(t.Generic.Form.Root,{children:k.jsx(t.Generic.Form.TextInput,{name:"file-name",icon:k.jsx(d6,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:c})})})]})},E1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),[i,o]=A.useState(!1);A.useEffect(()=>{o(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!hi(s,n,s.type,{url:"string"})||!n.isEditable?null:k.jsxs(t.Generic.Popover.Root,{opened:i,position:"bottom",children:[k.jsx(t.Generic.Popover.Trigger,{children:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",onClick:()=>o(!i),isSelected:i,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:k.jsx(z0e,{})})}),k.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:k.jsx(XP,{block:s})})]})},v1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),[i,o]=A.useState(()=>n.canNestBlock());hl(()=>{o(n.canNestBlock())},n);const s=A.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!A.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:ui(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:k.jsx(R0e,{})})},C1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),[i,o]=A.useState(()=>n.canUnnestBlock());hl(()=>{o(n.canUnnestBlock())},n);const s=A.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!A.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:ui(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:k.jsx(M0e,{})})},w1e=e=>[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:Ox,isSelected:t=>t.type==="paragraph"},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:w1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:S1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:T1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3},{name:e.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:jP,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===4},{name:e.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:zP,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===5},{name:e.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:$P,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===6},{name:e.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:w1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:S1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:T1,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.quote.title,type:"quote",icon:WP,isSelected:t=>t.type==="quote"},{name:e.slash_menu.toggle_list.title,type:"toggleListItem",icon:KP,isSelected:t=>t.type==="toggleListItem"},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:GP,isSelected:t=>t.type==="bulletListItem"},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:YP,isSelected:t=>t.type==="numberedListItem"},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:qP,isSelected:t=>t.type==="checkListItem"}],S1e=e=>{const t=Ke(),n=ut(),r=et(),i=Jr(r),[o,s]=A.useState(r.getTextCursorPosition().block),a=A.useMemo(()=>(e.items||w1e(n)).filter(f=>f.type in r.schema.blockSchema),[r,n,e.items]),c=A.useMemo(()=>a.find(f=>f.type===o.type)!==void 0,[o.type,a]),u=A.useMemo(()=>{const f=h=>{r.focus(),r.transact(()=>{for(const m of i)r.updateBlock(m,{type:h.type,props:h.props})})};return a.map(h=>{const m=h.icon;return{text:h.name,icon:k.jsx(m,{size:16}),onClick:()=>f(h),isSelected:h.isSelected(o)}})},[o,a,r,i]);return hl(()=>{s(r.getTextCursorPosition().block)},r),!c||!r.isEditable?null:k.jsx(t.FormattingToolbar.Select,{className:"bn-select",items:u})},T1e=()=>{const e=ut(),t=Ke(),n=et(),r=A.useCallback(()=>{var i;(i=n.comments)==null||i.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:k.jsx(FP,{}),onClick:r}):null},x1e=()=>{const e=ut(),t=Ke(),n=et(),r=A.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:k.jsx(FP,{}),onClick:r})};function G2(e,t){try{const n=new URL(e,t);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const k1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),i=A.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(hi(s,n,s.type,{url:"string"}))return s},[n,r]),o=A.useCallback(()=>{i&&i.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(i.props.url).then(s=>window.open(G2(s,window.location.href))):window.open(G2(i.props.url,window.location.href)))},[n,i]);return!i||i.props.url===""?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,icon:k.jsx(W0e,{}),onClick:o})},_1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),i=A.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(hi(s,n,s.type,{url:"string",showPreview:"boolean"}))return s},[n,r]),o=A.useCallback(()=>{i&&cn(n,i.type,{showPreview:"boolean"})&&n.updateBlock(i,{props:{showPreview:!i.props.showPreview}})},[n,i]);return!i||i.props.url===""||!n.isEditable?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:k.jsx(j0e,{}),isSelected:i.props.showPreview,onClick:o})},A1e=()=>{const e=ut(),t=Ke(),n=et(),r=Jr(n),i=A.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),o=A.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||i===void 0||!n.settings.tables.splitCells?null:k.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:i==="horizontal"?k.jsx(L0e,{}):k.jsx(I0e,{}),onClick:o})},N1e={left:k0e,center:T0e,right:_0e,justify:x0e},WC=e=>{const t=Ke(),n=ut(),r=et(),i=Jr(r),o=A.useMemo(()=>{var c;const u=i[0];if(hi(u,r,u.type,{textAlignment:Ot.textAlignment}))return u.props.textAlignment;if(u.type==="table"){const f=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!f)return;const h=f.cells.map(({row:g,col:y})=>Ja(u.content.rows[g].cells[y]).props.textAlignment),m=h[0];if(h.every(g=>g===m))return m}},[r,i]),s=A.useCallback(c=>{var u;r.focus();for(const f of i)if(hi(f,r,f.type,{textAlignment:Ot.textAlignment})&&cn(r,f.type,{textAlignment:Ot.textAlignment}))r.updateBlock(f,{props:{textAlignment:c}});else if(f.type==="table"){const h=(u=r.tableHandles)==null?void 0:u.getCellSelection();if(!h)continue;const m=f.content.rows.map(g=>({...g,cells:g.cells.map(y=>Ja(y))}));h.cells.forEach(({row:g,col:y})=>{m[g].cells[y].props.textAlignment=c}),r.updateBlock(f,{type:"table",content:{...f.content,type:"tableContent",rows:m}}),r.setTextCursorPosition(f)}},[r,i]);if(!A.useMemo(()=>!!i.find(c=>hi(c,r,c.type,{textAlignment:Ot.textAlignment})||c.type==="table"&&c.children),[r,i])||!r.isEditable)return null;const a=N1e[e.textAlignment];return k.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)}`,onClick:()=>s(e.textAlignment),isSelected:o===e.textAlignment,label:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,icon:k.jsx(a,{})})},JP=e=>[k.jsx(S1e,{items:e},"blockTypeSelect"),k.jsx(A1e,{},"tableCellMergeButton"),k.jsx(g1e,{},"fileCaptionButton"),k.jsx(E1e,{},"replaceFileButton"),k.jsx(y1e,{},"fileRenameButton"),k.jsx(b1e,{},"fileDeleteButton"),k.jsx(k1e,{},"fileDownloadButton"),k.jsx(_1e,{},"filePreviewButton"),k.jsx(kg,{basicTextStyle:"bold"},"boldStyleButton"),k.jsx(kg,{basicTextStyle:"italic"},"italicStyleButton"),k.jsx(kg,{basicTextStyle:"underline"},"underlineStyleButton"),k.jsx(kg,{basicTextStyle:"strike"},"strikeStyleButton"),k.jsx(WC,{textAlignment:"left"},"textAlignLeftButton"),k.jsx(WC,{textAlignment:"center"},"textAlignCenterButton"),k.jsx(WC,{textAlignment:"right"},"textAlignRightButton"),k.jsx(h1e,{},"colorStyleButton"),k.jsx(v1e,{},"nestBlockButton"),k.jsx(C1e,{},"unnestBlockButton"),k.jsx(m1e,{},"createLinkButton"),k.jsx(T1e,{},"addCommentButton"),k.jsx(x1e,{},"addTiptapCommentButton")],e7=e=>{const t=Ke();return k.jsx(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||JP(e.blockTypeSelectItems)})},y6=e=>{switch(e){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},t7=e=>{const t=A.useRef(null),n=et(),[r,i]=A.useState(()=>{const m=n.getTextCursorPosition().block;return"textAlignment"in m.props?y6(m.props.textAlignment):"top-start"});hl(()=>{const m=n.getTextCursorPosition().block;"textAlignment"in m.props?i(y6(m.props.textAlignment)):i("top-start")},n);const o=ta(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:c,getFloatingProps:u}=fl(o?.show||!1,o?.referencePos||null,3e3,{placement:r,middleware:[as(10),wc(),go()],onOpenChange:(m,g)=>{m||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:m=>{var g;const y=(g=n._tiptapEditor)==null?void 0:g.view;return!y||!m.target?!1:!u1e(m,y.dom.parentElement)}},...e.floatingOptions}),f=A.useMemo(()=>Lx([t,a]),[t,a]);if(!s||!o)return null;if(!o.show&&t.current)return k.jsx("div",{ref:f,style:c,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});const h=e.formattingToolbar||e7;return k.jsx("div",{ref:f,style:c,...u(),children:k.jsx(h,{})})},M1e=e=>{const t=Ke(),n=ut();return k.jsx(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:k.jsx(D0e,{})})},R1e=e=>{const t=Ke(),n=ut();return k.jsxs(t.Generic.Popover.Root,{children:[k.jsx(t.Generic.Popover.Trigger,{children:k.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),k.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:k.jsx(ZP,{...e})})]})},O1e=e=>{const t=Ke(),n=ut();return k.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(G2(e.url,window.location.href),"_blank")},icon:k.jsx(K0e,{})})},D1e=e=>{const t=Ke();return k.jsx(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:e.children||k.jsxs(k.Fragment,{children:[k.jsx(R1e,{url:e.url,text:e.text,editLink:e.editLink}),k.jsx(O1e,{url:e.url}),k.jsx(M1e,{deleteLink:e.deleteLink})]})})},L1e=e=>{const t=et(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=ta(t.linkToolbar.onUpdate.bind(t.linkToolbar)),{isMounted:i,ref:o,style:s,getFloatingProps:a}=fl(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[as(10),go()],onOpenChange:m=>{m||(t.linkToolbar.closeMenu(),t.focus())},...e.floatingOptions});if(!i||!r)return null;const{show:c,referencePos:u,...f}=r,h=e.linkToolbar||D1e;return k.jsx("div",{ref:o,style:s,...a(),children:k.jsx(h,{...f,...n})})};function I1e(e){return Qe({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}const B1e=e=>{const t=Ke(),n=ut(),r=et(),i=A.useCallback(()=>{const o=e.block.content;if(o!==void 0&&Array.isArray(o)&&o.length===0)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,e.block]);return k.jsx(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:k.jsx(I1e,{size:24,onClick:i,"data-test":"dragHandleAdd"})})};function n7(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function P1e(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}const H1e=e=>{const t=Ke(),n=et(),r=e.block;return!hi(r,n,r.type,{textColor:"string"})&&!hi(r,n,r.type,{backgroundColor:"string"})?null:k.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[k.jsx(t.Generic.Menu.Trigger,{sub:!0,children:k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),k.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:k.jsx(Ib,{iconSize:18,text:hi(r,n,r.type,{textColor:"string"})&&cn(n,r.type,{textColor:"string"})?{color:r.props.textColor,setColor:i=>n.updateBlock(r,{type:r.type,props:{textColor:i}})}:void 0,background:hi(r,n,r.type,{backgroundColor:"string"})&&cn(n,r.type,{backgroundColor:"string"})?{color:r.props.backgroundColor,setColor:i=>n.updateBlock(r,{props:{backgroundColor:i}})}:void 0})})]})},U1e=e=>{const t=Ke(),n=et();return k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([e.block]),children:e.children})},F1e=e=>{const t=Ke(),n=et();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerRows;return k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const i=n.getBlock(e.block.id);i&&n.updateBlock(i,{...i,content:{...i.content,headerRows:r?void 0:1}})},children:e.children})},j1e=e=>{const t=Ke(),n=et();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerCols;return k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(e.block,{type:"table",content:{...e.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:e.children})},z1e=e=>{const t=Ke(),n=ut();return k.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||k.jsxs(k.Fragment,{children:[k.jsx(U1e,{...e,children:n.drag_handle.delete_menuitem}),k.jsx(H1e,{...e,children:n.drag_handle.colors_menuitem}),k.jsx(F1e,{...e,children:n.drag_handle.header_row_menuitem}),k.jsx(j1e,{...e,children:n.drag_handle.header_column_menuitem})]})})},$1e=e=>{const t=Ke(),n=ut(),r=e.dragHandleMenu||z1e;return k.jsxs(t.Generic.Menu.Root,{onOpenChange:i=>{i?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[k.jsx(t.Generic.Menu.Trigger,{children:k.jsx(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:i=>e.blockDragStart(i,e.block),onDragEnd:e.blockDragEnd,className:"bn-button",icon:k.jsx(n7,{size:24,"data-test":"dragHandle"})})}),k.jsx(r,{block:e.block,children:e.children})]})},V1e=e=>{const t=Ke(),n=A.useMemo(()=>{var r;const i={"data-block-type":e.block.type};return e.block.type==="heading"&&(i["data-level"]=e.block.props.level.toString()),(r=e.editor.schema.blockSpecs[e.block.type].implementation.meta)!=null&&r.fileBlockAccept&&(e.block.props.url?i["data-url"]="true":i["data-url"]="false"),i},[e.block.props,e.block.type,e.editor.schema.blockSpecs]);return k.jsx(t.SideMenu.Root,{className:"bn-side-menu",...n,children:e.children||k.jsxs(k.Fragment,{children:[k.jsx(B1e,{...e}),k.jsx($1e,{...e})]})})},q1e=e=>{const t=et(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=ta(t.sideMenu.onUpdate.bind(t.sideMenu)),{isMounted:i,ref:o,style:s,getFloatingProps:a}=fl(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...e.floatingOptions});if(!i||!r)return null;const{show:c,referencePos:u,...f}=r,h=e.sideMenu||V1e;return k.jsx("div",{ref:o,style:s,...a(),children:k.jsx(h,{...f,...n,editor:t})})};async function Y1e(e,t){return(await a0e(e,t)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function G1e(e){const t=Ke(),n=ut(),{items:r,loadingState:i,selectedIndex:o,onItemClick:s,columns:a}=e,c=i==="loading-initial"||i==="loading"?k.jsx(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,u=A.useMemo(()=>{const f=[];for(let h=0;h<r.length;h++){const m=r[h];f.push(k.jsx(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:m,id:`bn-grid-suggestion-menu-item-${h}`,isSelected:h===o,onClick:()=>s?.(m)},m.id))}return f},[t,r,s,o]);return k.jsxs(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[c,u,u.length===0&&e.loadingState==="loaded"&&k.jsx(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function r7(e,t,n,r=3){const i=A.useRef(0);A.useEffect(()=>{t!==void 0&&(e.length>0?i.current=t.length:t.length-i.current>r&&n())},[n,r,e.length,t])}function i7(e,t){const[n,r]=A.useState([]),[i,o]=A.useState(!1),s=A.useRef(void 0),a=A.useRef(void 0);return A.useEffect(()=>{const c=e;s.current=e,o(!0),t(e).then(u=>{s.current===c&&(r(u),o(!1),a.current=c)})},[e,t]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":i?"loading":"loaded"}}function W1e(e,t,n,r,i){const[o,s]=A.useState(0),a=r!==void 0&&r>1;return A.useEffect(()=>{var c;const u=f=>(f.key==="ArrowLeft"&&(f.preventDefault(),n.length&&s((o-1+n.length)%n.length)),f.key==="ArrowRight"&&(f.preventDefault(),n.length&&s((o+1+n.length)%n.length)),f.key==="ArrowUp"?(f.preventDefault(),n.length&&s((o-r+n.length)%n.length),!0):f.key==="ArrowDown"?(f.preventDefault(),n.length&&s((o+r)%n.length),!0):f.key==="Enter"&&!f.isComposing?(f.stopPropagation(),f.preventDefault(),n.length&&i?.(n[o]),!0):!1);return(c=e.domElement)==null||c.addEventListener("keydown",u,!0),()=>{var f;(f=e.domElement)==null||f.removeEventListener("keydown",u,!0)}},[e.domElement,n,o,i,r,a]),A.useEffect(()=>{s(0)},[t]),{selectedIndex:n.length===0?void 0:o}}function K1e(e){const t=_o().setContentEditableProps,n=et(),{getItems:r,gridSuggestionMenuComponent:i,query:o,clearQuery:s,closeMenu:a,onItemClick:c,columns:u}=e,f=A.useCallback(E=>{a(),s(),c?.(E)},[c,a,s]),{items:h,usedQuery:m,loadingState:g}=i7(o,r);r7(h,m,a);const{selectedIndex:y}=W1e(n,o,h,u,f);return A.useEffect(()=>(t(E=>({...E,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(E=>({...E,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),A.useEffect(()=>(t(E=>({...E,"aria-activedescendant":y?"bn-suggestion-menu-item-"+y:void 0})),()=>{t(E=>({...E,"aria-activedescendant":void 0}))}),[t,y]),k.jsx(i,{items:h,onItemClick:f,loadingState:g,selectedIndex:y,columns:u})}function Q1e(e){const t=et(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:i,minQueryLength:o,onItemClick:s,getItems:a,floatingOptions:c}=e,u=A.useMemo(()=>s||(N=>{N.onItemClick(t)}),[t,s]),f=A.useMemo(()=>a||(async N=>await Y1e(t,N)),[t,a]),h={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},m=A.useCallback(N=>t.suggestionMenus.onUpdate(n,N),[t.suggestionMenus,n]),g=ta(m),{isMounted:y,ref:E,style:C,getFloatingProps:S}=fl(g?.show||!1,g?.referencePos||null,2e3,{placement:"bottom-start",middleware:[as(10),go(),z1({apply({availableHeight:N,elements:_}){Object.assign(_.floating.style,{maxHeight:`${N-10}px`})}})],onOpenChange(N){N||t.suggestionMenus.closeMenu()},...c});return!y||!g||!(g!=null&&g.ignoreQueryLength)&&o&&(g.query.startsWith(" ")||g.query.length<o)?null:k.jsx("div",{ref:E,style:C,...S(),children:k.jsx(K1e,{query:g.query,closeMenu:h.closeMenu,clearQuery:h.clearQuery,getItems:f,columns:i,gridSuggestionMenuComponent:r||G1e,onItemClick:u})})}function X1e(e){const t=Ke(),n=ut(),{items:r,loadingState:i,selectedIndex:o,onItemClick:s}=e,a=i==="loading-initial"||i==="loading"?k.jsx(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,c=A.useMemo(()=>{let u;const f=[];for(let h=0;h<r.length;h++){const m=r[h];m.group!==u&&(u=m.group,f.push(k.jsx(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:u},u))),f.push(k.jsx(t.SuggestionMenu.Item,{className:Sn("bn-suggestion-menu-item",m.size==="small"?"bn-suggestion-menu-item-small":""),item:m,id:`bn-suggestion-menu-item-${h}`,isSelected:h===o,onClick:()=>s?.(m)},m.title))}return f},[t,r,s,o]);return k.jsxs(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[c,c.length===0&&(e.loadingState==="loading"||e.loadingState==="loaded")&&k.jsx(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function Z1e(e,t){const[n,r]=A.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:i=>{if(i.key==="ArrowUp")return i.preventDefault(),e.length&&r((n-1+e.length)%e.length),!0;if(i.key==="ArrowDown")return i.preventDefault(),e.length&&r((n+1)%e.length),!0;const o=J1e(i)?i.nativeEvent.isComposing:i.isComposing;return i.key==="Enter"&&!o?(i.preventDefault(),i.stopPropagation(),e.length&&t?.(e[n]),!0):!1}}}function J1e(e){return e.nativeEvent!==void 0}function ebe(e,t,n,r,i){const{selectedIndex:o,setSelectedIndex:s,handler:a}=Z1e(n,r);return A.useEffect(()=>{var c;return(c=e.domElement)==null||c.addEventListener("keydown",a,!0),()=>{var u;(u=e.domElement)==null||u.removeEventListener("keydown",a,!0)}},[e.domElement,n,o,r,i,a]),A.useEffect(()=>{s(0)},[t,s]),{selectedIndex:n.length===0?void 0:o}}function tbe(e){const t=_o().setContentEditableProps,n=et(),{getItems:r,suggestionMenuComponent:i,query:o,clearQuery:s,closeMenu:a,onItemClick:c}=e,u=A.useCallback(y=>{a(),s(),c?.(y)},[c,a,s]),{items:f,usedQuery:h,loadingState:m}=i7(o,r);r7(f,h,a);const{selectedIndex:g}=ebe(n,o,f,u);return A.useEffect(()=>(t(y=>({...y,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(y=>({...y,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),A.useEffect(()=>(t(y=>({...y,"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})),()=>{t(y=>({...y,"aria-activedescendant":void 0}))}),[t,g]),k.jsx(i,{items:f,onItemClick:u,loadingState:m,selectedIndex:g})}const nbe={heading:w1,heading_2:S1,heading_3:T1,heading_4:jP,heading_5:zP,heading_6:$P,toggle_heading:w1,toggle_heading_2:S1,toggle_heading_3:T1,quote:WP,toggle_list:KP,numbered_list:YP,bullet_list:GP,check_list:qP,paragraph:Ox,table:P0e,image:F0e,video:U0e,audio:$0e,file:S0e,emoji:Z0e,code_block:N0e,divider:X0e};function rbe(e){return YZ(e).map(t=>{const n=nbe[t.key];return{...t,icon:k.jsx(n,{size:18})}})}function ibe(e){const t=et(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:i,onItemClick:o,getItems:s,floatingOptions:a}=e,c=A.useMemo(()=>o||(S=>{S.onItemClick(t)}),[t,o]),u=A.useMemo(()=>s||(async S=>GZ(rbe(t),S)),[t,s]),f={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},h=A.useCallback(S=>t.suggestionMenus.onUpdate(n,S),[t.suggestionMenus,n]),m=ta(h),{isMounted:g,ref:y,style:E,getFloatingProps:C}=fl(m?.show||!1,m?.referencePos||null,2e3,{placement:"bottom-start",middleware:[as(10),go({mainAxis:!0,crossAxis:!1}),wc(),z1({apply({availableHeight:S,elements:N}){Object.assign(N.floating.style,{maxHeight:`${S-10}px`,minHeight:"300px"})}})],onOpenChange(S){S||t.suggestionMenus.closeMenu()},...a});return!g||!m||!(m!=null&&m.ignoreQueryLength)&&i&&(m.query.startsWith(" ")||m.query.length<i)?null:k.jsx("div",{ref:y,style:E,...C(),onMouseDown:S=>S.preventDefault(),children:k.jsx(tbe,{query:m.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:u,suggestionMenuComponent:r||X1e,onItemClick:c})})}const obe=(e,t=.3)=>{const n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)},sbe=e=>{const t=Ke(),n=A.useRef(!1),[r,i]=A.useState(),o=A.useCallback(a=>{e.onMouseDown(),i({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,e.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:e.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[e]),s=A.useCallback(()=>{n.current||e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)}})},[e.block,e.orientation,e.editor]);return A.useEffect(()=>{const a=c=>{var u,f;if(!r)throw new Error("editingState is undefined");n.current=!0;const h=(e.orientation==="addOrRemoveColumns"?c.clientX:c.clientY)-r.startPos,m=e.orientation==="addOrRemoveColumns"?((u=r.originalCroppedContent.rows[0])==null?void 0:u.cells.length)??0:r.originalCroppedContent.rows.length,g=e.orientation==="addOrRemoveColumns"?((f=r.originalContent.rows[0])==null?void 0:f.cells.length)??0:r.originalContent.rows.length,y=e.orientation==="addOrRemoveColumns"?e.block.content.rows[0].cells.length:e.block.content.rows.length,E=g+obe(h/(e.orientation==="addOrRemoveColumns"?dT:OZ),.3);E>=m&&E>0&&E!==y&&(e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",E-m):e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",E-m)}}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,e.block,e.editor,e.orientation]),A.useEffect(()=>{const a=e.onMouseUp,c=()=>{i(void 0),a()};return r&&window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[r,e.onMouseUp]),e.editor.isEditable?k.jsx(t.TableHandle.ExtendButton,{className:Sn("bn-extend-button",e.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:o,children:e.children||k.jsx(V0e,{size:18,"data-test":"extendButton"})}):null},E6=e=>{const t=Ke(),n=ut(),r=et().tableHandles;return r?k.jsx(t.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(e.index,e.orientation==="row"?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle[`add_${e.side}_menuitem`]}):null},abe=e=>{const t=Ke(),n=ut(),r=et().tableHandles;return r?k.jsx(t.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(e.index,e.orientation)},children:e.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},lbe=e=>{const t=Ke(),n=ut(),r=et(),i=r.tableHandles,o=A.useMemo(()=>!i||!e.block?[]:e.orientation==="row"?i.getCellsAtRowHandle(e.block,e.index):i.getCellsAtColumnHandle(e.block,e.index),[e.block,e.index,e.orientation,i]),s=(c,u)=>{const f=e.block.content.rows.map(h=>({...h,cells:h.cells.map(m=>Ja(m))}));o.forEach(({row:h,col:m})=>{u==="text"?f[h].cells[m].props.textColor=c:f[h].cells[m].props.backgroundColor=c}),r.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:f}}),r.setTextCursorPosition(e.block)};if(!o||!o[0]||!i||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Ja(o[0].cell);return k.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[k.jsx(t.Generic.Menu.Trigger,{sub:!0,children:k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),k.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:k.jsx(Ib,{iconSize:18,text:r.settings.tables.cellTextColor?{color:o.every(({cell:c})=>el(c)&&c.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:c=>{s(c,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:o.every(({cell:c})=>el(c)&&c.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:c=>s(c,"background")}:void 0})})]})},cbe=e=>{const t=Ke(),n=ut(),r=et();if(!r.tableHandles||e.index!==0||e.orientation!=="row"||!r.settings.tables.headers)return null;const i=!!e.block.content.headerRows;return k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:i,onClick:()=>{const o=r.getBlock(e.block.id);o&&r.updateBlock(o,{...o,content:{...o.content,headerRows:i?void 0:1}})},children:n.drag_handle.header_row_menuitem})},ube=e=>{const t=Ke(),n=ut(),r=et();if(!r.tableHandles||e.index!==0||e.orientation!=="column"||!r.settings.tables.headers)return null;const i=!!e.block.content.headerCols;return k.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:i,onClick:()=>{const o=r.getBlock(e.block.id);o&&r.updateBlock(o,{...o,content:{...o.content,headerCols:i?void 0:1}})},children:n.drag_handle.header_column_menuitem})},dbe=e=>{const t=Ke();return k.jsx(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||k.jsxs(k.Fragment,{children:[k.jsx(abe,{orientation:e.orientation,block:e.block,index:e.index}),k.jsx(E6,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"above":"left"}),k.jsx(E6,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"below":"right"}),k.jsx(cbe,{orientation:e.orientation,block:e.block,index:e.index}),k.jsx(ube,{orientation:e.orientation,block:e.block,index:e.index}),k.jsx(lbe,{orientation:e.orientation,block:e.block,index:e.index})]})})},fbe=e=>{const t=Ke(),[n,r]=A.useState(!1),i=e.tableHandleMenu||dbe,o=A.useMemo(()=>{const s=e.editor.tableHandles;return!s||!e.block||e.block.type!=="table"?!1:e.orientation==="column"?s.getCellsAtColumnHandle(e.block,e.index).every(({cell:a})=>fc(a)===1):s.getCellsAtRowHandle(e.block,e.index).every(({cell:a})=>Rh(a)===1)},[e.block,e.editor.tableHandles,e.index,e.orientation]);return k.jsxs(t.Generic.Menu.Root,{onOpenChange:s=>{s?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[k.jsx(t.Generic.Menu.Trigger,{children:k.jsx(t.TableHandle.Root,{className:Sn("bn-table-handle",n?"bn-table-handle-dragging":"",o?"":"bn-table-handle-not-draggable"),draggable:o,onDragStart:s=>{r(!0),e.dragStart(s)},onDragEnd:()=>{e.dragEnd(),r(!1)},style:e.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:e.children||k.jsx(n7,{size:24,"data-test":"tableHandle"})})}),Xo.createPortal(k.jsx(i,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function v6(e,t,n){const{refs:r,update:i,context:o,floatingStyles:s}=hd({open:t,placement:e==="addOrRemoveColumns"?"right":"bottom",middleware:[z1({apply({rects:u,elements:f}){Object.assign(f.floating.style,e==="addOrRemoveColumns"?{height:`${u.reference.height}px`}:{width:`${u.reference.width}px`})}})]}),{isMounted:a,styles:c}=ES(o);return A.useEffect(()=>{i()},[n,i]),A.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[e,n,r]),A.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...c,...s}}),[s,a,r.setFloating,c])}function hbe(e,t,n){const r=v6("addOrRemoveRows",t,n),i=v6("addOrRemoveColumns",e,n);return A.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:i}),[i,r])}function pbe(e,t,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function mbe(e,t,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function gbe(e){return new DOMRect(e.x,e.y,e.width,0)}function KC(e,t,n,r,i){const{refs:o,update:s,context:a,floatingStyles:c}=hd({open:t,placement:e==="row"?"left":e==="col"?"top":"bottom-end",middleware:[as(e==="row"?-10:e==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:u,styles:f}=ES(a);return A.useEffect(()=>{s()},[n,r,s]),A.useEffect(()=>{n===null||r===null||i&&e==="cell"||o.setReference({getBoundingClientRect:()=>(e==="row"?pbe:e==="col"?mbe:gbe)(n,r,i)})},[i,e,n,r,o]),A.useMemo(()=>({isMounted:u,ref:o.setFloating,style:{display:"flex",...f,...c}}),[c,u,o.setFloating,f])}function bbe(e,t,n,r){const i=KC("row",e,t,n,r),o=KC("col",e,t,n,r),s=KC("cell",e,t,n,r);return A.useMemo(()=>({rowHandle:i,colHandle:o,cellHandle:s}),[o,i,s])}const ybe=e=>{var t,n;const r=Ke(),i=ut(),o=et(),s=(c,u)=>{const f=e.block.content.rows.map(h=>({...h,cells:h.cells.map(m=>Ja(m))}));u==="text"?f[e.rowIndex].cells[e.colIndex].props.textColor=c:f[e.rowIndex].cells[e.colIndex].props.backgroundColor=c,o.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:f}}),o.setTextCursorPosition(e.block)},a=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!a||o.settings.tables.cellTextColor===!1&&o.settings.tables.cellBackgroundColor===!1?null:k.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[k.jsx(r.Generic.Menu.Trigger,{sub:!0,children:k.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||i.drag_handle.colors_menuitem})}),k.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:k.jsx(Ib,{iconSize:18,text:o.settings.tables.cellTextColor?{color:el(a)?a.props.textColor:"default",setColor:c=>s(c,"text")}:void 0,background:o.settings.tables.cellBackgroundColor?{color:el(a)?a.props.backgroundColor:"default",setColor:c=>s(c,"background")}:void 0})})]})},Ebe=e=>{var t,n;const r=Ke(),i=ut(),o=et(),s=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!s||!el(s)||Rh(s)===1&&fc(s)===1||!o.settings.tables.splitCells?null:k.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=o.tableHandles)==null||a.splitCell({row:e.rowIndex,col:e.colIndex})},children:i.table_handle.split_cell_menuitem})},vbe=e=>{const t=Ke();return k.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-table-handle-menu",children:e.children||k.jsxs(k.Fragment,{children:[k.jsx(Ebe,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),k.jsx(ybe,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},Cbe=e=>{const t=Ke(),n=e.tableCellMenu||vbe;return!e.editor.settings.tables.splitCells&&!e.editor.settings.tables.cellBackgroundColor&&!e.editor.settings.tables.cellTextColor?null:k.jsxs(t.Generic.Menu.Root,{onOpenChange:r=>{r?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[k.jsx(t.Generic.Menu.Trigger,{children:k.jsx(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||k.jsx(P1e,{size:12,"data-test":"tableCellHandle"})})}),Xo.createPortal(k.jsx(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]})},wbe=e=>{var t,n;const r=et(),[i,o]=A.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:c}=s,u=A.useCallback(()=>{a(),M(!0),_(!0)},[a]),f=A.useCallback(()=>{c(),M(!1),_(!1)},[c]),h=ta(r.tableHandles.onUpdate.bind(r.tableHandles)),m=A.useMemo(()=>{var z,B;return h!=null&&h.draggingState?{draggedCellOrientation:(z=h?.draggingState)==null?void 0:z.draggedCellOrientation,mousePos:(B=h?.draggingState)==null?void 0:B.mousePos}:void 0},[h?.draggingState,(t=h?.draggingState)==null?void 0:t.draggedCellOrientation,(n=h?.draggingState)==null?void 0:n.mousePos]),{rowHandle:g,colHandle:y,cellHandle:E}=bbe(h?.show||!1,h?.referencePosCell||null,h?.referencePosTable||null,m),{addOrRemoveColumnsButton:C,addOrRemoveRowsButton:S}=hbe(h?.showAddOrRemoveColumnsButton||!1,h?.showAddOrRemoveRowsButton||!1,h?.referencePosTable||null),[N,_]=A.useState(!1),[O,M]=A.useState(!1);if(!h)return null;const R=e.tableHandle||fbe,L=e.extendButton||sbe,F=e.tableCellHandle||Cbe;return k.jsxs(k.Fragment,{children:[k.jsx("div",{ref:o}),k.jsxs(LV,{root:h.widgetContainer,children:[!N&&i&&g.isMounted&&h.rowIndex!==void 0&&k.jsx("div",{ref:g.ref,style:g.style,children:k.jsx(R,{editor:r,orientation:"row",showOtherSide:()=>M(!1),hideOtherSide:()=>M(!0),index:h.rowIndex,block:h.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),!O&&i&&y.isMounted&&h.colIndex!==void 0&&k.jsx("div",{ref:y.ref,style:y.style,children:k.jsx(R,{editor:r,orientation:"column",showOtherSide:()=>_(!1),hideOtherSide:()=>_(!0),index:h.colIndex,block:h.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),i&&E.isMounted&&h.colIndex!==void 0&&h.rowIndex!==void 0&&k.jsx("div",{ref:E.ref,style:E.style,children:k.jsx(F,{editor:r,block:h.block,rowIndex:h.rowIndex,colIndex:h.colIndex,menuContainer:i,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),k.jsx("div",{ref:S.ref,style:S.style,children:k.jsx(L,{editor:r,orientation:"addOrRemoveRows",block:h.block,onMouseDown:u,onMouseUp:f})}),k.jsx("div",{ref:C.ref,style:C.style,children:k.jsx(L,{editor:r,orientation:"addOrRemoveColumns",block:h.block,onMouseDown:u,onMouseUp:f})})]})]})};function Sbe(e){const t=et();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return k.jsxs(k.Fragment,{children:[e.formattingToolbar!==!1&&k.jsx(t7,{}),e.linkToolbar!==!1&&k.jsx(L1e,{}),e.slashMenu!==!1&&k.jsx(ibe,{triggerCharacter:"/"}),e.emojiPicker!==!1&&k.jsx(Q1e,{triggerCharacter:":",columns:10,minQueryLength:2}),e.sideMenu!==!1&&k.jsx(q1e,{}),t.filePanel&&e.filePanel!==!1&&k.jsx(c1e,{}),t.tableHandles&&e.tableHandles!==!1&&k.jsx(wbe,{}),t.comments&&e.comments!==!1&&k.jsxs(k.Fragment,{children:[k.jsx(f0e,{}),k.jsx(s1e,{})]})]})}const o7=()=>{const e=A.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),t=A.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=e?.matches,r=t?.matches,[i,o]=A.useState(n?"dark":r?"light":"no-preference");return A.useEffect(()=>{o(n?"dark":r?"light":"no-preference")},[n,r]),A.useEffect(()=>{if(typeof e?.addEventListener=="function"){const s=({matches:c})=>c&&o("dark"),a=({matches:c})=>c&&o("light");return e?.addEventListener("change",s),t?.addEventListener("change",a),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",a)}}else{const s=()=>o(e.matches?"dark":t.matches?"light":"no-preference");return e?.addEventListener("change",s),t?.addEventListener("change",s),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",s)}}},[e,t]),i},s7=A.createContext(void 0);function Tbe(){return A.useContext(s7)}function xbe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Xo.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}const kbe=({contentComponent:e})=>{const t=A.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return k.jsx(k.Fragment,{children:Object.values(t)})},_be=A.forwardRef((e,t)=>{const[n,r]=A.useState();return A.useImperativeHandle(t,()=>(i,o)=>{Xo.flushSync(()=>{r({node:i,container:o})}),r(void 0)},[]),k.jsx(k.Fragment,{children:n&&Xo.createPortal(n.node,n.container)})}),C6=()=>{};function Abe(e,t){const{editor:n,className:r,theme:i,children:o,editable:s,onSelectionChange:a,onChange:c,formattingToolbar:u,linkToolbar:f,slashMenu:h,emojiPicker:m,sideMenu:g,filePanel:y,tableHandles:E,comments:C,autoFocus:S,renderEditor:N=!0,..._}=e,[O,M]=A.useState(),R=_o(),L=o7(),F=R?.colorSchemePreference||L,z=i||(F==="dark"?"dark":"light");Nx(c||C6,n),Ax(a||C6,n),A.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const B=A.useCallback(re=>{n.elementRenderer=re},[n]),U=A.useMemo(()=>({...R,editor:n,setContentEditableProps:M,colorSchemePreference:z}),[R,n,z]),q=A.useMemo(()=>({editorProps:{autoFocus:S,contentEditableProps:O},defaultUIProps:{formattingToolbar:u,linkToolbar:f,slashMenu:h,emojiPicker:m,sideMenu:g,filePanel:y,tableHandles:E,comments:C}}),[S,O,u,f,h,m,g,y,E,C]);return k.jsx(BP.Provider,{value:U,children:k.jsxs(s7.Provider,{value:q,children:[k.jsx(_be,{ref:B}),k.jsx(Nbe,{className:r,renderEditor:N,editable:s,editorColorScheme:z,ref:t,..._,children:o})]})})}const Nbe=Tn.forwardRef(({className:e,renderEditor:t,editable:n,editorColorScheme:r,children:i,...o},s)=>k.jsx("div",{className:Sn("bn-container",r,e),"data-color-scheme":r,...o,ref:s,children:t?k.jsx(Rbe,{editable:n,children:i}):i})),Mbe=Tn.forwardRef(Abe),Rbe=e=>{const t=Tbe(),n=et(),r=A.useMemo(()=>xbe(),[]),i=A.useCallback(o=>{e.editable!==void 0&&e.editable!==n.isEditable&&(n.isEditable=e.editable),n._tiptapEditor.contentComponent=r,o?n.mount(o):n.unmount()},[n,r,e.editable]);return k.jsxs(k.Fragment,{children:[k.jsx(kbe,{contentComponent:r}),k.jsx(Obe,{...t.editorProps,...e,mount:i}),k.jsx(Sbe,{...t.defaultUIProps}),e.children]})},Obe=e=>{const{autoFocus:t,mount:n,contentEditableProps:r}=e;return k.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n,...r})};Tn.memo(({thread:e,selectedThreadId:t,editor:n,maxCommentsBeforeCollapse:r,referenceText:i})=>{const o=A.useCallback(a=>{var c;a.target.closest(".bn-action-toolbar")||(c=n.comments)==null||c.selectThread(e.id)},[n.comments,e.id]),s=A.useCallback(a=>{var c;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const u=a.target instanceof Node?a.target:null,f=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!u||!f||!f.contains(u))&&((c=n.comments)==null||c.selectThread(void 0))},[n.comments]);return k.jsx(QP,{thread:e,selected:e.id===t,referenceText:i,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:s,tabIndex:0})});function a7(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.top<r.top,o=n.bottom>r.bottom;return i&&o?"both":i?"top":o?"bottom":"none"}function Ko(e){return Object.keys(e)}function QC(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Ix(e,t){const n={...e},r=t;return QC(e)&&QC(t)&&Object.keys(t).forEach(i=>{QC(r[i])&&i in e?n[i]=Ix(n[i],r[i]):n[i]=r[i]}),n}function Dbe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Lbe(e){return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function Ibe(e){const t=Lbe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function w6(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function l7(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?w6(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");const i=r.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${e}`;return t?w6(o):o}}return r}return n}const ke=l7("rem",{shouldScale:!0}),S6=l7("em");function Bb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function c7(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function xd(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==A.Fragment:!1}function Pb(e){const t=A.createContext(null);return[({children:i,value:o})=>k.jsx(t.Provider,{value:o,children:i}),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function Hb(e=null){const t=A.createContext(e);return[({children:i,value:o})=>k.jsx(t.Provider,{value:o,children:i}),()=>A.useContext(t)]}function T6(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function x1(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function Bbe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function Pbe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Hbe(e,t,n){return x1(e,n)===x1(t,n)}function Bx({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:o="rtl",orientation:s}){return a=>{n?.(a);const c=Array.from(x1(a.currentTarget,e)?.querySelectorAll(t)||[]).filter(y=>Hbe(a.currentTarget,y,e)),u=c.findIndex(y=>a.currentTarget===y),f=Pbe(u,c,r),h=Bbe(u,c,r),m=o==="rtl"?h:f,g=o==="rtl"?f:h;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[m].focus(),i&&c[m].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[g].focus(),i&&c[g].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[h].focus(),i&&c[h].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[f].focus(),i&&c[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!c[0].disabled&&c[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const y=c.length-1;!c[y].disabled&&c[y].focus();break}}}}const Ube={app:100,modal:200,popover:300,overlay:400,max:9999};function xp(e){return Ube[e]}const Fbe=()=>{};function jbe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Fbe:n=>{n.key==="Escape"&&(e(n),t.onTrigger?.())}}function nn(e,t="size",n=!0){if(e!==void 0)return c7(e)?n?ke(e):e:`var(--${t}-${e})`}function kp(e){return nn(e,"mantine-spacing")}function vr(e){return e===void 0?"var(--mantine-radius-default)":nn(e,"mantine-radius")}function Qr(e){return nn(e,"mantine-font-size")}function zbe(e){return nn(e,"mantine-line-height",!1)}function u7(e){if(e)return nn(e,"mantine-shadow",!1)}function Yr(e,t){return n=>{e?.(n),t?.(n)}}function $be(e,t,n){return n?Array.from(x1(n,t)?.querySelectorAll(e)||[]).findIndex(r=>r===n):null}function Vbe(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}const qbe=["mousedown","touchstart"];function Ybe(e,t,n){const r=A.useRef(null),i=t||qbe;return A.useEffect(()=>{const o=s=>{const{target:a}=s??{};if(Array.isArray(n)){const c=!document.body.contains(a)&&a?.tagName!=="HTML";n.every(f=>!!f&&!s.composedPath().includes(f))&&!c&&e(s)}else r.current&&!r.current.contains(a)&&e(s)};return i.forEach(s=>document.addEventListener(s,o)),()=>{i.forEach(s=>document.removeEventListener(s,o))}},[r,e,n]),r}function Gbe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Wbe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Kbe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?t:Wbe(e));return A.useEffect(()=>{try{const o=window.matchMedia(e);return i(o.matches),Gbe(o,s=>i(s.matches))}catch{return}},[e]),r||!1}const Ub=typeof document<"u"?A.useLayoutEffect:A.useEffect;function $u(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Qbe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return $u(()=>{let i=-1;const o=s=>{s.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",o),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",o)}},[e,t]),r}const Xbe=/input|select|textarea|button|object/,d7="a, input, select, textarea, button, object, [tabindex]";function Zbe(e){return e.style.display==="none"}function Jbe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Zbe(n))return!1;n=n.parentNode}return!0}function f7(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function W2(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(f7(e));return(Xbe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Jbe(e)}function h7(e){const t=f7(e);return(Number.isNaN(t)||t>=0)&&W2(e)}function eye(e){return Array.from(e.querySelectorAll(d7)).filter(h7)}function tye(e,t){const n=eye(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let o=r===i.activeElement||e===i.activeElement;const s=i.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(o=n.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===s.getAttribute("name")).includes(r)),!o)return;t.preventDefault();const c=n[t.shiftKey?n.length-1:0];c&&c.focus()}function p7(e=!0){const t=A.useRef(null),n=i=>{let o=i.querySelector("[data-autofocus]");if(!o){const s=Array.from(i.querySelectorAll(d7));o=s.find(h7)||s.find(W2)||null,!o&&W2(i)&&(o=i)}o&&o.focus({preventScroll:!0})},r=A.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return A.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=o=>{o.key==="Tab"&&t.current&&tye(t.current,o)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const nye=Tn.useId||(()=>{});function rye(){const e=nye();return e?`mantine-${e.replace(/:/g,"")}`:""}function kd(e){const t=rye(),[n,r]=A.useState(t);return Ub(()=>{r(Vbe())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function k1(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Fb(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=k1(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i&&typeof i=="function"?i():k1(r,null)}),t.clear()}}}function Ao(...e){return A.useCallback(Fb(...e),e)}function _d({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,o]=A.useState(t!==void 0?t:n),s=(a,...c)=>{o(a),r?.(a,...c)};return e!==void 0?[e,r,!0]:[i,s,!1]}function iye(e,t){return Kbe("(prefers-reduced-motion: reduce)",e,t)}function oye(){const[e,t]=A.useState(!1),n=A.useRef(null),r=A.useCallback(()=>{t(!0)},[]),i=A.useCallback(()=>{t(!1)},[]);return{ref:A.useCallback(s=>{n.current&&(n.current.removeEventListener("mouseenter",r),n.current.removeEventListener("mouseleave",i)),s&&(s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",i)),n.current=s},[r,i]),hovered:e}}function sye(e=!1,t={}){const[n,r]=A.useState(e),i=A.useCallback(()=>{r(a=>a||(t.onOpen?.(),!0))},[t.onOpen]),o=A.useCallback(()=>{r(a=>a&&(t.onClose?.(),!1))},[t.onClose]),s=A.useCallback(()=>{n?o():i()},[o,i,n]);return[n,{open:i,close:o,toggle:s}]}function aye(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement?e.currentTarget.contains(e.relatedTarget):!1}function m7({onBlur:e,onFocus:t}={}){const[n,r]=A.useState(!1),i=A.useRef(!1),o=A.useRef(null),s=A.useCallback(f=>{r(f),i.current=f},[]),a=A.useCallback(f=>{i.current||(s(!0),t?.(f))},[t]),c=A.useCallback(f=>{i.current&&!aye(f)&&(s(!1),e?.(f))},[e]),u=A.useCallback(f=>{f&&(o.current&&(o.current.removeEventListener("focusin",a),o.current.removeEventListener("focusout",c)),f.addEventListener("focusin",a),f.addEventListener("focusout",c))},[a,c]);return A.useEffect(()=>()=>{o.current&&(o.current.removeEventListener("focusin",a),o.current.removeEventListener("focusout",c))},[]),{ref:u,focused:n}}function Px(e){const t=Tn.version;return typeof Tn.version!="string"||t.startsWith("18.")?e?.ref:e?.props?.ref}function g7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=g7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function na(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=g7(e))&&(r&&(r+=" "),r+=t);return r}const lye={};function cye(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=na(t[r],i):t[r]=i})}),t}function jb({theme:e,classNames:t,props:n,stylesCtx:r}){const o=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||lye);return cye(o)}function _1({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((o,s)=>typeof s=="function"?{...o,...s(e,n,r)}:{...o,...s},{})}const Hx=A.createContext(null);function pl(){const e=A.useContext(Hx);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function uye(){return pl().cssVariablesResolver}function dye(){return pl().classNamesPrefix}function Ux(){return pl().getStyleNonce}function fye(){return pl().withStaticClasses}function hye(){return pl().headless}function pye(){return pl().stylesTransform?.sx}function mye(){return pl().stylesTransform?.styles}function zb(){return pl().env||"default"}function gye(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function bye(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,o=n&255;return{r,g:i,b:o,a:1}}function yye(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i===void 0?1:i}}function Eye(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*o-1))*i,c=r/60,u=a*(1-Math.abs(c%2-1)),f=o-a/2;let h,m,g;return c>=0&&c<1?(h=a,m=u,g=0):c>=1&&c<2?(h=u,m=a,g=0):c>=2&&c<3?(h=0,m=a,g=u):c>=3&&c<4?(h=0,m=u,g=a):c>=4&&c<5?(h=u,m=0,g=a):(h=a,m=0,g=u),{r:Math.round((h+f)*255),g:Math.round((m+f)*255),b:Math.round((g+f)*255),a:s||1}}function Fx(e){return gye(e)?bye(e):e.startsWith("rgb")?yye(e):e.startsWith("hsl")?Eye(e):{r:0,g:0,b:0,a:1}}function _g(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:o}=Fx(e),s=1-t,a=c=>Math.round(c*s);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${o})`}function Zh(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function XC(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function vye(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function Cye(e){if(e.startsWith("oklch("))return(vye(e)||0)/100;const{r:t,g:n,b:r}=Fx(e),i=t/255,o=n/255,s=r/255,a=XC(i),c=XC(o),u=XC(s);return .2126*a+.7152*c+.0722*u}function Pf(e,t=.179){return e.startsWith("var(")?!1:Cye(e)>t}function Nc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Pf(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Pf(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Pf(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),o=i?Number(i):void 0,s=r in t.colors;if(s){const a=o!==void 0?t.colors[r][o]:t.colors[r][Zh(t,n||"light")];return{color:r,value:a,shade:o,isThemeColor:s,isLight:Pf(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:Pf(e,t.luminanceThreshold),shade:o,variable:void 0}}function Xs(e,t){const n=Nc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function K2(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=Xs(n.from,t),i=Xs(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function jo(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${o}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Fx(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Cu=jo,wye=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const o=Nc({color:e,theme:t}),s=typeof i=="boolean"?i:t.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const a=s&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ke(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:a,border:`${ke(1)} solid transparent`}:{background:e,hover:_g(e,.1),color:a,border:`${ke(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ke(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:jo(a,.1),hover:jo(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${ke(1)} solid transparent`}}return{background:jo(e,.1),hover:jo(e,.12),color:e,border:`${ke(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ke(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:jo(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${ke(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:jo(e,.05),color:e,border:`${ke(1)} solid ${e}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ke(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:"transparent",hover:jo(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${ke(1)} solid transparent`}}return{background:"transparent",hover:jo(e,.12),color:e,border:`${ke(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ke(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:_g(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:_g(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:_g(t.white,.01),color:e,border:`${ke(1)} solid transparent`}:n==="gradient"?{background:K2(r,t),hover:K2(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ke(1)} solid var(--mantine-color-default-border)`}:{}},Sye={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},x6="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",jx={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Sye,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:wye,autoContrast:!1,luminanceThreshold:.3,fontFamily:x6,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:x6,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ke(34),lineHeight:"1.3"},h2:{fontSize:ke(26),lineHeight:"1.35"},h3:{fontSize:ke(22),lineHeight:"1.4"},h4:{fontSize:ke(18),lineHeight:"1.45"},h5:{fontSize:ke(16),lineHeight:"1.5"},h6:{fontSize:ke(14),lineHeight:"1.5"}}},fontSizes:{xs:ke(12),sm:ke(14),md:ke(16),lg:ke(18),xl:ke(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ke(2),sm:ke(4),md:ke(8),lg:ke(16),xl:ke(32)},spacing:{xs:ke(10),sm:ke(12),md:ke(16),lg:ke(20),xl:ke(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ke(1)} ${ke(3)} rgba(0, 0, 0, 0.05), 0 ${ke(1)} ${ke(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ke(1)} ${ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ke(10)} ${ke(15)} ${ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${ke(7)} ${ke(7)} ${ke(-5)}`,md:`0 ${ke(1)} ${ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ke(20)} ${ke(25)} ${ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${ke(10)} ${ke(10)} ${ke(-5)}`,lg:`0 ${ke(1)} ${ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ke(28)} ${ke(23)} ${ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${ke(12)} ${ke(12)} ${ke(-7)}`,xl:`0 ${ke(1)} ${ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ke(36)} ${ke(28)} ${ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${ke(17)} ${ke(17)} ${ke(-7)}`},other:{},components:{}};function k6(e){return e==="auto"||e==="dark"||e==="light"}function Tye({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return k6(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&k6(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const xye="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",_6="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function ZC(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function A6(e){if(!(e.primaryColor in e.colors))throw new Error(xye);if(typeof e.primaryShade=="object"&&(!ZC(e.primaryShade.dark)||!ZC(e.primaryShade.light)))throw new Error(_6);if(typeof e.primaryShade=="number"&&!ZC(e.primaryShade))throw new Error(_6)}function kye(e,t){if(!t)return A6(e),e;const n=Ix(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),A6(n),n}const zx=A.createContext(null),_ye=()=>A.useContext(zx)||jx;function ei(){const e=A.useContext(zx);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function b7({theme:e,children:t,inherit:n=!0}){const r=_ye(),i=A.useMemo(()=>kye(n?r:jx,e),[e,r,n]);return k.jsx(zx.Provider,{value:i,children:t})}b7.displayName="@mantine/core/MantineThemeProvider";function Aye(){const e=ei(),t=Ux(),n=Ko(e.breakpoints).reduce((r,i)=>{const o=e.breakpoints[i].includes("px"),s=Ibe(e.breakpoints[i]),a=o?`${s-.1}px`:S6(s-.1),c=o?`${s}px`:S6(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return k.jsx("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function JC(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Hf(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function Nye(e,t){const n=JC(e.variables),r=n?Hf(t,n):"",i=JC(e.dark),o=JC(e.light),s=i?Hf(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=o?Hf(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}

${s}

${a}`}function y7({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Nc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function N6(e,t){return y7({color:e.colors[e.primaryColor][Zh(e,t)],theme:e,autoContrast:null})}function Ag({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Zh(e,"light"),c={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Cu(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Cu(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Cu(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...c}:c}const o=Zh(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:Cu(e.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:Cu(e.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Cu(e.colors[t][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function Mye(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function wu(e,t,n){Ko(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const E7=e=>{const t=Zh(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ke(e.defaultRadius),r={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":N6(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":N6(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};wu(r.variables,e.breakpoints,"breakpoint"),wu(r.variables,e.spacing,"spacing"),wu(r.variables,e.fontSizes,"font-size"),wu(r.variables,e.lineHeights,"line-height"),wu(r.variables,e.shadows,"shadow"),wu(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),Ko(e.colors).forEach(o=>{const s=e.colors[o];if(Mye(s)){Object.assign(r.light,Ag({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Ag({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,c)=>{r.variables[`--mantine-color-${o}-${c}`]=a}),Object.assign(r.light,Ag({theme:e,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Ag({theme:e,color:o,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ko(i).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=i[o].fontSize,r.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||e.headings.fontWeight}),r};function Rye({theme:e,generator:t}){const n=E7(e),r=t?.(e);return r?Ix(n,r):n}const ew=E7(jx);function Oye(e){const t={variables:{},light:{},dark:{}};return Ko(e.variables).forEach(n=>{ew.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ko(e.light).forEach(n=>{ew.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ko(e.dark).forEach(n=>{ew.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Dye(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function v7({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ei(),r=Ux(),i=uye(),o=Rye({theme:n,generator:i}),s=e===":root"&&t,a=s?Oye(o):o,c=Nye(a,e);return c?k.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${c}${s?"":Dye(e)}`}}):null}v7.displayName="@mantine/CssVariables";function Su(e,t){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=e!=="auto"?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function Lye({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=A.useRef(null),[o,s]=A.useState(()=>e.get(t)),a=r||o,c=A.useCallback(f=>{r||(Su(f,n),s(f),e.set(f))},[e.set,a,r]),u=A.useCallback(()=>{s(t),Su(t,n),e.clear()},[e.clear,t]);return A.useEffect(()=>(e.subscribe(c),e.unsubscribe),[e.subscribe,e.unsubscribe]),Ub(()=>{Su(e.get(t),n)},[]),A.useEffect(()=>{if(r)return Su(r,n),()=>{};r===void 0&&Su(o,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const f=h=>{o==="auto"&&Su(h.matches?"dark":"light",n)};return i.current?.addEventListener("change",f),()=>i.current?.removeEventListener("change",f)},[o,r]),{colorScheme:a,setColorScheme:c,clearColorScheme:u}}function Iye({respectReducedMotion:e,getRootElement:t}){Ub(()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")},[e])}function C7({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:c="mantine",colorSchemeManager:u=Tye(),defaultColorScheme:f="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:m,forceColorScheme:g,stylesTransform:y,env:E}){const{colorScheme:C,setColorScheme:S,clearColorScheme:N}=Lye({defaultColorScheme:f,forceColorScheme:g,manager:u,getRootElement:h});return Iye({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:h}),k.jsx(Hx.Provider,{value:{colorScheme:C,setColorScheme:S,clearColorScheme:N,getRootElement:h,classNamesPrefix:c,getStyleNonce:n,cssVariablesResolver:m,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:y,env:E},children:k.jsxs(b7,{theme:e,children:[s&&k.jsx(v7,{cssVariablesSelector:a,deduplicateCssVariables:o}),i&&k.jsx(Aye,{}),t]})})}C7.displayName="@mantine/core/MantineProvider";function $b({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ei();return{resolvedClassNames:jb({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:_1({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Bye={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Pye({theme:e,options:t,unstyled:n}){return na(t?.focusable&&!n&&(e.focusClassName||Bye[e.focusRing]),t?.active&&!n&&e.activeClassName)}function Hye({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return jb({theme:i,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}function M6({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return jb({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Uye({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Fye({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function jye({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function zye({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(o=>jb({theme:t,classNames:t.components[o]?.classNames,props:r,stylesCtx:i})?.[n])}function $ye({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Vye({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:o,classes:s,unstyled:a,className:c,rootSelector:u,props:f,stylesCtx:h,withStaticClasses:m,headless:g,transformedStyles:y}){return na(Pye({theme:e,options:t,unstyled:a||g}),zye({theme:e,themeName:n,selector:r,props:f,stylesCtx:h}),$ye({options:t,classes:s,selector:r,unstyled:a}),M6({selector:r,stylesCtx:h,theme:e,classNames:o,props:f}),M6({selector:r,stylesCtx:h,theme:e,classNames:y,props:f}),Hye({selector:r,stylesCtx:h,options:t,props:f,theme:e}),Uye({rootSelector:u,selector:r,className:c}),Fye({selector:r,classes:s,unstyled:a||g}),m&&!g&&jye({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function qye({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(o=>_1({theme:e,styles:e.components[o]?.styles,props:n,stylesCtx:r})[i]).reduce((o,s)=>({...o,...s}),{})}function Q2({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Q2({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Yye(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Bb(n[r])}}),t),{})}function Gye({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:o,themeName:s,headless:a}){return Yye([a?{}:t?.(n,r,i),...s.map(c=>n.components?.[c]?.vars?.(n,r,i)),e?.(n,r,i)])?.[o]}function Wye({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:o,rootSelector:s,styles:a,style:c,vars:u,varsResolver:f,headless:h,withStylesTransform:m}){return{...!m&&qye({theme:e,themeName:t,props:i,stylesCtx:o,selector:n}),...!m&&_1({theme:e,styles:a,props:i,stylesCtx:o})[n],...!m&&_1({theme:e,styles:r?.styles,props:r?.props||i,stylesCtx:o})[n],...Gye({theme:e,props:i,stylesCtx:o,vars:u,varsResolver:f,selector:n,themeName:t,headless:h}),...s===n?Q2({style:c,theme:e}):null,...Q2({style:r?.style,theme:e})}}function Kye({props:e,stylesCtx:t,themeName:n}){const r=ei(),i=mye()?.();return{getTransformedStyles:s=>i?[...s.map(c=>i(c,{props:e,theme:r,ctx:t})),...n.map(c=>i(r.components[c]?.styles,{props:e,theme:r,ctx:t}))].filter(Boolean):[],withStylesTransform:!!i}}function kt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:o,rootSelector:s="root",unstyled:a,classNames:c,styles:u,vars:f,varsResolver:h,attributes:m}){const g=ei(),y=dye(),E=fye(),C=hye(),S=(Array.isArray(e)?e:[e]).filter(O=>O),{withStylesTransform:N,getTransformedStyles:_}=Kye({props:n,stylesCtx:r,themeName:S});return(O,M)=>({className:Vye({theme:g,options:M,themeName:S,selector:O,classNamesPrefix:y,classNames:c,classes:t,unstyled:a,className:i,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:E,headless:C,transformedStyles:_([M?.styles,u])}),style:Wye({theme:g,themeName:S,selector:O,options:M,props:n,stylesCtx:r,rootSelector:s,styles:u,style:o,vars:f,varsResolver:h,headless:C,withStylesTransform:N}),...m?.[O]})}function Qye(e,t){return typeof e=="boolean"?e:t.autoContrast}function ze(e,t,n){const r=ei(),i=r.components[e]?.defaultProps,o=typeof i=="function"?i(r):i;return{...t,...o,...Bb(n)}}function tw(e){return Ko(e).reduce((t,n)=>e[n]!==void 0?`${t}${Dbe(n)}:${e[n]};`:t,"").trim()}function Xye({selector:e,styles:t,media:n,container:r}){const i=t?tw(t):"",o=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${tw(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${tw(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${o.join("")}${s.join("")}`.trim()}function w7(e){const t=Ux();return k.jsx("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:Xye(e)}})}function Vb(e){const{m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:c,ms:u,p:f,px:h,py:m,pt:g,pb:y,pl:E,pr:C,pe:S,ps:N,bd:_,bdrs:O,bg:M,c:R,opacity:L,ff:F,fz:z,fw:B,lts:U,ta:q,lh:re,fs:J,tt:ae,td:W,w:Z,miw:te,maw:ue,h:$,mih:K,mah:ie,bgsz:j,bgp:Se,bgr:Re,bga:Le,pos:$e,top:ot,left:Ye,bottom:Bt,right:mn,inset:Jt,display:rt,flex:Tt,hiddenFrom:ce,visibleFrom:ge,lightHidden:Ae,darkHidden:He,sx:Y,...T}=e;return{styleProps:Bb({m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:c,ms:u,p:f,px:h,py:m,pt:g,pb:y,pl:E,pr:C,pe:S,ps:N,bd:_,bg:M,c:R,opacity:L,ff:F,fz:z,fw:B,lts:U,ta:q,lh:re,fs:J,tt:ae,td:W,w:Z,miw:te,maw:ue,h:$,mih:K,mah:ie,bgsz:j,bgp:Se,bgr:Re,bga:Le,pos:$e,top:ot,left:Ye,bottom:Bt,right:mn,inset:Jt,display:rt,flex:Tt,bdrs:O,hiddenFrom:ce,visibleFrom:ge,lightHidden:Ae,darkHidden:He,sx:Y}),rest:T}}const Zye={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function $x(e,t){const n=Nc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Jye(e,t){const n=Nc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:$x(e,t)}function eEe(e,t){if(typeof e=="number")return ke(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(s=>s.trim()!=="");let o=`${ke(n)}`;return r&&(o+=` ${r}`),i.length>0&&(o+=` ${$x(i.join(" "),t)}`),o.trim()}return e}const R6={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function tEe(e){return typeof e=="string"&&e in R6?R6[e]:e}const nEe=["h1","h2","h3","h4","h5","h6"];function rEe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&nEe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ke(e):e}function iEe(e){return e}const oEe=["h1","h2","h3","h4","h5","h6"];function sEe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&oEe.includes(e)?`var(--mantine-${e}-line-height)`:e}function aEe(e,t){return typeof e=="string"&&e in t.radius?`var(--mantine-radius-${e})`:typeof e=="number"||typeof e=="string"?ke(e):e}function lEe(e){return typeof e=="number"?ke(e):e}function cEe(e,t){if(typeof e=="number")return ke(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ke(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const nw={color:$x,textColor:Jye,fontSize:rEe,spacing:cEe,radius:aEe,identity:iEe,size:lEe,lineHeight:sEe,fontFamily:tEe,border:eEe};function O6(e){return e.replace("(min-width: ","").replace("em)","")}function uEe({media:e,...t}){const r=Object.keys(e).sort((i,o)=>Number(O6(i))-Number(O6(o))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function dEe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function fEe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function hEe(e){return typeof e=="object"&&e!==null?Ko(e).filter(t=>t!=="base"):[]}function pEe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function S7({styleProps:e,data:t,theme:n}){return uEe(Ko(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const o=t[i],s=Array.isArray(o.property)?o.property:[o.property],a=fEe(e[i]);if(!dEe(e[i]))return s.forEach(u=>{r.inlineStyles[u]=nw[o.type](a,n)}),r;r.hasResponsiveStyles=!0;const c=hEe(e[i]);return s.forEach(u=>{a!=null&&(r.styles[u]=nw[o.type](a,n)),c.forEach(f=>{const h=`(min-width: ${n.breakpoints[f]})`;r.media[h]={...r.media[h],[u]:nw[o.type](pEe(e[i],f),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function T7(){return`__m__-${A.useId().replace(/[:]/g,"")}`}function x7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...x7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function k7(e){return e.startsWith("data-")?e:`data-${e}`}function mEe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[k7(n)]=e[n]),t},{})}function _7(e){return e?typeof e=="string"?{[k7(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,..._7(n)}),{}):mEe(e):null}function X2(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...X2(r,t)}),{}):typeof e=="function"?e(t):e??{}}function gEe({theme:e,style:t,vars:n,styleProps:r}){const i=X2(t,e),o=X2(n,e);return{...i,...o,...r}}const A7=A.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:o,size:s,hiddenFrom:a,visibleFrom:c,lightHidden:u,darkHidden:f,renderRoot:h,__size:m,...g},y)=>{const E=ei(),C=e||"div",{styleProps:S,rest:N}=Vb(g),O=pye()?.()?.(S.sx),M=T7(),R=S7({styleProps:S,theme:E,data:Zye}),L={ref:y,style:gEe({theme:E,style:t,vars:n,styleProps:R.inlineStyles}),className:na(r,O,{[M]:R.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":f,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${c}`]:c}),"data-variant":i,"data-size":c7(s)?void 0:s||void 0,size:m,..._7(o),...N};return k.jsxs(k.Fragment,{children:[R.hasResponsiveStyles&&k.jsx(w7,{selector:`.${M}`,styles:R.styles,media:R.media}),typeof h=="function"?h(L):k.jsx(C,{...L})]})});A7.displayName="@mantine/core/Box";const tt=A7;function N7(e){return e}function bEe(e){const t=e;return n=>{const r=A.forwardRef((i,o)=>k.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function _t(e){const t=A.forwardRef(e);return t.extend=N7,t.withProps=n=>{const r=A.forwardRef((i,o)=>k.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Cr(e){const t=A.forwardRef(e);return t.withProps=n=>{const r=A.forwardRef((i,o)=>k.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=N7,t}const yEe=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ad(){return A.useContext(yEe)}var M7={root:"m_87cf2631"};const EEe={__staticSelector:"UnstyledButton"},ml=Cr((e,t)=>{const n=ze("UnstyledButton",EEe,e),{className:r,component:i="button",__staticSelector:o,unstyled:s,classNames:a,styles:c,style:u,attributes:f,...h}=n,m=kt({name:o,props:n,classes:M7,className:r,style:u,classNames:a,styles:c,unstyled:s,attributes:f});return k.jsx(tt,{...m("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...h})});ml.classes=M7;ml.displayName="@mantine/core/UnstyledButton";var R7={root:"m_515a97f8"};const Vx=_t((e,t)=>{const n=ze("VisuallyHidden",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,attributes:u,...f}=n,h=kt({name:"VisuallyHidden",classes:R7,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:u});return k.jsx(tt,{component:"span",ref:t,...h("root"),...f})});Vx.classes=R7;Vx.displayName="@mantine/core/VisuallyHidden";var O7={root:"m_1b7284a3"};const vEe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:vr(t),"--paper-shadow":u7(n)}}),qx=Cr((e,t)=>{const n=ze("Paper",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,withBorder:c,vars:u,radius:f,shadow:h,variant:m,mod:g,attributes:y,...E}=n,C=kt({name:"Paper",props:n,classes:O7,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:y,vars:u,varsResolver:vEe});return k.jsx(tt,{ref:t,mod:[{"data-with-border":c},g],...C("root"),variant:m,...E})});qx.classes=O7;qx.displayName="@mantine/core/Paper";function D6(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function L6(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const CEe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function wEe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:o,arrowY:s,dir:a}){const[c,u="center"]=e.split("-"),f={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[CEe[c]]:r},h=-t/2;return c==="left"?{...f,...D6(u,s,n,i),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:c==="right"?{...f,...D6(u,s,n,i),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:c==="top"?{...f,...L6(u,o,n,i,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:c==="bottom"?{...f,...L6(u,o,n,i,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const A1=A.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:o,arrowX:s,arrowY:a,style:c,...u},f)=>{const{dir:h}=Ad();return o?k.jsx("div",{...u,ref:f,style:{...c,...wEe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:h,arrowX:s,arrowY:a})}}):null});A1.displayName="@mantine/core/FloatingArrow";function D7(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var L7={root:"m_9814e45f"};const SEe={zIndex:xp("modal")},TEe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:o,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&jo(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ke(i)})`:void 0,"--overlay-radius":o===void 0?void 0:vr(o),"--overlay-z-index":s?.toString()}}),Jh=Cr((e,t)=>{const n=ze("Overlay",SEe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,fixed:u,center:f,children:h,radius:m,zIndex:g,gradient:y,blur:E,color:C,backgroundOpacity:S,mod:N,attributes:_,...O}=n,M=kt({name:"Overlay",props:n,classes:L7,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:_,vars:c,varsResolver:TEe});return k.jsx(tt,{ref:t,...M("root"),mod:[{center:f,fixed:u},N],...O,children:h})});Jh.classes=L7;Jh.displayName="@mantine/core/Overlay";function rw(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function xEe({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||rw(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const i=rw(n);return i.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(i),i}return rw(n)}const kEe={reuseTargetNode:!0},I7=_t((e,t)=>{const{children:n,target:r,reuseTargetNode:i,...o}=ze("Portal",kEe,e),[s,a]=A.useState(!1),c=A.useRef(null);return Ub(()=>(a(!0),c.current=xEe({target:r,reuseTargetNode:i,...o}),k1(t,c.current),!r&&!i&&c.current&&document.body.appendChild(c.current),()=>{!r&&!i&&c.current&&document.body.removeChild(c.current)}),[r]),!s||!c.current?null:Xo.createPortal(k.jsx(k.Fragment,{children:n}),c.current)});I7.displayName="@mantine/core/Portal";const ad=_t(({withinPortal:e=!0,children:t,...n},r)=>zb()==="test"||!e?k.jsx(k.Fragment,{children:t}):k.jsx(I7,{ref:r,...n,children:t}));ad.displayName="@mantine/core/OptionalPortal";const Uf=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Ng={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Uf("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Uf("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Uf("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Uf("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Uf("top"),common:{transformOrigin:"top right"}}},I6={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function _Ee({transition:e,state:t,duration:n,timingFunction:r}){const i={WebkitBackfaceVisibility:"hidden",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Ng?{transitionProperty:Ng[e].transitionProperty,...i,...Ng[e].common,...Ng[e][I6[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[I6[t]]}}function AEe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:o,onEntered:s,onExited:a,enterDelay:c,exitDelay:u}){const f=ei(),h=iye(),m=f.respectReducedMotion?h:!1,[g,y]=A.useState(m?0:e),[E,C]=A.useState(r?"entered":"exited"),S=A.useRef(-1),N=A.useRef(-1),_=A.useRef(-1);function O(){window.clearTimeout(S.current),window.clearTimeout(N.current),cancelAnimationFrame(_.current)}const M=L=>{O();const F=L?i:o,z=L?s:a,B=m?0:L?e:t;y(B),B===0?(typeof F=="function"&&F(),typeof z=="function"&&z(),C(L?"entered":"exited")):_.current=requestAnimationFrame(()=>{Nz.flushSync(()=>{C(L?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof F=="function"&&F(),C(L?"entering":"exiting"),S.current=window.setTimeout(()=>{typeof z=="function"&&z(),C(L?"entered":"exited")},B)})})},R=L=>{if(O(),typeof(L?c:u)!="number"){M(L);return}N.current=window.setTimeout(()=>{M(L)},L?c:u)};return $u(()=>{R(r)},[r]),A.useEffect(()=>()=>{O()},[]),{transitionDuration:g,transitionStatus:E,transitionTimingFunction:n||"ease"}}function ll({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:o,timingFunction:s="ease",onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:m}){const g=zb(),{transitionDuration:y,transitionStatus:E,transitionTimingFunction:C}=AEe({mounted:i,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:m});return y===0||g==="test"?i?k.jsx(k.Fragment,{children:o({})}):e?o({display:"none"}):null:E==="exited"?e?o({display:"none"}):null:k.jsx(k.Fragment,{children:o(_Ee({transition:t,duration:y,state:E,timingFunction:C}))})}ll.displayName="@mantine/core/Transition";const[NEe,B7]=Pb("Popover component was not found in the tree");function Yx({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=p7(t),o=Ao(i,r);return xd(e)?A.cloneElement(e,{[n]:o}):e}function P7(e){return k.jsx(Vx,{tabIndex:-1,"data-autofocus":!0,...e})}Yx.displayName="@mantine/core/FocusTrap";P7.displayName="@mantine/core/FocusTrapInitialFocus";Yx.InitialFocus=P7;var H7={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const qb=_t((e,t)=>{const n=ze("PopoverDropdown",null,e),{className:r,style:i,vars:o,children:s,onKeyDownCapture:a,variant:c,classNames:u,styles:f,...h}=n,m=B7(),g=Qbe({opened:m.opened,shouldReturnFocus:m.returnFocus}),y=m.withRoles?{"aria-labelledby":m.getTargetId(),id:m.getDropdownId(),role:"dialog",tabIndex:-1}:{},E=Ao(t,m.floating);return m.disabled?null:k.jsx(ad,{...m.portalProps,withinPortal:m.withinPortal,children:k.jsx(ll,{mounted:m.opened,...m.transitionProps,transition:m.transitionProps?.transition||"fade",duration:m.transitionProps?.duration??150,keepMounted:m.keepMounted,exitDuration:typeof m.transitionProps?.exitDuration=="number"?m.transitionProps.exitDuration:m.transitionProps?.duration,children:C=>k.jsx(Yx,{active:m.trapFocus&&m.opened,innerRef:E,children:k.jsxs(tt,{...y,...h,variant:c,onKeyDownCapture:jbe(()=>{m.onClose?.(),m.onDismiss?.()},{active:m.closeOnEscape,onTrigger:g,onKeyDown:a}),"data-position":m.placement,"data-fixed":m.floatingStrategy==="fixed"||void 0,...m.getStyles("dropdown",{className:r,props:n,classNames:u,styles:f,style:[{...C,zIndex:m.zIndex,top:m.y??0,left:m.x??0,width:m.width==="target"?void 0:ke(m.width),...m.referenceHidden?{display:"none"}:null},m.resolvedStyles.dropdown,f?.dropdown,i]}),children:[s,k.jsx(A1,{ref:m.arrowRef,arrowX:m.arrowX,arrowY:m.arrowY,visible:m.withArrow,position:m.placement,arrowSize:m.arrowSize,arrowRadius:m.arrowRadius,arrowOffset:m.arrowOffset,arrowPosition:m.arrowPosition,...m.getStyles("arrow",{props:n,classNames:u,styles:f})})]})})})})});qb.classes=H7;qb.displayName="@mantine/core/PopoverDropdown";const MEe={refProp:"ref",popupType:"dialog"},Gx=_t((e,t)=>{const{children:n,refProp:r,popupType:i,...o}=ze("PopoverTarget",MEe,e);if(!xd(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=o,a=B7(),c=Ao(a.reference,Px(n),t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return A.cloneElement(n,{...s,...u,...a.targetProps,className:na(a.targetProps.className,s.className,n.props.className),[r]:c,...a.controlled?null:{onClick:()=>{a.onToggle(),n.props.onClick?.()}}})});Gx.displayName="@mantine/core/PopoverTarget";function REe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function OEe(e,t,n){const r=REe(e.middlewares),i=[as(e.offset),vV()];return e.dropdownVisible&&n!=="test"&&e.preventPositionChangeWhenVisible&&(r.flip=!1),r.shift&&i.push(wc(typeof r.shift=="boolean"?{limiter:XN(),padding:5}:{limiter:XN(),padding:5,...r.shift})),r.flip&&i.push(typeof r.flip=="boolean"?go():go(r.flip)),r.inline&&i.push(typeof r.inline=="boolean"?Wf():Wf(r.inline)),i.push(DD({element:e.arrowRef,padding:e.arrowOffset})),(r.size||e.width==="target")&&i.push(z1({...typeof r.size=="boolean"?{}:r.size,apply({rects:o,availableWidth:s,availableHeight:a,...c}){const f=t().refs.floating.current?.style??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:o,availableWidth:s,availableHeight:a,...c}):Object.assign(f,{maxWidth:`${s}px`,maxHeight:`${a}px`})),e.width==="target"&&Object.assign(f,{width:`${o.reference.width}px`})}})),i}function DEe(e){const t=zb(),[n,r]=_d({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),i=A.useRef(n),o=()=>{n&&!e.disabled&&r(!1)},s=()=>{e.disabled||r(!n)},a=hd({strategy:e.strategy,placement:e.preventPositionChangeWhenVisible?e.positionRef.current:e.position,middleware:OEe(e,()=>a,t),whileElementsMounted:e.keepMounted?void 0:ww});return A.useEffect(()=>{if(!(!a.refs.reference.current||!a.refs.floating.current)&&n)return ww(a.refs.reference.current,a.refs.floating.current,a.update)},[n,a.update]),$u(()=>{e.onPositionChange?.(a.placement),e.positionRef.current=a.placement},[a.placement,e.preventPositionChangeWhenVisible]),$u(()=>{n!==i.current&&(n?e.onOpen?.():e.onClose?.()),i.current=n},[n,e.onClose,e.onOpen]),$u(()=>{let c=-1;return n&&(c=window.setTimeout(()=>e.setDropdownVisible(!0),4)),()=>{window.clearTimeout(c)}},[n,e.position]),{floating:a,controlled:typeof e.opened=="boolean",opened:n,onClose:o,onToggle:s}}const LEe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:xp("popover"),__staticSelector:"Popover",width:"max-content"},IEe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:vr(t),"--popover-shadow":u7(n)}});function No(e){const t=ze("Popover",LEe,e),{children:n,position:r,offset:i,onPositionChange:o,positionDependencies:s,opened:a,transitionProps:c,onExitTransitionEnd:u,onEnterTransitionEnd:f,width:h,middlewares:m,withArrow:g,arrowSize:y,arrowOffset:E,arrowRadius:C,arrowPosition:S,unstyled:N,classNames:_,styles:O,closeOnClickOutside:M,withinPortal:R,portalProps:L,closeOnEscape:F,clickOutsideEvents:z,trapFocus:B,onClose:U,onDismiss:q,onOpen:re,onChange:J,zIndex:ae,radius:W,shadow:Z,id:te,defaultOpened:ue,__staticSelector:$,withRoles:K,disabled:ie,returnFocus:j,variant:Se,keepMounted:Re,vars:Le,floatingStrategy:$e,withOverlay:ot,overlayProps:Ye,hideDetached:Bt,attributes:mn,preventPositionChangeWhenVisible:Jt,...rt}=t,Tt=kt({name:$,props:t,classes:H7,classNames:_,styles:O,unstyled:N,attributes:mn,rootSelector:"dropdown",vars:Le,varsResolver:IEe}),{resolvedStyles:ce}=$b({classNames:_,styles:O,props:t}),[ge,Ae]=A.useState(a??ue??!1),He=A.useRef(r),Y=A.useRef(null),[T,I]=A.useState(null),[P,ee]=A.useState(null),{dir:oe}=Ad(),Ee=zb(),se=kd(te),ye=DEe({middlewares:m,width:h,position:D7(oe,r),offset:typeof i=="number"?i+(g?y/2:0):i,arrowRef:Y,arrowOffset:E,onPositionChange:o,positionDependencies:s,opened:a,defaultOpened:ue,onChange:J,onOpen:re,onClose:U,onDismiss:q,strategy:$e,dropdownVisible:ge,setDropdownVisible:Ae,positionRef:He,disabled:ie,preventPositionChangeWhenVisible:Jt,keepMounted:Re});Ybe(()=>{M&&(ye.onClose(),q?.())},z,[T,P]);const Be=A.useCallback(on=>{I(on),ye.floating.refs.setReference(on)},[ye.floating.refs.setReference]),Ie=A.useCallback(on=>{ee(on),ye.floating.refs.setFloating(on)},[ye.floating.refs.setFloating]),Pe=A.useCallback(()=>{c?.onExited?.(),u?.(),Ae(!1),Jt||(He.current=r)},[c?.onExited,u,Jt,r]),Mt=A.useCallback(()=>{c?.onEntered?.(),f?.()},[c?.onEntered,f]);return k.jsxs(NEe,{value:{returnFocus:j,disabled:ie,controlled:ye.controlled,reference:Be,floating:Ie,x:ye.floating.x,y:ye.floating.y,arrowX:ye.floating?.middlewareData?.arrow?.x,arrowY:ye.floating?.middlewareData?.arrow?.y,opened:ye.opened,arrowRef:Y,transitionProps:{...c,onExited:Pe,onEntered:Mt},width:h,withArrow:g,arrowSize:y,arrowOffset:E,arrowRadius:C,arrowPosition:S,placement:ye.floating.placement,trapFocus:B,withinPortal:R,portalProps:L,zIndex:ae,radius:W,shadow:Z,closeOnEscape:F,onDismiss:q,onClose:ye.onClose,onToggle:ye.onToggle,getTargetId:()=>`${se}-target`,getDropdownId:()=>`${se}-dropdown`,withRoles:K,targetProps:rt,__staticSelector:$,classNames:_,styles:O,unstyled:N,variant:Se,keepMounted:Re,getStyles:Tt,resolvedStyles:ce,floatingStrategy:$e,referenceHidden:Bt&&Ee!=="test"?ye.floating.middlewareData.hide?.referenceHidden:!1},children:[n,ot&&k.jsx(ll,{transition:"fade",mounted:ye.opened,duration:c?.duration||250,exitDuration:c?.exitDuration||250,children:on=>k.jsx(ad,{withinPortal:R,children:k.jsx(Jh,{...Ye,...Tt("overlay",{className:Ye?.className,style:[on,Ye?.style]})})})})]})}No.Target=Gx;No.Dropdown=qb;No.displayName="@mantine/core/Popover";No.extend=e=>e;var lo={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const U7=A.forwardRef(({className:e,...t},n)=>k.jsxs(tt,{component:"span",className:na(lo.barsLoader,e),...t,ref:n,children:[k.jsx("span",{className:lo.bar}),k.jsx("span",{className:lo.bar}),k.jsx("span",{className:lo.bar})]}));U7.displayName="@mantine/core/Bars";const F7=A.forwardRef(({className:e,...t},n)=>k.jsxs(tt,{component:"span",className:na(lo.dotsLoader,e),...t,ref:n,children:[k.jsx("span",{className:lo.dot}),k.jsx("span",{className:lo.dot}),k.jsx("span",{className:lo.dot})]}));F7.displayName="@mantine/core/Dots";const j7=A.forwardRef(({className:e,...t},n)=>k.jsx(tt,{component:"span",className:na(lo.ovalLoader,e),...t,ref:n}));j7.displayName="@mantine/core/Oval";const z7={bars:U7,oval:j7,dots:F7},BEe={loaders:z7,type:"oval"},PEe=(e,{size:t,color:n})=>({root:{"--loader-size":nn(t,"loader-size"),"--loader-color":n?Xs(n,e):void 0}}),gl=_t((e,t)=>{const n=ze("Loader",BEe,e),{size:r,color:i,type:o,vars:s,className:a,style:c,classNames:u,styles:f,unstyled:h,loaders:m,variant:g,children:y,attributes:E,...C}=n,S=kt({name:"Loader",props:n,classes:lo,className:a,style:c,classNames:u,styles:f,unstyled:h,attributes:E,vars:s,varsResolver:PEe});return y?k.jsx(tt,{...S("root"),ref:t,...C,children:y}):k.jsx(tt,{...S("root"),ref:t,component:m[o],variant:g,size:r,...C})});gl.defaultLoaders=z7;gl.classes=lo;gl.displayName="@mantine/core/Loader";var Nd={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const B6={orientation:"horizontal"},HEe=(e,{borderWidth:t})=>({group:{"--ai-border-width":ke(t)}}),Wx=_t((e,t)=>{const n=ze("ActionIconGroup",B6,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:c,vars:u,borderWidth:f,variant:h,mod:m,attributes:g,...y}=ze("ActionIconGroup",B6,e),E=kt({name:"ActionIconGroup",props:n,classes:Nd,className:r,style:i,classNames:o,styles:s,unstyled:a,attributes:g,vars:u,varsResolver:HEe,rootSelector:"group"});return k.jsx(tt,{...E("group"),ref:t,variant:h,mod:[{"data-orientation":c},m],role:"group",...y})});Wx.classes=Nd;Wx.displayName="@mantine/core/ActionIconGroup";const UEe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":nn(s,"section-height"),"--section-padding-x":nn(s,"section-padding-x"),"--section-fz":Qr(s),"--section-radius":t===void 0?void 0:vr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},Kx=_t((e,t)=>{const n=ze("ActionIconGroupSection",null,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:c,variant:u,gradient:f,radius:h,autoContrast:m,attributes:g,...y}=n,E=kt({name:"ActionIconGroupSection",props:n,classes:Nd,className:r,style:i,classNames:o,styles:s,unstyled:a,attributes:g,vars:c,varsResolver:UEe,rootSelector:"groupSection"});return k.jsx(tt,{...E("groupSection"),ref:t,variant:u,...y})});Kx.classes=Nd;Kx.displayName="@mantine/core/ActionIconGroupSection";const FEe=(e,{size:t,radius:n,variant:r,gradient:i,color:o,autoContrast:s})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":nn(t,"ai-size"),"--ai-radius":n===void 0?void 0:vr(n),"--ai-bg":o||r?a.background:void 0,"--ai-hover":o||r?a.hover:void 0,"--ai-hover-color":o||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":o||r?a.border:void 0}}},Mc=Cr((e,t)=>{const n=ze("ActionIcon",null,e),{className:r,unstyled:i,variant:o,classNames:s,styles:a,style:c,loading:u,loaderProps:f,size:h,color:m,radius:g,__staticSelector:y,gradient:E,vars:C,children:S,disabled:N,"data-disabled":_,autoContrast:O,mod:M,attributes:R,...L}=n,F=kt({name:["ActionIcon",y],props:n,className:r,style:c,classes:Nd,classNames:s,styles:a,unstyled:i,attributes:R,vars:C,varsResolver:FEe});return k.jsxs(ml,{...F("root",{active:!N&&!u&&!_}),...L,unstyled:i,variant:o,size:h,disabled:N||u,ref:t,mod:[{loading:u,disabled:N||_},M],children:[typeof u=="boolean"&&k.jsx(ll,{mounted:u,transition:"slide-down",duration:150,children:z=>k.jsx(tt,{component:"span",...F("loader",{style:z}),"aria-hidden":!0,children:k.jsx(gl,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...f})})}),k.jsx(tt,{component:"span",mod:{loading:u},...F("icon"),children:S})]})});Mc.classes=Nd;Mc.displayName="@mantine/core/ActionIcon";Mc.Group=Wx;Mc.GroupSection=Kx;const $7=A.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>k.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:k.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));$7.displayName="@mantine/core/CloseIcon";var V7={root:"m_86a44da5","root--subtle":"m_220c80f2"};const jEe={variant:"subtle"},zEe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":nn(t,"cb-size"),"--cb-radius":n===void 0?void 0:vr(n),"--cb-icon-size":ke(r)}}),Yb=Cr((e,t)=>{const n=ze("CloseButton",jEe,e),{iconSize:r,children:i,vars:o,radius:s,className:a,classNames:c,style:u,styles:f,unstyled:h,"data-disabled":m,disabled:g,variant:y,icon:E,mod:C,attributes:S,__staticSelector:N,..._}=n,O=kt({name:N||"CloseButton",props:n,className:a,style:u,classes:V7,classNames:c,styles:f,unstyled:h,attributes:S,vars:o,varsResolver:zEe});return k.jsxs(ml,{ref:t,..._,unstyled:h,variant:y,disabled:g,mod:[{disabled:g||m},C],...O("root",{variant:y,active:!g&&!m}),children:[E||k.jsx($7,{}),i]})});Yb.classes=V7;Yb.displayName="@mantine/core/CloseButton";function $Ee(e){return A.Children.toArray(e).filter(Boolean)}var q7={root:"m_4081bf90"};const VEe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},qEe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:o,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":kp(r),"--group-align":i,"--group-justify":o,"--group-wrap":s}}),cr=_t((e,t)=>{const n=ze("Group",VEe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,children:c,gap:u,align:f,justify:h,wrap:m,grow:g,preventGrowOverflow:y,vars:E,variant:C,__size:S,mod:N,attributes:_,...O}=n,M=$Ee(c),R=M.length,L=kp(u??"md"),z={childWidth:`calc(${100/R}% - (${L} - ${L} / ${R}))`},B=kt({name:"Group",props:n,stylesCtx:z,className:i,style:o,classes:q7,classNames:r,styles:s,unstyled:a,attributes:_,vars:E,varsResolver:qEe});return k.jsx(tt,{...B("root"),ref:t,variant:C,mod:[{grow:g},N],size:S,...O,children:M})});cr.classes=q7;cr.displayName="@mantine/core/Group";const[YEe,GEe]=Hb({size:"sm"}),Y7=_t((e,t)=>{const n=ze("InputClearButton",null,e),{size:r,variant:i,vars:o,classNames:s,styles:a,...c}=n,u=GEe(),{resolvedClassNames:f,resolvedStyles:h}=$b({classNames:s,styles:a,props:n});return k.jsx(Yb,{variant:i||"transparent",ref:t,size:r||u?.size||"sm",classNames:f,styles:h,__staticSelector:"InputClearButton",style:{pointerEvents:"all",background:"var(--input-bg)",...c.style},...c})});Y7.displayName="@mantine/core/InputClearButton";const WEe={xs:7,sm:8,md:10,lg:12,xl:15};function KEe({__clearable:e,__clearSection:t,rightSection:n,__defaultRightSection:r,size:i="sm"}){const o=e&&t;return o&&(n||r)?k.jsxs("div",{"data-combined-clear-section":!0,style:{display:"flex",gap:2,alignItems:"center",paddingInlineEnd:WEe[i]},children:[o,n||r]}):n===null?null:n||o||r}const[QEe,Gb]=Hb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Ji={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const XEe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Qr(t)} - ${ke(2)})`}}),Wb=_t((e,t)=>{const n=ze("InputDescription",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:h=!0,attributes:m,variant:g,...y}=ze("InputDescription",null,n),E=Gb(),C=kt({name:["InputWrapper",f],props:n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:m,rootSelector:"description",vars:c,varsResolver:XEe}),S=h&&E?.getStyles||C;return k.jsx(tt,{component:"p",ref:t,variant:g,size:u,...S("description",E?.getStyles?{className:i,style:o}:void 0),...y})});Wb.classes=Ji;Wb.displayName="@mantine/core/InputDescription";const ZEe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Qr(t)} - ${ke(2)})`}}),Kb=_t((e,t)=>{const n=ze("InputError",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,size:u,attributes:f,__staticSelector:h,__inheritStyles:m=!0,variant:g,...y}=n,E=kt({name:["InputWrapper",h],props:n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:f,rootSelector:"error",vars:c,varsResolver:ZEe}),C=Gb(),S=m&&C?.getStyles||E;return k.jsx(tt,{component:"p",ref:t,variant:g,size:u,...S("error",C?.getStyles?{className:i,style:o}:void 0),...y})});Kb.classes=Ji;Kb.displayName="@mantine/core/InputError";const P6={labelElement:"label"},JEe=(e,{size:t})=>({label:{"--input-label-size":Qr(t),"--input-asterisk-color":void 0}}),Qb=_t((e,t)=>{const n=ze("InputLabel",P6,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,labelElement:u,size:f,required:h,htmlFor:m,onMouseDown:g,children:y,__staticSelector:E,variant:C,mod:S,attributes:N,..._}=ze("InputLabel",P6,n),O=kt({name:["InputWrapper",E],props:n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:N,rootSelector:"label",vars:c,varsResolver:JEe}),M=Gb(),R=M?.getStyles||O;return k.jsxs(tt,{...R("label",M?.getStyles?{className:i,style:o}:void 0),component:u,variant:C,size:f,ref:t,htmlFor:u==="label"?m:void 0,mod:[{required:h},S],onMouseDown:L=>{g?.(L),!L.defaultPrevented&&L.detail>1&&L.preventDefault()},..._,children:[y,h&&k.jsx("span",{...R("required"),"aria-hidden":!0,children:" *"})]})});Qb.classes=Ji;Qb.displayName="@mantine/core/InputLabel";const Qx=_t((e,t)=>{const n=ze("InputPlaceholder",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,__staticSelector:u,variant:f,error:h,mod:m,attributes:g,...y}=n,E=kt({name:["InputPlaceholder",u],props:n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:g,rootSelector:"placeholder"});return k.jsx(tt,{...E("placeholder"),mod:[{error:!!h},m],component:"span",variant:f,ref:t,...y})});Qx.classes=Ji;Qx.displayName="@mantine/core/InputPlaceholder";function eve(e,{hasDescription:t,hasError:n}){const r=e.findIndex(c=>c==="input"),i=e.slice(0,r),o=e.slice(r+1),s=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&o.includes("description")||n&&o.includes("error"),offsetTop:s}}const tve={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},nve=(e,{size:t})=>({label:{"--input-label-size":Qr(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Qr(t)} - ${ke(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Qr(t)} - ${ke(2)})`}}),Xx=_t((e,t)=>{const n=ze("InputWrapper",tve,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,size:u,variant:f,__staticSelector:h,inputContainer:m,inputWrapperOrder:g,label:y,error:E,description:C,labelProps:S,descriptionProps:N,errorProps:_,labelElement:O,children:M,withAsterisk:R,id:L,required:F,__stylesApiProps:z,mod:B,attributes:U,...q}=n,re=kt({name:["InputWrapper",h],props:z||n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:U,vars:c,varsResolver:nve}),J={size:u,variant:f,__staticSelector:h},ae=kd(L),W=typeof R=="boolean"?R:F,Z=_?.id||`${ae}-error`,te=N?.id||`${ae}-description`,ue=ae,$=!!E&&typeof E!="boolean",K=!!C,ie=`${$?Z:""} ${K?te:""}`,j=ie.trim().length>0?ie.trim():void 0,Se=S?.id||`${ae}-label`,Re=y&&k.jsx(Qb,{labelElement:O,id:Se,htmlFor:ue,required:W,...J,...S,children:y},"label"),Le=K&&k.jsx(Wb,{...N,...J,size:N?.size||J.size,id:N?.id||te,children:C},"description"),$e=k.jsx(A.Fragment,{children:m(M)},"input"),ot=$&&A.createElement(Kb,{..._,...J,size:_?.size||J.size,key:"error",id:_?.id||Z},E),Ye=g.map(Bt=>{switch(Bt){case"label":return Re;case"input":return $e;case"description":return Le;case"error":return ot;default:return null}});return k.jsx(QEe,{value:{getStyles:re,describedBy:j,inputId:ue,labelId:Se,...eve(g,{hasDescription:K,hasError:$})},children:k.jsx(tt,{ref:t,variant:f,size:u,mod:[{error:!!E},B],...re("root"),...q,children:Ye})})});Xx.classes=Ji;Xx.displayName="@mantine/core/InputWrapper";const rve={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},ive=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":nn(t.size,"input-height"),"--input-fz":Qr(t.size),"--input-radius":t.radius===void 0?void 0:vr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ke(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ke(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?nn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Si=Cr((e,t)=>{const n=ze("Input",rve,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,required:c,__staticSelector:u,__stylesApiProps:f,size:h,wrapperProps:m,error:g,disabled:y,leftSection:E,leftSectionProps:C,leftSectionWidth:S,rightSection:N,rightSectionProps:_,rightSectionWidth:O,rightSectionPointerEvents:M,leftSectionPointerEvents:R,variant:L,vars:F,pointer:z,multiline:B,radius:U,id:q,withAria:re,withErrorStyles:J,mod:ae,inputSize:W,attributes:Z,__clearSection:te,__clearable:ue,__defaultRightSection:$,...K}=n,{styleProps:ie,rest:j}=Vb(K),Se=Gb(),Re={offsetBottom:Se?.offsetBottom,offsetTop:Se?.offsetTop},Le=kt({name:["Input",u],props:f||n,classes:Ji,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:Z,stylesCtx:Re,rootSelector:"wrapper",vars:F,varsResolver:ive}),$e=re?{required:c,disabled:y,"aria-invalid":!!g,"aria-describedby":Se?.describedBy,id:Se?.inputId||q}:{},ot=KEe({__clearable:ue,__clearSection:te,rightSection:N,__defaultRightSection:$,size:h});return k.jsx(YEe,{value:{size:h||"sm"},children:k.jsxs(tt,{...Le("wrapper"),...ie,...m,mod:[{error:!!g&&J,pointer:z,disabled:y,multiline:B,"data-with-right-section":!!ot,"data-with-left-section":!!E},ae],variant:L,size:h,children:[E&&k.jsx("div",{...C,"data-position":"left",...Le("section",{className:C?.className,style:C?.style}),children:E}),k.jsx(tt,{component:"input",...j,...$e,ref:t,required:c,mod:{disabled:y,error:!!g&&J},variant:L,__size:W,...Le("input")}),ot&&k.jsx("div",{..._,"data-position":"right",...Le("section",{className:_?.className,style:_?.style}),children:ot})]})})});Si.classes=Ji;Si.Wrapper=Xx;Si.Label=Qb;Si.Error=Kb;Si.Description=Wb;Si.Placeholder=Qx;Si.ClearButton=Y7;Si.displayName="@mantine/core/Input";function ove(e,t,n){const r=ze(e,t,n),{label:i,description:o,error:s,required:a,classNames:c,styles:u,className:f,unstyled:h,__staticSelector:m,__stylesApiProps:g,errorProps:y,labelProps:E,descriptionProps:C,wrapperProps:S,id:N,size:_,style:O,inputContainer:M,inputWrapperOrder:R,withAsterisk:L,variant:F,vars:z,mod:B,attributes:U,...q}=r,{styleProps:re,rest:J}=Vb(q),ae={label:i,description:o,error:s,required:a,classNames:c,className:f,__staticSelector:m,__stylesApiProps:g||r,errorProps:y,labelProps:E,descriptionProps:C,unstyled:h,styles:u,size:_,style:O,inputContainer:M,inputWrapperOrder:R,withAsterisk:L,variant:F,id:N,mod:B,attributes:U,...S};return{...J,classNames:c,styles:u,unstyled:h,wrapperProps:{...ae,...re},inputProps:{required:a,classNames:c,styles:u,unstyled:h,size:_,__staticSelector:m,__stylesApiProps:g||r,error:s,variant:F,id:N,attributes:U}}}const sve={__staticSelector:"InputBase",withAria:!0,size:"sm"},Md=Cr((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ove("InputBase",sve,e);return k.jsx(Si.Wrapper,{...r,children:k.jsx(Si,{...n,...i,ref:t})})});Md.classes={...Si.classes,...Si.Wrapper.classes};Md.displayName="@mantine/core/InputBase";const ave={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var G7={root:"m_8bffd616"};const Zx=Cr((e,t)=>{const n=ze("Flex",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,gap:u,rowGap:f,columnGap:h,align:m,justify:g,wrap:y,direction:E,attributes:C,...S}=n,N=kt({name:"Flex",classes:G7,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:C,vars:c}),_=ei(),O=T7(),M=S7({styleProps:{gap:u,rowGap:f,columnGap:h,align:m,justify:g,wrap:y,direction:E},theme:_,data:ave});return k.jsxs(k.Fragment,{children:[M.hasResponsiveStyles&&k.jsx(w7,{selector:`.${O}`,styles:M.styles,media:M.media}),k.jsx(tt,{ref:t,...N("root",{className:O,style:Bb(M.inlineStyles)}),...S})]})});Zx.classes=G7;Zx.displayName="@mantine/core/Flex";function W7({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),o=A.useRef(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(o.current)},a=()=>{s(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},c=()=>{s(),r===0||r===void 0?t():o.current=window.setTimeout(t,r)};return A.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:c}}function K7({style:e,size:t=16,...n}){return k.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ke(t),height:ke(t),display:"block"},...n,children:k.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}K7.displayName="@mantine/core/AccordionChevron";var Q7={root:"m_b6d8b162"};function lve(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const cve={inherit:!1},uve=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:o})=>({root:{"--text-fz":Qr(i),"--text-lh":zbe(i),"--text-gradient":t==="gradient"?K2(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?Xs(o,e):void 0}}),ns=Cr((e,t)=>{const n=ze("Text",cve,e),{lineClamp:r,truncate:i,inline:o,inherit:s,gradient:a,span:c,__staticSelector:u,vars:f,className:h,style:m,classNames:g,styles:y,unstyled:E,variant:C,mod:S,size:N,attributes:_,...O}=n,M=kt({name:["Text",u],props:n,classes:Q7,className:h,style:m,classNames:g,styles:y,unstyled:E,attributes:_,vars:f,varsResolver:uve});return k.jsx(tt,{...M("root",{focusable:!0}),ref:t,component:c?"span":"p",variant:C,mod:[{"data-truncate":lve(i),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":s},S],size:N,...O})});ns.classes=Q7;ns.displayName="@mantine/core/Text";function N1({size:e,style:t,...n}){const r=e!==void 0?{width:ke(e),height:ke(e),...t}:t;return k.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:k.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const X7=A.createContext(null),dve=X7.Provider;function fve(){return{withinGroup:!!A.useContext(X7)}}var Xb={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const hve=(e,{spacing:t})=>({group:{"--ag-spacing":kp(t)}}),Jx=_t((e,t)=>{const n=ze("AvatarGroup",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,spacing:u,attributes:f,...h}=n,m=kt({name:"AvatarGroup",classes:Xb,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:f,vars:c,varsResolver:hve,rootSelector:"group"});return k.jsx(dve,{value:!0,children:k.jsx(tt,{ref:t,...m("group"),...h})})});Jx.classes=Xb;Jx.displayName="@mantine/core/AvatarGroup";function pve(e){return k.jsx("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function mve(e){let t=0;for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const gve=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function bve(e,t=gve){const n=mve(e),r=Math.abs(n)%t.length;return t[r]}function yve(e,t=2){const n=e.split(" ");return n.length===1?e.slice(0,t).toUpperCase():n.map(r=>r[0]).slice(0,t).join("").toUpperCase()}const Eve=(e,{size:t,radius:n,variant:r,gradient:i,color:o,autoContrast:s,name:a,allowedInitialsColors:c})=>{const u=o==="initials"&&typeof a=="string"?bve(a,c):o,f=e.variantColorResolver({color:u||"gray",theme:e,gradient:i,variant:r||"light",autoContrast:s});return{root:{"--avatar-size":nn(t,"avatar-size"),"--avatar-radius":n===void 0?void 0:vr(n),"--avatar-bg":u||r?f.background:void 0,"--avatar-color":u||r?f.color:void 0,"--avatar-bd":u||r?f.border:void 0}}},Zb=Cr((e,t)=>{const n=ze("Avatar",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,src:u,alt:f,radius:h,color:m,gradient:g,imageProps:y,children:E,autoContrast:C,mod:S,name:N,allowedInitialsColors:_,attributes:O,...M}=n,R=fve(),[L,F]=A.useState(!u),z=kt({name:"Avatar",props:n,classes:Xb,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:O,vars:c,varsResolver:Eve});return A.useEffect(()=>F(!u),[u]),k.jsx(tt,{...z("root"),mod:[{"within-group":R.withinGroup},S],ref:t,...M,children:L||!u?k.jsx("span",{...z("placeholder"),title:f,children:E||typeof N=="string"&&yve(N)||k.jsx(pve,{})}):k.jsx("img",{...y,...z("image"),src:u,alt:f,onError:B=>{F(!0),y?.onError?.(B)}})})});Zb.classes=Xb;Zb.displayName="@mantine/core/Avatar";Zb.Group=Jx;var Z7={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const vve=(e,{radius:t,color:n,gradient:r,variant:i,size:o,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--badge-height":nn(o,"badge-height"),"--badge-padding-x":nn(o,"badge-padding-x"),"--badge-fz":nn(o,"badge-fz"),"--badge-radius":t===void 0?void 0:vr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Xs(n,e):void 0}}},ek=Cr((e,t)=>{const n=ze("Badge",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,radius:u,color:f,gradient:h,leftSection:m,rightSection:g,children:y,variant:E,fullWidth:C,autoContrast:S,circle:N,mod:_,attributes:O,...M}=n,R=kt({name:"Badge",props:n,classes:Z7,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:O,vars:c,varsResolver:vve});return k.jsxs(tt,{variant:E,mod:[{block:C,circle:N,"with-right-section":!!g,"with-left-section":!!m},_],...R("root",{variant:E}),ref:t,...M,children:[m&&k.jsx("span",{...R("section"),"data-position":"left",children:m}),k.jsx("span",{...R("label"),children:y}),g&&k.jsx("span",{...R("section"),"data-position":"right",children:g})]})});ek.classes=Z7;ek.displayName="@mantine/core/Badge";var Rd={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const H6={orientation:"horizontal"},Cve=(e,{borderWidth:t})=>({group:{"--button-border-width":ke(t)}}),tk=_t((e,t)=>{const n=ze("ButtonGroup",H6,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:c,vars:u,borderWidth:f,variant:h,mod:m,attributes:g,...y}=ze("ButtonGroup",H6,e),E=kt({name:"ButtonGroup",props:n,classes:Rd,className:r,style:i,classNames:o,styles:s,unstyled:a,attributes:g,vars:u,varsResolver:Cve,rootSelector:"group"});return k.jsx(tt,{...E("group"),ref:t,variant:h,mod:[{"data-orientation":c},m],role:"group",...y})});tk.classes=Rd;tk.displayName="@mantine/core/ButtonGroup";const wve=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":nn(s,"section-height"),"--section-padding-x":nn(s,"section-padding-x"),"--section-fz":s?.includes("compact")?Qr(s.replace("compact-","")):Qr(s),"--section-radius":t===void 0?void 0:vr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},nk=_t((e,t)=>{const n=ze("ButtonGroupSection",null,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:c,variant:u,gradient:f,radius:h,autoContrast:m,attributes:g,...y}=n,E=kt({name:"ButtonGroupSection",props:n,classes:Rd,className:r,style:i,classNames:o,styles:s,unstyled:a,attributes:g,vars:c,varsResolver:wve,rootSelector:"groupSection"});return k.jsx(tt,{...E("groupSection"),ref:t,variant:u,...y})});nk.classes=Rd;nk.displayName="@mantine/core/ButtonGroupSection";const Sve={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ke(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Tve=(e,{radius:t,color:n,gradient:r,variant:i,size:o,justify:s,autoContrast:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":nn(o,"button-height"),"--button-padding-x":nn(o,"button-padding-x"),"--button-fz":o?.includes("compact")?Qr(o.replace("compact-","")):Qr(o),"--button-radius":t===void 0?void 0:vr(t),"--button-bg":n||i?c.background:void 0,"--button-hover":n||i?c.hover:void 0,"--button-color":c.color,"--button-bd":n||i?c.border:void 0,"--button-hover-color":n||i?c.hoverColor:void 0}}},Mo=Cr((e,t)=>{const n=ze("Button",null,e),{style:r,vars:i,className:o,color:s,disabled:a,children:c,leftSection:u,rightSection:f,fullWidth:h,variant:m,radius:g,loading:y,loaderProps:E,gradient:C,classNames:S,styles:N,unstyled:_,"data-disabled":O,autoContrast:M,mod:R,attributes:L,...F}=n,z=kt({name:"Button",props:n,classes:Rd,className:o,style:r,classNames:S,styles:N,unstyled:_,attributes:L,vars:i,varsResolver:Tve}),B=!!u,U=!!f;return k.jsxs(ml,{ref:t,...z("root",{active:!a&&!y&&!O}),unstyled:_,variant:m,disabled:a||y,mod:[{disabled:a||O,loading:y,block:h,"with-left-section":B,"with-right-section":U},R],...F,children:[typeof y=="boolean"&&k.jsx(ll,{mounted:y,transition:Sve,duration:150,children:q=>k.jsx(tt,{component:"span",...z("loader",{style:q}),"aria-hidden":!0,children:k.jsx(gl,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...E})})}),k.jsxs("span",{...z("inner"),children:[u&&k.jsx(tt,{component:"span",...z("section"),mod:{position:"left"},children:u}),k.jsx(tt,{component:"span",mod:{loading:y},...z("label"),children:c}),f&&k.jsx(tt,{component:"span",...z("section"),mod:{position:"right"},children:f})]})]})});Mo.classes=Rd;Mo.displayName="@mantine/core/Button";Mo.Group=tk;Mo.GroupSection=nk;const[xve,kve]=Pb("Card component was not found in tree");var rk={root:"m_e615b15f",section:"m_599a2148"};const Jb=Cr((e,t)=>{const n=ze("CardSection",null,e),{classNames:r,className:i,style:o,styles:s,vars:a,withBorder:c,inheritPadding:u,mod:f,...h}=n,m=kve();return k.jsx(tt,{ref:t,mod:[{"with-border":c,"inherit-padding":u},f],...m.getStyles("section",{className:i,style:o,styles:s,classNames:r}),...h})});Jb.classes=rk;Jb.displayName="@mantine/core/CardSection";const _ve=(e,{padding:t})=>({root:{"--card-padding":kp(t)}}),_p=Cr((e,t)=>{const n=ze("Card",null,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,children:u,padding:f,attributes:h,...m}=n,g=kt({name:"Card",props:n,classes:rk,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:h,vars:c,varsResolver:_ve}),y=A.Children.toArray(u),E=y.map((C,S)=>typeof C=="object"&&C&&"type"in C&&C.type===Jb?A.cloneElement(C,{"data-first-section":S===0||void 0,"data-last-section":S===y.length-1||void 0}):C);return k.jsx(xve,{value:{getStyles:g},children:k.jsx(qx,{ref:t,unstyled:a,...g("root"),...m,children:E})})});_p.classes=rk;_p.displayName="@mantine/core/Card";_p.Section=Jb;const[Ave,Nve]=Hb();function J7(e){const{value:t,defaultValue:n,onChange:r,multiple:i,children:o}=ze("ChipGroup",null,e),[s,a]=_d({value:t,defaultValue:n,finalValue:i?[]:null,onChange:r}),c=f=>Array.isArray(s)?s.includes(f):f===s,u=f=>{const h=f.currentTarget.value;Array.isArray(s)?a(s.includes(h)?s.filter(m=>m!==h):[...s,h]):a(h)};return k.jsx(Ave,{value:{isChipSelected:c,onChange:u,multiple:i},children:o})}J7.displayName="@mantine/core/ChipGroup";var eH={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const Mve={type:"checkbox"},Rve=(e,{size:t,radius:n,variant:r,color:i,autoContrast:o})=>{const s=e.variantColorResolver({color:i||e.primaryColor,theme:e,variant:r||"filled",autoContrast:o});return{root:{"--chip-fz":Qr(t),"--chip-size":nn(t,"chip-size"),"--chip-radius":n===void 0?void 0:vr(n),"--chip-checked-padding":nn(t,"chip-checked-padding"),"--chip-padding":nn(t,"chip-padding"),"--chip-icon-size":nn(t,"chip-icon-size"),"--chip-bg":i||r?s.background:void 0,"--chip-hover":i||r?s.hover:void 0,"--chip-color":i||r?s.color:void 0,"--chip-bd":i||r?s.border:void 0,"--chip-spacing":nn(t,"chip-spacing")}}},ey=_t((e,t)=>{const n=ze("Chip",Mve,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,id:u,checked:f,defaultChecked:h,onChange:m,value:g,wrapperProps:y,type:E,disabled:C,children:S,size:N,variant:_,icon:O,rootRef:M,autoContrast:R,mod:L,attributes:F,...z}=n,B=kt({name:"Chip",classes:eH,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:F,vars:c,varsResolver:Rve}),U=Nve(),q=kd(u),{styleProps:re,rest:J}=Vb(z),[ae,W]=_d({value:f,defaultValue:h,finalValue:!1,onChange:m}),Z=U?{checked:U.isChipSelected(g),onChange:ue=>{U.onChange(ue),m?.(ue.currentTarget.checked)},type:U.multiple?"checkbox":"radio"}:{},te=Z.checked||ae;return k.jsxs(tt,{size:N,variant:_,ref:M,mod:L,...B("root"),...re,...y,children:[k.jsx("input",{type:E,...B("input"),checked:te,onChange:ue=>W(ue.currentTarget.checked),id:q,disabled:C,ref:t,value:g,...Z,...J}),k.jsxs("label",{htmlFor:q,"data-checked":te||void 0,"data-disabled":C||void 0,...B("label",{variant:_||"filled"}),children:[te&&k.jsx("span",{...B("iconWrapper"),children:O||k.jsx(N1,{...B("checkIcon")})}),k.jsx("span",{children:S})]})]})});ey.classes=eH;ey.displayName="@mantine/core/Chip";ey.Group=J7;var tH={root:"m_3eebeb36",label:"m_9e365f20"};const Ove={orientation:"horizontal"},Dve=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Xs(t,e):void 0,"--divider-border-style":n,"--divider-size":nn(r,"divider-size")}}),ik=_t((e,t)=>{const n=ze("Divider",Ove,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,color:u,orientation:f,label:h,labelPosition:m,mod:g,attributes:y,...E}=n,C=kt({name:"Divider",classes:tH,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:y,vars:c,varsResolver:Dve});return k.jsx(tt,{ref:t,mod:[{orientation:f,"with-label":!!h},g],...C("root"),...E,role:"separator",children:h&&k.jsx(tt,{component:"span",mod:{position:m},...C("label"),children:h})})});ik.classes=tH;ik.displayName="@mantine/core/Divider";const Lve={multiple:!1},nH=A.forwardRef((e,t)=>{const{onChange:n,children:r,multiple:i,accept:o,name:s,form:a,resetRef:c,disabled:u,capture:f,inputProps:h,...m}=ze("FileButton",Lve,e),g=A.useRef(null),y=()=>{!u&&g.current?.click()},E=S=>{if(S.currentTarget.files===null)return n(i?[]:null);n(i?Array.from(S.currentTarget.files):S.currentTarget.files[0]||null)};return k1(c,()=>{g.current&&(g.current.value="")}),k.jsxs(k.Fragment,{children:[k.jsx("input",{style:{display:"none"},type:"file",accept:o,multiple:i,onChange:E,ref:Ao(t,g),name:s,form:a,capture:f,...h}),r({onClick:y,...m})]})});nH.displayName="@mantine/core/FileButton";const Ive=({value:e})=>k.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),Bve={valueComponent:Ive},ok=_t((e,t)=>{const n=ze("FileInput",Bve,e),{unstyled:r,vars:i,onChange:o,value:s,defaultValue:a,multiple:c,accept:u,name:f,form:h,valueComponent:m,clearable:g,clearButtonProps:y,readOnly:E,capture:C,fileInputProps:S,rightSection:N,size:_,placeholder:O,component:M,resetRef:R,classNames:L,styles:F,attributes:z,...B}=n,U=A.useRef(null),{resolvedClassNames:q,resolvedStyles:re}=$b({classNames:L,styles:F,props:n}),[J,ae]=_d({value:s,defaultValue:a,onChange:o,finalValue:c?[]:null}),W=Array.isArray(J)?J.length!==0:J!==null,Z=N||(g&&W&&!E?k.jsx(Yb,{...y,variant:"subtle",onClick:()=>ae(c?[]:null),size:_,unstyled:r}):null);return A.useEffect(()=>{(Array.isArray(J)&&J.length===0||J===null)&&U.current?.()},[J]),k.jsx(nH,{onChange:ae,multiple:c,accept:u,name:f,form:h,resetRef:Ao(U,R),disabled:E,capture:C,inputProps:S,children:te=>k.jsx(Md,{component:M||"button",ref:t,rightSection:Z,...te,...B,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:_,classNames:L,styles:F,attributes:z,children:W?k.jsx(m,{value:J}):k.jsx(Si.Placeholder,{__staticSelector:"FileInput",classNames:q,styles:re,attributes:z,children:O})})})});ok.classes=Md.classes;ok.displayName="@mantine/core/FileInput";const Pve=ok;var rH={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const U6={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:xp("overlay")},Hve=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),sk=_t((e,t)=>{const n=ze("LoadingOverlay",U6,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,transitionProps:u,loaderProps:f,overlayProps:h,visible:m,zIndex:g,attributes:y,...E}=n,C=ei(),S=kt({name:"LoadingOverlay",classes:rH,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:y,vars:c,varsResolver:Hve}),N={...U6.overlayProps,...h};return k.jsx(ll,{transition:"fade",...u,mounted:!!m,children:_=>k.jsxs(tt,{...S("root",{style:_}),ref:t,...E,children:[k.jsx(gl,{...S("loader"),unstyled:a,...f}),k.jsx(Jh,{...N,...S("overlay"),darkHidden:!0,unstyled:a,color:h?.color||C.white}),k.jsx(Jh,{...N,...S("overlay"),lightHidden:!0,unstyled:a,color:h?.color||C.colors.dark[5]})]})})});sk.classes=rH;sk.displayName="@mantine/core/LoadingOverlay";const[Uve,bl]=Pb("Menu component was not found in the tree");var yl={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504",chevron:"m_b85b0bed"};const ak=_t((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ze("MenuDivider",null,e),c=bl();return k.jsx(tt,{ref:t,...c.getStyles("divider",{className:r,style:i,styles:o,classNames:n}),...a})});ak.classes=yl;ak.displayName="@mantine/core/MenuDivider";const lk=_t((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,onMouseEnter:a,onMouseLeave:c,onKeyDown:u,children:f,...h}=ze("MenuDropdown",null,e),m=A.useRef(null),g=bl(),y=Yr(u,S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&(S.preventDefault(),m.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),E=Yr(a,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.openDropdown()),C=Yr(c,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.closeDropdown());return k.jsxs(No.Dropdown,{...h,onMouseEnter:E,onMouseLeave:C,role:"menu","aria-orientation":"vertical",ref:Ao(t,m),...g.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[g.withInitialFocusPlaceholder&&k.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]})});lk.classes=yl;lk.displayName="@mantine/core/MenuDropdown";const[Fve,ty]=Hb(),ck=Cr((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,color:a,closeMenuOnClick:c,leftSection:u,rightSection:f,children:h,disabled:m,"data-disabled":g,...y}=ze("MenuItem",null,e),E=bl(),C=ty(),S=ei(),{dir:N}=Ad(),_=A.useRef(null),O=y,M=Yr(O.onClick,()=>{g||(typeof c=="boolean"?c&&E.closeDropdownImmediately():E.closeOnItemClick&&E.closeDropdownImmediately())}),R=a?S.variantColorResolver({color:a,theme:S,variant:"light"}):void 0,L=a?Nc({color:a,theme:S}):null,F=Yr(O.onKeyDown,z=>{z.key==="ArrowLeft"&&C&&(C.close(),C.focusParentItem())});return k.jsxs(ml,{onMouseDown:z=>z.preventDefault(),...y,unstyled:E.unstyled,tabIndex:E.menuItemTabIndex,...E.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:Ao(_,t),role:"menuitem",disabled:m,"data-menu-item":!0,"data-disabled":m||g||void 0,"data-mantine-stop-propagation":!0,onClick:M,onKeyDown:Bx({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:E.loop,dir:N,orientation:"vertical",onKeyDown:F}),__vars:{"--menu-item-color":L?.isThemeColor&&L?.shade===void 0?`var(--mantine-color-${L.color}-6)`:R?.color,"--menu-item-hover":R?.hover},children:[u&&k.jsx("div",{...E.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:u}),h&&k.jsx("div",{...E.getStyles("itemLabel",{styles:o,classNames:n}),children:h}),f&&k.jsx("div",{...E.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:f})]})});ck.classes=yl;ck.displayName="@mantine/core/MenuItem";const uk=_t((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ze("MenuLabel",null,e),c=bl();return k.jsx(tt,{ref:t,...c.getStyles("label",{className:r,style:i,styles:o,classNames:n}),...a})});uk.classes=yl;uk.displayName="@mantine/core/MenuLabel";const dk=_t((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,onMouseEnter:a,onMouseLeave:c,onKeyDown:u,children:f,...h}=ze("MenuSubDropdown",null,e),m=A.useRef(null),g=bl(),y=ty(),E=Yr(a,y?.open),C=Yr(c,y?.close);return k.jsx(No.Dropdown,{...h,onMouseEnter:E,onMouseLeave:C,role:"menu","aria-orientation":"vertical",ref:Ao(t,m),...g.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,children:f})});dk.classes=yl;dk.displayName="@mantine/core/MenuSubDropdown";const fk=Cr((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,color:a,leftSection:c,rightSection:u,children:f,disabled:h,"data-disabled":m,closeMenuOnClick:g,...y}=ze("MenuSubItem",null,e),E=bl(),C=ty(),S=ei(),{dir:N}=Ad(),_=A.useRef(null),O=y,M=a?S.variantColorResolver({color:a,theme:S,variant:"light"}):void 0,R=a?Nc({color:a,theme:S}):null,L=Yr(O.onKeyDown,U=>{U.key==="ArrowRight"&&(C?.open(),C?.focusFirstItem()),U.key==="ArrowLeft"&&C?.parentContext&&(C.parentContext.close(),C.parentContext.focusParentItem())}),F=Yr(O.onClick,()=>{!m&&g&&E.closeDropdownImmediately()}),z=Yr(O.onMouseEnter,C?.open),B=Yr(O.onMouseLeave,C?.close);return k.jsxs(ml,{onMouseDown:U=>U.preventDefault(),...y,unstyled:E.unstyled,tabIndex:E.menuItemTabIndex,...E.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:Ao(_,t),role:"menuitem",disabled:h,"data-menu-item":!0,"data-sub-menu-item":!0,"data-disabled":h||m||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:z,onMouseLeave:B,onClick:F,onKeyDown:Bx({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:E.loop,dir:N,orientation:"vertical",onKeyDown:L}),__vars:{"--menu-item-color":R?.isThemeColor&&R?.shade===void 0?`var(--mantine-color-${R.color}-6)`:M?.color,"--menu-item-hover":M?.hover},children:[c&&k.jsx("div",{...E.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:c}),f&&k.jsx("div",{...E.getStyles("itemLabel",{styles:o,classNames:n}),children:f}),k.jsx("div",{...E.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:u||k.jsx(K7,{...E.getStyles("chevron"),size:14})})]})});fk.classes=yl;fk.displayName="@mantine/core/MenuSubItem";function iH({children:e,refProp:t}){if(!xd(e))throw new Error("Menu.Sub.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return bl(),k.jsx(No.Target,{refProp:t,popupType:"menu",children:e})}iH.displayName="@mantine/core/MenuSubTarget";const jve={offset:0,position:"right-start",transitionProps:{duration:0},middlewares:{shift:{crossAxis:!0}}};function Od(e){const{children:t,closeDelay:n,...r}=ze("MenuSub",jve,e),i=kd(),[o,{open:s,close:a}]=sye(!1),c=ty(),{openDropdown:u,closeDropdown:f}=W7({open:s,close:a,closeDelay:n,openDelay:0}),h=()=>window.setTimeout(()=>{document.getElementById(`${i}-dropdown`)?.querySelectorAll("[data-menu-item]:not([data-disabled])")[0]?.focus()},16),m=()=>window.setTimeout(()=>{document.getElementById(`${i}-target`)?.focus()},16);return k.jsx(Fve,{value:{opened:o,close:f,open:u,focusFirstItem:h,focusParentItem:m,parentContext:c},children:k.jsx(No,{opened:o,withinPortal:!1,withArrow:!1,id:i,...r,children:t})})}Od.extend=e=>e;Od.displayName="@mantine/core/MenuSub";Od.Target=iH;Od.Dropdown=dk;Od.Item=fk;const zve={refProp:"ref"},oH=A.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=ze("MenuTarget",zve,e);if(!xd(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=bl(),s=n.props,a=Yr(s.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),c=Yr(s.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),u=Yr(s.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return k.jsx(No.Target,{refProp:r,popupType:"menu",ref:t,...i,children:A.cloneElement(n,{onClick:a,onMouseEnter:c,onMouseLeave:u,"data-expanded":o.opened?!0:void 0})})});oH.displayName="@mantine/core/MenuTarget";const $ve={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function fn(e){const t=ze("Menu",$ve,e),{children:n,onOpen:r,onClose:i,opened:o,defaultOpened:s,trapFocus:a,onChange:c,closeOnItemClick:u,loop:f,closeOnEscape:h,trigger:m,openDelay:g,closeDelay:y,classNames:E,styles:C,unstyled:S,variant:N,vars:_,menuItemTabIndex:O,keepMounted:M,withInitialFocusPlaceholder:R,attributes:L,...F}=t,z=kt({name:"Menu",classes:yl,props:t,classNames:E,styles:C,unstyled:S,attributes:L}),[B,U]=_d({value:o,defaultValue:s,finalValue:!1,onChange:c}),[q,re]=A.useState(!1),J=()=>{U(!1),re(!1),B&&i?.()},ae=()=>{U(!0),!B&&r?.()},W=()=>{B?J():ae()},{openDropdown:Z,closeDropdown:te}=W7({open:ae,close:J,closeDelay:y,openDelay:g}),ue=ie=>$be("[data-menu-item]","[data-menu-dropdown]",ie),{resolvedClassNames:$,resolvedStyles:K}=$b({classNames:E,styles:C,props:t});return k.jsx(Uve,{value:{getStyles:z,opened:B,toggleDropdown:W,getItemIndex:ue,openedViaClick:q,setOpenedViaClick:re,closeOnItemClick:u,closeDropdown:m==="click"?J:te,openDropdown:m==="click"?ae:Z,closeDropdownImmediately:J,loop:f,trigger:m,unstyled:S,menuItemTabIndex:O,withInitialFocusPlaceholder:R},children:k.jsx(No,{...F,opened:B,onChange:W,defaultOpened:s,trapFocus:M?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:$,styles:K,unstyled:S,variant:N,keepMounted:M,children:n})})}fn.extend=e=>e;fn.withProps=bEe(fn);fn.classes=yl;fn.displayName="@mantine/core/Menu";fn.Item=ck;fn.Label=uk;fn.Dropdown=lk;fn.Target=oH;fn.Divider=ak;fn.Sub=Od;const Vve={duration:100,transition:"fade"};function F6(e,t){return{...Vve,...t,...e}}function qve({offset:e,position:t,defaultOpened:n}){const[r,i]=A.useState(n),o=A.useRef(null),{x:s,y:a,elements:c,refs:u,update:f,placement:h}=hd({placement:t,middleware:[wc({crossAxis:!0,padding:5,rootBoundary:"document"})]}),m=h.includes("right")?e:t.includes("left")?e*-1:0,g=h.includes("bottom")?e:t.includes("top")?e*-1:0,y=A.useCallback(({clientX:E,clientY:C})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:E,y:C,left:E+m,top:C+g,right:E,bottom:C}}})},[c.reference]);return A.useEffect(()=>{if(u.floating.current){const E=o.current;E.addEventListener("mousemove",y);const C=zs(u.floating.current);return C.forEach(S=>{S.addEventListener("scroll",f)}),()=>{E.removeEventListener("mousemove",y),C.forEach(S=>{S.removeEventListener("scroll",f)})}}},[c.reference,u.floating.current,f,y,r]),{handleMouseMove:y,x:s,y:a,opened:r,setOpened:i,boundaryRef:o,floating:u.setFloating}}var ny={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Yve={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:xp("popover")},Gve=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:vr(t),"--tooltip-bg":n?Xs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),hk=_t((e,t)=>{const n=ze("TooltipFloating",Yve,e),{children:r,refProp:i,withinPortal:o,style:s,className:a,classNames:c,styles:u,unstyled:f,radius:h,color:m,label:g,offset:y,position:E,multiline:C,zIndex:S,disabled:N,defaultOpened:_,variant:O,vars:M,portalProps:R,attributes:L,...F}=n,z=ei(),B=kt({name:"TooltipFloating",props:n,classes:ny,className:a,style:s,classNames:c,styles:u,unstyled:f,attributes:L,rootSelector:"tooltip",vars:M,varsResolver:Gve}),{handleMouseMove:U,x:q,y:re,opened:J,boundaryRef:ae,floating:W,setOpened:Z}=qve({offset:y,position:E,defaultOpened:_});if(!xd(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const te=Ao(ae,Px(r),t),ue=r.props,$=ie=>{ue.onMouseEnter?.(ie),U(ie),Z(!0)},K=ie=>{ue.onMouseLeave?.(ie),Z(!1)};return k.jsxs(k.Fragment,{children:[k.jsx(ad,{...R,withinPortal:o,children:k.jsx(tt,{...F,...B("tooltip",{style:{...x7(s,z),zIndex:S,display:!N&&J?"block":"none",top:(re&&Math.round(re))??"",left:(q&&Math.round(q))??""}}),variant:O,ref:W,mod:{multiline:C},children:g})}),A.cloneElement(r,{...ue,[i]:te,onMouseEnter:$,onMouseLeave:K})]})});hk.classes=ny;hk.displayName="@mantine/core/TooltipFloating";const sH=A.createContext(!1),Wve=sH.Provider,Kve=()=>A.useContext(sH),Qve={openDelay:0,closeDelay:0};function pk(e){const{openDelay:t,closeDelay:n,children:r}=ze("TooltipGroup",Qve,e);return k.jsx(Wve,{value:!0,children:k.jsx(RV,{delay:{open:t,close:n},children:r})})}pk.displayName="@mantine/core/TooltipGroup";pk.extend=e=>e;function Xve(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Zve(e){const t=Xve(e.middlewares),n=[as(e.offset)];return t.shift&&n.push(wc(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?go():go(t.flip)),n.push(DD({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?Wf():Wf(t.inline)):e.inline&&n.push(Wf()),n}function Jve(e){const[t,n]=A.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,o=Kve(),s=kd(),a=A.useCallback(M=>{n(M),M&&S(s)},[s]),{x:c,y:u,context:f,refs:h,placement:m,middlewareData:{arrow:{x:g,y}={}}}=hd({strategy:e.strategy,placement:e.position,open:i,onOpenChange:a,middleware:Zve(e),whileElementsMounted:ww}),{delay:E,currentId:C,setCurrentId:S}=OV(f,{id:s}),{getReferenceProps:N,getFloatingProps:_}=HD([NV(f,{enabled:e.events?.hover,delay:o?E:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),UV(f,{enabled:e.events?.focus,visibleOnly:!0}),jV(f,{role:"tooltip"}),PD(f,{enabled:typeof e.opened>"u"})]);$u(()=>{e.onPositionChange?.(m)},[m]);const O=i&&C&&C!==s;return{x:c,y:u,arrowX:g,arrowY:y,reference:h.setReference,floating:h.setFloating,getFloatingProps:_,getReferenceProps:N,isGroupPhase:O,opened:i,placement:m}}const j6={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:xp("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},eCe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const o=e.variantColorResolver({theme:e,color:n||e.primaryColor,autoContrast:i,variant:r||"filled"});return{tooltip:{"--tooltip-radius":t===void 0?void 0:vr(t),"--tooltip-bg":n?o.background:void 0,"--tooltip-color":n?o.color:void 0}}},Dd=_t((e,t)=>{const n=ze("Tooltip",j6,e),{children:r,position:i,refProp:o,label:s,openDelay:a,closeDelay:c,onPositionChange:u,opened:f,defaultOpened:h,withinPortal:m,radius:g,color:y,classNames:E,styles:C,unstyled:S,style:N,className:_,withArrow:O,arrowSize:M,arrowOffset:R,arrowRadius:L,arrowPosition:F,offset:z,transitionProps:B,multiline:U,events:q,zIndex:re,disabled:J,positionDependencies:ae,onClick:W,onMouseEnter:Z,onMouseLeave:te,inline:ue,variant:$,keepMounted:K,vars:ie,portalProps:j,mod:Se,floatingStrategy:Re,middlewares:Le,autoContrast:$e,attributes:ot,target:Ye,...Bt}=ze("Tooltip",j6,n),{dir:mn}=Ad(),Jt=A.useRef(null),rt=Jve({position:D7(mn,i),closeDelay:c,openDelay:a,onPositionChange:u,opened:f,defaultOpened:h,events:q,arrowRef:Jt,arrowOffset:R,offset:typeof z=="number"?z+(O?M/2:0):z,positionDependencies:[...ae,Ye??r],inline:ue,strategy:Re,middlewares:Le});A.useEffect(()=>{const Y=Ye instanceof HTMLElement?Ye:typeof Ye=="string"?document.querySelector(Ye):Ye?.current||null;Y&&rt.reference(Y)},[Ye,rt]);const Tt=kt({name:"Tooltip",props:n,classes:ny,className:_,style:N,classNames:E,styles:C,unstyled:S,attributes:ot,rootSelector:"tooltip",vars:ie,varsResolver:eCe});if(!Ye&&!xd(r))return null;if(Ye){const Y=F6(B,{duration:100,transition:"fade"});return k.jsx(k.Fragment,{children:k.jsx(ad,{...j,withinPortal:m,children:k.jsx(ll,{...Y,keepMounted:K,mounted:!J&&!!rt.opened,duration:rt.isGroupPhase?10:Y.duration,children:T=>k.jsxs(tt,{...Bt,"data-fixed":Re==="fixed"||void 0,variant:$,mod:[{multiline:U},Se],...rt.getFloatingProps({ref:rt.floating,className:Tt("tooltip").className,style:{...Tt("tooltip").style,...T,zIndex:re,top:rt.y??0,left:rt.x??0}}),children:[s,k.jsx(A1,{ref:Jt,arrowX:rt.arrowX,arrowY:rt.arrowY,visible:O,position:rt.placement,arrowSize:M,arrowOffset:R,arrowRadius:L,arrowPosition:F,...Tt("arrow")})]})})})})}const ce=r,ge=ce.props,Ae=Ao(rt.reference,Px(ce),t),He=F6(B,{duration:100,transition:"fade"});return k.jsxs(k.Fragment,{children:[k.jsx(ad,{...j,withinPortal:m,children:k.jsx(ll,{...He,keepMounted:K,mounted:!J&&!!rt.opened,duration:rt.isGroupPhase?10:He.duration,children:Y=>k.jsxs(tt,{...Bt,"data-fixed":Re==="fixed"||void 0,variant:$,mod:[{multiline:U},Se],...rt.getFloatingProps({ref:rt.floating,className:Tt("tooltip").className,style:{...Tt("tooltip").style,...Y,zIndex:re,top:rt.y??0,left:rt.x??0}}),children:[s,k.jsx(A1,{ref:Jt,arrowX:rt.arrowX,arrowY:rt.arrowY,visible:O,position:rt.placement,arrowSize:M,arrowOffset:R,arrowRadius:L,arrowPosition:F,...Tt("arrow")})]})})}),A.cloneElement(ce,rt.getReferenceProps({onClick:W,onMouseEnter:Z,onMouseLeave:te,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:na(_,ge.className),...ge,[o]:Ae}))]})});Dd.classes=ny;Dd.displayName="@mantine/core/Tooltip";Dd.Floating=hk;Dd.Group=pk;var aH={root:"m_18320242","skeleton-fade":"m_299c329c"};const tCe={visible:!0,animate:!0},nCe=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":ke(n),"--skeleton-width":ke(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:vr(r)}}),M1=_t((e,t)=>{const n=ze("Skeleton",tCe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,width:u,height:f,circle:h,visible:m,radius:g,animate:y,mod:E,attributes:C,...S}=n,N=kt({name:"Skeleton",classes:aH,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:C,vars:c,varsResolver:nCe});return k.jsx(tt,{ref:t,...N("root"),mod:[{visible:m,animate:y},E],...S})});M1.classes=aH;M1.displayName="@mantine/core/Skeleton";var lH={root:"m_6d731127"};const rCe={gap:"md",align:"stretch",justify:"flex-start"},iCe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":kp(t),"--stack-align":n,"--stack-justify":r}}),Ap=_t((e,t)=>{const n=ze("Stack",rCe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:c,align:u,justify:f,gap:h,variant:m,attributes:g,...y}=n,E=kt({name:"Stack",props:n,classes:lH,className:i,style:o,classNames:r,styles:s,unstyled:a,attributes:g,vars:c,varsResolver:iCe});return k.jsx(tt,{ref:t,...E("root"),variant:m,...y})});Ap.classes=lH;Ap.displayName="@mantine/core/Stack";const[oCe,mk]=Pb("Tabs component was not found in the tree");var Np={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const gk=_t((e,t)=>{const n=ze("TabsList",null,e),{children:r,className:i,grow:o,justify:s,classNames:a,styles:c,style:u,mod:f,...h}=n,m=mk();return k.jsx(tt,{...h,...m.getStyles("list",{className:i,style:u,classNames:a,styles:c,props:n,variant:m.variant}),ref:t,role:"tablist",variant:m.variant,mod:[{grow:o,orientation:m.orientation,placement:m.orientation==="vertical"&&m.placement,inverted:m.inverted},f],"aria-orientation":m.orientation,__vars:{"--tabs-justify":s},children:r})});gk.classes=Np;gk.displayName="@mantine/core/TabsList";const bk=_t((e,t)=>{const n=ze("TabsPanel",null,e),{children:r,className:i,value:o,classNames:s,styles:a,style:c,mod:u,keepMounted:f,...h}=n,m=mk(),g=m.value===o,y=m.keepMounted||f||g?r:null;return k.jsx(tt,{...m.getStyles("panel",{className:i,classNames:s,styles:a,style:[c,g?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:m.orientation},u],role:"tabpanel",id:m.getPanelId(o),"aria-labelledby":m.getTabId(o),...h,children:y})});bk.classes=Np;bk.displayName="@mantine/core/TabsPanel";const yk=_t((e,t)=>{const n=ze("TabsTab",null,e),{className:r,children:i,rightSection:o,leftSection:s,value:a,onClick:c,onKeyDown:u,disabled:f,color:h,style:m,classNames:g,styles:y,vars:E,mod:C,tabIndex:S,...N}=n,_=ei(),{dir:O}=Ad(),M=mk(),R=a===M.value,L=z=>{M.onChange(M.allowTabDeactivation&&a===M.value?null:a),c?.(z)},F={classNames:g,styles:y,props:n};return k.jsxs(ml,{...M.getStyles("tab",{className:r,style:m,variant:M.variant,...F}),disabled:f,unstyled:M.unstyled,variant:M.variant,mod:[{active:R,disabled:f,orientation:M.orientation,inverted:M.inverted,placement:M.orientation==="vertical"&&M.placement},C],ref:t,role:"tab",id:M.getTabId(a),"aria-selected":R,tabIndex:S!==void 0?S:R||M.value===null?0:-1,"aria-controls":M.getPanelId(a),onClick:L,__vars:{"--tabs-color":h?Xs(h,_):void 0},onKeyDown:Bx({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:M.activateTabWithKeyboard,loop:M.loop,orientation:M.orientation||"horizontal",dir:O,onKeyDown:u}),...N,children:[s&&k.jsx("span",{...M.getStyles("tabSection",F),"data-position":"left",children:s}),i&&k.jsx("span",{...M.getStyles("tabLabel",F),children:i}),o&&k.jsx("span",{...M.getStyles("tabSection",F),"data-position":"right",children:o})]})});yk.classes=Np;yk.displayName="@mantine/core/TabsTab";const z6="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",sCe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},aCe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":vr(t),"--tabs-color":Xs(n,e),"--tabs-text-color":Qye(r,e)?y7({color:n,theme:e,autoContrast:r}):void 0}}),Us=_t((e,t)=>{const n=ze("Tabs",sCe,e),{defaultValue:r,value:i,onChange:o,orientation:s,children:a,loop:c,id:u,activateTabWithKeyboard:f,allowTabDeactivation:h,variant:m,color:g,radius:y,inverted:E,placement:C,keepMounted:S,classNames:N,styles:_,unstyled:O,className:M,style:R,vars:L,autoContrast:F,mod:z,attributes:B,...U}=n,q=kd(u),[re,J]=_d({value:i,defaultValue:r,finalValue:null,onChange:o}),ae=kt({name:"Tabs",props:n,classes:Np,className:M,style:R,classNames:N,styles:_,unstyled:O,attributes:B,vars:L,varsResolver:aCe});return k.jsx(oCe,{value:{placement:C,value:re,orientation:s,id:q,loop:c,activateTabWithKeyboard:f,getTabId:T6(`${q}-tab`,z6),getPanelId:T6(`${q}-panel`,z6),onChange:J,allowTabDeactivation:h,variant:m,color:g,radius:y,inverted:E,keepMounted:S,unstyled:O,getStyles:ae},children:k.jsx(tt,{ref:t,id:q,variant:m,mod:[{orientation:s,inverted:s==="horizontal"&&E,placement:s==="vertical"&&C},z],...ae("root"),...U,children:a})})});Us.classes=Np;Us.displayName="@mantine/core/Tabs";Us.Tab=yk;Us.Panel=bk;Us.List=gk;const ry=_t((e,t)=>{const n=ze("TextInput",null,e);return k.jsx(Md,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});ry.classes=Md.classes;ry.displayName="@mantine/core/TextInput";const cH=(e,t,n=!1)=>{const r=[];function i(o,s="--bn"){for(const a in o){const c=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u=`${s}-${c}`;typeof o[a]!="object"?(typeof o[a]=="number"&&(o[a]=`${o[a]}px`),n?t.style.removeProperty(u):t.style.setProperty(u,o[a].toString())):i(o[a],u)}}return i(e),r},$6=(e,t)=>cH(e,t),lCe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},cCe=e=>cH(lCe,e,!0),uH=e=>k.jsxs(Ap,{gap:0,className:"bn-tooltip",children:[k.jsx(ns,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&k.jsx(ns,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]}),iw=A.forwardRef((e,t)=>{const{className:n,children:r,mainTooltip:i,secondaryTooltip:o,icon:s,isSelected:a,isDisabled:c,onClick:u,label:f,variant:h,...m}=e;mt(m,!1);const[g,y]=A.useState(!1),E=r?k.jsx(Mo,{"aria-label":f,className:n,onMouseDown:C=>{Gw()&&C.currentTarget.focus()},onClick:C=>{y(!0),u?.(C)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?"compact-xs":"xs",disabled:c||!1,ref:t,...m,children:r}):k.jsx(Mc,{className:n,"aria-label":f,onMouseDown:C=>{Gw()&&C.currentTarget.focus()},onClick:C=>{y(!0),u?.(C)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?20:30,disabled:c||!1,ref:t,...m,children:s});return i?k.jsx(Dd,{disabled:g,withinPortal:!1,label:k.jsx(uH,{mainTooltip:i,secondaryTooltip:o}),children:E}):E}),uCe=A.forwardRef((e,t)=>{const{className:n,text:r,icon:i,isSelected:o,mainTooltip:s,secondaryTooltip:a,onClick:c,onMouseEnter:u,...f}=e;mt(f,!1);const[h,m]=A.useState(!1),g=k.jsxs(ey,{className:n,checked:o===!0,wrapperProps:{onMouseEnter:u,onMouseLeave:()=>m(!1),onClick:y=>{m(!0),c?.(y)}},variant:"light",icon:null,ref:t,children:[k.jsx("span",{children:i}),k.jsx("span",{children:r})]});return!s||h?g:k.jsx(Dd,{refProp:"rootRef",withinPortal:!1,label:k.jsx(uH,{mainTooltip:s,secondaryTooltip:a}),children:g})}),dCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i),k.jsx(cr,{className:n,ref:t,children:r})}),fCe=A.forwardRef((e,t)=>{const{className:n,children:r,headerText:i,selected:o,onFocus:s,onBlur:a,tabIndex:c,...u}=e;mt(u,!1);const f=A.useRef(null);return A.useEffect(()=>{var h;o&&((h=f.current)==null||h.scrollIntoView({behavior:"smooth",block:"center"}))},[o]),k.jsxs(_p,{className:Sn(n,o?"selected":""),onFocus:s,onBlur:a,tabIndex:c,ref:Lx([t,f]),children:[i&&k.jsx(ns,{className:"bn-header-text",children:i}),r]})}),hCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i,!1),k.jsx(_p.Section,{className:n,ref:t,children:r})}),pCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i,!1),k.jsx(ik,{className:n,label:k.jsx(ns,{children:r}),ref:t})}),mCe=A.forwardRef((e,t)=>{const{authorInfo:n,timeString:r,edited:i,...o}=e,s=ut();return mt(o,!1),n==="loading"?k.jsxs(cr,{children:[k.jsx(M1,{height:24,width:24}),k.jsx("div",{children:k.jsx(M1,{height:12,width:100})})]}):k.jsxs(cr,{children:[k.jsx(Zb,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),k.jsxs(ns,{fz:"sm",fw:"bold",children:[n.username,k.jsxs(ns,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",i&&`(${s.comments.edited})`]})]})]})}),gCe=A.forwardRef((e,t)=>{const{className:n,showActions:r,authorInfo:i,timeString:o,edited:s,actions:a,children:c,...u}=e,{hovered:f,ref:h}=oye(),{focused:m,ref:g}=m7(),y=Lx([t,h]);return mt(u,!1),k.jsxs(cr,{pos:"relative",ref:y,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&f||m)?k.jsx(cr,{ref:g,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,k.jsx(mCe,{...e}),c]})}),bCe=A.forwardRef((e,t)=>{const{className:n,autoFocus:r,onFocus:i,onBlur:o,editor:s,editable:a,...c}=e;mt(c,!1);const u=_o();return k.jsx(iy,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,theme:u?.colorSchemePreference,ref:t,onFocus:i,onBlur:o,children:k.jsx(t7,{formattingToolbar:yCe})})}),yCe=()=>{const e=JP([]).filter(t=>t.key!=="nestBlockButton"&&t.key!=="unnestBlockButton");return k.jsx(e7,{blockTypeSelectItems:[],children:e})},ECe=A.forwardRef((e,t)=>{const{className:n,name:r,label:i,variant:o,icon:s,value:a,autoFocus:c,placeholder:u,disabled:f,onKeyDown:h,onChange:m,onSubmit:g,autoComplete:y,rightSection:E,...C}=e;return mt(C),k.jsx(ry,{size:"xs",className:Sn(n||"",o==="large"?"bn-mt-input-large":""),ref:t,name:r,label:i,leftSection:s,value:a,autoFocus:c,"data-autofocus":c?"true":void 0,rightSection:E,placeholder:u,disabled:f,onKeyDown:h,onChange:m,onSubmit:g,autoComplete:y})}),vCe=A.createContext(void 0),CCe=e=>{const{children:t,onOpenChange:n,position:r,sub:i,...o}=e;return mt(o),i?k.jsx(fn.Sub,{transitionProps:{duration:250,exitDelay:250},withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t}):k.jsx(fn,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},wCe=A.forwardRef((e,t)=>{const{className:n,children:r,icon:i,checked:o,subTrigger:s,onClick:a,...c}=e;return mt(c,!1),s?k.jsx(fn.Sub.Item,{className:n,ref:t,leftSection:i,rightSection:o?k.jsx(N1,{size:10}):o===!1?k.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...c,children:r}):k.jsx(fn.Item,{className:n,ref:t,leftSection:i,rightSection:o?k.jsx(N1,{size:10}):o===!1?k.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...c,children:r})}),SCe=e=>{const{children:t,sub:n,...r}=e;return mt(r),n?k.jsx(fn.Sub.Target,{children:t}):k.jsx(fn.Target,{children:t})},TCe=A.forwardRef((e,t)=>{const{className:n,children:r,sub:i,...o}=e;mt(o);const s=A.useContext(vCe);return i?k.jsx(fn.Sub.Dropdown,{className:n,ref:t,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r}):k.jsx(fn.Dropdown,{className:n,ref:t,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r})}),xCe=A.forwardRef((e,t)=>{const{className:n,...r}=e;return mt(r),k.jsx(fn.Divider,{className:n,ref:t})}),kCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i),k.jsx(fn.Label,{className:n,ref:t,children:r})}),_Ce=A.forwardRef((e,t)=>{const{className:n,children:r,icon:i,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,label:u,...f}=e;return mt(f,!1),i?k.jsx(Mc,{size:24,className:n,ref:t,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,"aria-label":u,...f,children:i}):k.jsx(Mo,{className:n,ref:t,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,"aria-label":u,...f,children:r})}),ACe=A.forwardRef((e,t)=>{const{className:n,tabs:r,defaultOpenTab:i,openTab:o,setOpenTab:s,loading:a,...c}=e;return mt(c),k.jsx(cr,{className:n,ref:t,children:k.jsxs(Us,{value:o,defaultValue:i,onChange:s,children:[a&&k.jsx(sk,{visible:a}),k.jsx(Us.List,{children:r.map(u=>k.jsx(Us.Tab,{"data-test":`${u.name.toLowerCase()}-tab`,value:u.name,children:u.name},u.name))}),r.map(u=>k.jsx(Us.Panel,{value:u.name,children:u.tabPanel},u.name))]})})}),NCe=A.forwardRef((e,t)=>{const{className:n,children:r,onClick:i,label:o,...s}=e;return mt(s),k.jsx(Mo,{size:"xs","aria-label":o,className:n,ref:t,onClick:i,...s,children:r})}),MCe=A.forwardRef((e,t)=>{const{className:n,accept:r,value:i,placeholder:o,onChange:s,...a}=e;return mt(a),k.jsx(Pve,{size:"xs",className:n,ref:t,accept:r,value:i,placeholder:o,onChange:s,...a})}),RCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i),k.jsx("div",{className:n,ref:t,children:r})}),OCe=A.forwardRef((e,t)=>{const{className:n,value:r,placeholder:i,onKeyDown:o,onChange:s,...a}=e;return mt(a),k.jsx(ry,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:i,onKeyDown:o,onChange:s})}),DCe=e=>{const{opened:t,position:n,children:r,...i}=e;return mt(i),k.jsx(No,{withinPortal:!1,opened:t,position:n,children:r})},LCe=e=>{const{children:t,...n}=e;return mt(n),k.jsx(Gx,{children:t})},ICe=A.forwardRef((e,t)=>{const{className:n,children:r,variant:i,...o}=e;return mt(o),k.jsx(qb,{className:n,ref:t,children:r})}),BCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i,!1),k.jsx(cr,{align:"center",gap:0,className:n,ref:t,...i,children:r})}),PCe=A.forwardRef((e,t)=>{const{className:n,children:r,icon:i,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,label:u,...f}=e;return mt(f,!1),i?k.jsx(Mc,{size:24,className:n,ref:t,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,"aria-label":u,...f,children:i}):k.jsx(Mo,{className:n,ref:t,onClick:o,onDragEnd:s,onDragStart:a,draggable:c,"aria-label":u,...f,children:r})}),HCe=A.forwardRef((e,t)=>{const{className:n,children:r,id:i,...o}=e;return mt(o),k.jsx(Ap,{gap:0,className:n,ref:t,id:i,role:"listbox",children:r})}),UCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i),k.jsx(cr,{className:n,ref:t,children:k.jsx(cr,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),FCe=A.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:i,item:o,id:s,...a}=e;mt(a);const c=A.useRef(null);return A.useEffect(()=>{if(!c.current||!r)return;const u=a7(c.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));u==="top"?c.current.scrollIntoView(!0):u==="bottom"&&c.current.scrollIntoView(!1)},[r]),k.jsxs(cr,{gap:0,className:n,ref:Fb(t,c),id:s,role:"option",onMouseDown:u=>u.preventDefault(),onClick:i,"aria-selected":r||void 0,children:[o.icon&&k.jsx(cr,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:o.icon}),k.jsxs(Ap,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[k.jsx(ns,{className:"bn-mt-suggestion-menu-item-title",children:o.title}),k.jsx(ns,{className:"bn-mt-suggestion-menu-item-subtitle",children:o.subtext})]}),o.badge&&k.jsx(cr,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:k.jsx(ek,{size:"xs",children:o.badge})})]})}),jCe=A.forwardRef((e,t)=>{const{className:n,children:r,...i}=e;return mt(i),k.jsx(cr,{className:n,ref:t,children:r})}),zCe=A.forwardRef((e,t)=>{const{className:n,...r}=e;return mt(r),k.jsx(gl,{className:n,type:"dots",size:16,ref:t})}),$Ce=A.forwardRef((e,t)=>{const{className:n,children:r,id:i,columns:o,...s}=e;return mt(s),k.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${o}, 1fr)`},ref:t,id:i,role:"grid",children:r})}),VCe=A.forwardRef((e,t)=>{const{className:n,children:r,columns:i,...o}=e;return mt(o),k.jsx(cr,{className:n,style:{gridColumn:`1 / ${i+1}`},ref:t,children:k.jsx(cr,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),qCe=A.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:i,item:o,id:s,...a}=e;mt(a);const c=A.useRef(null);return A.useEffect(()=>{if(!c.current||!r)return;const u=a7(c.current,document.querySelector(".bn-grid-suggestion-menu"));u==="top"?c.current.scrollIntoView(!0):u==="bottom"&&c.current.scrollIntoView(!1)},[r]),k.jsx("div",{className:n,ref:Fb(t,c),id:s,role:"option",onClick:i,"aria-selected":r||void 0,children:o.icon})}),YCe=A.forwardRef((e,t)=>{const{className:n,children:r,columns:i,...o}=e;return mt(o),k.jsx(gl,{className:n,style:{gridColumn:`1 / ${i+1}`},type:"dots",ref:t})}),GCe=A.forwardRef((e,t)=>{const{children:n,className:r,onMouseDown:i,onClick:o,...s}=e;return mt(s,!1),k.jsx(Mo,{className:r,ref:t,onMouseDown:i,onClick:o,...s,children:n})}),WCe=A.forwardRef((e,t)=>{const{className:n,children:r,draggable:i,onDragStart:o,onDragEnd:s,style:a,label:c,...u}=e;return mt(u,!1),k.jsx(Mo,{className:n,ref:t,"aria-label":c,draggable:i,onDragStart:o,onDragEnd:s,style:a,...u,children:r})}),ow=A.forwardRef((e,t)=>{const{className:n,children:r,onMouseEnter:i,onMouseLeave:o,variant:s,...a}=e;mt(a);const{ref:c,focused:u}=m7(),f=p7(u),h=Fb(t,c,f);return k.jsx(Zx,{className:n,ref:h,role:"toolbar",onMouseEnter:i,onMouseLeave:o,gap:s==="action-toolbar"?2:void 0,children:r})});var dH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},V6=Tn.createContext&&Tn.createContext(dH),KCe=["attr","size","title"];function QCe(e,t){if(e==null)return{};var n=XCe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R1.apply(this,arguments)}function q6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function O1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(n),!0).forEach(function(r){ZCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZCe(e,t,n){return t=JCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JCe(e){var t=ewe(e,"string");return typeof t=="symbol"?t:t+""}function ewe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fH(e){return e&&e.map((t,n)=>Tn.createElement(t.tag,O1({key:n},t.attr),fH(t.child)))}function twe(e){return t=>Tn.createElement(nwe,R1({attr:O1({},e.attr)},t),fH(e.child))}function nwe(e){var t=n=>{var{attr:r,size:i,title:o}=e,s=QCe(e,KCe),a=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Tn.createElement("svg",R1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:O1(O1({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Tn.createElement("title",null,o),e.children)};return V6!==void 0?Tn.createElement(V6.Consumer,null,n=>t(n)):t(dH)}function rwe(e){return twe({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}const sw=A.forwardRef((e,t)=>{const{className:n,items:r,isDisabled:i,...o}=e;mt(o);const s=r.filter(a=>a.isSelected)[0];return s?k.jsxs(fn,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:i,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[k.jsx(fn.Target,{children:k.jsx(Mo,{onMouseDown:a=>{Gw()&&a.currentTarget.focus()},leftSection:s.icon,rightSection:k.jsx(rwe,{}),size:"xs",variant:"subtle",disabled:i,children:s.text})}),k.jsx(fn.Dropdown,{className:n,ref:t,children:r.map(a=>k.jsx(fn.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?k.jsx(N1,{size:10,className:"bn-tick-icon"}):k.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),iwe={FormattingToolbar:{Root:ow,Button:iw,Select:sw},FilePanel:{Root:ACe,Button:NCe,FileInput:MCe,TabPanel:RCe,TextInput:OCe},GridSuggestionMenu:{Root:$Ce,Item:qCe,EmptyItem:VCe,Loader:YCe},LinkToolbar:{Root:ow,Button:iw,Select:sw},SideMenu:{Root:BCe,Button:PCe},SuggestionMenu:{Root:HCe,Item:FCe,EmptyItem:UCe,Label:jCe,Loader:zCe},TableHandle:{Root:WCe,ExtendButton:GCe},Generic:{Badge:{Root:uCe,Group:dCe},Form:{Root:e=>k.jsx("div",{children:e.children}),TextInput:ECe},Menu:{Root:CCe,Trigger:SCe,Dropdown:TCe,Divider:xCe,Label:kCe,Item:wCe,Button:_Ce},Popover:{Root:DCe,Trigger:LCe,Content:ICe},Toolbar:{Root:ow,Button:iw,Select:sw}},Comments:{Comment:gCe,Editor:bCe,Card:fCe,CardSection:hCe,ExpandSectionsPrompt:pCe}},iy=e=>{const{className:t,theme:n,...r}=e,i=_o(),o=o7(),s=i?.colorSchemePreference||o,a=A.useCallback(h=>{if(h&&(cCe(h),typeof n=="object")){if("light"in n&&"dark"in n){$6(n[s==="dark"?"dark":"light"],h);return}$6(n,h);return}},[s,n]),c=A.useContext(Hx),u=typeof n=="string"?n:s!=="no-preference"?s:"light",f=k.jsx(PP.Provider,{value:iwe,children:k.jsx(Mbe,{"data-mantine-color-scheme":u,className:Sn("bn-mantine",t||""),theme:typeof n=="object"?void 0:n,...r,ref:a})});return c?f:k.jsx(C7,{withCssVariables:!1,getRootElement:()=>{},children:f})},owe=1200,swe=2500,D1=3e4,Z2=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=s=>{e.lastMessageReceived=wi();const a=s.data,c=typeof a=="string"?JSON.parse(a):a;c&&c.type==="pong"&&(clearTimeout(r),r=setTimeout(o,D1/2)),e.emit("message",[c,e])};const i=s=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:s},e])):e.unsuccessfulReconnects++,setTimeout(Z2,uo(sJ(e.unsuccessfulReconnects+1)*owe,swe),e)),clearTimeout(r)},o=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=s=>i(s),t.onopen=()=>{e.lastMessageReceived=wi(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(o,D1/2)}}};class awe extends hT{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&D1<wi()-this.lastMessageReceived&&this.ws.close()},D1/2),Z2(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Z2(this)}}const hH=new Map;class lwe{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:B5(n.newValue||"")}),zJ(this._onChange)}postMessage(t){N5.setItem(this.room,TT(ree(t)))}close(){$J(this._onChange)}}const cwe=typeof BroadcastChannel>"u"?lwe:BroadcastChannel,Ek=e=>Nr(hH,e,()=>{const t=Ks(),n=new cwe(e);return n.onmessage=r=>t.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:t}}),pH=(e,t)=>(Ek(e).subs.add(t),t),mH=(e,t)=>{const n=Ek(e),r=n.subs.delete(t);return r&&n.subs.size===0&&(n.bc.close(),hH.delete(e)),r},Vl=(e,t,n=null)=>{const r=Ek(e);r.bc.postMessage(t),r.subs.forEach(i=>i(t,n))};function Mg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aw={exports:{}},Y6;function uwe(){return Y6||(Y6=1,(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,r=Math.abs,i=Math.pow;return(function(){function o(s,a,c){function u(m,g){if(!a[m]){if(!s[m]){var y=typeof Mg=="function"&&Mg;if(!g&&y)return y(m,!0);if(f)return f(m,!0);var E=new Error("Cannot find module '"+m+"'");throw E.code="MODULE_NOT_FOUND",E}var C=a[m]={exports:{}};s[m][0].call(C.exports,function(S){var N=s[m][1][S];return u(N||S)},C,C.exports,o,s,a,c)}return a[m].exports}for(var f=typeof Mg=="function"&&Mg,h=0;h<c.length;h++)u(c[h]);return u}return o})()({1:[function(o,s,a){function c(O){var M=O.length;if(0<M%4)throw new Error("Invalid string. Length must be a multiple of 4");var R=O.indexOf("=");R===-1&&(R=M);var L=R===M?0:4-R%4;return[R,L]}function u(O,M,R){return 3*(M+R)/4-R}function f(O){var M,R,L=c(O),F=L[0],z=L[1],B=new C(u(O,F,z)),U=0,q=0<z?F-4:F;for(R=0;R<q;R+=4)M=E[O.charCodeAt(R)]<<18|E[O.charCodeAt(R+1)]<<12|E[O.charCodeAt(R+2)]<<6|E[O.charCodeAt(R+3)],B[U++]=255&M>>16,B[U++]=255&M>>8,B[U++]=255&M;return z===2&&(M=E[O.charCodeAt(R)]<<2|E[O.charCodeAt(R+1)]>>4,B[U++]=255&M),z===1&&(M=E[O.charCodeAt(R)]<<10|E[O.charCodeAt(R+1)]<<4|E[O.charCodeAt(R+2)]>>2,B[U++]=255&M>>8,B[U++]=255&M),B}function h(O){return y[63&O>>18]+y[63&O>>12]+y[63&O>>6]+y[63&O]}function m(O,M,R){for(var L,F=[],z=M;z<R;z+=3)L=(16711680&O[z]<<16)+(65280&O[z+1]<<8)+(255&O[z+2]),F.push(h(L));return F.join("")}function g(O){for(var M,R=O.length,L=R%3,F=[],z=16383,B=0,U=R-L;B<U;B+=z)F.push(m(O,B,B+z>U?U:B+z));return L===1?(M=O[R-1],F.push(y[M>>2]+y[63&M<<4]+"==")):L===2&&(M=(O[R-2]<<8)+O[R-1],F.push(y[M>>10]+y[63&M>>4]+y[63&M<<2]+"=")),F.join("")}a.byteLength=function(O){var M=c(O),R=M[0],L=M[1];return 3*(R+L)/4-L},a.toByteArray=f,a.fromByteArray=g;for(var y=[],E=[],C=typeof Uint8Array>"u"?Array:Uint8Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,_=S.length;N<_;++N)y[N]=S[N],E[S.charCodeAt(N)]=N;E[45]=62,E[95]=63},{}],2:[function(){},{}],3:[function(o,s,a){(function(){(function(){var c=String.fromCharCode,u=Math.min;function f(T){if(2147483647<T)throw new RangeError('The value "'+T+'" is invalid for option "size"');var I=new Uint8Array(T);return I.__proto__=h.prototype,I}function h(T,I,P){if(typeof T=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(T)}return m(T,I,P)}function m(T,I,P){if(typeof T=="string")return C(T,I);if(ArrayBuffer.isView(T))return S(T);if(T==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(ce(T,ArrayBuffer)||T&&ce(T.buffer,ArrayBuffer))return N(T,I,P);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=T.valueOf&&T.valueOf();if(ee!=null&&ee!==T)return h.from(ee,I,P);var oe=_(T);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return h.from(T[Symbol.toPrimitive]("string"),I,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}function g(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(0>T)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function y(T,I,P){return g(T),0>=T||I===void 0?f(T):typeof P=="string"?f(T).fill(I,P):f(T).fill(I)}function E(T){return g(T),f(0>T?0:0|O(T))}function C(T,I){if((typeof I!="string"||I==="")&&(I="utf8"),!h.isEncoding(I))throw new TypeError("Unknown encoding: "+I);var P=0|M(T,I),ee=f(P),oe=ee.write(T,I);return oe!==P&&(ee=ee.slice(0,oe)),ee}function S(T){for(var I=0>T.length?0:0|O(T.length),P=f(I),ee=0;ee<I;ee+=1)P[ee]=255&T[ee];return P}function N(T,I,P){if(0>I||T.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<I+(P||0))throw new RangeError('"length" is outside of buffer bounds');var ee;return ee=I===void 0&&P===void 0?new Uint8Array(T):P===void 0?new Uint8Array(T,I):new Uint8Array(T,I,P),ee.__proto__=h.prototype,ee}function _(T){if(h.isBuffer(T)){var I=0|O(T.length),P=f(I);return P.length===0||T.copy(P,0,0,I),P}return T.length===void 0?T.type==="Buffer"&&Array.isArray(T.data)?S(T.data):void 0:typeof T.length!="number"||ge(T.length)?f(0):S(T)}function O(T){if(T>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|T}function M(T,I){if(h.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||ce(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);var P=T.length,ee=2<arguments.length&&arguments[2]===!0;if(!ee&&P===0)return 0;for(var oe=!1;;)switch(I){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return Bt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return rt(T).length;default:if(oe)return ee?-1:Bt(T).length;I=(""+I).toLowerCase(),oe=!0}}function R(T,I,P){var ee=!1;if((I===void 0||0>I)&&(I=0),I>this.length||((P===void 0||P>this.length)&&(P=this.length),0>=P)||(P>>>=0,I>>>=0,P<=I))return"";for(T||(T="utf8");;)switch(T){case"hex":return K(this,I,P);case"utf8":case"utf-8":return Z(this,I,P);case"ascii":return ue(this,I,P);case"latin1":case"binary":return $(this,I,P);case"base64":return W(this,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,I,P);default:if(ee)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),ee=!0}}function L(T,I,P){var ee=T[I];T[I]=T[P],T[P]=ee}function F(T,I,P,ee,oe){if(T.length===0)return-1;if(typeof P=="string"?(ee=P,P=0):2147483647<P?P=2147483647:-2147483648>P&&(P=-2147483648),P=+P,ge(P)&&(P=oe?0:T.length-1),0>P&&(P=T.length+P),P>=T.length){if(oe)return-1;P=T.length-1}else if(0>P)if(oe)P=0;else return-1;if(typeof I=="string"&&(I=h.from(I,ee)),h.isBuffer(I))return I.length===0?-1:z(T,I,P,ee,oe);if(typeof I=="number")return I&=255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(T,I,P):Uint8Array.prototype.lastIndexOf.call(T,I,P):z(T,[I],P,ee,oe);throw new TypeError("val must be string, number or Buffer")}function z(T,I,P,ee,oe){function Ee(yn,sn){return se===1?yn[sn]:yn.readUInt16BE(sn*se)}var se=1,ye=T.length,Be=I.length;if(ee!==void 0&&(ee=(ee+"").toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(2>T.length||2>I.length)return-1;se=2,ye/=2,Be/=2,P/=2}var Ie;if(oe){var Pe=-1;for(Ie=P;Ie<ye;Ie++)if(Ee(T,Ie)!==Ee(I,Pe===-1?0:Ie-Pe))Pe!==-1&&(Ie-=Ie-Pe),Pe=-1;else if(Pe===-1&&(Pe=Ie),Ie-Pe+1===Be)return Pe*se}else for(P+Be>ye&&(P=ye-Be),Ie=P;0<=Ie;Ie--){for(var Mt=!0,on=0;on<Be;on++)if(Ee(T,Ie+on)!==Ee(I,on)){Mt=!1;break}if(Mt)return Ie}return-1}function B(T,I,P,ee){P=+P||0;var oe=T.length-P;ee?(ee=+ee,ee>oe&&(ee=oe)):ee=oe;var Ee=I.length;ee>Ee/2&&(ee=Ee/2);for(var se,ye=0;ye<ee;++ye){if(se=parseInt(I.substr(2*ye,2),16),ge(se))return ye;T[P+ye]=se}return ye}function U(T,I,P,ee){return Tt(Bt(I,T.length-P),T,P,ee)}function q(T,I,P,ee){return Tt(mn(I),T,P,ee)}function re(T,I,P,ee){return q(T,I,P,ee)}function J(T,I,P,ee){return Tt(rt(I),T,P,ee)}function ae(T,I,P,ee){return Tt(Jt(I,T.length-P),T,P,ee)}function W(T,I,P){return I===0&&P===T.length?Ae.fromByteArray(T):Ae.fromByteArray(T.slice(I,P))}function Z(T,I,P){P=u(T.length,P);for(var ee=[],oe=I;oe<P;){var Ee=T[oe],se=null,ye=239<Ee?4:223<Ee?3:191<Ee?2:1;if(oe+ye<=P){var Be,Ie,Pe,Mt;ye===1?128>Ee&&(se=Ee):ye===2?(Be=T[oe+1],(192&Be)==128&&(Mt=(31&Ee)<<6|63&Be,127<Mt&&(se=Mt))):ye===3?(Be=T[oe+1],Ie=T[oe+2],(192&Be)==128&&(192&Ie)==128&&(Mt=(15&Ee)<<12|(63&Be)<<6|63&Ie,2047<Mt&&(55296>Mt||57343<Mt)&&(se=Mt))):ye===4&&(Be=T[oe+1],Ie=T[oe+2],Pe=T[oe+3],(192&Be)==128&&(192&Ie)==128&&(192&Pe)==128&&(Mt=(15&Ee)<<18|(63&Be)<<12|(63&Ie)<<6|63&Pe,65535<Mt&&1114112>Mt&&(se=Mt)))}se===null?(se=65533,ye=1):65535<se&&(se-=65536,ee.push(55296|1023&se>>>10),se=56320|1023&se),ee.push(se),oe+=ye}return te(ee)}function te(T){var I=T.length;if(I<=4096)return c.apply(String,T);for(var P="",ee=0;ee<I;)P+=c.apply(String,T.slice(ee,ee+=4096));return P}function ue(T,I,P){var ee="";P=u(T.length,P);for(var oe=I;oe<P;++oe)ee+=c(127&T[oe]);return ee}function $(T,I,P){var ee="";P=u(T.length,P);for(var oe=I;oe<P;++oe)ee+=c(T[oe]);return ee}function K(T,I,P){var ee=T.length;(!I||0>I)&&(I=0),(!P||0>P||P>ee)&&(P=ee);for(var oe="",Ee=I;Ee<P;++Ee)oe+=Ye(T[Ee]);return oe}function ie(T,I,P){for(var ee=T.slice(I,P),oe="",Ee=0;Ee<ee.length;Ee+=2)oe+=c(ee[Ee]+256*ee[Ee+1]);return oe}function j(T,I,P){if(T%1!=0||0>T)throw new RangeError("offset is not uint");if(T+I>P)throw new RangeError("Trying to access beyond buffer length")}function Se(T,I,P,ee,oe,Ee){if(!h.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>oe||I<Ee)throw new RangeError('"value" argument is out of bounds');if(P+ee>T.length)throw new RangeError("Index out of range")}function Re(T,I,P,ee){if(P+ee>T.length)throw new RangeError("Index out of range");if(0>P)throw new RangeError("Index out of range")}function Le(T,I,P,ee,oe){return I=+I,P>>>=0,oe||Re(T,I,P,4),He.write(T,I,P,ee,23,4),P+4}function $e(T,I,P,ee,oe){return I=+I,P>>>=0,oe||Re(T,I,P,8),He.write(T,I,P,ee,52,8),P+8}function ot(T){if(T=T.split("=")[0],T=T.trim().replace(Y,""),2>T.length)return"";for(;T.length%4!=0;)T+="=";return T}function Ye(T){return 16>T?"0"+T.toString(16):T.toString(16)}function Bt(T,I){I=I||1/0;for(var P,ee=T.length,oe=null,Ee=[],se=0;se<ee;++se){if(P=T.charCodeAt(se),55295<P&&57344>P){if(!oe){if(56319<P){-1<(I-=3)&&Ee.push(239,191,189);continue}else if(se+1===ee){-1<(I-=3)&&Ee.push(239,191,189);continue}oe=P;continue}if(56320>P){-1<(I-=3)&&Ee.push(239,191,189),oe=P;continue}P=(oe-55296<<10|P-56320)+65536}else oe&&-1<(I-=3)&&Ee.push(239,191,189);if(oe=null,128>P){if(0>(I-=1))break;Ee.push(P)}else if(2048>P){if(0>(I-=2))break;Ee.push(192|P>>6,128|63&P)}else if(65536>P){if(0>(I-=3))break;Ee.push(224|P>>12,128|63&P>>6,128|63&P)}else if(1114112>P){if(0>(I-=4))break;Ee.push(240|P>>18,128|63&P>>12,128|63&P>>6,128|63&P)}else throw new Error("Invalid code point")}return Ee}function mn(T){for(var I=[],P=0;P<T.length;++P)I.push(255&T.charCodeAt(P));return I}function Jt(T,I){for(var P,ee,oe,Ee=[],se=0;se<T.length&&!(0>(I-=2));++se)P=T.charCodeAt(se),ee=P>>8,oe=P%256,Ee.push(oe),Ee.push(ee);return Ee}function rt(T){return Ae.toByteArray(ot(T))}function Tt(T,I,P,ee){for(var oe=0;oe<ee&&!(oe+P>=I.length||oe>=T.length);++oe)I[oe+P]=T[oe];return oe}function ce(T,I){return T instanceof I||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===I.name}function ge(T){return T!==T}var Ae=o("base64-js"),He=o("ieee754");a.Buffer=h,a.SlowBuffer=function(T){return+T!=T&&(T=0),h.alloc(+T)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=(function(){try{var T=new Uint8Array(1);return T.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},T.foo()===42}catch{return!1}})(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){return h.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){return h.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(T,I,P){return m(T,I,P)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(T,I,P){return y(T,I,P)},h.allocUnsafe=function(T){return E(T)},h.allocUnsafeSlow=function(T){return E(T)},h.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==h.prototype},h.compare=function(T,I){if(ce(T,Uint8Array)&&(T=h.from(T,T.offset,T.byteLength)),ce(I,Uint8Array)&&(I=h.from(I,I.offset,I.byteLength)),!h.isBuffer(T)||!h.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===I)return 0;for(var P=T.length,ee=I.length,oe=0,Ee=u(P,ee);oe<Ee;++oe)if(T[oe]!==I[oe]){P=T[oe],ee=I[oe];break}return P<ee?-1:ee<P?1:0},h.isEncoding=function(T){switch((T+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(T,I){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return h.alloc(0);var P;if(I===void 0)for(I=0,P=0;P<T.length;++P)I+=T[P].length;var ee=h.allocUnsafe(I),oe=0;for(P=0;P<T.length;++P){var Ee=T[P];if(ce(Ee,Uint8Array)&&(Ee=h.from(Ee)),!h.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(ee,oe),oe+=Ee.length}return ee},h.byteLength=M,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var T=this.length;if(T%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<T;I+=2)L(this,I,I+1);return this},h.prototype.swap32=function(){var T=this.length;if(T%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<T;I+=4)L(this,I,I+3),L(this,I+1,I+2);return this},h.prototype.swap64=function(){var T=this.length;if(T%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<T;I+=8)L(this,I,I+7),L(this,I+1,I+6),L(this,I+2,I+5),L(this,I+3,I+4);return this},h.prototype.toString=function(){var T=this.length;return T===0?"":arguments.length===0?Z(this,0,T):R.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(T){if(!h.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T||h.compare(this,T)===0},h.prototype.inspect=function(){var T="",I=a.INSPECT_MAX_BYTES;return T=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(T+=" ... "),"<Buffer "+T+">"},h.prototype.compare=function(T,I,P,ee,oe){if(ce(T,Uint8Array)&&(T=h.from(T,T.offset,T.byteLength)),!h.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(I===void 0&&(I=0),P===void 0&&(P=T?T.length:0),ee===void 0&&(ee=0),oe===void 0&&(oe=this.length),0>I||P>T.length||0>ee||oe>this.length)throw new RangeError("out of range index");if(ee>=oe&&I>=P)return 0;if(ee>=oe)return-1;if(I>=P)return 1;if(I>>>=0,P>>>=0,ee>>>=0,oe>>>=0,this===T)return 0;for(var Ee=oe-ee,se=P-I,ye=u(Ee,se),Be=this.slice(ee,oe),Ie=T.slice(I,P),Pe=0;Pe<ye;++Pe)if(Be[Pe]!==Ie[Pe]){Ee=Be[Pe],se=Ie[Pe];break}return Ee<se?-1:se<Ee?1:0},h.prototype.includes=function(T,I,P){return this.indexOf(T,I,P)!==-1},h.prototype.indexOf=function(T,I,P){return F(this,T,I,P,!0)},h.prototype.lastIndexOf=function(T,I,P){return F(this,T,I,P,!1)},h.prototype.write=function(T,I,P,ee){if(I===void 0)ee="utf8",P=this.length,I=0;else if(P===void 0&&typeof I=="string")ee=I,P=this.length,I=0;else if(isFinite(I))I>>>=0,isFinite(P)?(P>>>=0,ee===void 0&&(ee="utf8")):(ee=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var oe=this.length-I;if((P===void 0||P>oe)&&(P=oe),0<T.length&&(0>P||0>I)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var Ee=!1;;)switch(ee){case"hex":return B(this,T,I,P);case"utf8":case"utf-8":return U(this,T,I,P);case"ascii":return q(this,T,I,P);case"latin1":case"binary":return re(this,T,I,P);case"base64":return J(this,T,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,T,I,P);default:if(Ee)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),Ee=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(T,I){var P=this.length;T=~~T,I=I===void 0?P:~~I,0>T?(T+=P,0>T&&(T=0)):T>P&&(T=P),0>I?(I+=P,0>I&&(I=0)):I>P&&(I=P),I<T&&(I=T);var ee=this.subarray(T,I);return ee.__proto__=h.prototype,ee},h.prototype.readUIntLE=function(T,I,P){T>>>=0,I>>>=0,P||j(T,I,this.length);for(var ee=this[T],oe=1,Ee=0;++Ee<I&&(oe*=256);)ee+=this[T+Ee]*oe;return ee},h.prototype.readUIntBE=function(T,I,P){T>>>=0,I>>>=0,P||j(T,I,this.length);for(var ee=this[T+--I],oe=1;0<I&&(oe*=256);)ee+=this[T+--I]*oe;return ee},h.prototype.readUInt8=function(T,I){return T>>>=0,I||j(T,1,this.length),this[T]},h.prototype.readUInt16LE=function(T,I){return T>>>=0,I||j(T,2,this.length),this[T]|this[T+1]<<8},h.prototype.readUInt16BE=function(T,I){return T>>>=0,I||j(T,2,this.length),this[T]<<8|this[T+1]},h.prototype.readUInt32LE=function(T,I){return T>>>=0,I||j(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+16777216*this[T+3]},h.prototype.readUInt32BE=function(T,I){return T>>>=0,I||j(T,4,this.length),16777216*this[T]+(this[T+1]<<16|this[T+2]<<8|this[T+3])},h.prototype.readIntLE=function(T,I,P){T>>>=0,I>>>=0,P||j(T,I,this.length);for(var ee=this[T],oe=1,Ee=0;++Ee<I&&(oe*=256);)ee+=this[T+Ee]*oe;return oe*=128,ee>=oe&&(ee-=i(2,8*I)),ee},h.prototype.readIntBE=function(T,I,P){T>>>=0,I>>>=0,P||j(T,I,this.length);for(var ee=I,oe=1,Ee=this[T+--ee];0<ee&&(oe*=256);)Ee+=this[T+--ee]*oe;return oe*=128,Ee>=oe&&(Ee-=i(2,8*I)),Ee},h.prototype.readInt8=function(T,I){return T>>>=0,I||j(T,1,this.length),128&this[T]?-1*(255-this[T]+1):this[T]},h.prototype.readInt16LE=function(T,I){T>>>=0,I||j(T,2,this.length);var P=this[T]|this[T+1]<<8;return 32768&P?4294901760|P:P},h.prototype.readInt16BE=function(T,I){T>>>=0,I||j(T,2,this.length);var P=this[T+1]|this[T]<<8;return 32768&P?4294901760|P:P},h.prototype.readInt32LE=function(T,I){return T>>>=0,I||j(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},h.prototype.readInt32BE=function(T,I){return T>>>=0,I||j(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},h.prototype.readFloatLE=function(T,I){return T>>>=0,I||j(T,4,this.length),He.read(this,T,!0,23,4)},h.prototype.readFloatBE=function(T,I){return T>>>=0,I||j(T,4,this.length),He.read(this,T,!1,23,4)},h.prototype.readDoubleLE=function(T,I){return T>>>=0,I||j(T,8,this.length),He.read(this,T,!0,52,8)},h.prototype.readDoubleBE=function(T,I){return T>>>=0,I||j(T,8,this.length),He.read(this,T,!1,52,8)},h.prototype.writeUIntLE=function(T,I,P,ee){if(T=+T,I>>>=0,P>>>=0,!ee){var oe=i(2,8*P)-1;Se(this,T,I,P,oe,0)}var Ee=1,se=0;for(this[I]=255&T;++se<P&&(Ee*=256);)this[I+se]=255&T/Ee;return I+P},h.prototype.writeUIntBE=function(T,I,P,ee){if(T=+T,I>>>=0,P>>>=0,!ee){var oe=i(2,8*P)-1;Se(this,T,I,P,oe,0)}var Ee=P-1,se=1;for(this[I+Ee]=255&T;0<=--Ee&&(se*=256);)this[I+Ee]=255&T/se;return I+P},h.prototype.writeUInt8=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,1,255,0),this[I]=255&T,I+1},h.prototype.writeUInt16LE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,2,65535,0),this[I]=255&T,this[I+1]=T>>>8,I+2},h.prototype.writeUInt16BE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,2,65535,0),this[I]=T>>>8,this[I+1]=255&T,I+2},h.prototype.writeUInt32LE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,4,4294967295,0),this[I+3]=T>>>24,this[I+2]=T>>>16,this[I+1]=T>>>8,this[I]=255&T,I+4},h.prototype.writeUInt32BE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,4,4294967295,0),this[I]=T>>>24,this[I+1]=T>>>16,this[I+2]=T>>>8,this[I+3]=255&T,I+4},h.prototype.writeIntLE=function(T,I,P,ee){if(T=+T,I>>>=0,!ee){var oe=i(2,8*P-1);Se(this,T,I,P,oe-1,-oe)}var Ee=0,se=1,ye=0;for(this[I]=255&T;++Ee<P&&(se*=256);)0>T&&ye===0&&this[I+Ee-1]!==0&&(ye=1),this[I+Ee]=255&(T/se>>0)-ye;return I+P},h.prototype.writeIntBE=function(T,I,P,ee){if(T=+T,I>>>=0,!ee){var oe=i(2,8*P-1);Se(this,T,I,P,oe-1,-oe)}var Ee=P-1,se=1,ye=0;for(this[I+Ee]=255&T;0<=--Ee&&(se*=256);)0>T&&ye===0&&this[I+Ee+1]!==0&&(ye=1),this[I+Ee]=255&(T/se>>0)-ye;return I+P},h.prototype.writeInt8=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,1,127,-128),0>T&&(T=255+T+1),this[I]=255&T,I+1},h.prototype.writeInt16LE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,2,32767,-32768),this[I]=255&T,this[I+1]=T>>>8,I+2},h.prototype.writeInt16BE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,2,32767,-32768),this[I]=T>>>8,this[I+1]=255&T,I+2},h.prototype.writeInt32LE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,4,2147483647,-2147483648),this[I]=255&T,this[I+1]=T>>>8,this[I+2]=T>>>16,this[I+3]=T>>>24,I+4},h.prototype.writeInt32BE=function(T,I,P){return T=+T,I>>>=0,P||Se(this,T,I,4,2147483647,-2147483648),0>T&&(T=4294967295+T+1),this[I]=T>>>24,this[I+1]=T>>>16,this[I+2]=T>>>8,this[I+3]=255&T,I+4},h.prototype.writeFloatLE=function(T,I,P){return Le(this,T,I,!0,P)},h.prototype.writeFloatBE=function(T,I,P){return Le(this,T,I,!1,P)},h.prototype.writeDoubleLE=function(T,I,P){return $e(this,T,I,!0,P)},h.prototype.writeDoubleBE=function(T,I,P){return $e(this,T,I,!1,P)},h.prototype.copy=function(T,I,P,ee){if(!h.isBuffer(T))throw new TypeError("argument should be a Buffer");if(P||(P=0),ee||ee===0||(ee=this.length),I>=T.length&&(I=T.length),I||(I=0),0<ee&&ee<P&&(ee=P),ee===P||T.length===0||this.length===0)return 0;if(0>I)throw new RangeError("targetStart out of bounds");if(0>P||P>=this.length)throw new RangeError("Index out of range");if(0>ee)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),T.length-I<ee-P&&(ee=T.length-I+P);var oe=ee-P;if(this===T&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(I,P,ee);else if(this===T&&P<I&&I<ee)for(var Ee=oe-1;0<=Ee;--Ee)T[Ee+I]=this[Ee+P];else Uint8Array.prototype.set.call(T,this.subarray(P,ee),I);return oe},h.prototype.fill=function(T,I,P,ee){if(typeof T=="string"){if(typeof I=="string"?(ee=I,I=0,P=this.length):typeof P=="string"&&(ee=P,P=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!h.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(T.length===1){var oe=T.charCodeAt(0);(ee==="utf8"&&128>oe||ee==="latin1")&&(T=oe)}}else typeof T=="number"&&(T&=255);if(0>I||this.length<I||this.length<P)throw new RangeError("Out of range index");if(P<=I)return this;I>>>=0,P=P===void 0?this.length:P>>>0,T||(T=0);var Ee;if(typeof T=="number")for(Ee=I;Ee<P;++Ee)this[Ee]=T;else{var se=h.isBuffer(T)?T:h.from(T,ee),ye=se.length;if(ye===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(Ee=0;Ee<P-I;++Ee)this[Ee+I]=se[Ee%ye]}return this};var Y=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(o,s,a){(function(c){(function(){function u(){let h;try{h=a.storage.getItem("debug")}catch{}return!h&&typeof c<"u"&&"env"in c&&(h=c.env.DEBUG),h}a.formatArgs=function(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;h.splice(1,0,m,"color: inherit");let g=0,y=0;h[0].replace(/%[a-zA-Z%]/g,E=>{E==="%%"||(g++,E==="%c"&&(y=g))}),h.splice(y,0,m)},a.save=function(h){try{h?a.storage.setItem("debug",h):a.storage.removeItem("debug")}catch{}},a.load=u,a.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage=(function(){try{return localStorage}catch{}})(),a.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),s.exports=o("./common")(a);const{formatters:f}=s.exports;f.j=function(h){try{return JSON.stringify(h)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}}).call(this)}).call(this,o("_process"))},{"./common":5,_process:12}],5:[function(o,s){s.exports=function(a){function c(h){function m(...E){if(!m.enabled)return;const C=m,S=+new Date,N=S-(g||S);C.diff=N,C.prev=g,C.curr=S,g=S,E[0]=c.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let _=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(M,R)=>{if(M==="%%")return"%";_++;const L=c.formatters[R];if(typeof L=="function"){const F=E[_];M=L.call(C,F),E.splice(_,1),_--}return M}),c.formatArgs.call(C,E),(C.log||c.log).apply(C,E)}let g,y=null;return m.namespace=h,m.useColors=c.useColors(),m.color=c.selectColor(h),m.extend=u,m.destroy=c.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>y===null?c.enabled(h):y,set:E=>{y=E}}),typeof c.init=="function"&&c.init(m),m}function u(h,m){const g=c(this.namespace+(typeof m>"u"?":":m)+h);return g.log=this.log,g}function f(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(h){return h instanceof Error?h.stack||h.message:h},c.disable=function(){const h=[...c.names.map(f),...c.skips.map(f).map(m=>"-"+m)].join(",");return c.enable(""),h},c.enable=function(h){c.save(h),c.names=[],c.skips=[];let m;const g=(typeof h=="string"?h:"").split(/[\s,]+/),y=g.length;for(m=0;m<y;m++)g[m]&&(h=g[m].replace(/\*/g,".*?"),h[0]==="-"?c.skips.push(new RegExp("^"+h.substr(1)+"$")):c.names.push(new RegExp("^"+h+"$")))},c.enabled=function(h){if(h[h.length-1]==="*")return!0;let m,g;for(m=0,g=c.skips.length;m<g;m++)if(c.skips[m].test(h))return!1;for(m=0,g=c.names.length;m<g;m++)if(c.names[m].test(h))return!0;return!1},c.humanize=o("ms"),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(h=>{c[h]=a[h]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(h){let m=0;for(let g=0;g<h.length;g++)m=(m<<5)-m+h.charCodeAt(g),m|=0;return c.colors[r(m)%c.colors.length]},c.enable(c.load()),c}},{ms:11}],6:[function(o,s){function a(c,u){for(const f in u)Object.defineProperty(c,f,{value:u[f],enumerable:!0,configurable:!0});return c}s.exports=function(c,u,f){if(!c||typeof c=="string")throw new TypeError("Please pass an Error to err-code");f||(f={}),typeof u=="object"&&(f=u,u=""),u&&(f.code=u);try{return a(c,f)}catch{f.message=c.message,f.stack=c.stack;const m=function(){};return m.prototype=Object.create(Object.getPrototypeOf(c)),a(new m,f)}}},{}],7:[function(o,s){function a(B){console&&console.warn&&console.warn(B)}function c(){c.init.call(this)}function u(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}function f(B){return B._maxListeners===void 0?c.defaultMaxListeners:B._maxListeners}function h(B,U,q,re){var J,ae,W;if(u(q),ae=B._events,ae===void 0?(ae=B._events=Object.create(null),B._eventsCount=0):(ae.newListener!==void 0&&(B.emit("newListener",U,q.listener?q.listener:q),ae=B._events),W=ae[U]),W===void 0)W=ae[U]=q,++B._eventsCount;else if(typeof W=="function"?W=ae[U]=re?[q,W]:[W,q]:re?W.unshift(q):W.push(q),J=f(B),0<J&&W.length>J&&!W.warned){W.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+(U+" listeners added. Use emitter.setMaxListeners() to increase limit"));Z.name="MaxListenersExceededWarning",Z.emitter=B,Z.type=U,Z.count=W.length,a(Z)}return B}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(B,U,q){var re={fired:!1,wrapFn:void 0,target:B,type:U,listener:q},J=m.bind(re);return J.listener=q,re.wrapFn=J,J}function y(B,U,q){var re=B._events;if(re===void 0)return[];var J=re[U];return J===void 0?[]:typeof J=="function"?q?[J.listener||J]:[J]:q?N(J):C(J,J.length)}function E(B){var U=this._events;if(U!==void 0){var q=U[B];if(typeof q=="function")return 1;if(q!==void 0)return q.length}return 0}function C(B,U){for(var q=Array(U),re=0;re<U;++re)q[re]=B[re];return q}function S(B,U){for(;U+1<B.length;U++)B[U]=B[U+1];B.pop()}function N(B){for(var U=Array(B.length),q=0;q<U.length;++q)U[q]=B[q].listener||B[q];return U}function _(B,U,q){typeof B.on=="function"&&O(B,"error",U,q)}function O(B,U,q,re){if(typeof B.on=="function")re.once?B.once(U,q):B.on(U,q);else if(typeof B.addEventListener=="function")B.addEventListener(U,function J(ae){re.once&&B.removeEventListener(U,J),q(ae)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}var M,R=typeof Reflect=="object"?Reflect:null,L=R&&typeof R.apply=="function"?R.apply:function(B,U,q){return Function.prototype.apply.call(B,U,q)};M=R&&typeof R.ownKeys=="function"?R.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var F=Number.isNaN||function(B){return B!==B};s.exports=c,s.exports.once=function(B,U){return new Promise(function(q,re){function J(W){B.removeListener(U,ae),re(W)}function ae(){typeof B.removeListener=="function"&&B.removeListener("error",J),q([].slice.call(arguments))}O(B,U,ae,{once:!0}),U!=="error"&&_(B,J,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var z=10;Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return z},set:function(B){if(typeof B!="number"||0>B||F(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");z=B}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(B){if(typeof B!="number"||0>B||F(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(B){for(var U=[],q=1;q<arguments.length;q++)U.push(arguments[q]);var re=B==="error",J=this._events;if(J!==void 0)re=re&&J.error===void 0;else if(!re)return!1;if(re){var ae;if(0<U.length&&(ae=U[0]),ae instanceof Error)throw ae;var W=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw W.context=ae,W}var Z=J[B];if(Z===void 0)return!1;if(typeof Z=="function")L(Z,this,U);else for(var te=Z.length,ue=C(Z,te),q=0;q<te;++q)L(ue[q],this,U);return!0},c.prototype.addListener=function(B,U){return h(this,B,U,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(B,U){return h(this,B,U,!0)},c.prototype.once=function(B,U){return u(U),this.on(B,g(this,B,U)),this},c.prototype.prependOnceListener=function(B,U){return u(U),this.prependListener(B,g(this,B,U)),this},c.prototype.removeListener=function(B,U){var q,re,J,ae,W;if(u(U),re=this._events,re===void 0)return this;if(q=re[B],q===void 0)return this;if(q===U||q.listener===U)--this._eventsCount==0?this._events=Object.create(null):(delete re[B],re.removeListener&&this.emit("removeListener",B,q.listener||U));else if(typeof q!="function"){for(J=-1,ae=q.length-1;0<=ae;ae--)if(q[ae]===U||q[ae].listener===U){W=q[ae].listener,J=ae;break}if(0>J)return this;J===0?q.shift():S(q,J),q.length===1&&(re[B]=q[0]),re.removeListener!==void 0&&this.emit("removeListener",B,W||U)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(B){var U,q,re;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[B]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete q[B]),this;if(arguments.length===0){var J,ae=Object.keys(q);for(re=0;re<ae.length;++re)J=ae[re],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=q[B],typeof U=="function")this.removeListener(B,U);else if(U!==void 0)for(re=U.length-1;0<=re;re--)this.removeListener(B,U[re]);return this},c.prototype.listeners=function(B){return y(this,B,!0)},c.prototype.rawListeners=function(B){return y(this,B,!1)},c.listenerCount=function(B,U){return typeof B.listenerCount=="function"?B.listenerCount(U):E.call(B,U)},c.prototype.listenerCount=E,c.prototype.eventNames=function(){return 0<this._eventsCount?M(this._events):[]}},{}],8:[function(o,s){s.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],9:[function(o,s,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(c,u,f,h,m){var g,y,E=8*m-h-1,C=(1<<E)-1,S=C>>1,N=-7,_=f?m-1:0,O=f?-1:1,M=c[u+_];for(_+=O,g=M&(1<<-N)-1,M>>=-N,N+=E;0<N;g=256*g+c[u+_],_+=O,N-=8);for(y=g&(1<<-N)-1,g>>=-N,N+=h;0<N;y=256*y+c[u+_],_+=O,N-=8);if(g===0)g=1-S;else{if(g===C)return y?NaN:(M?-1:1)*(1/0);y+=i(2,h),g-=S}return(M?-1:1)*y*i(2,g-h)},a.write=function(c,u,f,h,m,g){var y,E,C,S=Math.LN2,N=Math.log,_=8*g-m-1,O=(1<<_)-1,M=O>>1,R=m===23?i(2,-24)-i(2,-77):0,L=h?0:g-1,F=h?1:-1,z=0>u||u===0&&0>1/u?1:0;for(u=r(u),isNaN(u)||u===1/0?(E=isNaN(u)?1:0,y=O):(y=n(N(u)/S),1>u*(C=i(2,-y))&&(y--,C*=2),u+=1<=y+M?R/C:R*i(2,1-M),2<=u*C&&(y++,C/=2),y+M>=O?(E=0,y=O):1<=y+M?(E=(u*C-1)*i(2,m),y+=M):(E=u*i(2,M-1)*i(2,m),y=0));8<=m;c[f+L]=255&E,L+=F,E/=256,m-=8);for(y=y<<m|E,_+=m;0<_;c[f+L]=255&y,L+=F,y/=256,_-=8);c[f+L-F]|=128*z}},{}],10:[function(o,s){s.exports=typeof Object.create=="function"?function(a,c){c&&(a.super_=c,a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,c){if(c){a.super_=c;var u=function(){};u.prototype=c.prototype,a.prototype=new u,a.prototype.constructor=a}}},{}],11:[function(o,s){var a=Math.round;function c(m){if(m+="",!(100<m.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(g){var y=parseFloat(g[1]),E=(g[2]||"ms").toLowerCase();return E==="years"||E==="year"||E==="yrs"||E==="yr"||E==="y"?315576e5*y:E==="weeks"||E==="week"||E==="w"?6048e5*y:E==="days"||E==="day"||E==="d"?864e5*y:E==="hours"||E==="hour"||E==="hrs"||E==="hr"||E==="h"?36e5*y:E==="minutes"||E==="minute"||E==="mins"||E==="min"||E==="m"?6e4*y:E==="seconds"||E==="second"||E==="secs"||E==="sec"||E==="s"?1e3*y:E==="milliseconds"||E==="millisecond"||E==="msecs"||E==="msec"||E==="ms"?y:void 0}}}function u(m){var g=r(m);return 864e5<=g?a(m/864e5)+"d":36e5<=g?a(m/36e5)+"h":6e4<=g?a(m/6e4)+"m":1e3<=g?a(m/1e3)+"s":m+"ms"}function f(m){var g=r(m);return 864e5<=g?h(m,g,864e5,"day"):36e5<=g?h(m,g,36e5,"hour"):6e4<=g?h(m,g,6e4,"minute"):1e3<=g?h(m,g,1e3,"second"):m+" ms"}function h(m,g,y,E){return a(m/y)+" "+E+(g>=1.5*y?"s":"")}s.exports=function(m,g){g=g||{};var y=typeof m;if(y=="string"&&0<m.length)return c(m);if(y==="number"&&isFinite(m))return g.long?f(m):u(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},{}],12:[function(o,s){function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(R){if(E===setTimeout)return setTimeout(R,0);if((E===a||!E)&&setTimeout)return E=setTimeout,setTimeout(R,0);try{return E(R,0)}catch{try{return E.call(null,R,0)}catch{return E.call(this,R,0)}}}function f(R){if(C===clearTimeout)return clearTimeout(R);if((C===c||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(R);try{return C(R)}catch{try{return C.call(null,R)}catch{return C.call(this,R)}}}function h(){O&&N&&(O=!1,N.length?_=N.concat(_):M=-1,_.length&&m())}function m(){if(!O){var R=u(h);O=!0;for(var L=_.length;L;){for(N=_,_=[];++M<L;)N&&N[M].run();M=-1,L=_.length}N=null,O=!1,f(R)}}function g(R,L){this.fun=R,this.array=L}function y(){}var E,C,S=s.exports={};(function(){try{E=typeof setTimeout=="function"?setTimeout:a}catch{E=a}try{C=typeof clearTimeout=="function"?clearTimeout:c}catch{C=c}})();var N,_=[],O=!1,M=-1;S.nextTick=function(R){var L=Array(arguments.length-1);if(1<arguments.length)for(var F=1;F<arguments.length;F++)L[F-1]=arguments[F];_.push(new g(R,L)),_.length!==1||O||u(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=y,S.addListener=y,S.once=y,S.off=y,S.removeListener=y,S.removeAllListeners=y,S.emit=y,S.prependListener=y,S.prependOnceListener=y,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],13:[function(o,s){(function(a){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let c;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?a:window):u=>(c||(c=Promise.resolve())).then(u).catch(f=>setTimeout(()=>{throw f},0))}).call(this)}).call(this,typeof Io>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Io)},{}],14:[function(o,s){(function(a,c){(function(){var u=o("safe-buffer").Buffer,f=c.crypto||c.msCrypto;s.exports=f&&f.getRandomValues?function(h,m){if(h>4294967295)throw new RangeError("requested too many random bytes");var g=u.allocUnsafe(h);if(0<h)if(65536<h)for(var y=0;y<h;y+=65536)f.getRandomValues(g.slice(y,y+65536));else f.getRandomValues(g);return typeof m=="function"?a.nextTick(function(){m(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,o("_process"),typeof Io>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Io)},{_process:12,"safe-buffer":30}],15:[function(o,s){function a(y,E){y.prototype=Object.create(E.prototype),y.prototype.constructor=y,y.__proto__=E}function c(y,E,C){function S(_,O,M){return typeof E=="string"?E:E(_,O,M)}C||(C=Error);var N=(function(_){function O(M,R,L){return _.call(this,S(M,R,L))||this}return a(O,_),O})(C);N.prototype.name=C.name,N.prototype.code=y,g[y]=N}function u(y,E){if(Array.isArray(y)){var C=y.length;return y=y.map(function(S){return S+""}),2<C?"one of ".concat(E," ").concat(y.slice(0,C-1).join(", "),", or ")+y[C-1]:C===2?"one of ".concat(E," ").concat(y[0]," or ").concat(y[1]):"of ".concat(E," ").concat(y[0])}return"of ".concat(E," ").concat(y+"")}function f(y,E,C){return y.substr(0,E.length)===E}function h(y,E,C){return(C===void 0||C>y.length)&&(C=y.length),y.substring(C-E.length,C)===E}function m(y,E,C){return typeof C!="number"&&(C=0),!(C+E.length>y.length)&&y.indexOf(E,C)!==-1}var g={};c("ERR_INVALID_OPT_VALUE",function(y,E){return'The value "'+E+'" is invalid for option "'+y+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(y,E,C){var S;typeof E=="string"&&f(E,"not ")?(S="must not be",E=E.replace(/^not /,"")):S="must be";var N;if(h(y," argument"))N="The ".concat(y," ").concat(S," ").concat(u(E,"type"));else{var _=m(y,".")?"property":"argument";N='The "'.concat(y,'" ').concat(_," ").concat(S," ").concat(u(E,"type"))}return N+=". Received type ".concat(typeof C),N},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=g},{}],16:[function(o,s){(function(a){(function(){function c(S){return this instanceof c?(m.call(this,S),g.call(this,S),this.allowHalfOpen=!0,void(S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u))))):new c(S)}function u(){this._writableState.ended||a.nextTick(f,this)}function f(S){S.end()}var h=Object.keys||function(S){var N=[];for(var _ in S)N.push(_);return N};s.exports=c;var m=o("./_stream_readable"),g=o("./_stream_writable");o("inherits")(c,m);for(var y,E=h(g.prototype),C=0;C<E.length;C++)y=E[C],c.prototype[y]||(c.prototype[y]=g.prototype[y]);Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,o("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(o,s){function a(u){return this instanceof a?void c.call(this,u):new a(u)}s.exports=a;var c=o("./_stream_transform");o("inherits")(a,c),a.prototype._transform=function(u,f,h){h(null,u)}},{"./_stream_transform":19,inherits:10}],18:[function(o,s){(function(a,c){(function(){function u(Y){return ie.from(Y)}function f(Y){return ie.isBuffer(Y)||Y instanceof j}function h(Y,T,I){return typeof Y.prependListener=="function"?Y.prependListener(T,I):void(Y._events&&Y._events[T]?Array.isArray(Y._events[T])?Y._events[T].unshift(I):Y._events[T]=[I,Y._events[T]]:Y.on(T,I))}function m(Y,T,I){te=te||o("./_stream_duplex"),Y=Y||{},typeof I!="boolean"&&(I=T instanceof te),this.objectMode=!!Y.objectMode,I&&(this.objectMode=this.objectMode||!!Y.readableObjectMode),this.highWaterMark=mn(this,Y,"readableHighWaterMark",I),this.buffer=new ot,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.destroyed=!1,this.defaultEncoding=Y.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Y.encoding&&(!Re&&(Re=o("string_decoder/").StringDecoder),this.decoder=new Re(Y.encoding),this.encoding=Y.encoding)}function g(Y){if(te=te||o("./_stream_duplex"),!(this instanceof g))return new g(Y);var T=this instanceof te;this._readableState=new m(Y,this,T),this.readable=!0,Y&&(typeof Y.read=="function"&&(this._read=Y.read),typeof Y.destroy=="function"&&(this._destroy=Y.destroy)),K.call(this)}function y(Y,T,I,P,ee){ue("readableAddChunk",T);var oe=Y._readableState;if(T===null)oe.reading=!1,_(Y,oe);else{var Ee;if(ee||(Ee=C(oe,T)),Ee)Ae(Y,Ee);else if(!(oe.objectMode||T&&0<T.length))P||(oe.reading=!1,R(Y,oe));else if(typeof T=="string"||oe.objectMode||Object.getPrototypeOf(T)===ie.prototype||(T=u(T)),P)oe.endEmitted?Ae(Y,new ge):E(Y,oe,T,!0);else if(oe.ended)Ae(Y,new Tt);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!I?(T=oe.decoder.write(T),oe.objectMode||T.length!==0?E(Y,oe,T,!1):R(Y,oe)):E(Y,oe,T,!1)}}return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function E(Y,T,I,P){T.flowing&&T.length===0&&!T.sync?(T.awaitDrain=0,Y.emit("data",I)):(T.length+=T.objectMode?1:I.length,P?T.buffer.unshift(I):T.buffer.push(I),T.needReadable&&O(Y)),R(Y,T)}function C(Y,T){var I;return f(T)||typeof T=="string"||T===void 0||Y.objectMode||(I=new rt("chunk",["string","Buffer","Uint8Array"],T)),I}function S(Y){return 1073741824<=Y?Y=1073741824:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}function N(Y,T){return 0>=Y||T.length===0&&T.ended?0:T.objectMode?1:Y===Y?(Y>T.highWaterMark&&(T.highWaterMark=S(Y)),Y<=T.length?Y:T.ended?T.length:(T.needReadable=!0,0)):T.flowing&&T.length?T.buffer.head.data.length:T.length}function _(Y,T){if(ue("onEofChunk"),!T.ended){if(T.decoder){var I=T.decoder.end();I&&I.length&&(T.buffer.push(I),T.length+=T.objectMode?1:I.length)}T.ended=!0,T.sync?O(Y):(T.needReadable=!1,!T.emittedReadable&&(T.emittedReadable=!0,M(Y)))}}function O(Y){var T=Y._readableState;ue("emitReadable",T.needReadable,T.emittedReadable),T.needReadable=!1,T.emittedReadable||(ue("emitReadable",T.flowing),T.emittedReadable=!0,a.nextTick(M,Y))}function M(Y){var T=Y._readableState;ue("emitReadable_",T.destroyed,T.length,T.ended),!T.destroyed&&(T.length||T.ended)&&(Y.emit("readable"),T.emittedReadable=!1),T.needReadable=!T.flowing&&!T.ended&&T.length<=T.highWaterMark,re(Y)}function R(Y,T){T.readingMore||(T.readingMore=!0,a.nextTick(L,Y,T))}function L(Y,T){for(;!T.reading&&!T.ended&&(T.length<T.highWaterMark||T.flowing&&T.length===0);){var I=T.length;if(ue("maybeReadMore read 0"),Y.read(0),I===T.length)break}T.readingMore=!1}function F(Y){return function(){var T=Y._readableState;ue("pipeOnDrain",T.awaitDrain),T.awaitDrain&&T.awaitDrain--,T.awaitDrain===0&&$(Y,"data")&&(T.flowing=!0,re(Y))}}function z(Y){var T=Y._readableState;T.readableListening=0<Y.listenerCount("readable"),T.resumeScheduled&&!T.paused?T.flowing=!0:0<Y.listenerCount("data")&&Y.resume()}function B(Y){ue("readable nexttick read 0"),Y.read(0)}function U(Y,T){T.resumeScheduled||(T.resumeScheduled=!0,a.nextTick(q,Y,T))}function q(Y,T){ue("resume",T.reading),T.reading||Y.read(0),T.resumeScheduled=!1,Y.emit("resume"),re(Y),T.flowing&&!T.reading&&Y.read(0)}function re(Y){var T=Y._readableState;for(ue("flow",T.flowing);T.flowing&&Y.read()!==null;);}function J(Y,T){if(T.length===0)return null;var I;return T.objectMode?I=T.buffer.shift():!Y||Y>=T.length?(I=T.decoder?T.buffer.join(""):T.buffer.length===1?T.buffer.first():T.buffer.concat(T.length),T.buffer.clear()):I=T.buffer.consume(Y,T.decoder),I}function ae(Y){var T=Y._readableState;ue("endReadable",T.endEmitted),T.endEmitted||(T.ended=!0,a.nextTick(W,T,Y))}function W(Y,T){if(ue("endReadableNT",Y.endEmitted,Y.length),!Y.endEmitted&&Y.length===0&&(Y.endEmitted=!0,T.readable=!1,T.emit("end"),Y.autoDestroy)){var I=T._writableState;(!I||I.autoDestroy&&I.finished)&&T.destroy()}}function Z(Y,T){for(var I=0,P=Y.length;I<P;I++)if(Y[I]===T)return I;return-1}s.exports=g;var te;g.ReadableState=m;var ue;o("events").EventEmitter;var $=function(Y,T){return Y.listeners(T).length},K=o("./internal/streams/stream"),ie=o("buffer").Buffer,j=c.Uint8Array||function(){},Se=o("util");ue=Se&&Se.debuglog?Se.debuglog("stream"):function(){};var Re,Le,$e,ot=o("./internal/streams/buffer_list"),Ye=o("./internal/streams/destroy"),Bt=o("./internal/streams/state"),mn=Bt.getHighWaterMark,Jt=o("../errors").codes,rt=Jt.ERR_INVALID_ARG_TYPE,Tt=Jt.ERR_STREAM_PUSH_AFTER_EOF,ce=Jt.ERR_METHOD_NOT_IMPLEMENTED,ge=Jt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;o("inherits")(g,K);var Ae=Ye.errorOrDestroy,He=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Y){this._readableState&&(this._readableState.destroyed=Y)}}),g.prototype.destroy=Ye.destroy,g.prototype._undestroy=Ye.undestroy,g.prototype._destroy=function(Y,T){T(Y)},g.prototype.push=function(Y,T){var I,P=this._readableState;return P.objectMode?I=!0:typeof Y=="string"&&(T=T||P.defaultEncoding,T!==P.encoding&&(Y=ie.from(Y,T),T=""),I=!0),y(this,Y,T,!1,I)},g.prototype.unshift=function(Y){return y(this,Y,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(Y){Re||(Re=o("string_decoder/").StringDecoder);var T=new Re(Y);this._readableState.decoder=T,this._readableState.encoding=this._readableState.decoder.encoding;for(var I=this._readableState.buffer.head,P="";I!==null;)P+=T.write(I.data),I=I.next;return this._readableState.buffer.clear(),P!==""&&this._readableState.buffer.push(P),this._readableState.length=P.length,this},g.prototype.read=function(Y){ue("read",Y),Y=parseInt(Y,10);var T=this._readableState,I=Y;if(Y!==0&&(T.emittedReadable=!1),Y===0&&T.needReadable&&((T.highWaterMark===0?0<T.length:T.length>=T.highWaterMark)||T.ended))return ue("read: emitReadable",T.length,T.ended),T.length===0&&T.ended?ae(this):O(this),null;if(Y=N(Y,T),Y===0&&T.ended)return T.length===0&&ae(this),null;var P=T.needReadable;ue("need readable",P),(T.length===0||T.length-Y<T.highWaterMark)&&(P=!0,ue("length less than watermark",P)),T.ended||T.reading?(P=!1,ue("reading or ended",P)):P&&(ue("do read"),T.reading=!0,T.sync=!0,T.length===0&&(T.needReadable=!0),this._read(T.highWaterMark),T.sync=!1,!T.reading&&(Y=N(I,T)));var ee;return ee=0<Y?J(Y,T):null,ee===null?(T.needReadable=T.length<=T.highWaterMark,Y=0):(T.length-=Y,T.awaitDrain=0),T.length===0&&(!T.ended&&(T.needReadable=!0),I!==Y&&T.ended&&ae(this)),ee!==null&&this.emit("data",ee),ee},g.prototype._read=function(){Ae(this,new ce("_read()"))},g.prototype.pipe=function(Y,T){function I(xn,At){ue("onunpipe"),xn===Ie&&At&&At.hasUnpiped===!1&&(At.hasUnpiped=!0,ee())}function P(){ue("onend"),Y.end()}function ee(){ue("cleanup"),Y.removeListener("close",se),Y.removeListener("finish",ye),Y.removeListener("drain",yn),Y.removeListener("error",Ee),Y.removeListener("unpipe",I),Ie.removeListener("end",P),Ie.removeListener("end",Be),Ie.removeListener("data",oe),sn=!0,Pe.awaitDrain&&(!Y._writableState||Y._writableState.needDrain)&&yn()}function oe(xn){ue("ondata");var At=Y.write(xn);ue("dest.write",At),At===!1&&((Pe.pipesCount===1&&Pe.pipes===Y||1<Pe.pipesCount&&Z(Pe.pipes,Y)!==-1)&&!sn&&(ue("false write response, pause",Pe.awaitDrain),Pe.awaitDrain++),Ie.pause())}function Ee(xn){ue("onerror",xn),Be(),Y.removeListener("error",Ee),$(Y,"error")===0&&Ae(Y,xn)}function se(){Y.removeListener("finish",ye),Be()}function ye(){ue("onfinish"),Y.removeListener("close",se),Be()}function Be(){ue("unpipe"),Ie.unpipe(Y)}var Ie=this,Pe=this._readableState;switch(Pe.pipesCount){case 0:Pe.pipes=Y;break;case 1:Pe.pipes=[Pe.pipes,Y];break;default:Pe.pipes.push(Y)}Pe.pipesCount+=1,ue("pipe count=%d opts=%j",Pe.pipesCount,T);var Mt=(!T||T.end!==!1)&&Y!==a.stdout&&Y!==a.stderr,on=Mt?P:Be;Pe.endEmitted?a.nextTick(on):Ie.once("end",on),Y.on("unpipe",I);var yn=F(Ie);Y.on("drain",yn);var sn=!1;return Ie.on("data",oe),h(Y,"error",Ee),Y.once("close",se),Y.once("finish",ye),Y.emit("pipe",Ie),Pe.flowing||(ue("pipe resume"),Ie.resume()),Y},g.prototype.unpipe=function(Y){var T=this._readableState,I={hasUnpiped:!1};if(T.pipesCount===0)return this;if(T.pipesCount===1)return Y&&Y!==T.pipes?this:(Y||(Y=T.pipes),T.pipes=null,T.pipesCount=0,T.flowing=!1,Y&&Y.emit("unpipe",this,I),this);if(!Y){var P=T.pipes,ee=T.pipesCount;T.pipes=null,T.pipesCount=0,T.flowing=!1;for(var oe=0;oe<ee;oe++)P[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var Ee=Z(T.pipes,Y);return Ee===-1?this:(T.pipes.splice(Ee,1),T.pipesCount-=1,T.pipesCount===1&&(T.pipes=T.pipes[0]),Y.emit("unpipe",this,I),this)},g.prototype.on=function(Y,T){var I=K.prototype.on.call(this,Y,T),P=this._readableState;return Y==="data"?(P.readableListening=0<this.listenerCount("readable"),P.flowing!==!1&&this.resume()):Y=="readable"&&!P.endEmitted&&!P.readableListening&&(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,ue("on readable",P.length,P.reading),P.length?O(this):!P.reading&&a.nextTick(B,this)),I},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(Y,T){var I=K.prototype.removeListener.call(this,Y,T);return Y==="readable"&&a.nextTick(z,this),I},g.prototype.removeAllListeners=function(Y){var T=K.prototype.removeAllListeners.apply(this,arguments);return(Y==="readable"||Y===void 0)&&a.nextTick(z,this),T},g.prototype.resume=function(){var Y=this._readableState;return Y.flowing||(ue("resume"),Y.flowing=!Y.readableListening,U(this,Y)),Y.paused=!1,this},g.prototype.pause=function(){return ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(Y){var T=this,I=this._readableState,P=!1;for(var ee in Y.on("end",function(){if(ue("wrapped end"),I.decoder&&!I.ended){var Ee=I.decoder.end();Ee&&Ee.length&&T.push(Ee)}T.push(null)}),Y.on("data",function(Ee){if(ue("wrapped data"),I.decoder&&(Ee=I.decoder.write(Ee)),!(I.objectMode&&Ee==null)&&(I.objectMode||Ee&&Ee.length)){var se=T.push(Ee);se||(P=!0,Y.pause())}}),Y)this[ee]===void 0&&typeof Y[ee]=="function"&&(this[ee]=(function(Ee){return function(){return Y[Ee].apply(Y,arguments)}})(ee));for(var oe=0;oe<He.length;oe++)Y.on(He[oe],this.emit.bind(this,He[oe]));return this._read=function(Ee){ue("wrapped _read",Ee),P&&(P=!1,Y.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return Le===void 0&&(Le=o("./internal/streams/async_iterator")),Le(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}}),g._fromList=J,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(Y,T){return $e===void 0&&($e=o("./internal/streams/from")),$e(g,Y,T)})}).call(this)}).call(this,o("_process"),typeof Io>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Io)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(o,s){function a(S,N){var _=this._transformState;_.transforming=!1;var O=_.writecb;if(O===null)return this.emit("error",new g);_.writechunk=null,_.writecb=null,N!=null&&this.push(N),O(S);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function c(S){return this instanceof c?(C.call(this,S),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&(typeof S.transform=="function"&&(this._transform=S.transform),typeof S.flush=="function"&&(this._flush=S.flush)),void this.on("prefinish",u)):new c(S)}function u(){var S=this;typeof this._flush!="function"||this._readableState.destroyed?f(this,null,null):this._flush(function(N,_){f(S,N,_)})}function f(S,N,_){if(N)return S.emit("error",N);if(_!=null&&S.push(_),S._writableState.length)throw new E;if(S._transformState.transforming)throw new y;return S.push(null)}s.exports=c;var h=o("../errors").codes,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,y=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,E=h.ERR_TRANSFORM_WITH_LENGTH_0,C=o("./_stream_duplex");o("inherits")(c,C),c.prototype.push=function(S,N){return this._transformState.needTransform=!1,C.prototype.push.call(this,S,N)},c.prototype._transform=function(S,N,_){_(new m("_transform()"))},c.prototype._write=function(S,N,_){var O=this._transformState;if(O.writecb=_,O.writechunk=S,O.writeencoding=N,!O.transforming){var M=this._readableState;(O.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},c.prototype._read=function(){var S=this._transformState;S.writechunk===null||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},c.prototype._destroy=function(S,N){C.prototype._destroy.call(this,S,function(_){N(_)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(o,s){(function(a,c){(function(){function u(ce){var ge=this;this.next=null,this.entry=null,this.finish=function(){ae(ge,ce)}}function f(ce){return ue.from(ce)}function h(ce){return ue.isBuffer(ce)||ce instanceof $}function m(){}function g(ce,ge,Ae){W=W||o("./_stream_duplex"),ce=ce||{},typeof Ae!="boolean"&&(Ae=ge instanceof W),this.objectMode=!!ce.objectMode,Ae&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=j(this,ce,"writableHighWaterMark",Ae),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var He=ce.decodeStrings===!1;this.decodeStrings=!He,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){R(ge,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function y(ce){W=W||o("./_stream_duplex");var ge=this instanceof W;return ge||Tt.call(y,this)?(this._writableState=new g(ce,this,ge),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),void te.call(this)):new y(ce)}function E(ce,ge){var Ae=new mn;rt(ce,Ae),a.nextTick(ge,Ae)}function C(ce,ge,Ae,He){var Y;return Ae===null?Y=new Bt:typeof Ae!="string"&&!ge.objectMode&&(Y=new Re("chunk",["string","Buffer"],Ae)),!Y||(rt(ce,Y),a.nextTick(He,Y),!1)}function S(ce,ge,Ae){return ce.objectMode||ce.decodeStrings===!1||typeof ge!="string"||(ge=ue.from(ge,Ae)),ge}function N(ce,ge,Ae,He,Y,T){if(!Ae){var I=S(ge,He,Y);He!==I&&(Ae=!0,Y="buffer",He=I)}var P=ge.objectMode?1:He.length;ge.length+=P;var ee=ge.length<ge.highWaterMark;if(ee||(ge.needDrain=!0),ge.writing||ge.corked){var oe=ge.lastBufferedRequest;ge.lastBufferedRequest={chunk:He,encoding:Y,isBuf:Ae,callback:T,next:null},oe?oe.next=ge.lastBufferedRequest:ge.bufferedRequest=ge.lastBufferedRequest,ge.bufferedRequestCount+=1}else _(ce,ge,!1,P,He,Y,T);return ee}function _(ce,ge,Ae,He,Y,T,I){ge.writelen=He,ge.writecb=I,ge.writing=!0,ge.sync=!0,ge.destroyed?ge.onwrite(new Ye("write")):Ae?ce._writev(Y,ge.onwrite):ce._write(Y,T,ge.onwrite),ge.sync=!1}function O(ce,ge,Ae,He,Y){--ge.pendingcb,Ae?(a.nextTick(Y,He),a.nextTick(re,ce,ge),ce._writableState.errorEmitted=!0,rt(ce,He)):(Y(He),ce._writableState.errorEmitted=!0,rt(ce,He),re(ce,ge))}function M(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}function R(ce,ge){var Ae=ce._writableState,He=Ae.sync,Y=Ae.writecb;if(typeof Y!="function")throw new $e;if(M(Ae),ge)O(ce,Ae,He,ge,Y);else{var T=B(Ae)||ce.destroyed;T||Ae.corked||Ae.bufferProcessing||!Ae.bufferedRequest||z(ce,Ae),He?a.nextTick(L,ce,Ae,T,Y):L(ce,Ae,T,Y)}}function L(ce,ge,Ae,He){Ae||F(ce,ge),ge.pendingcb--,He(),re(ce,ge)}function F(ce,ge){ge.length===0&&ge.needDrain&&(ge.needDrain=!1,ce.emit("drain"))}function z(ce,ge){ge.bufferProcessing=!0;var Ae=ge.bufferedRequest;if(ce._writev&&Ae&&Ae.next){var He=ge.bufferedRequestCount,Y=Array(He),T=ge.corkedRequestsFree;T.entry=Ae;for(var I=0,P=!0;Ae;)Y[I]=Ae,Ae.isBuf||(P=!1),Ae=Ae.next,I+=1;Y.allBuffers=P,_(ce,ge,!0,ge.length,Y,"",T.finish),ge.pendingcb++,ge.lastBufferedRequest=null,T.next?(ge.corkedRequestsFree=T.next,T.next=null):ge.corkedRequestsFree=new u(ge),ge.bufferedRequestCount=0}else{for(;Ae;){var ee=Ae.chunk,oe=Ae.encoding,Ee=Ae.callback,se=ge.objectMode?1:ee.length;if(_(ce,ge,!1,se,ee,oe,Ee),Ae=Ae.next,ge.bufferedRequestCount--,ge.writing)break}Ae===null&&(ge.lastBufferedRequest=null)}ge.bufferedRequest=Ae,ge.bufferProcessing=!1}function B(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function U(ce,ge){ce._final(function(Ae){ge.pendingcb--,Ae&&rt(ce,Ae),ge.prefinished=!0,ce.emit("prefinish"),re(ce,ge)})}function q(ce,ge){ge.prefinished||ge.finalCalled||(typeof ce._final!="function"||ge.destroyed?(ge.prefinished=!0,ce.emit("prefinish")):(ge.pendingcb++,ge.finalCalled=!0,a.nextTick(U,ce,ge)))}function re(ce,ge){var Ae=B(ge);if(Ae&&(q(ce,ge),ge.pendingcb===0&&(ge.finished=!0,ce.emit("finish"),ge.autoDestroy))){var He=ce._readableState;(!He||He.autoDestroy&&He.endEmitted)&&ce.destroy()}return Ae}function J(ce,ge,Ae){ge.ending=!0,re(ce,ge),Ae&&(ge.finished?a.nextTick(Ae):ce.once("finish",Ae)),ge.ended=!0,ce.writable=!1}function ae(ce,ge,Ae){var He=ce.entry;for(ce.entry=null;He;){var Y=He.callback;ge.pendingcb--,Y(Ae),He=He.next}ge.corkedRequestsFree.next=ce}s.exports=y;var W;y.WritableState=g;var Z={deprecate:o("util-deprecate")},te=o("./internal/streams/stream"),ue=o("buffer").Buffer,$=c.Uint8Array||function(){},K=o("./internal/streams/destroy"),ie=o("./internal/streams/state"),j=ie.getHighWaterMark,Se=o("../errors").codes,Re=Se.ERR_INVALID_ARG_TYPE,Le=Se.ERR_METHOD_NOT_IMPLEMENTED,$e=Se.ERR_MULTIPLE_CALLBACK,ot=Se.ERR_STREAM_CANNOT_PIPE,Ye=Se.ERR_STREAM_DESTROYED,Bt=Se.ERR_STREAM_NULL_VALUES,mn=Se.ERR_STREAM_WRITE_AFTER_END,Jt=Se.ERR_UNKNOWN_ENCODING,rt=K.errorOrDestroy;o("inherits")(y,te),g.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ge=[];ce;)ge.push(ce),ce=ce.next;return ge},(function(){try{Object.defineProperty(g.prototype,"buffer",{get:Z.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Tt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Tt=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(ce){return!!Tt.call(this,ce)||this===y&&ce&&ce._writableState instanceof g}})):Tt=function(ce){return ce instanceof this},y.prototype.pipe=function(){rt(this,new ot)},y.prototype.write=function(ce,ge,Ae){var He=this._writableState,Y=!1,T=!He.objectMode&&h(ce);return T&&!ue.isBuffer(ce)&&(ce=f(ce)),typeof ge=="function"&&(Ae=ge,ge=null),T?ge="buffer":!ge&&(ge=He.defaultEncoding),typeof Ae!="function"&&(Ae=m),He.ending?E(this,Ae):(T||C(this,He,ce,Ae))&&(He.pendingcb++,Y=N(this,He,T,ce,ge,Ae)),Y},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&z(this,ce))},y.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())))throw new Jt(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(ce,ge,Ae){Ae(new Le("_write()"))},y.prototype._writev=null,y.prototype.end=function(ce,ge,Ae){var He=this._writableState;return typeof ce=="function"?(Ae=ce,ce=null,ge=null):typeof ge=="function"&&(Ae=ge,ge=null),ce!=null&&this.write(ce,ge),He.corked&&(He.corked=1,this.uncork()),He.ending||J(this,He,Ae),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(ce){this._writableState&&(this._writableState.destroyed=ce)}}),y.prototype.destroy=K.destroy,y.prototype._undestroy=K.undestroy,y.prototype._destroy=function(ce,ge){ge(ce)}}).call(this)}).call(this,o("_process"),typeof Io>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Io)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(o,s){(function(a){(function(){function c(F,z,B){return z in F?Object.defineProperty(F,z,{value:B,enumerable:!0,configurable:!0,writable:!0}):F[z]=B,F}function u(F,z){return{value:F,done:z}}function f(F){var z=F[E];if(z!==null){var B=F[M].read();B!==null&&(F[_]=null,F[E]=null,F[C]=null,z(u(B,!1)))}}function h(F){a.nextTick(f,F)}function m(F,z){return function(B,U){F.then(function(){return z[N]?void B(u(void 0,!0)):void z[O](B,U)},U)}}var g,y=o("./end-of-stream"),E=Symbol("lastResolve"),C=Symbol("lastReject"),S=Symbol("error"),N=Symbol("ended"),_=Symbol("lastPromise"),O=Symbol("handlePromise"),M=Symbol("stream"),R=Object.getPrototypeOf(function(){}),L=Object.setPrototypeOf((g={get stream(){return this[M]},next:function(){var F=this,z=this[S];if(z!==null)return Promise.reject(z);if(this[N])return Promise.resolve(u(void 0,!0));if(this[M].destroyed)return new Promise(function(re,J){a.nextTick(function(){F[S]?J(F[S]):re(u(void 0,!0))})});var B,U=this[_];if(U)B=new Promise(m(U,this));else{var q=this[M].read();if(q!==null)return Promise.resolve(u(q,!1));B=new Promise(this[O])}return this[_]=B,B}},c(g,Symbol.asyncIterator,function(){return this}),c(g,"return",function(){var F=this;return new Promise(function(z,B){F[M].destroy(null,function(U){return U?void B(U):void z(u(void 0,!0))})})}),g),R);s.exports=function(F){var z,B=Object.create(L,(z={},c(z,M,{value:F,writable:!0}),c(z,E,{value:null,writable:!0}),c(z,C,{value:null,writable:!0}),c(z,S,{value:null,writable:!0}),c(z,N,{value:F._readableState.endEmitted,writable:!0}),c(z,O,{value:function(U,q){var re=B[M].read();re?(B[_]=null,B[E]=null,B[C]=null,U(u(re,!1))):(B[E]=U,B[C]=q)},writable:!0}),z));return B[_]=null,y(F,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=B[C];return q!==null&&(B[_]=null,B[E]=null,B[C]=null,q(U)),void(B[S]=U)}var re=B[E];re!==null&&(B[_]=null,B[E]=null,B[C]=null,re(u(void 0,!0))),B[N]=!0}),F.on("readable",h.bind(null,B)),B}}).call(this)}).call(this,o("_process"))},{"./end-of-stream":24,_process:12}],22:[function(o,s){function a(_,O){var M=Object.keys(_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(_);O&&(R=R.filter(function(L){return Object.getOwnPropertyDescriptor(_,L).enumerable})),M.push.apply(M,R)}return M}function c(_){for(var O,M=1;M<arguments.length;M++)O=arguments[M]==null?{}:arguments[M],M%2?a(Object(O),!0).forEach(function(R){u(_,R,O[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(O)):a(Object(O)).forEach(function(R){Object.defineProperty(_,R,Object.getOwnPropertyDescriptor(O,R))});return _}function u(_,O,M){return O in _?Object.defineProperty(_,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):_[O]=M,_}function f(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}function h(_,O){for(var M,R=0;R<O.length;R++)M=O[R],M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}function m(_,O,M){return O&&h(_.prototype,O),_}function g(_,O,M){E.prototype.copy.call(_,O,M)}var y=o("buffer"),E=y.Buffer,C=o("util"),S=C.inspect,N=S&&S.custom||"inspect";s.exports=(function(){function _(){f(this,_),this.head=null,this.tail=null,this.length=0}return m(_,[{key:"push",value:function(O){var M={data:O,next:null};0<this.length?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(O){var M={data:O,next:this.head};this.length===0&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(this.length!==0){var O=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(this.length===0)return"";for(var M=this.head,R=""+M.data;M=M.next;)R+=O+M.data;return R}},{key:"concat",value:function(O){if(this.length===0)return E.alloc(0);for(var M=E.allocUnsafe(O>>>0),R=this.head,L=0;R;)g(R.data,M,L),L+=R.data.length,R=R.next;return M}},{key:"consume",value:function(O,M){var R;return O<this.head.data.length?(R=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):O===this.head.data.length?R=this.shift():R=M?this._getString(O):this._getBuffer(O),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var M=this.head,R=1,L=M.data;for(O-=L.length;M=M.next;){var F=M.data,z=O>F.length?F.length:O;if(L+=z===F.length?F:F.slice(0,O),O-=z,O===0){z===F.length?(++R,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=F.slice(z));break}++R}return this.length-=R,L}},{key:"_getBuffer",value:function(O){var M=E.allocUnsafe(O),R=this.head,L=1;for(R.data.copy(M),O-=R.data.length;R=R.next;){var F=R.data,z=O>F.length?F.length:O;if(F.copy(M,M.length-O,0,z),O-=z,O===0){z===F.length?(++L,this.head=R.next?R.next:this.tail=null):(this.head=R,R.data=F.slice(z));break}++L}return this.length-=L,M}},{key:N,value:function(O,M){return S(this,c({},M,{depth:0,customInspect:!1}))}}]),_})()},{buffer:3,util:2}],23:[function(o,s){(function(a){(function(){function c(h,m){f(h,m),u(h)}function u(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function f(h,m){h.emit("error",m)}s.exports={destroy:function(h,m){var g=this,y=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return y||E?(m?m(h):h&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,a.nextTick(f,this,h)):a.nextTick(f,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(C){!m&&C?g._writableState?g._writableState.errorEmitted?a.nextTick(u,g):(g._writableState.errorEmitted=!0,a.nextTick(c,g,C)):a.nextTick(c,g,C):m?(a.nextTick(u,g),m(C)):a.nextTick(u,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,m){var g=h._readableState,y=h._writableState;g&&g.autoDestroy||y&&y.autoDestroy?h.destroy(m):h.emit("error",m)}}}).call(this)}).call(this,o("_process"))},{_process:12}],24:[function(o,s){function a(m){var g=!1;return function(){if(!g){g=!0;for(var y=arguments.length,E=Array(y),C=0;C<y;C++)E[C]=arguments[C];m.apply(this,E)}}}function c(){}function u(m){return m.setHeader&&typeof m.abort=="function"}function f(m,g,y){if(typeof g=="function")return f(m,null,g);g||(g={}),y=a(y||c);var E=g.readable||g.readable!==!1&&m.readable,C=g.writable||g.writable!==!1&&m.writable,S=function(){m.writable||_()},N=m._writableState&&m._writableState.finished,_=function(){C=!1,N=!0,E||y.call(m)},O=m._readableState&&m._readableState.endEmitted,M=function(){E=!1,O=!0,C||y.call(m)},R=function(z){y.call(m,z)},L=function(){var z;return E&&!O?(m._readableState&&m._readableState.ended||(z=new h),y.call(m,z)):C&&!N?(m._writableState&&m._writableState.ended||(z=new h),y.call(m,z)):void 0},F=function(){m.req.on("finish",_)};return u(m)?(m.on("complete",_),m.on("abort",L),m.req?F():m.on("request",F)):C&&!m._writableState&&(m.on("end",S),m.on("close",S)),m.on("end",M),m.on("finish",_),g.error!==!1&&m.on("error",R),m.on("close",L),function(){m.removeListener("complete",_),m.removeListener("abort",L),m.removeListener("request",F),m.req&&m.req.removeListener("finish",_),m.removeListener("end",S),m.removeListener("close",S),m.removeListener("finish",_),m.removeListener("end",M),m.removeListener("error",R),m.removeListener("close",L)}}var h=o("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;s.exports=f},{"../../../errors":15}],25:[function(o,s){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(o,s){function a(N){var _=!1;return function(){_||(_=!0,N.apply(void 0,arguments))}}function c(N){if(N)throw N}function u(N){return N.setHeader&&typeof N.abort=="function"}function f(N,_,O,M){M=a(M);var R=!1;N.on("close",function(){R=!0}),y===void 0&&(y=o("./end-of-stream")),y(N,{readable:_,writable:O},function(F){return F?M(F):(R=!0,void M())});var L=!1;return function(F){if(!R)return L?void 0:(L=!0,u(N)?N.abort():typeof N.destroy=="function"?N.destroy():void M(F||new S("pipe")))}}function h(N){N()}function m(N,_){return N.pipe(_)}function g(N){return N.length&&typeof N[N.length-1]=="function"?N.pop():c}var y,E=o("../../../errors").codes,C=E.ERR_MISSING_ARGS,S=E.ERR_STREAM_DESTROYED;s.exports=function(){for(var N=arguments.length,_=Array(N),O=0;O<N;O++)_[O]=arguments[O];var M=g(_);if(Array.isArray(_[0])&&(_=_[0]),2>_.length)throw new C("streams");var R,L=_.map(function(F,z){var B=z<_.length-1;return f(F,B,0<z,function(U){R||(R=U),U&&L.forEach(h),B||(L.forEach(h),M(R))})});return _.reduce(m)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(o,s){function a(u,f,h){return u.highWaterMark==null?f?u[h]:null:u.highWaterMark}var c=o("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(u,f,h,m){var g=a(f,m,h);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var y=m?h:"highWaterMark";throw new c(y,g)}return n(g)}return u.objectMode?16:16384}}},{"../../../errors":15}],28:[function(o,s){s.exports=o("events").EventEmitter},{events:7}],29:[function(o,s,a){a=s.exports=o("./lib/_stream_readable.js"),a.Stream=a,a.Readable=a,a.Writable=o("./lib/_stream_writable.js"),a.Duplex=o("./lib/_stream_duplex.js"),a.Transform=o("./lib/_stream_transform.js"),a.PassThrough=o("./lib/_stream_passthrough.js"),a.finished=o("./lib/internal/streams/end-of-stream.js"),a.pipeline=o("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(o,s,a){function c(m,g){for(var y in m)g[y]=m[y]}function u(m,g,y){return h(m,g,y)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var f=o("buffer"),h=f.Buffer;h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?s.exports=f:(c(f,a),a.Buffer=u),u.prototype=Object.create(h.prototype),c(h,u),u.from=function(m,g,y){if(typeof m=="number")throw new TypeError("Argument must not be a number");return h(m,g,y)},u.alloc=function(m,g,y){if(typeof m!="number")throw new TypeError("Argument must be a number");var E=h(m);return g===void 0?E.fill(0):typeof y=="string"?E.fill(g,y):E.fill(g),E},u.allocUnsafe=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return h(m)},u.allocUnsafeSlow=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(m)}},{buffer:3}],31:[function(o,s,a){function c(L){if(!L)return"utf8";for(var F;;)switch(L){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return L;default:if(F)return;L=(""+L).toLowerCase(),F=!0}}function u(L){var F=c(L);if(typeof F!="string"&&(M.isEncoding===R||!R(L)))throw new Error("Unknown encoding: "+L);return F||L}function f(L){this.encoding=u(L);var F;switch(this.encoding){case"utf16le":this.text=E,this.end=C,F=4;break;case"utf8":this.fillLast=y,F=4;break;case"base64":this.text=S,this.end=N,F=3;break;default:return this.write=_,void(this.end=O)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(F)}function h(L){return 127>=L?0:L>>5==6?2:L>>4==14?3:L>>3==30?4:L>>6==2?-1:-2}function m(L,F,z){var B=F.length-1;if(B<z)return 0;var U=h(F[B]);return 0<=U?(0<U&&(L.lastNeed=U-1),U):--B<z||U===-2?0:(U=h(F[B]),0<=U?(0<U&&(L.lastNeed=U-2),U):--B<z||U===-2?0:(U=h(F[B]),0<=U?(0<U&&(U===2?U=0:L.lastNeed=U-3),U):0))}function g(L,F){if((192&F[0])!=128)return L.lastNeed=0,"";if(1<L.lastNeed&&1<F.length){if((192&F[1])!=128)return L.lastNeed=1,"";if(2<L.lastNeed&&2<F.length&&(192&F[2])!=128)return L.lastNeed=2,""}}function y(L){var F=this.lastTotal-this.lastNeed,z=g(this,L);return z===void 0?this.lastNeed<=L.length?(L.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(L.copy(this.lastChar,F,0,L.length),void(this.lastNeed-=L.length)):z}function E(L,F){if((L.length-F)%2==0){var z=L.toString("utf16le",F);if(z){var B=z.charCodeAt(z.length-1);if(55296<=B&&56319>=B)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=L[L.length-1],L.toString("utf16le",F,L.length-1)}function C(L){var F=L&&L.length?this.write(L):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return F+this.lastChar.toString("utf16le",0,z)}return F}function S(L,F){var z=(L.length-F)%3;return z==0?L.toString("base64",F):(this.lastNeed=3-z,this.lastTotal=3,z==1?this.lastChar[0]=L[L.length-1]:(this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1]),L.toString("base64",F,L.length-z))}function N(L){var F=L&&L.length?this.write(L):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function _(L){return L.toString(this.encoding)}function O(L){return L&&L.length?this.write(L):""}var M=o("safe-buffer").Buffer,R=M.isEncoding||function(L){switch(L=""+L,L&&L.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};a.StringDecoder=f,f.prototype.write=function(L){if(L.length===0)return"";var F,z;if(this.lastNeed){if(F=this.fillLast(L),F===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<L.length?F?F+this.text(L,z):this.text(L,z):F||""},f.prototype.end=function(L){var F=L&&L.length?this.write(L):"";return this.lastNeed?F+"":F},f.prototype.text=function(L,F){var z=m(this,L,F);if(!this.lastNeed)return L.toString("utf8",F);this.lastTotal=z;var B=L.length-(z-this.lastNeed);return L.copy(this.lastChar,0,B),L.toString("utf8",F,B)},f.prototype.fillLast=function(L){return this.lastNeed<=L.length?(L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,L.length),void(this.lastNeed-=L.length))}},{"safe-buffer":30}],32:[function(o,s){(function(a){(function(){function c(u){try{if(!a.localStorage)return!1}catch{return!1}var f=a.localStorage[u];return f!=null&&(f+"").toLowerCase()==="true"}s.exports=function(u,f){function h(){if(!m){if(c("throwDeprecation"))throw new Error(f);c("traceDeprecation")?console.trace(f):console.warn(f),m=!0}return u.apply(this,arguments)}if(c("noDeprecation"))return u;var m=!1;return h}}).call(this)}).call(this,typeof Io>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Io)},{}],"/":[function(o,s){function a(N){return N.replace(/a=ice-options:trickle\s\n/g,"")}function c(N){console.warn(N)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const u=o("debug")("simple-peer"),f=o("get-browser-rtc"),h=o("randombytes"),m=o("readable-stream"),g=o("queue-microtask"),y=o("err-code"),{Buffer:E}=o("buffer"),C=65536;class S extends m.Duplex{constructor(_){if(_=Object.assign({allowHalfOpen:!1},_),super(_),this._id=h(4).toString("hex").slice(0,7),this._debug("new peer %o",_),this.channelName=_.initiator?_.channelName||h(20).toString("hex"):null,this.initiator=_.initiator||!1,this.channelConfig=_.channelConfig||S.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},S.config,_.config),this.offerOptions=_.offerOptions||{},this.answerOptions=_.answerOptions||{},this.sdpTransform=_.sdpTransform||(O=>O),this.streams=_.streams||(_.stream?[_.stream]:[]),this.trickle=_.trickle===void 0||_.trickle,this.allowHalfTrickle=_.allowHalfTrickle!==void 0&&_.allowHalfTrickle,this.iceCompleteTimeout=_.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=_.wrtc&&typeof _.wrtc=="object"?_.wrtc:f(),!this._wrtc)throw y(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(O){return void this.destroy(y(O,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=O=>{this._onIceCandidate(O)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(O=>{this.destroy(y(O,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=O=>{this._setupData(O)},this.streams&&this.streams.forEach(O=>{this.addStream(O)}),this._pc.ontrack=O=>{this._onTrack(O)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(_){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof _=="string")try{_=JSON.parse(_)}catch{_={}}this._debug("signal()"),_.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),_.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(_.transceiverRequest.kind,_.transceiverRequest.init)),_.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(_.candidate):this._pendingCandidates.push(_.candidate)),_.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(_)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(O=>{this._addIceCandidate(O)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(O=>{this.destroy(y(O,"ERR_SET_REMOTE_DESCRIPTION"))}),_.sdp||_.candidate||_.renegotiate||_.transceiverRequest||this.destroy(y(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(_){const O=new this._wrtc.RTCIceCandidate(_);this._pc.addIceCandidate(O).catch(M=>{!O.address||O.address.endsWith(".local")?c("Ignoring unsupported ICE candidate."):this.destroy(y(M,"ERR_ADD_ICE_CANDIDATE"))})}send(_){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(_)}}addTransceiver(_,O){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(_,O),this._needsNegotiation()}catch(M){this.destroy(y(M,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:_,init:O}})}}addStream(_){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),_.getTracks().forEach(O=>{this.addTrack(O,_)})}}addTrack(_,O){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const M=this._senderMap.get(_)||new Map;let R=M.get(O);if(!R)R=this._pc.addTrack(_,O),M.set(O,R),this._senderMap.set(_,M),this._needsNegotiation();else throw R.removed?y(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):y(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(_,O,M){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const R=this._senderMap.get(_),L=R?R.get(M):null;if(!L)throw y(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");O&&this._senderMap.set(O,R),L.replaceTrack==null?this.destroy(y(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):L.replaceTrack(O)}removeTrack(_,O){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const M=this._senderMap.get(_),R=M?M.get(O):null;if(!R)throw y(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{R.removed=!0,this._pc.removeTrack(R)}catch(L){L.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(R):this.destroy(y(L,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(_){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),_.getTracks().forEach(O=>{this.removeTrack(O,_)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(_){this._destroy(_,()=>{})}_destroy(_,O){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",_&&(_.message||_)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",_&&(_.message||_)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,_&&this.emit("error",_),this.emit("close"),O()}))}_setupData(_){if(!_.channel)return this.destroy(y(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=_.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=C),this.channelName=this._channel.label,this._channel.onmessage=M=>{this._onChannelMessage(M)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=M=>{const R=M.error instanceof Error?M.error:new Error(`Datachannel error: ${M.message} ${M.filename}:${M.lineno}:${M.colno}`);this.destroy(y(R,"ERR_DATA_CHANNEL"))};let O=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(O&&this._onChannelClose(),O=!0):O=!1},5e3)}_read(){}_write(_,O,M){if(this.destroyed)return M(y(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(_)}catch(R){return this.destroy(y(R,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>C?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=M):M(null)}else this._debug("write before connect"),this._chunk=_,this._cb=M}_onFinish(){if(!this.destroyed){const _=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?_():this.once("connect",_)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(_=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(_.sdp=a(_.sdp)),_.sdp=this.sdpTransform(_.sdp);const O=()=>{if(!this.destroyed){const M=this._pc.localDescription||_;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp})}};this._pc.setLocalDescription(_).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?O():this.once("_iceComplete",O))}).catch(M=>{this.destroy(y(M,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(_=>{this.destroy(y(_,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(_=>{_.mid||!_.sender.track||_.requested||(_.requested=!0,this.addTransceiver(_.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(_=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(_.sdp=a(_.sdp)),_.sdp=this.sdpTransform(_.sdp);const O=()=>{if(!this.destroyed){const M=this._pc.localDescription||_;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(_).then(()=>{this.destroyed||(this.trickle||this._iceComplete?O():this.once("_iceComplete",O))}).catch(M=>{this.destroy(y(M,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(_=>{this.destroy(y(_,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(y(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const _=this._pc.iceConnectionState,O=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",_,O),this.emit("iceStateChange",_,O),(_==="connected"||_==="completed")&&(this._pcReady=!0,this._maybeReady()),_==="failed"&&this.destroy(y(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),_==="closed"&&this.destroy(y(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(_){const O=M=>(Object.prototype.toString.call(M.values)==="[object Array]"&&M.values.forEach(R=>{Object.assign(M,R)}),M);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(M=>{const R=[];M.forEach(L=>{R.push(O(L))}),_(null,R)},M=>_(M)):0<this._pc.getStats.length?this._pc.getStats(M=>{if(this.destroyed)return;const R=[];M.result().forEach(L=>{const F={};L.names().forEach(z=>{F[z]=L.stat(z)}),F.id=L.id,F.type=L.type,F.timestamp=L.timestamp,R.push(O(F))}),_(null,R)},M=>_(M)):_(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const _=()=>{this.destroyed||this.getStats((O,M)=>{if(this.destroyed)return;O&&(M=[]);const R={},L={},F={};let z=!1;M.forEach(U=>{(U.type==="remotecandidate"||U.type==="remote-candidate")&&(R[U.id]=U),(U.type==="localcandidate"||U.type==="local-candidate")&&(L[U.id]=U),(U.type==="candidatepair"||U.type==="candidate-pair")&&(F[U.id]=U)});const B=U=>{z=!0;let q=L[U.localCandidateId];q&&(q.ip||q.address)?(this.localAddress=q.ip||q.address,this.localPort=+q.port):q&&q.ipAddress?(this.localAddress=q.ipAddress,this.localPort=+q.portNumber):typeof U.googLocalAddress=="string"&&(q=U.googLocalAddress.split(":"),this.localAddress=q[0],this.localPort=+q[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let re=R[U.remoteCandidateId];re&&(re.ip||re.address)?(this.remoteAddress=re.ip||re.address,this.remotePort=+re.port):re&&re.ipAddress?(this.remoteAddress=re.ipAddress,this.remotePort=+re.portNumber):typeof U.googRemoteAddress=="string"&&(re=U.googRemoteAddress.split(":"),this.remoteAddress=re[0],this.remotePort=+re[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(M.forEach(U=>{U.type==="transport"&&U.selectedCandidatePairId&&B(F[U.selectedCandidatePairId]),(U.type==="googCandidatePair"&&U.googActiveConnection==="true"||(U.type==="candidatepair"||U.type==="candidate-pair")&&U.selected)&&B(U)}),!z&&(!Object.keys(F).length||Object.keys(L).length))return void setTimeout(_,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(q){return this.destroy(y(q,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const U=this._cb;this._cb=null,U(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};_()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>C)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(_=>{this._pc.removeTrack(_),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(_){this.destroyed||(_.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:_.candidate.candidate,sdpMLineIndex:_.candidate.sdpMLineIndex,sdpMid:_.candidate.sdpMid}}):!_.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),_.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(_){if(this.destroyed)return;let O=_.data;O instanceof ArrayBuffer&&(O=E.from(O)),this.push(O)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const _=this._cb;this._cb=null,_(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(_){this.destroyed||_.streams.forEach(O=>{this._debug("on track"),this.emit("track",_.track,O),this._remoteTracks.push({track:_.track,stream:O}),this._remoteStreams.some(M=>M.id===O.id)||(this._remoteStreams.push(O),g(()=>{this._debug("on stream"),this.emit("stream",O)}))})}_debug(){const _=[].slice.call(arguments);_[0]="["+this._id+"] "+_[0],u.apply(null,_)}}S.WEBRTC_SUPPORT=!!f(),S.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},S.channelConfig={},s.exports=S},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(aw)),aw.exports}var dwe=uwe();const fwe=ld(dwe),vk=0,oy=1,gH=2,ep=(e,t)=>{Fe(e,vk);const n=t8(t);Qt(e,n)},Ck=(e,t,n)=>{Fe(e,oy),Qt(e,Hh(t,n))},hwe=(e,t,n)=>Ck(t,n,zn(e)),bH=(e,t,n)=>{try{x0(t,zn(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},yH=(e,t)=>{Fe(e,gH),Qt(e,t)},pwe=bH,EH=(e,t,n,r)=>{const i=it(e);switch(i){case vk:hwe(e,t,n);break;case oy:bH(e,n,r);break;case gH:pwe(e,n,r);break;default:throw new Error("Unknown message type")}return i},mwe=(e,t)=>{const n=i2(e).buffer,r=i2(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},vH=(e,t)=>{if(!t)return ET(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(r=>{const i=Ut();return Yo(i,"AES-GCM"),Qt(i,n),Qt(i,new Uint8Array(r)),St(i)})},gwe=(e,t)=>{const n=Ut();return pc(n,e),vH(St(n),t)},CH=(e,t)=>{if(!t)return ET(e);const n=wo(e);Go(n)!=="AES-GCM"&&FJ(vo("Unknown encryption algorithm"));const i=zn(n),o=zn(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o).then(s=>new Uint8Array(s))},bwe=(e,t)=>CH(e,t).then(n=>ed(wo(new Uint8Array(n)))),pi=vee("y-webrtc"),Vu=0,wH=3,tp=1,wk=4,L1=new Map,rc=new Map,SH=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),pi("synced ",qi,e.name,gc," with all peers"))},TH=(e,t,n)=>{const r=wo(t),i=Ut(),o=it(r);if(e===void 0)return null;const s=e.awareness,a=e.doc;let c=!1;switch(o){case Vu:{Fe(i,Vu);const u=EH(r,i,a,e);u===oy&&!e.synced&&n(),u===vk&&(c=!0);break}case wH:Fe(i,tp),Qt(i,Ys(s,Array.from(s.getStates().keys()))),c=!0;break;case tp:YB(s,zn(r),e);break;case wk:{const u=mc(r)===1,f=Go(r);if(f!==e.peerId&&(e.bcConns.has(f)&&!u||!e.bcConns.has(f)&&u)){const h=[],m=[];u?(e.bcConns.add(f),m.push(f)):(e.bcConns.delete(f),h.push(f)),e.provider.emit("peers",[{added:m,removed:h,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),xH(e)}break}default:return console.error("Unable to compute message"),i}return c?i:null},ywe=(e,t)=>{const n=e.room;return pi("received message from ",qi,e.remotePeerId,kT," (",n.name,")",gc,gb),TH(n,t,()=>{e.synced=!0,pi("synced ",qi,n.name,gc," with ",qi,e.remotePeerId),SH(n)})},lw=(e,t)=>{pi("send message to ",qi,e.remotePeerId,gc,kT," (",e.room.name,")",gb);try{e.peer.send(St(t))}catch{}},Ewe=(e,t)=>{pi("broadcast message in ",qi,e.name,gc),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class G6{constructor(t,n,r,i){pi("establishing connection to ",qi,r),this.room=i,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new fwe({initiator:n,...i.provider.peerOpts}),this.peer.on("signal",o=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),Sk(t,i,{to:r,from:i.peerId,type:"signal",token:this.glareToken,signal:o})}),this.peer.on("connect",()=>{pi("connected to ",qi,r),this.connected=!0;const s=i.provider.doc,a=i.awareness,c=Ut();Fe(c,Vu),ep(c,s),lw(this,c);const u=a.getStates();if(u.size>0){const f=Ut();Fe(f,tp),Qt(f,Ys(a,Array.from(u.keys()))),lw(this,f)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),SH(i),this.peer.destroy(),pi("closed connection to ",qi,r),J2(i)}),this.peer.on("error",o=>{pi("Error in connection to ",qi,r,": ",o),J2(i)}),this.peer.on("data",o=>{const s=ywe(this,o);s!==null&&lw(this,s)})}destroy(){this.peer.destroy()}}const Ba=(e,t)=>vH(t,e.key).then(n=>e.mux(()=>Vl(e.name,n))),W6=(e,t)=>{e.bcconnected&&Ba(e,t),Ewe(e,t)},J2=e=>{L1.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Sk(t,e,{type:"announce",from:e.peerId}))})},xH=e=>{if(e.provider.filterBcConns){const t=Ut();Fe(t,wk),Ih(t,1),Yo(t,e.peerId),Ba(e,St(t))}};class vwe{constructor(t,n,r,i){this.peerId=_5(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=GB(),this.bcconnected=!1,this._bcSubscriber=o=>CH(new Uint8Array(o),i).then(s=>this.mux(()=>{const a=TH(this,s,()=>{});a&&Ba(this,St(a))})),this._docUpdateHandler=(o,s)=>{const a=Ut();Fe(a,Vu),yH(a,o),W6(this,St(a))},this._awarenessUpdateHandler=({added:o,updated:s,removed:a},c)=>{const u=o.concat(s).concat(a),f=Ut();Fe(f,tp),Qt(f,Ys(this.awareness,u)),W6(this,St(f))},this._beforeUnloadHandler=()=>{Kh(this.awareness,[t.clientID],"window unload"),rc.forEach(o=>{o.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),J2(this);const t=this.name;pH(t,this._bcSubscriber),this.bcconnected=!0,xH(this);const n=Ut();Fe(n,Vu),ep(n,this.doc),Ba(this,St(n));const r=Ut();Fe(r,Vu),Ck(r,this.doc),Ba(this,St(r));const i=Ut();Fe(i,wH),Ba(this,St(i));const o=Ut();Fe(o,tp),Qt(o,Ys(this.awareness,[this.doc.clientID])),Ba(this,St(o))}disconnect(){L1.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Kh(this.awareness,[this.doc.clientID],"disconnect");const t=Ut();Fe(t,wk),Ih(t,0),Yo(t,this.peerId),Ba(this,St(t)),mH(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const Cwe=(e,t,n,r)=>{if(rc.has(n))throw vo(`A Yjs Doc connected to room "${n}" already exists!`);const i=new vwe(e,t,n,r);return rc.set(n,i),i},Sk=(e,t,n)=>{t.key?gwe(n,t.key).then(r=>{e.send({type:"publish",topic:t.name,data:TT(r)})}):e.send({type:"publish",topic:t.name,data:n})};class wwe extends awe{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{pi(`connected (${t})`);const n=Array.from(rc.keys());this.send({type:"subscribe",topics:n}),rc.forEach(r=>Sk(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,i=rc.get(r);if(i==null||typeof r!="string")return;const o=s=>{const a=i.webrtcConns,c=i.peerId;if(s==null||s.from===c||s.to!==void 0&&s.to!==c||i.bcConns.has(s.from))return;const u=a.has(s.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(s.type){case"announce":a.size<i.provider.maxConns&&(Nr(a,s.from,()=>new G6(this,!0,s.from,i)),u());break;case"signal":if(s.signal.type==="offer"){const f=a.get(s.from);if(f){const h=s.token,m=f.glareToken;if(m&&m>h){pi("offer rejected: ",s.from);return}f.glareToken=void 0}}if(s.signal.type==="answer"){pi("offer answered by: ",s.from);const f=a.get(s.from);f.glareToken=void 0}s.to===c&&(Nr(a,s.from,()=>new G6(this,!1,s.from,i)).peer.signal(s.signal),u());break}};i.key?typeof n.data=="string"&&bwe(B5(n.data),i.key).then(o):o(n.data)}}}),this.on("disconnect",()=>pi(`disconnect (${t})`))}}const cw=e=>{e.emit("status",[{connected:e.connected}])};class Swe extends db{constructor(t,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:i=null,awareness:o=new qB(n),maxConns:s=20+yo(x5()*15),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=a,this.awareness=o,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=i?mwe(i,t):ET(null),this.room=null,this.key.then(u=>{this.room=Cwe(n,this,t,u),this.shouldConnect?this.room.connect():this.room.disconnect(),cw(this)}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=Nr(L1,t,()=>new wwe(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&(this.room.connect(),cw(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),L1.delete(t.url))}),this.room&&(this.room.disconnect(),cw(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),rc.delete(this.roomName)}),super.destroy()}}const Rc=e=>td((t,n)=>{e.onerror=r=>n(new Error(r.target.error)),e.onsuccess=r=>t(r.target.result)}),Twe=(e,t)=>td((n,r)=>{const i=indexedDB.open(e);i.onupgradeneeded=o=>t(o.target.result),i.onerror=o=>r(vo(o.target.error)),i.onsuccess=o=>{const s=o.target.result;s.onversionchange=()=>{s.close()},n(s)}}),xwe=e=>Rc(indexedDB.deleteDatabase(e)),kwe=(e,t)=>t.forEach(n=>e.createObjectStore.apply(e,n)),Gf=(e,t,n="readwrite")=>{const r=e.transaction(t,n);return t.map(i=>Lwe(r,i))},kH=(e,t)=>Rc(e.count(t)),_we=(e,t)=>Rc(e.get(t)),_H=(e,t)=>Rc(e.delete(t)),Awe=(e,t,n)=>Rc(e.put(t,n)),eS=(e,t)=>Rc(e.add(t)),Nwe=(e,t,n)=>Rc(e.getAll(t,n)),Mwe=(e,t,n)=>{let r=null;return Dwe(e,t,i=>(r=i,!1),n).then(()=>r)},Rwe=(e,t=null)=>Mwe(e,t,"prev"),Owe=(e,t)=>td((n,r)=>{e.onerror=r,e.onsuccess=async i=>{const o=i.target.result;if(o===null||await t(o)===!1)return n();o.continue()}}),Dwe=(e,t,n,r="next")=>Owe(e.openKeyCursor(t,r),i=>n(i.key)),Lwe=(e,t)=>e.objectStore(t),Iwe=(e,t)=>IDBKeyRange.upperBound(e,t),Bwe=(e,t)=>IDBKeyRange.lowerBound(e,t),uw="custom",AH="updates",NH=500,MH=(e,t=()=>{},n=()=>{})=>{const[r]=Gf(e.db,[AH]);return Nwe(r,Bwe(e._dbref,!1)).then(i=>{e._destroyed||(t(r),Gt(e.doc,()=>{i.forEach(o=>x0(e.doc,o))},e,!1),n(r))}).then(()=>Rwe(r).then(i=>{e._dbref=i+1})).then(()=>kH(r).then(i=>{e._dbsize=i})).then(()=>r)},Pwe=(e,t=!0)=>MH(e).then(n=>{(t||e._dbsize>=NH)&&eS(n,Hh(e.doc)).then(()=>_H(n,Iwe(e._dbref,!0))).then(()=>kH(n).then(r=>{e._dbsize=r}))});class Hwe extends hT{constructor(t,n){super(),this.doc=n,this.name=t,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=Twe(t,r=>kwe(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=td(r=>this.on("synced",()=>r(this))),this._db.then(r=>{this.db=r,MH(this,s=>eS(s,Hh(n)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,i)=>{if(this.db&&i!==this){const[o]=Gf(this.db,[AH]);eS(o,r),++this._dbsize>=NH&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{Pwe(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(t=>{t.close()})}clearData(){return this.destroy().then(()=>{xwe(this.name)})}get(t){return this._db.then(n=>{const[r]=Gf(n,[uw],"readonly");return _we(r,t)})}set(t,n){return this._db.then(r=>{const[i]=Gf(r,[uw]);return Awe(i,n,t)})}del(t){return this._db.then(n=>{const[r]=Gf(n,[uw]);return _H(r,t)})}}function Tk(e,t=2e3){const n=A.useRef(null),r=A.useCallback(()=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e()},t)},[e,t]),i=A.useCallback(()=>{n.current&&clearTimeout(n.current)},[]),o=A.useCallback(()=>{n.current&&clearTimeout(n.current),e()},[e]);return{triggerSave:r,cancelSave:i,saveImmediately:o}}async function Uwe(){try{const e=await window.indexedDB.databases();let t=0;for(const n of e)n.name&&n.name.startsWith("topic-")&&await new Promise((r,i)=>{const o=window.indexedDB.deleteDatabase(n.name);o.onsuccess=()=>{console.log(` Cleared IndexedDB: ${n.name}`),t++,r()},o.onerror=()=>i(o.error),o.onblocked=()=>{console.warn(` Database ${n.name} is blocked, please close all tabs`),r()}});return console.log(` Cleared ${t} IndexedDB database(s)`),t}catch(e){return console.error("Failed to clear IndexedDB:",e),0}}async function Fwe(e){try{const t=[`topic-${e}`,`topic-${e}-v2`,`topic-${e}-v3`,`topic-${e}-v4`,`topic-${e}-v5`];for(const n of t)await new Promise((r,i)=>{const o=window.indexedDB.deleteDatabase(n);o.onsuccess=()=>{console.log(` Cleared IndexedDB: ${n}`),r()},o.onerror=()=>i(o.error),o.onblocked=()=>{console.warn(` Database ${n} is blocked`),r()}});return console.log(` Cleared topic ${e} databases`),!0}catch(t){return console.error("Failed to clear topic database:",t),!1}}typeof window<"u"&&(window.clearYjsCache=Uwe,window.clearTopicCache=Fwe,console.log(" Debug utilities loaded:"),console.log("  - window.clearYjsCache() - Clear all Yjs databases"),console.log("  - window.clearTopicCache(topicId) - Clear specific topic database"));function jwe({topicId:e,initialContent:t,onSave:n,onReloadNeeded:r}){const[i,o]=A.useState("saved"),[s,a]=A.useState(null),[c,u]=A.useState(1),[f,h]=A.useState(!1),[m,g]=A.useState(!1);A.useRef(!1);const y=A.useRef(0),E=A.useRef(!1),C=A.useMemo(()=>new So,[]),[S,N]=A.useState(!1),[_,O]=A.useState(!1),M=A.useRef(null);A.useEffect(()=>(console.log(" IndexedDB caching: DISABLED (prevents cache conflicts)"),console.log("   All data is loaded from server and synced via WebRTC only"),()=>{M.current&&M.current.destroy()}),[S,e,C]);const R=A.useMemo(()=>{const q=`blocknote-topic-${e}`;console.log(" Initializing WebRTC P2P collaboration for room:",q);const re=window.location.hostname,ae=`${window.location.protocol==="https:"?"wss:":"ws:"}//${re}:5001`,W=new Swe(q,C,{signaling:[ae],password:null,maxConns:20,filterBcConns:!1,peerOpts:{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}}});console.log(" WebRTC Configuration:"),console.log("   - Room:",q),console.log("   - Signaling:",ae),console.log("   - BroadcastChannel: enabled (for same-device tabs)"),console.log("   - WebRTC: enabled (for different devices)");const Z=W.awareness;return W.on("peers",({added:te,removed:ue,webrtcPeers:$,bcPeers:K})=>{const ie=$.length+K.length+1,j=$.length>0||K.length>0;u(ie),g(j),console.log(" Peers changed:",{added:te,removed:ue,webrtcPeers:$.length,bcPeers:K.length,totalConnected:ie,roomConnected:j})}),Z&&(Z.on("update",()=>{const te=Z.getStates();u(te.size),console.log(" Awareness update - total users:",te.size)}),Z.on("change",({added:te,updated:ue,removed:$})=>{console.log(" Awareness changed:",{added:te,updated:ue,removed:$})})),console.log(" WebRTC Provider initialized"),W},[e,C]);A.useEffect(()=>{const q=setInterval(()=>{if(R&&R.awareness){const J=R.awareness.getStates().size,ae=R.room?.webrtcConns?.size||0,W=R.room?.bcConns?.size||0,Z=ae>0||W>0;u(J),g(Z),console.log(" Periodic check:",{awarenessUsers:J,webrtcPeers:ae,bcPeers:W,roomConnected:Z})}},2e3);return()=>clearInterval(q)},[R]),A.useEffect(()=>{_||(t&&t.length>0?console.log(" Server has content:",t.length,"blocks (will load after editor init)"):console.log(" No server content, starting fresh"),O(!0),N(!0))},[t,_]);const L=Td({collaboration:{provider:R,fragment:C.getXmlFragment("document-store"),user:{name:"Anonymous",color:"#"+Math.floor(Math.random()*16777215).toString(16)}},domAttributes:{editor:{class:"bn-editor","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"}}});A.useEffect(()=>{if(!f&&L&&_){const q=C.getXmlFragment("document-store");if(C.transact(()=>{for(;q.length>0;)q.delete(0)}),t&&t.length>0){console.log(" Loading server content (source of truth)...",t.length,"blocks");try{L.replaceBlocks(L.document,t),console.log(" Server content loaded successfully")}catch(re){console.error("Error loading server content:",re)}}else console.log(" No server content, starting fresh");h(!0),N(!0)}},[L,f,_,C,t]),A.useEffect(()=>{const q=async re=>{if(re.error?.message?.includes("Position")&&re.error?.message?.includes("out of range")){if(console.error(" Cache conflict detected (Position out of range)"),re.preventDefault(),E.current){console.error(" Recovery already attempted, manual intervention needed"),console.log(" Try: window.clearTopicCache("+e+") then refresh");return}E.current=!0,console.log(" Attempting automatic recovery...");try{M.current&&(console.log("   1/4 Closing IndexedDB connection..."),M.current.destroy(),M.current=null),console.log("   2/4 Clearing stale cache...");const J=["","-v2","-v3","-v4","-v5"];for(const W of J){const Z=`topic-${e}${W}`;try{await new Promise(te=>{const ue=window.indexedDB.deleteDatabase(Z);ue.onsuccess=()=>te(),ue.onerror=()=>te(),ue.onblocked=()=>te()})}catch(te){console.warn(`   - Failed to delete ${Z}:`,te.message)}}console.log("   3/4 Clearing in-memory document...");const ae=C.getXmlFragment("document-store");if(C.transact(()=>{for(;ae.length>0;)ae.delete(0)}),console.log("   4/4 Fetching latest content from server..."),L&&r){const W=await r();if(W&&W.length>0){L.replaceBlocks(L.document,W),console.log(" Recovery successful! Reloaded",W.length,"blocks from server"),console.log("    Server timestamp:",new Date().toISOString());const Z=`topic-${e}-v5`,te=new Hwe(Z,C);M.current=te,console.log(" IndexedDB reconnected with fresh cache")}else console.log(" No server content available for recovery")}else console.error(" Cannot reload: onReloadNeeded callback not provided")}catch(J){console.error(" Automatic recovery failed:",J),console.log(" Please refresh the page manually")}}};return window.addEventListener("error",q),()=>window.removeEventListener("error",q)},[e,C,L,r]),A.useEffect(()=>()=>{R.destroy(),M.current&&M.current.destroy()},[R]);const F=async()=>{if(L){if(!m&&c>1){console.warn(" Cannot save: Not connected to collaboration room"),console.log("   Waiting for room connection to prevent data conflicts..."),o("error");return}try{o("saving");const q=L.document;console.log(" Auto-saving to server JSON (source of truth)...",{topicId:e,blockCount:q.length,roomConnected:m,connectedUsers:c}),await n(q,"Anonymous"),o("saved"),a(new Date),console.log(" Saved to server JSON"),console.log("    WebRTC broadcasts to connected users")}catch(q){console.error(" Save failed:",q),o("error")}}},{triggerSave:z,saveImmediately:B}=Tk(F,3e3),U=()=>{i!=="saving"&&o("unsaved");const q=L?.document?.length||0;q>y.current?(console.log(" New block added, saving immediately..."),B()):z(),y.current=q};return k.jsx("section",{className:"editor-section",children:k.jsxs("div",{className:"editor-container",children:[k.jsx("div",{className:"editor-toolbar",children:k.jsxs("div",{className:"editor-info",children:[k.jsxs("span",{className:`save-status ${i}`,children:[i==="saved"&&" ",i==="saving"&&"  ...",i==="unsaved"&&"  ",i==="error"&&"  "]}),k.jsxs("span",{className:`connected-users ${!m&&c>1?"warning":""}`,children:[m?"":c>1?"":""," ",c,"  ",!m&&c>1&&" (  )"]}),s&&k.jsxs("span",{className:"last-saved",children:[" : ",s.toLocaleTimeString("ko-KR")]})]})}),!m&&c>1&&k.jsx("div",{className:"connection-warning",children:"     ...     ."}),k.jsx("div",{className:"auto-save-notice",children:"  JSON   |  3   (  ) |   P2P  (WebRTC)"}),k.jsx("div",{className:"notion-editor-wrapper",children:k.jsx(iy,{editor:L,onChange:U,theme:"dark"})})]})})}const zwe=0,$we=(e,t,n)=>{switch(it(e)){case zwe:n(t,Go(e))}},Vwe=e=>YJ(e,(t,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(t)}`).join("&"),Wl=0,RH=3,qu=1,qwe=2,Mp=[];Mp[Wl]=(e,t,n,r,i)=>{Fe(e,Wl);const o=EH(t,e,n.doc,n);r&&o===oy&&!n.synced&&(n.synced=!0)};Mp[RH]=(e,t,n,r,i)=>{Fe(e,qu),Qt(e,Ys(n.awareness,Array.from(n.awareness.getStates().keys())))};Mp[qu]=(e,t,n,r,i)=>{YB(n.awareness,zn(t),n)};Mp[qwe]=(e,t,n,r,i)=>{$we(t,n.doc,(o,s)=>Ywe(n,s))};const K6=3e4,Ywe=(e,t)=>console.warn(`Permission denied to access ${e.url}.
${t}`),OH=(e,t,n)=>{const r=wo(t),i=Ut(),o=it(r),s=e.messageHandlers[o];return s?s(i,r,e,n,o):console.error("Unable to compute message"),i},tS=(e,t,n)=>{t===e.ws&&(e.emit("connection-close",[n,e]),e.ws=null,t.close(),e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,Kh(e.awareness,Array.from(e.awareness.getStates().keys()).filter(r=>r!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(DH,uo(aJ(2,e.wsUnsuccessfulReconnects)*100,e.maxBackoffTime),e))},DH=e=>{if(e.shouldConnect&&e.ws===null){const t=new e._WS(e.url,e.protocols);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=wi();const r=OH(e,new Uint8Array(n.data),!0);pT(r)>1&&t.send(St(r))},t.onerror=n=>{e.emit("connection-error",[n,e])},t.onclose=n=>{tS(e,t,n)},t.onopen=()=>{e.wsLastMessageReceived=wi(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=Ut();if(Fe(n,Wl),ep(n,e.doc),t.send(St(n)),e.awareness.getLocalState()!==null){const r=Ut();Fe(r,qu),Qt(r,Ys(e.awareness,[e.doc.clientID])),t.send(St(r))}},e.emit("status",[{status:"connecting"}])}},dw=(e,t)=>{const n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&Vl(e.bcChannel,t,e)};class LH extends db{constructor(t,n,r,{connect:i=!0,awareness:o=new qB(r),params:s={},protocols:a=[],WebSocketPolyfill:c=WebSocket,resyncInterval:u=-1,maxBackoffTime:f=2500,disableBc:h=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);this.serverUrl=t,this.bcChannel=t+"/"+n,this.maxBackoffTime=f,this.params=s,this.protocols=a,this.roomname=n,this.doc=r,this._WS=c,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=h,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Mp.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,u>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const m=Ut();Fe(m,Wl),ep(m,r),this.ws.send(St(m))}},u)),this._bcSubscriber=(m,g)=>{if(g!==this){const y=OH(this,new Uint8Array(m),!1);pT(y)>1&&Vl(this.bcChannel,St(y),this)}},this._updateHandler=(m,g)=>{if(g!==this){const y=Ut();Fe(y,Wl),yH(y,m),dw(this,St(y))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:m,updated:g,removed:y},E)=>{const C=m.concat(g).concat(y),S=Ut();Fe(S,qu),Qt(S,Ys(o,C)),dw(this,St(S))},this._exitHandler=()=>{Kh(this.awareness,[r.clientID],"app closed")},rl&&typeof process<"u"&&process.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&K6<wi()-this.wsLastMessageReceived&&tS(this,this.ws,null)},K6/10),i&&this.connect()}get url(){const t=Vwe(this.params);return this.serverUrl+"/"+this.roomname+(t.length===0?"":"?"+t)}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),rl&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(pH(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=Ut();Fe(t,Wl),ep(t,this.doc),Vl(this.bcChannel,St(t),this);const n=Ut();Fe(n,Wl),Ck(n,this.doc),Vl(this.bcChannel,St(n),this);const r=Ut();Fe(r,RH),Vl(this.bcChannel,St(r),this);const i=Ut();Fe(i,qu),Qt(i,Ys(this.awareness,[this.doc.clientID])),Vl(this.bcChannel,St(i),this)}disconnectBc(){const t=Ut();Fe(t,qu),Qt(t,Ys(this.awareness,[this.doc.clientID],new Map)),dw(this,St(t)),this.bcconnected&&(mH(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&tS(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(DH(this),this.connectBc())}}function Gwe({topicId:e,feedback:t,onSubmit:n}){const[r,i]=A.useState("saved"),[o,s]=A.useState(null),[a,c]=A.useState(1);A.useRef(!1);const u=A.useRef(null),f=A.useMemo(()=>new So,[]),h=A.useMemo(()=>{const S=`ws://${window.location.hostname}:1234`,N=new LH(S,`feedback-${e}`,f,{connect:!0,resyncInterval:1e4});return N.on("status",_=>{console.log("Feedback WebSocket status:",_.status)}),N.awareness.on("change",()=>{c(N.awareness.getStates().size)}),N},[e,f]),m=Td({collaboration:{provider:h,fragment:f.getXmlFragment("document-store"),user:{name:"Anonymous",color:"#"+Math.floor(Math.random()*16777215).toString(16)}},domAttributes:{editor:{class:"bn-editor","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"}}});A.useEffect(()=>(u.current=m,()=>{h.destroy()}),[h,m]);const g=async()=>{try{i("saving");const C=m.document;await n(C),i("saved"),s(new Date)}catch(C){console.error("Save failed:",C),i("error")}},{triggerSave:y}=Tk(g,3e3),E=()=>{i("unsaved"),y()};return k.jsx("section",{className:"editor-section",children:k.jsxs("div",{className:"editor-container",children:[k.jsx("div",{className:"editor-toolbar",children:k.jsxs("div",{className:"editor-info",children:[k.jsxs("span",{className:`save-status ${r}`,children:[r==="saved"&&" ",r==="saving"&&"  ...",r==="unsaved"&&"  ",r==="error"&&"  "]}),k.jsxs("span",{className:"connected-users",children:[" ",a,"  "]}),o&&k.jsxs("span",{className:"last-saved",children:[" : ",o.toLocaleTimeString("ko-KR")]})]})}),k.jsx("div",{className:"auto-save-notice",children:"    |     "}),k.jsx("div",{className:"notion-editor-wrapper",children:k.jsx(iy,{editor:m,onChange:E,theme:"dark"})})]})})}function Wwe({topicId:e,ideas:t,onSubmit:n,onVote:r}){const[i,o]=A.useState("saved"),[s,a]=A.useState(null),[c,u]=A.useState(1);A.useRef(!1);const f=A.useRef(null),h=A.useMemo(()=>new So,[]),m=A.useMemo(()=>{const N=`ws://${window.location.hostname}:1234`,_=new LH(N,`ideas-${e}`,h,{connect:!0,resyncInterval:1e4});return _.on("status",O=>{console.log("Ideas WebSocket status:",O.status)}),_.awareness.on("change",()=>{u(_.awareness.getStates().size)}),_},[e,h]),g=Td({collaboration:{provider:m,fragment:h.getXmlFragment("document-store"),user:{name:"Anonymous",color:"#"+Math.floor(Math.random()*16777215).toString(16)}},domAttributes:{editor:{class:"bn-editor","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"}}});A.useEffect(()=>(f.current=g,()=>{m.destroy()}),[m,g]);const y=async()=>{try{o("saving");const S=g.document;await n(S),o("saved"),a(new Date)}catch(S){console.error("Save failed:",S),o("error")}},{triggerSave:E}=Tk(y,3e3),C=()=>{o("unsaved"),E()};return k.jsx("section",{className:"editor-section",children:k.jsxs("div",{className:"editor-container",children:[k.jsx("div",{className:"editor-toolbar",children:k.jsxs("div",{className:"editor-info",children:[k.jsxs("span",{className:`save-status ${i}`,children:[i==="saved"&&" ",i==="saving"&&"  ...",i==="unsaved"&&"  ",i==="error"&&"  "]}),k.jsxs("span",{className:"connected-users",children:[" ",c,"  "]}),s&&k.jsxs("span",{className:"last-saved",children:[" : ",s.toLocaleTimeString("ko-KR")]})]})}),k.jsx("div",{className:"auto-save-notice",children:"    |     "}),k.jsx("div",{className:"notion-editor-wrapper",children:k.jsx(iy,{editor:g,onChange:C,theme:"dark"})})]})})}function Kwe({topics:e,currentTopicId:t,isOpen:n,onClose:r,onNavigate:i,onPrev:o,onNext:s}){return k.jsxs(k.Fragment,{children:[k.jsxs("aside",{className:`page-navigator ${n?"open":""}`,children:[k.jsxs("div",{className:"navigator-header",children:[k.jsx("h3",{children:"  "}),k.jsx("button",{className:"close-nav-btn",onClick:r,children:""})]}),k.jsx("div",{className:"navigator-content",children:e.map(a=>k.jsxs("div",{className:`navigator-item ${a.id===t?"active":""}`,onClick:()=>{i(a.id),r()},children:[k.jsx("span",{className:"navigator-number",children:String(a.id).padStart(2,"0")}),k.jsx("span",{className:"navigator-title",children:a.title})]},a.id))}),k.jsxs("div",{className:"navigator-footer",children:[k.jsx("button",{className:"nav-btn prev-btn",onClick:o,children:"  "}),k.jsx("button",{className:"nav-btn next-btn",onClick:s,children:"  "})]})]}),n&&k.jsx("div",{className:"navigator-overlay",onClick:r})]})}function Qwe(){const{id:e}=Ij(),t=iS(),[n,r]=A.useState(null),[i,o]=A.useState([]),[s,a]=A.useState(null),[c,u]=A.useState("content"),[f,h]=A.useState(!1),[m,g]=A.useState(!0);A.useEffect(()=>{y()},[e]),A.useEffect(()=>{const M=R=>{if(R.altKey)switch(R.key){case"n":R.preventDefault(),h(L=>!L);break;case"[":R.preventDefault(),E();break;case"]":R.preventDefault(),C();break}R.key==="Escape"&&h(!1)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[e,i]);const y=async()=>{try{const[M,R,L]=await Promise.all([li.getTopic(e),li.getWorkspace(e),li.getTopics()]);r(M),a(R),o(L)}catch(M){console.error("Failed to load data:",M)}finally{g(!1)}},E=()=>{const M=i.findIndex(R=>R.id===parseInt(e));M>0&&t(`/topic/${i[M-1].id}`)},C=()=>{const M=i.findIndex(R=>R.id===parseInt(e));M<i.length-1&&t(`/topic/${i[M+1].id}`)},S=async(M,R)=>{try{await li.saveContent(e,M,R);const L=await li.getWorkspace(e);a(L)}catch(L){console.error("Failed to save content:",L)}},N=async(M,R)=>{try{await li.addFeedback(e,M,R);const L=await li.getWorkspace(e);a(L)}catch(L){console.error("Failed to add feedback:",L)}},_=async(M,R)=>{try{await li.addIdea(e,M,R);const L=await li.getWorkspace(e);a(L)}catch(L){console.error("Failed to add idea:",L)}},O=async M=>{try{await li.voteIdea(e,M);const R=await li.getWorkspace(e);a(R)}catch(R){console.error("Failed to vote:",R)}};return m?k.jsxs("div",{className:"container loading",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Loading..."})]}):n?k.jsxs("div",{className:"topic-page",children:[k.jsx(Kwe,{topics:i,currentTopicId:parseInt(e),isOpen:f,onClose:()=>h(!1),onNavigate:M=>t(`/topic/${M}`),onPrev:E,onNext:C}),k.jsx("button",{className:"nav-toggle-btn",onClick:()=>h(!f),children:""}),k.jsxs("div",{className:"container main-content",children:[k.jsxs("header",{className:"topic-header",children:[k.jsxs("div",{className:"header-top",children:[k.jsx("button",{className:"back-btn",onClick:()=>t("/"),children:" "}),k.jsxs("div",{className:"live-indicator",children:[k.jsx("span",{className:"pulse-dot"}),k.jsx("span",{children:"LIVE"})]})]}),k.jsxs("div",{className:"topic-info",children:[k.jsx("div",{className:"topic-number",children:String(n.id).padStart(2,"0")}),k.jsx("h1",{className:"topic-title",children:n.title}),k.jsx("p",{className:"topic-description",children:n.description})]})]}),k.jsxs("nav",{className:"topic-tabs",children:[k.jsx("button",{className:`topic-tab-btn ${c==="content"?"active":""}`,onClick:()=>u("content"),children:"   &  "}),k.jsxs("button",{className:`topic-tab-btn ${c==="feedback"?"active":""}`,onClick:()=>u("feedback"),children:["  ",k.jsx("span",{className:"badge",children:s?.feedback?.length||0})]}),k.jsxs("button",{className:`topic-tab-btn ${c==="ideas"?"active":""}`,onClick:()=>u("ideas"),children:["  ",k.jsx("span",{className:"badge",children:s?.ideas?.length||0})]})]}),k.jsxs("div",{className:"tab-content-container",children:[c==="content"&&k.jsx(jwe,{topicId:e,initialContent:s?.content?.blocks,onSave:S,onReloadNeeded:async()=>{const M=await li.getWorkspace(e);return a(M),M.content?.blocks||[]}}),c==="feedback"&&k.jsx(Gwe,{feedback:s?.feedback||[],onSubmit:N}),c==="ideas"&&k.jsx(Wwe,{ideas:s?.ideas||[],onSubmit:_,onVote:O})]}),k.jsxs("div",{className:"shortcuts-help",children:[k.jsx("div",{className:"shortcuts-toggle",children:" "}),k.jsxs("div",{className:"shortcuts-panel",children:[k.jsx("h4",{children:" "}),k.jsxs("ul",{children:[k.jsxs("li",{children:[k.jsx("kbd",{children:"Alt"})," + ",k.jsx("kbd",{children:"N"})," -  /"]}),k.jsxs("li",{children:[k.jsx("kbd",{children:"Alt"})," + ",k.jsx("kbd",{children:"["})," -  "]}),k.jsxs("li",{children:[k.jsx("kbd",{children:"Alt"})," + ",k.jsx("kbd",{children:"]"})," -  "]}),k.jsxs("li",{children:[k.jsx("kbd",{children:"ESC"})," -  "]})]})]})]}),k.jsx("footer",{className:"footer",children:k.jsxs("div",{className:"footer-content",children:[k.jsx("p",{children:" 2025 Sure Hackerton  AI Vibe Coding Challenge"}),k.jsxs("div",{className:"footer-decoration",children:[k.jsx("span",{className:"pulse-dot"}),k.jsx("span",{className:"footer-text",children:"POWERED BY Peter(feat. Claude CODE)"}),k.jsx("span",{className:"pulse-dot"})]})]})})]})]}):k.jsxs("div",{className:"container error",children:[k.jsx("h2",{children:"Topic not found"}),k.jsx("button",{onClick:()=>t("/"),children:"Go Home"})]})}function Xwe(){return k.jsxs(Qj,{children:[k.jsx(hw,{path:"/",element:k.jsx(Mz,{})}),k.jsx(hw,{path:"/topic/:id",element:k.jsx(Qwe,{})})]})}oj.createRoot(document.getElementById("root")).render(k.jsx(Ez,{children:k.jsx(Xwe,{})}));
